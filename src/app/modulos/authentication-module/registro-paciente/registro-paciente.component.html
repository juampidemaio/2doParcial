<form [formGroup]="pacienteForm" (ngSubmit)="guardarPaciente()">
  <!-- Campos del formulario para pacientes -->
  <div>
      <label for="nombre">Nombre:</label>
      <input id="nombre" formControlName="nombre" />
      <div *ngIf="mostrarError('nombre', 'required')">Este campo es obligatorio.</div>
      <div *ngIf="mostrarError('nombre', 'pattern')">Solo se permiten letras.</div>
  </div>
  <div>
      <label for="apellido">Apellido:</label>
      <input id="apellido" formControlName="apellido" />
      <div *ngIf="mostrarError('apellido', 'required')">Este campo es obligatorio.</div>
      <div *ngIf="mostrarError('apellido', 'pattern')">Solo se permiten letras.</div>
  </div>

  <div>
      <label for="edad">Edad:</label>
      <input id="edad" type="number" formControlName="edad" />
      <div *ngIf="mostrarError('edad', 'required')">Este campo es obligatorio.</div>
      <div *ngIf="mostrarError('edad', 'min')">La edad mínima es 18 años.</div>
      <div *ngIf="mostrarError('edad', 'max')">La edad máxima es 99 años.</div>
  </div>

  <div>
      <label for="dni">DNI:</label>
      <input id="dni" formControlName="dni" />
      <div *ngIf="mostrarError('dni', 'required')">Este campo es obligatorio.</div>
      <div *ngIf="mostrarError('dni', 'pattern')">El DNI debe tener 8 dígitos.</div>
  </div>

  <div>
      <label for="obraSocial">Obra Social:</label>
      <input id="obraSocial" formControlName="obraSocial" />
      <div *ngIf="mostrarError('obraSocial', 'required')">Este campo es obligatorio.</div>
  </div>
  
  <div>
      <label for="email">Email:</label>
      <input id="email" formControlName="email" />
      <div *ngIf="mostrarError('email', 'required')">Este campo es obligatorio.</div>
      <div *ngIf="mostrarError('email', 'email')">Formato de email inválido.</div>
  </div>

  <div>
      <label for="password">Contraseña:</label>
      <input id="password" type="password" formControlName="password" />
      <div *ngIf="mostrarError('password', 'required')">Este campo es obligatorio.</div>
      <div *ngIf="mostrarError('password', 'minlength')">La contraseña debe tener al menos 6 caracteres.</div>
  </div>

  <div>
      <label for="imagenes">Sube exactamente 2 imágenes:</label>
      <input type="file" (change)="agregarImagen($event)" multiple />
      <div *ngIf="mostrarError('imagenes', 'required')">Debes subir exactamente 2 imágenes.</div>
  </div>

  <!-- Captcha -->
  <!-- <div class="captcha-container" style="width: 240px; height: 300px; position: relative;">
    <div *ngIf="!captchaValido">
      <div appRecaptcha [imageSrc]="'https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/Jaguar_at_Edinburgh_Zoo.jpg/300px-Jaguar_at_Edinburgh_Zoo.jpg'" [rows]="3" [cols]="3" (solved)="onCaptchaResolved($event)"></div>
    </div>
    <div *ngIf="captchaValido">
      <span>Captcha completado con éxito</span>
    </div>
  </div> -->

  <div class="captcha-container">
    <div *ngIf="!captchaValido">
      <!-- Usamos el reCAPTCHA v2 con la directiva recaptcha -->
      <re-captcha 
      siteKey="6LeSo3oqAAAAAIQ5hamDg0b7J9m9D7QuO2Jj0fXc"
      (resolved)="onCaptchaResolved($event)">
      </re-captcha>

    </div>
    <div *ngIf="captchaValido">
      <span>Captcha completado con éxito</span>
    </div>
  </div>

  <button type="submit" [disabled]="!captchaValido">Registrar Paciente </button>
</form>
