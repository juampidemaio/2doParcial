<div class="details-container" *ngIf="usuario">
  <div *ngIf="!historialVisible">
    <h3>Detalles del Usuario</h3>
    <p><strong>Nombre:</strong> {{ usuario.nombre }}</p>
    <p><strong>Apellido:</strong> {{ usuario.apellido }}</p>
    <p><strong>Edad:</strong> {{ usuario.edad }}</p>
    <p><strong>DNI:</strong> {{ usuario.dni }}</p>
    <p><strong>Mail:</strong> {{ usuario.email }}</p>

    <div *ngIf="esPaciente" class="paciente">
      <p><strong>Obra Social:</strong> {{ usuario.obraSocial }}</p>
      <div>
        <strong>Imágenes de Perfil:</strong>
        <img *ngFor="let img of usuario.imagenes" [src]="img" alt="Imagen de Perfil" width="100" />
      </div>
    </div>

    <div *ngIf="esEspecialista" class="especialista">
      <p><strong>Especialidades:</strong></p>
      <p>{{ usuario.especialidad }}</p>
      <ul>
        <li *ngFor="let especialidad of usuario.especialidades">{{ especialidad }}</li>
      </ul>
      <strong>Imágen de Perfil:</strong>
      <img [src]="usuario.imageUrl" alt="Imagen de Perfil" width="100" />
    </div>

    <div *ngIf="esAdministrador" class="administrador">
      <div>
        <strong>Imágen de Perfil:</strong>
        <img [src]="usuario.imageUrl" alt="Imagen de Perfil" width="100" />
      </div>
    </div>
  </div>

  <!-- Botón para alternar la visibilidad del historial clínico -->
  <button  *ngIf="esPaciente"  class="toggle-button" (click)="toggleHistoriaClinica()">
    {{ historialVisible ? 'Ocultar Historia Clínica' : 'Mostrar Historia Clínica' }}
  </button>

  <!-- Mostrar el historial clínico solo si historialVisible es true -->
  <div *ngIf="historialVisible" class="historia-clinica">
    <h3>Historia Clínica de {{ usuario?.nombre }}</h3>

    <!-- Mostrar los turnos -->
    <div *ngIf="turnos">
      <h4>Turnos</h4>
      <div *ngFor="let key of objectKeys(turnos)">
        <div *ngIf="turnos[key]" class="turno-container">
          <h5>Turno de {{ turnos[key].especialidad }}</h5>
          <p><strong>Especialidad:</strong> {{ turnos[key].especialidad }}</p>
          <p><strong>Especialista:</strong> {{ turnos[key].nombreEspecialista }}</p>
          <p><strong>Fecha:</strong> {{ turnos[key].fechaTurno }}</p>
          <p><strong>Altura:</strong> {{ turnos[key].altura }}</p>
          <p><strong>Peso:</strong> {{ turnos[key].peso }}</p>
          <p><strong>Temperatura:</strong> {{ turnos[key].temperatura }}</p>
          <p><strong>Presión:</strong> {{ turnos[key].presion }}</p>

          <!-- Otros campos que desees mostrar -->
          <div *ngIf="turnos[key].datosDinamicos && turnos[key].datosDinamicos.length > 0">
            <h5>Otros Datos:</h5>
            <div *ngFor="let dato of turnos[key].datosDinamicos">
              <p><strong>{{ dato.clave }}:</strong> {{ dato.valor }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <button *ngIf="esPaciente && turnos" (click)="generarPDF()" class="download-button">
    Descargar Historia Clínica en PDF
  </button>
  

</div>
