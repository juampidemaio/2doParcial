var $0=Object.create;var yh=Object.defineProperty,H0=Object.defineProperties,q0=Object.getOwnPropertyDescriptor,z0=Object.getOwnPropertyDescriptors,G0=Object.getOwnPropertyNames,sI=Object.getOwnPropertySymbols,aI=Object.getPrototypeOf,cI=Object.prototype.hasOwnProperty,W0=Object.prototype.propertyIsEnumerable,K0=Reflect.get;var oI=(t,e,n)=>e in t?yh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||={})cI.call(e,n)&&oI(t,n,e[n]);if(sI)for(var n of sI(e))W0.call(e,n)&&oI(t,n,e[n]);return t},ye=(t,e)=>H0(t,z0(e));var f$=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Q0=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of G0(e))!cI.call(t,i)&&i!==n&&yh(t,i,{get:()=>e[i],enumerable:!(r=q0(e,i))||r.enumerable});return t};var p$=(t,e,n)=>(n=t!=null?$0(aI(t)):{},Q0(e||!t||!t.__esModule?yh(n,"default",{value:t,enumerable:!0}):n,t));var Yn=(t,e,n)=>K0(aI(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});function uI(t,e){return Object.is(t,e)}var Ue=null,_c=!1,Ic=1,En=Symbol("SIGNAL");function he(t){let e=Ue;return Ue=t,e}function lI(){return Ue}var Eo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ih(t){if(_c)throw new Error("");if(Ue===null)return;Ue.consumerOnSignalRead(t);let e=Ue.nextProducerIndex++;if(Dc(Ue),e<Ue.producerNode.length&&Ue.producerNode[e]!==t&&wo(Ue)){let n=Ue.producerNode[e];Tc(n,Ue.producerIndexOfThis[e])}Ue.producerNode[e]!==t&&(Ue.producerNode[e]=t,Ue.producerIndexOfThis[e]=wo(Ue)?pI(t,Ue,e):0),Ue.producerLastReadVersion[e]=t.version}function Y0(){Ic++}function dI(t){if(!(wo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Ic)){if(!t.producerMustRecompute(t)&&!Eh(t)){t.dirty=!1,t.lastCleanEpoch=Ic;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Ic}}function hI(t){if(t.liveConsumerNode===void 0)return;let e=_c;_c=!0;try{for(let n of t.liveConsumerNode)n.dirty||Z0(n)}finally{_c=e}}function fI(){return Ue?.consumerAllowSignalWrites!==!1}function Z0(t){t.dirty=!0,hI(t),t.consumerMarkedDirty?.(t)}function Ec(t){return t&&(t.nextProducerIndex=0),he(t)}function wh(t,e){if(he(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(wo(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Tc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Eh(t){Dc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(dI(n),r!==n.version))return!0}return!1}function Th(t){if(Dc(t),wo(t))for(let e=0;e<t.producerNode.length;e++)Tc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function pI(t,e,n){if(gI(t),t.liveConsumerNode.length===0&&mI(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=pI(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Tc(t,e){if(gI(t),t.liveConsumerNode.length===1&&mI(t))for(let r=0;r<t.producerNode.length;r++)Tc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Dc(i),i.producerIndexOfThis[r]=e}}function wo(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Dc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function gI(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function mI(t){return t.producerNode!==void 0}function yI(t){let e=Object.create(J0);e.computation=t;let n=()=>{if(dI(e),Ih(e),e.value===wc)throw e.error;return e.value};return n[En]=e,n}var vh=Symbol("UNSET"),_h=Symbol("COMPUTING"),wc=Symbol("ERRORED"),J0=ye(L({},Eo),{value:vh,dirty:!0,error:null,equal:uI,producerMustRecompute(t){return t.value===vh||t.value===_h},producerRecomputeValue(t){if(t.value===_h)throw new Error("Detected cycle in computations.");let e=t.value;t.value=_h;let n=Ec(t),r;try{r=t.computation()}catch(i){r=wc,t.error=i}finally{wh(t,n)}if(e!==vh&&e!==wc&&r!==wc&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function X0(){throw new Error}var vI=X0;function _I(){vI()}function II(t){vI=t}var eR=null;function wI(t){let e=Object.create(TI);e.value=t;let n=()=>(Ih(e),e.value);return n[En]=e,n}function Dh(t,e){fI()||_I(),t.equal(t.value,e)||(t.value=e,tR(t))}function EI(t,e){fI()||_I(),Dh(t,e(t.value))}var TI=ye(L({},Eo),{equal:uI,value:void 0});function tR(t){t.version++,Y0(),hI(t),eR?.()}function X(t){return typeof t=="function"}function Di(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var bc=Di(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Mr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ae=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(s){e=s instanceof bc?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{DI(s)}catch(o){e=e??[],o instanceof bc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new bc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)DI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Mr(n,e)}remove(e){let{_finalizers:n}=this;n&&Mr(n,e),e instanceof t&&e._removeParent(this)}};Ae.EMPTY=(()=>{let t=new Ae;return t.closed=!0,t})();var bh=Ae.EMPTY;function Cc(t){return t instanceof Ae||t&&"closed"in t&&X(t.remove)&&X(t.add)&&X(t.unsubscribe)}function DI(t){X(t)?t():t.unsubscribe()}var Ft={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var bi={setTimeout(t,e,...n){let{delegate:r}=bi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=bi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Sc(t){bi.setTimeout(()=>{let{onUnhandledError:e}=Ft;if(e)e(t);else throw t})}function To(){}var bI=Ch("C",void 0,void 0);function CI(t){return Ch("E",void 0,t)}function SI(t){return Ch("N",t,void 0)}function Ch(t,e,n){return{kind:t,value:e,error:n}}var xr=null;function Ci(t){if(Ft.useDeprecatedSynchronousErrorHandling){let e=!xr;if(e&&(xr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=xr;if(xr=null,n)throw r}}else t()}function AI(t){Ft.useDeprecatedSynchronousErrorHandling&&xr&&(xr.errorThrown=!0,xr.error=t)}var Pr=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Cc(e)&&e.add(this)):this.destination=iR}static create(e,n,r){return new Si(e,n,r)}next(e){this.isStopped?Ah(SI(e),this):this._next(e)}error(e){this.isStopped?Ah(CI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ah(bI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},nR=Function.prototype.bind;function Sh(t,e){return nR.call(t,e)}var Rh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ac(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ac(r)}else Ac(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ac(n)}}},Si=class extends Pr{constructor(e,n,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ft.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Sh(e.next,s),error:e.error&&Sh(e.error,s),complete:e.complete&&Sh(e.complete,s)}):i=e}this.destination=new Rh(i)}};function Ac(t){Ft.useDeprecatedSynchronousErrorHandling?AI(t):Sc(t)}function rR(t){throw t}function Ah(t,e){let{onStoppedNotification:n}=Ft;n&&bi.setTimeout(()=>n(t,e))}var iR={closed:!0,next:To,error:rR,complete:To};var Ai=typeof Symbol=="function"&&Symbol.observable||"@@observable";function _t(t){return t}function Nh(...t){return Mh(t)}function Mh(t){return t.length===0?_t:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ue=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=oR(n)?n:new Si(n,r,i);return Ci(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=RI(r),new r((i,s)=>{let o=new Si({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ai](){return this}pipe(...n){return Mh(n)(this)}toPromise(n){return n=RI(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function RI(t){var e;return(e=t??Ft.Promise)!==null&&e!==void 0?e:Promise}function sR(t){return t&&X(t.next)&&X(t.error)&&X(t.complete)}function oR(t){return t&&t instanceof Pr||sR(t)&&Cc(t)}function xh(t){return X(t?.lift)}function le(t){return e=>{if(xh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function re(t,e,n,r,i){return new Ph(t,e,n,r,i)}var Ph=class extends Pr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ri(){return le((t,e)=>{let n=null;t._refCount++;let r=re(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ni=class extends ue{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,xh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ae;let n=this.getSubject();e.add(this.source.subscribe(re(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ae.EMPTY)}return e}refCount(){return Ri()(this)}};var NI=Di(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var at=(()=>{class t extends ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Rc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new NI}next(n){Ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ci(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?bh:(this.currentObservers=null,s.push(n),new Ae(()=>{this.currentObservers=null,Mr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ue;return n.source=this,n}}return t.create=(e,n)=>new Rc(e,n),t})(),Rc=class extends at{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:bh}};var je=class extends at{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Oh={now(){return(Oh.delegate||Date).now()},delegate:void 0};var Nc=class extends Ae{constructor(e,n){super()}schedule(e,n=0){return this}};var Do={setInterval(t,e,...n){let{delegate:r}=Do;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Do;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Mi=class extends Nc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Do.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Do.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Mr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var xi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};xi.now=Oh.now;var Pi=class extends xi{constructor(e,n=xi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var kh=new Pi(Mi);var Mc=class extends Mi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var xc=class extends Pi{};var Lh=new xc(Mc);var It=new ue(t=>t.complete());function MI(t){return t&&X(t.schedule)}function xI(t){return t[t.length-1]}function Pc(t){return X(xI(t))?t.pop():void 0}function Zn(t){return MI(xI(t))?t.pop():void 0}function Fh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function OI(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function PI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Or(t){return this instanceof Or?(this.v=t,this):new Or(t)}function kI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(v){return function(C){return Promise.resolve(C).then(v,p)}}function a(v,C){r[v]&&(i[v]=function(N){return new Promise(function(R,k){s.push([v,N,R,k])>1||u(v,N)})},C&&(i[v]=C(i[v])))}function u(v,C){try{l(r[v](C))}catch(N){m(s[0][3],N)}}function l(v){v.value instanceof Or?Promise.resolve(v.value.v).then(h,p):m(s[0][2],v)}function h(v){u("next",v)}function p(v){u("throw",v)}function m(v,C){v(C),s.shift(),s.length&&u(s[0][0],s[0][1])}}function LI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof PI=="function"?PI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var Oc=t=>t&&typeof t.length=="number"&&typeof t!="function";function kc(t){return X(t?.then)}function Lc(t){return X(t[Ai])}function Fc(t){return Symbol.asyncIterator&&X(t?.[Symbol.asyncIterator])}function Vc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function aR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Uc=aR();function jc(t){return X(t?.[Uc])}function Bc(t){return kI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Or(n.read());if(i)return yield Or(void 0);yield yield Or(r)}}finally{n.releaseLock()}})}function $c(t){return X(t?.getReader)}function ke(t){if(t instanceof ue)return t;if(t!=null){if(Lc(t))return cR(t);if(Oc(t))return uR(t);if(kc(t))return lR(t);if(Fc(t))return FI(t);if(jc(t))return dR(t);if($c(t))return hR(t)}throw Vc(t)}function cR(t){return new ue(e=>{let n=t[Ai]();if(X(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function uR(t){return new ue(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function lR(t){return new ue(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Sc)})}function dR(t){return new ue(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function FI(t){return new ue(e=>{fR(t,e).catch(n=>e.error(n))})}function hR(t){return FI(Bc(t))}function fR(t,e){var n,r,i,s;return OI(this,void 0,void 0,function*(){try{for(n=LI(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function ft(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Jn(t,e=0){return le((n,r)=>{n.subscribe(re(r,i=>ft(r,t,()=>r.next(i),e),()=>ft(r,t,()=>r.complete(),e),i=>ft(r,t,()=>r.error(i),e)))})}function Xn(t,e=0){return le((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function VI(t,e){return ke(t).pipe(Xn(e),Jn(e))}function UI(t,e){return ke(t).pipe(Xn(e),Jn(e))}function jI(t,e){return new ue(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function BI(t,e){return new ue(n=>{let r;return ft(n,e,()=>{r=t[Uc](),ft(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function Hc(t,e){if(!t)throw new Error("Iterable cannot be null");return new ue(n=>{ft(n,e,()=>{let r=t[Symbol.asyncIterator]();ft(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function $I(t,e){return Hc(Bc(t),e)}function HI(t,e){if(t!=null){if(Lc(t))return VI(t,e);if(Oc(t))return jI(t,e);if(kc(t))return UI(t,e);if(Fc(t))return Hc(t,e);if(jc(t))return BI(t,e);if($c(t))return $I(t,e)}throw Vc(t)}function xe(t,e){return e?HI(t,e):ke(t)}function Y(...t){let e=Zn(t);return xe(t,e)}function Oi(t,e){let n=X(t)?t:()=>t,r=i=>i.error(n());return new ue(e?i=>e.schedule(r,0,i):r)}function Vh(t){return!!t&&(t instanceof ue||X(t.lift)&&X(t.subscribe))}var Tn=Di(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ie(t,e){return le((n,r)=>{let i=0;n.subscribe(re(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:pR}=Array;function gR(t,e){return pR(e)?t(...e):t(e)}function qc(t){return ie(e=>gR(t,e))}var{isArray:mR}=Array,{getPrototypeOf:yR,prototype:vR,keys:_R}=Object;function zc(t){if(t.length===1){let e=t[0];if(mR(e))return{args:e,keys:null};if(IR(e)){let n=_R(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function IR(t){return t&&typeof t=="object"&&yR(t)===vR}function Gc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function bo(...t){let e=Zn(t),n=Pc(t),{args:r,keys:i}=zc(t);if(r.length===0)return xe([],e);let s=new ue(wR(r,e,i?o=>Gc(i,o):_t));return n?s.pipe(qc(n)):s}function wR(t,e,n=_t){return r=>{qI(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)qI(e,()=>{let l=xe(t[u],e),h=!1;l.subscribe(re(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function qI(t,e,n){t?ft(n,t,e):e()}function zI(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},v=N=>l<r?C(N):u.push(N),C=N=>{s&&e.next(N),l++;let R=!1;ke(n(N,h++)).subscribe(re(e,k=>{i?.(k),s?v(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();o?ft(e,o,()=>C(k)):C(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(re(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Le(t,e,n=1/0){return X(e)?Le((r,i)=>ie((s,o)=>e(r,s,i,o))(ke(t(r,i))),n):(typeof e=="number"&&(n=e),le((r,i)=>zI(r,i,t,n)))}function ki(t=1/0){return Le(_t,t)}function GI(){return ki(1)}function Li(...t){return GI()(xe(t,Zn(t)))}function Wc(t){return new ue(e=>{ke(t()).subscribe(e)})}function ER(...t){let e=Pc(t),{args:n,keys:r}=zc(t),i=new ue(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;ke(n[h]).subscribe(re(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?Gc(r,a):a),s.complete())}))}});return e?i.pipe(qc(e)):i}function St(t,e){return le((n,r)=>{let i=0;n.subscribe(re(r,s=>t.call(e,s,i++)&&r.next(s)))})}function er(t){return le((e,n)=>{let r=null,i=!1,s;r=e.subscribe(re(n,void 0,void 0,o=>{s=ke(t(o,er(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function WI(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(re(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function kr(t,e){return X(e)?Le(t,e,1):Le(t,1)}function tr(t){return le((e,n)=>{let r=!1;e.subscribe(re(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Dn(t){return t<=0?()=>It:le((e,n)=>{let r=0;e.subscribe(re(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Uh(t){return ie(()=>t)}function Kc(t=TR){return le((e,n)=>{let r=!1;e.subscribe(re(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function TR(){return new Tn}function Co(t){return le((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Wt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?St((i,s)=>t(i,s,r)):_t,Dn(1),n?tr(e):Kc(()=>new Tn))}function Fi(t){return t<=0?()=>It:le((e,n)=>{let r=[];e.subscribe(re(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function jh(t,e){let n=arguments.length>=2;return r=>r.pipe(t?St((i,s)=>t(i,s,r)):_t,Fi(1),n?tr(e):Kc(()=>new Tn))}function Bh(t,e){return le(WI(t,e,arguments.length>=2,!0))}function $h(...t){let e=Zn(t);return le((n,r)=>{(e?Li(t,n,e):Li(t,n)).subscribe(r)})}function At(t,e){return le((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(re(r,u=>{i?.unsubscribe();let l=0,h=s++;ke(t(u,h)).subscribe(i=re(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Hh(t){return le((e,n)=>{ke(t).subscribe(re(n,()=>n.complete(),To)),!n.closed&&e.subscribe(n)})}function Be(t,e,n){let r=X(t)||e||n?{next:t,error:e,complete:n}:t;return r?le((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(re(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):_t}var xw="https://g.co/ng/security#xss",q=class extends Error{constructor(e,n){super(Kf(e,n)),this.code=e}};function Kf(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ko(t){return{toString:t}.toString()}var Qc="__parameters__";function DR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Pw(t,e,n){return ko(()=>{let r=DR(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(Qc)?u[Qc]:Object.defineProperty(u,Qc,{value:[]})[Qc];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function we(t){for(let e in t)if(t[e]===we)return e;throw Error("Could not find renamed property on target object.")}function bR(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function lt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(lt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function KI(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var CR=we({__forward_ref__:we});function Ow(t){return t.__forward_ref__=Ow,t.toString=function(){return lt(this())},t}function ct(t){return kw(t)?t():t}function kw(t){return typeof t=="function"&&t.hasOwnProperty(CR)&&t.__forward_ref__===Ow}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Lo(t){return{providers:t.providers||[],imports:t.imports||[]}}function Au(t){return QI(t,Fw)||QI(t,Vw)}function Lw(t){return Au(t)!==null}function QI(t,e){return t.hasOwnProperty(e)?t[e]:null}function SR(t){let e=t&&(t[Fw]||t[Vw]);return e||null}function YI(t){return t&&(t.hasOwnProperty(ZI)||t.hasOwnProperty(AR))?t[ZI]:null}var Fw=we({\u0275prov:we}),ZI=we({\u0275inj:we}),Vw=we({ngInjectableDef:we}),AR=we({ngInjectorDef:we}),z=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Uw(t){return t&&!!t.\u0275providers}var RR=we({\u0275cmp:we}),NR=we({\u0275dir:we}),MR=we({\u0275pipe:we}),xR=we({\u0275mod:we}),iu=we({\u0275fac:we}),Ao=we({__NG_ELEMENT_ID__:we}),JI=we({__NG_ENV_ID__:we});function Ru(t){return typeof t=="string"?t:t==null?"":String(t)}function PR(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ru(t)}function OR(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new q(-200,t)}function Qf(t,e){throw new q(-201,!1)}var ne=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ne||{}),rf;function jw(){return rf}function Rt(t){let e=rf;return rf=t,e}function Bw(t,e,n){let r=Au(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ne.Optional)return null;if(e!==void 0)return e;Qf(t,"Injector")}var kR={},Ro=kR,sf="__NG_DI_FLAG__",su="ngTempTokenPath",LR="ngTokenPath",FR=/\n/gm,VR="\u0275",XI="__source",$i;function UR(){return $i}function nr(t){let e=$i;return $i=t,e}function jR(t,e=ne.Default){if($i===void 0)throw new q(-203,!1);return $i===null?Bw(t,void 0,e):$i.get(t,e&ne.Optional?null:void 0,e)}function W(t,e=ne.Default){return(jw()||jR)(ct(t),e)}function O(t,e=ne.Default){return W(t,Nu(e))}function Nu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function of(t){let e=[];for(let n=0;n<t.length;n++){let r=ct(t[n]);if(Array.isArray(r)){if(r.length===0)throw new q(900,!1);let i,s=ne.Default;for(let o=0;o<r.length;o++){let a=r[o],u=BR(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(W(i,s))}else e.push(W(r))}return e}function $w(t,e){return t[sf]=e,t.prototype[sf]=e,t}function BR(t){return t[sf]}function $R(t,e,n,r){let i=t[su];throw e[XI]&&i.unshift(e[XI]),t.message=HR(`
`+t.message,i,n,r),t[LR]=i,t[su]=null,t}function HR(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==VR?t.slice(2):t;let i=lt(e);if(Array.isArray(e))i=e.map(lt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):lt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(FR,`
  `)}`}var tt=$w(Pw("Optional"),8);var Yf=$w(Pw("SkipSelf"),4);function qi(t,e){let n=t.hasOwnProperty(iu);return n?t[iu]:null}function Zf(t,e){t.forEach(n=>Array.isArray(n)?Zf(n,e):e(n))}function Hw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ou(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function qR(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function zR(t,e,n){let r=Fo(t,e);return r>=0?t[r|1]=n:(r=~r,qR(t,r,e,n)),r}function qh(t,e){let n=Fo(t,e);if(n>=0)return t[n|1]}function Fo(t,e){return GR(t,e,1)}function GR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var zi={},Nt=[],Gi=new z(""),qw=new z("",-1),zw=new z(""),au=class{get(e,n=Ro){if(n===Ro){let r=new Error(`NullInjectorError: No provider for ${lt(e)}!`);throw r.name="NullInjectorError",r}return n}},Gw=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Gw||{}),Yt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Yt||{}),sr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(sr||{});function WR(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function af(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];QR(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function KR(t){return t===3||t===4||t===6}function QR(t){return t.charCodeAt(0)===64}function No(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?ew(t,n,i,null,e[++r]):ew(t,n,i,null,null))}}return t}function ew(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Ww="ng-template";function YR(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&WR(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Jf(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Jf(t){return t.type===4&&t.value!==Ww}function ZR(t,e,n){let r=t.type===4&&!n?Ww:t.value;return e===r}function JR(t,e,n){let r=4,i=t.attrs,s=i!==null?tN(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Vt(r)&&!Vt(u))return!1;if(o&&Vt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!ZR(t,u,n)||u===""&&e.length===1){if(Vt(r))return!1;o=!0}}else if(r&8){if(i===null||!YR(t,i,u,n)){if(Vt(r))return!1;o=!0}}else{let l=e[++a],h=XR(u,i,Jf(t),n);if(h===-1){if(Vt(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Vt(r))return!1;o=!0}}}}return Vt(r)||o}function Vt(t){return(t&1)===0}function XR(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return nN(e,t)}function eN(t,e,n=!1){for(let r=0;r<e.length;r++)if(JR(t,e[r],n))return!0;return!1}function tN(t){for(let e=0;e<t.length;e++){let n=t[e];if(KR(n))return e}return t.length}function nN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function tw(t,e){return t?":not("+e.trim()+")":e}function rN(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Vt(o)&&(e+=tw(s,i),i=""),r=o,s=s||!Vt(r);n++}return i!==""&&(e+=tw(s,i)),e}function iN(t){return t.map(rN).join(",")}function sN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Vt(i))break;i=s}r++}return{attrs:e,classes:n}}function Kw(t){return ko(()=>{let e=Xw(t),n=ye(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Gw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Yt.Emulated,styles:t.styles||Nt,_:null,schemas:t.schemas||null,tView:null,id:""});eE(n);let r=t.dependencies;return n.directiveDefs=rw(r,!1),n.pipeDefs=rw(r,!0),n.id=cN(n),n})}function oN(t){return or(t)||Qw(t)}function aN(t){return t!==null}function Vo(t){return ko(()=>({type:t.type,bootstrap:t.bootstrap||Nt,declarations:t.declarations||Nt,imports:t.imports||Nt,exports:t.exports||Nt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function nw(t,e){if(t==null)return zi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=sr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==sr.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Uo(t){return ko(()=>{let e=Xw(t);return eE(e),e})}function or(t){return t[RR]||null}function Qw(t){return t[NR]||null}function Yw(t){return t[MR]||null}function Zw(t){let e=or(t)||Qw(t)||Yw(t);return e!==null?e.standalone:!1}function Jw(t,e){let n=t[xR]||null;if(!n&&e===!0)throw new Error(`Type ${lt(t)} does not have '\u0275mod' property.`);return n}function Xw(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||zi,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Nt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nw(t.inputs,e),outputs:nw(t.outputs),debugInfo:null}}function eE(t){t.features?.forEach(e=>e(t))}function rw(t,e){if(!t)return null;let n=e?Yw:oN;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(aN)}function cN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function en(t){return{\u0275providers:t}}function uN(...t){return{\u0275providers:tE(!0,t),\u0275fromNgModule:!0}}function tE(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Zf(e,o=>{let a=o;cf(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&nE(i,s),n}function nE(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Xf(i,s=>{e(s,r)})}}function cf(t,e,n,r){if(t=ct(t),!t)return!1;let i=null,s=YI(t),o=!s&&or(t);if(!s&&!o){let u=t.ngModule;if(s=YI(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)cf(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Zf(s.imports,h=>{cf(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&nE(l,e)}if(!a){let l=qi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Nt},i),e({provide:zw,useValue:i,multi:!0},i),e({provide:Gi,useValue:()=>W(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;Xf(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Xf(t,e){for(let n of t)Uw(n)&&(n=n.\u0275providers),Array.isArray(n)?Xf(n,e):e(n)}var lN=we({provide:String,useValue:we});function rE(t){return t!==null&&typeof t=="object"&&lN in t}function dN(t){return!!(t&&t.useExisting)}function hN(t){return!!(t&&t.useFactory)}function Wi(t){return typeof t=="function"}function fN(t){return!!t.useClass}var Mu=new z(""),Xc={},pN={},zh;function ep(){return zh===void 0&&(zh=new au),zh}var wt=class{},Mo=class extends wt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,lf(e,o=>this.processProvider(o)),this.records.set(qw,Vi(void 0,this)),i.has("environment")&&this.records.set(wt,Vi(void 0,this));let s=this.records.get(Mu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(zw,Nt,ne.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=he(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),he(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=nr(this),r=Rt(void 0),i;try{return e()}finally{nr(n),Rt(r)}}get(e,n=Ro,r=ne.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(JI))return e[JI](this);r=Nu(r);let i,s=nr(this),o=Rt(void 0);try{if(!(r&ne.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=_N(e)&&Au(e);l&&this.injectableDefInScope(l)?u=Vi(uf(e),Xc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ne.Self?ep():this.parent;return n=r&ne.Optional&&n===Ro?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[su]=a[su]||[]).unshift(lt(e)),s)throw a;return $R(a,e,"R3InjectorError",this.source)}else throw a}finally{Rt(o),nr(s)}}resolveInjectorInitializers(){let e=he(null),n=nr(this),r=Rt(void 0),i;try{let s=this.get(Gi,Nt,ne.Self);for(let o of s)o()}finally{nr(n),Rt(r),he(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(lt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new q(205,!1)}processProvider(e){e=ct(e);let n=Wi(e)?e:ct(e&&e.provide),r=mN(e);if(!Wi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Vi(void 0,Xc,!0),i.factory=()=>of(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=he(null);try{return n.value===Xc&&(n.value=pN,n.value=n.factory()),typeof n.value=="object"&&n.value&&vN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{he(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ct(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function uf(t){let e=Au(t),n=e!==null?e.factory:qi(t);if(n!==null)return n;if(t instanceof z)throw new q(204,!1);if(t instanceof Function)return gN(t);throw new q(204,!1)}function gN(t){if(t.length>0)throw new q(204,!1);let n=SR(t);return n!==null?()=>n.factory(t):()=>new t}function mN(t){if(rE(t))return Vi(void 0,t.useValue);{let e=iE(t);return Vi(e,Xc)}}function iE(t,e,n){let r;if(Wi(t)){let i=ct(t);return qi(i)||uf(i)}else if(rE(t))r=()=>ct(t.useValue);else if(hN(t))r=()=>t.useFactory(...of(t.deps||[]));else if(dN(t))r=()=>W(ct(t.useExisting));else{let i=ct(t&&(t.useClass||t.provide));if(yN(t))r=()=>new i(...of(t.deps));else return qi(i)||uf(i)}return r}function Vi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function yN(t){return!!t.deps}function vN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function _N(t){return typeof t=="function"||typeof t=="object"&&t instanceof z}function lf(t,e){for(let n of t)Array.isArray(n)?lf(n,e):n&&Uw(n)?lf(n.\u0275providers,e):e(n)}function tn(t,e){t instanceof Mo&&t.assertNotDestroyed();let n,r=nr(t),i=Rt(void 0);try{return e()}finally{nr(r),Rt(i)}}function sE(){return jw()!==void 0||UR()!=null}function IN(t){if(!sE())throw new q(-203,!1)}function wN(t){return typeof t=="function"}var Sn=0,se=1,Z=2,dt=3,Ut=4,Bt=5,cu=6,uu=7,jt=8,Ki=9,Zt=10,$e=11,xo=12,iw=13,rs=14,Jt=15,Qi=16,Ui=17,Yi=18,xu=19,oE=20,rr=21,Gh=22,Mt=23,ar=25,aE=1;var Fr=7,lu=8,du=9,xt=10,hu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(hu||{});function ir(t){return Array.isArray(t)&&typeof t[aE]=="object"}function An(t){return Array.isArray(t)&&t[aE]===!0}function cE(t){return(t.flags&4)!==0}function Pu(t){return t.componentOffset>-1}function tp(t){return(t.flags&1)===1}function cr(t){return!!t.template}function df(t){return(t[Z]&512)!==0}var hf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function uE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ou(){return lE}function lE(t){return t.type.prototype.ngOnChanges&&(t.setInput=TN),EN}Ou.ngInherit=!0;function EN(){let t=hE(this),e=t?.current;if(e){let n=t.previous;if(n===zi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function TN(t,e,n,r,i){let s=this.declaredInputs[r],o=hE(t)||DN(t,{previous:zi,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new hf(l&&l.currentValue,n,u===zi),uE(t,e,i,n)}var dE="__ngSimpleChanges__";function hE(t){return t[dE]||null}function DN(t,e){return t[dE]=e}var sw=null;var Kt=function(t,e,n){sw?.(t,e,n)},bN="svg",CN="math";function Xt(t){for(;Array.isArray(t);)t=t[Sn];return t}function fE(t,e){return Xt(e[t])}function Pt(t,e){return Xt(e[t.index])}function pE(t,e){return t.data[e]}function dr(t,e){let n=e[t];return ir(n)?n:n[Sn]}function np(t){return(t[Z]&128)===128}function SN(t){return An(t[dt])}function fu(t,e){return e==null?null:t[e]}function gE(t){t[Ui]=0}function mE(t){t[Z]&1024||(t[Z]|=1024,np(t)&&Lu(t))}function AN(t,e){for(;t>0;)e=e[rs],t--;return e}function ku(t){return!!(t[Z]&9216||t[Mt]?.dirty)}function ff(t){t[Zt].changeDetectionScheduler?.notify(8),t[Z]&64&&(t[Z]|=1024),ku(t)&&Lu(t)}function Lu(t){t[Zt].changeDetectionScheduler?.notify(0);let e=Vr(t);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!np(e)));)e=Vr(e)}function yE(t,e){if((t[Z]&256)===256)throw new q(911,!1);t[rr]===null&&(t[rr]=[]),t[rr].push(e)}function RN(t,e){if(t[rr]===null)return;let n=t[rr].indexOf(e);n!==-1&&t[rr].splice(n,1)}function Vr(t){let e=t[dt];return An(e)?e[dt]:e}var oe={lFrame:CE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var vE=!1;function NN(){return oe.lFrame.elementDepthCount}function MN(){oe.lFrame.elementDepthCount++}function xN(){oe.lFrame.elementDepthCount--}function _E(){return oe.bindingsEnabled}function PN(){return oe.skipHydrationRootTNode!==null}function ON(t){return oe.skipHydrationRootTNode===t}function kN(){oe.skipHydrationRootTNode=null}function Te(){return oe.lFrame.lView}function Et(){return oe.lFrame.tView}function P9(t){return oe.lFrame.contextLView=t,t[jt]}function O9(t){return oe.lFrame.contextLView=null,t}function pt(){let t=IE();for(;t!==null&&t.type===64;)t=t.parent;return t}function IE(){return oe.lFrame.currentTNode}function LN(){let t=oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function jo(t,e){let n=oe.lFrame;n.currentTNode=t,n.isParent=e}function wE(){return oe.lFrame.isParent}function FN(){oe.lFrame.isParent=!1}function EE(){return vE}function ow(t){vE=t}function VN(t){return oe.lFrame.bindingIndex=t}function Fu(){return oe.lFrame.bindingIndex++}function UN(t){let e=oe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function jN(){return oe.lFrame.inI18n}function BN(t,e){let n=oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,pf(e)}function $N(){return oe.lFrame.currentDirectiveIndex}function pf(t){oe.lFrame.currentDirectiveIndex=t}function HN(t){let e=oe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function TE(t){oe.lFrame.currentQueryIndex=t}function qN(t){let e=t[se];return e.type===2?e.declTNode:e.type===1?t[Bt]:null}function DE(t,e,n){if(n&ne.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ne.Host);)if(i=qN(s),i===null||(s=s[rs],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=oe.lFrame=bE();return r.currentTNode=e,r.lView=t,!0}function rp(t){let e=bE(),n=t[se];oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function bE(){let t=oe.lFrame,e=t===null?null:t.child;return e===null?CE(t):e}function CE(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function SE(){let t=oe.lFrame;return oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var AE=SE;function ip(){let t=SE();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function zN(t){return(oe.lFrame.contextLView=AN(t,oe.lFrame.contextLView))[jt]}function is(){return oe.lFrame.selectedIndex}function Ur(t){oe.lFrame.selectedIndex=t}function sp(){let t=oe.lFrame;return pE(t.tView,t.selectedIndex)}function GN(){return oe.lFrame.currentNamespace}var RE=!0;function op(){return RE}function ap(t){RE=t}function WN(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=lE(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function cp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function eu(t,e,n){NE(t,e,3,n)}function tu(t,e,n,r){(t[Z]&3)===n&&NE(t,e,n,r)}function Wh(t,e){let n=t[Z];(n&3)===e&&(n&=16383,n+=1,t[Z]=n)}function NE(t,e,n,r){let i=r!==void 0?t[Ui]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Ui]+=65536),(a<s||s==-1)&&(KN(t,n,e,u),t[Ui]=(t[Ui]&4294901760)+u+2),u++}function aw(t,e){Kt(4,t,e);let n=he(null);try{e.call(t)}finally{he(n),Kt(5,t,e)}}function KN(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[Z]>>14<t[Ui]>>16&&(t[Z]&3)===e&&(t[Z]+=16384,aw(a,s)):aw(a,s)}var Hi=-1,jr=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function QN(t){return t instanceof jr}function YN(t){return(t.flags&8)!==0}function ZN(t){return(t.flags&16)!==0}var Kh={},gf=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Nu(r);let i=this.injector.get(e,Kh,r);return i!==Kh||n===Kh?i:this.parentInjector.get(e,n,r)}};function ME(t){return t!==Hi}function pu(t){return t&32767}function JN(t){return t>>16}function gu(t,e){let n=JN(t),r=e;for(;n>0;)r=r[rs],n--;return r}var mf=!0;function cw(t){let e=mf;return mf=t,e}var XN=256,xE=XN-1,PE=5,eM=0,Qt={};function tM(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ao)&&(r=n[Ao]),r==null&&(r=n[Ao]=eM++);let i=r&xE,s=1<<i;e.data[t+(i>>PE)]|=s}function mu(t,e){let n=OE(t,e);if(n!==-1)return n;let r=e[se];r.firstCreatePass&&(t.injectorIndex=e.length,Qh(r.data,t),Qh(e,null),Qh(r.blueprint,null));let i=up(t,e),s=t.injectorIndex;if(ME(i)){let o=pu(i),a=gu(i,e),u=a[se].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Qh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function OE(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function up(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=UE(i),r===null)return Hi;if(n++,i=i[rs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Hi}function yf(t,e,n){tM(t,e,n)}function kE(t,e,n){if(n&ne.Optional||t!==void 0)return t;Qf(e,"NodeInjector")}function LE(t,e,n,r){if(n&ne.Optional&&r===void 0&&(r=null),!(n&(ne.Self|ne.Host))){let i=t[Ki],s=Rt(void 0);try{return i?i.get(e,r,n&ne.Optional):Bw(e,r,n&ne.Optional)}finally{Rt(s)}}return kE(r,e,n)}function FE(t,e,n,r=ne.Default,i){if(t!==null){if(e[Z]&2048&&!(r&ne.Self)){let o=oM(t,e,n,r,Qt);if(o!==Qt)return o}let s=VE(t,e,n,r,Qt);if(s!==Qt)return s}return LE(e,n,r,i)}function VE(t,e,n,r,i){let s=iM(n);if(typeof s=="function"){if(!DE(e,t,r))return r&ne.Host?kE(i,n,r):LE(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ne.Optional))Qf(n);else return o}finally{AE()}}else if(typeof s=="number"){let o=null,a=OE(t,e),u=Hi,l=r&ne.Host?e[Jt][Bt]:null;for((a===-1||r&ne.SkipSelf)&&(u=a===-1?up(t,e):e[a+8],u===Hi||!lw(r,!1)?a=-1:(o=e[se],a=pu(u),e=gu(u,e)));a!==-1;){let h=e[se];if(uw(s,a,h.data)){let p=nM(a,e,n,o,r,l);if(p!==Qt)return p}u=e[a+8],u!==Hi&&lw(r,e[se].data[a+8]===l)&&uw(s,a,e)?(o=h,a=pu(u),e=gu(u,e)):a=-1}}return i}function nM(t,e,n,r,i,s){let o=e[se],a=o.data[t+8],u=r==null?Pu(a)&&mf:r!=o&&(a.type&3)!==0,l=i&ne.Host&&s===a,h=rM(a,o,n,u,l);return h!==null?Zi(e,o,h,a):Qt}function rM(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let C=o[v];if(v<u&&n===C||v>=u&&C.type===n)return v}if(i){let v=o[u];if(v&&cr(v)&&v.type===n)return u}return null}function Zi(t,e,n,r){let i=t[n],s=e.data;if(QN(i)){let o=i;o.resolving&&OR(PR(s[n]));let a=cw(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?Rt(o.injectImpl):null,h=DE(t,r,ne.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&WN(n,s[n],e)}finally{l!==null&&Rt(l),cw(a),o.resolving=!1,AE()}}return i}function iM(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ao)?t[Ao]:void 0;return typeof e=="number"?e>=0?e&xE:sM:e}function uw(t,e,n){let r=1<<t;return!!(n[e+(t>>PE)]&r)}function lw(t,e){return!(t&ne.Self)&&!(t&ne.Host&&e)}var Lr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return FE(this._tNode,this._lView,e,Nu(r),n)}};function sM(){return new Lr(pt(),Te())}function lp(t){return ko(()=>{let e=t.prototype.constructor,n=e[iu]||vf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[iu]||vf(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function vf(t){return kw(t)?()=>{let e=vf(ct(t));return e&&e()}:qi(t)}function oM(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Z]&2048&&!(o[Z]&512);){let a=VE(s,o,n,r|ne.Self,Qt);if(a!==Qt)return a;let u=s.parent;if(!u){let l=o[oE];if(l){let h=l.get(n,Qt,r);if(h!==Qt)return h}u=UE(o),o=o[rs]}s=u}return i}function UE(t){let e=t[se],n=e.type;return n===2?e.declTNode:n===1?t[Bt]:null}function dw(t,e=null,n=null,r){let i=jE(t,e,n,r);return i.resolveInjectorInitializers(),i}function jE(t,e=null,n=null,r,i=new Set){let s=[n||Nt,uN(t)];return r=r||(typeof t=="object"?void 0:lt(t)),new Mo(s,e||ep(),r||null,i)}var et=class t{static{this.THROW_IF_NOT_FOUND=Ro}static{this.NULL=new au}static create(e,n){if(Array.isArray(e))return dw({name:""},n,e,"");{let r=e.name??"";return dw({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=B({token:t,providedIn:"any",factory:()=>W(qw)})}static{this.__NG_ELEMENT_ID__=-1}};var aM=new z("");aM.__NG_ELEMENT_ID__=t=>{let e=pt();if(e===null)throw new q(204,!1);if(e.type&2)return e.value;if(t&ne.Optional)return null;throw new q(204,!1)};var cM="ngOriginalError";function Yh(t){return t[cM]}var BE=!0,dp=(()=>{class t{static{this.__NG_ELEMENT_ID__=uM}static{this.__NG_ENV_ID__=n=>n}}return t})(),_f=class extends dp{constructor(e){super(),this._lView=e}onDestroy(e){return yE(this._lView,e),()=>RN(this._lView,e)}};function uM(){return new _f(Te())}var ss=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new je(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}}return t})();var If=class extends at{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,sE()&&(this.destroyRef=O(dp,{optional:!0})??void 0,this.pendingTasks=O(ss,{optional:!0})??void 0)}emit(e){let n=he(null);try{super.next(e)}finally{he(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ae&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ut=If;function yu(...t){}function $E(t){let e,n;function r(){t=yu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function hw(t){return queueMicrotask(()=>t()),()=>{t=yu}}var hp="isAngularZone",vu=hp+"_ID",lM=0,ge=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ut(!1),this.onMicrotaskEmpty=new ut(!1),this.onStable=new ut(!1),this.onError=new ut(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=BE}=e;if(typeof Zone>"u")throw new q(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,fM(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(hp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new q(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new q(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,dM,yu,yu);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},dM={};function fp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function hM(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){$E(()=>{t.callbackScheduled=!1,wf(t),t.isCheckStableRunning=!0,fp(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),wf(t)}function fM(t){let e=()=>{hM(t)},n=lM++;t._inner=t._inner.fork({name:"angular",properties:{[hp]:!0,[vu]:n,[vu+n]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(pM(u))return r.invokeTask(s,o,a,u);try{return fw(t),r.invokeTask(s,o,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),pw(t)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return fw(t),r.invoke(s,o,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!gM(u)&&e(),pw(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,wf(t),fp(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function wf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function fw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function pw(t){t._nesting--,fp(t)}var Ef=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ut,this.onMicrotaskEmpty=new ut,this.onStable=new ut,this.onError=new ut}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function pM(t){return HE(t,"__ignore_ng_zone__")}function gM(t){return HE(t,"__scheduler_tick__")}function HE(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var bn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Yh(e);for(;n&&Yh(n);)n=Yh(n);return n||null}},mM=new z("",{providedIn:"root",factory:()=>{let t=O(ge),e=O(bn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function yM(){return Vu(pt(),Te())}function Vu(t,e){return new Uu(Pt(t,e))}var Uu=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=yM}}return t})();function qE(t){return(t.flags&128)===128}var zE=new Map,vM=0;function _M(){return vM++}function IM(t){zE.set(t[xu],t)}function Tf(t){zE.delete(t[xu])}var gw="__ngContext__";function Br(t,e){ir(e)?(t[gw]=e[xu],IM(e)):t[gw]=e}function GE(t){return KE(t[xo])}function WE(t){return KE(t[Ut])}function KE(t){for(;t!==null&&!An(t);)t=t[Ut];return t}var Df;function QE(t){Df=t}function wM(){if(Df!==void 0)return Df;if(typeof document<"u")return document;throw new q(210,!1)}var pp=new z("",{providedIn:"root",factory:()=>EM}),EM="ng",gp=new z(""),nn=new z("",{providedIn:"platform",factory:()=>"unknown"});var mp=new z("",{providedIn:"root",factory:()=>wM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var TM="h",DM="b";var bM=()=>null;function yp(t,e,n=!1){return bM(t,e,n)}var YE=!1,CM=new z("",{providedIn:"root",factory:()=>YE});var _u=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${xw})`}};function ju(t){return t instanceof _u?t.changingThisBreaksApplicationSecurity:t}function ZE(t,e){let n=SM(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${xw})`)}return n===e}function SM(t){return t instanceof _u&&t.getTypeName()||null}var AM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function JE(t){return t=String(t),t.match(AM)?t:"unsafe:"+t}var vp=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(vp||{});function k9(t){let e=RM();return e?e.sanitize(vp.URL,t)||"":ZE(t,"URL")?ju(t):JE(Ru(t))}function RM(){let t=Te();return t&&t[Zt].sanitizer}function XE(t){return t instanceof Function?t():t}function NM(t){return(t??O(et)).get(nn)==="browser"}var Cn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Cn||{}),MM;function _p(t,e){return MM(t,e)}function ji(t,e,n,r,i){if(r!=null){let s,o=!1;An(r)?s=r:ir(r)&&(o=!0,r=r[Sn]);let a=Xt(r);t===0&&n!==null?i==null?iT(e,n,a):Iu(e,n,a,i||null,!0):t===1&&n!==null?Iu(e,n,a,i||null,!0):t===2?GM(e,a,o):t===3&&e.destroyNode(a),s!=null&&KM(e,t,s,n,i)}}function xM(t,e){return t.createText(e)}function PM(t,e,n){t.setValue(e,n)}function eT(t,e,n){return t.createElement(e,n)}function OM(t,e){tT(t,e),e[Sn]=null,e[Bt]=null}function kM(t,e,n,r,i,s){r[Sn]=i,r[Bt]=e,Bu(t,r,n,1,i,s)}function tT(t,e){e[Zt].changeDetectionScheduler?.notify(9),Bu(t,e,e[$e],2,null,null)}function LM(t){let e=t[xo];if(!e)return Zh(t[se],t);for(;e;){let n=null;if(ir(e))n=e[xo];else{let r=e[xt];r&&(n=r)}if(!n){for(;e&&!e[Ut]&&e!==t;)ir(e)&&Zh(e[se],e),e=e[dt];e===null&&(e=t),ir(e)&&Zh(e[se],e),n=e&&e[Ut]}e=n}}function FM(t,e,n,r){let i=xt+r,s=n.length;r>0&&(n[i-1][Ut]=e),r<s-xt?(e[Ut]=n[i],Hw(n,xt+r,e)):(n.push(e),e[Ut]=null),e[dt]=n;let o=e[Qi];o!==null&&n!==o&&nT(o,e);let a=e[Yi];a!==null&&a.insertView(t),ff(e),e[Z]|=128}function nT(t,e){let n=t[du],r=e[dt];if(ir(r))t[Z]|=hu.HasTransplantedViews;else{let i=r[dt][Jt];e[Jt]!==i&&(t[Z]|=hu.HasTransplantedViews)}n===null?t[du]=[e]:n.push(e)}function Ip(t,e){let n=t[du],r=n.indexOf(e);n.splice(r,1)}function bf(t,e){if(t.length<=xt)return;let n=xt+e,r=t[n];if(r){let i=r[Qi];i!==null&&i!==t&&Ip(i,r),e>0&&(t[n-1][Ut]=r[Ut]);let s=ou(t,xt+e);OM(r[se],r);let o=s[Yi];o!==null&&o.detachView(s[se]),r[dt]=null,r[Ut]=null,r[Z]&=-129}return r}function rT(t,e){if(!(e[Z]&256)){let n=e[$e];n.destroyNode&&Bu(t,e,n,3,null,null),LM(e)}}function Zh(t,e){if(e[Z]&256)return;let n=he(null);try{e[Z]&=-129,e[Z]|=256,e[Mt]&&Th(e[Mt]),UM(t,e),VM(t,e),e[se].type===1&&e[$e].destroy();let r=e[Qi];if(r!==null&&An(e[dt])){r!==e[dt]&&Ip(r,e);let i=e[Yi];i!==null&&i.detachView(t)}Tf(e)}finally{he(n)}}function VM(t,e){let n=t.cleanup,r=e[uu];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[uu]=null);let i=e[rr];if(i!==null){e[rr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function UM(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof jr)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];Kt(4,a,u);try{u.call(a)}finally{Kt(5,a,u)}}else{Kt(4,i,s);try{s.call(i)}finally{Kt(5,i,s)}}}}}function jM(t,e,n){return BM(t,e.parent,n)}function BM(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Sn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Yt.None||s===Yt.Emulated)return null}return Pt(r,n)}}function Iu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function iT(t,e,n){t.appendChild(e,n)}function mw(t,e,n,r,i){r!==null?Iu(t,e,n,r,i):iT(t,e,n)}function sT(t,e){return t.parentNode(e)}function $M(t,e){return t.nextSibling(e)}function HM(t,e,n){return zM(t,e,n)}function qM(t,e,n){return t.type&40?Pt(t,n):null}var zM=qM,yw;function wp(t,e,n,r){let i=jM(t,r,e),s=e[$e],o=r.parent||e[Bt],a=HM(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)mw(s,i,n[u],a,!1);else mw(s,i,n,a,!1);yw!==void 0&&yw(s,r,e,n,i)}function So(t,e){if(e!==null){let n=e.type;if(n&3)return Pt(e,t);if(n&4)return Cf(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return So(t,r);{let i=t[e.index];return An(i)?Cf(-1,i):Xt(i)}}else{if(n&128)return So(t,e.next);if(n&32)return _p(e,t)()||Xt(t[e.index]);{let r=oT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Vr(t[Jt]);return So(i,r)}else return So(t,e.next)}}}return null}function oT(t,e){if(e!==null){let r=t[Jt][Bt],i=e.projection;return r.projection[i]}return null}function Cf(t,e){let n=xt+t+1;if(n<e.length){let r=e[n],i=r[se].firstChild;if(i!==null)return So(r,i)}return e[Fr]}function GM(t,e,n){t.removeChild(null,e,n)}function Ep(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(o&&e===0&&(a&&Br(Xt(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Ep(t,e,n.child,r,i,s,!1),ji(e,t,i,a,s);else if(u&32){let l=_p(n,r),h;for(;h=l();)ji(e,t,i,h,s);ji(e,t,i,a,s)}else u&16?WM(t,e,r,n,i,s):ji(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Bu(t,e,n,r,i,s){Ep(n,r,t.firstChild,e,i,s,!1)}function WM(t,e,n,r,i,s){let o=n[Jt],u=o[Bt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];ji(e,t,i,h,s)}else{let l=u,h=o[dt];qE(r)&&(l.flags|=128),Ep(t,e,l,h,i,s,!0)}}function KM(t,e,n,r,i){let s=n[Fr],o=Xt(n);s!==o&&ji(e,t,r,s,i);for(let a=xt;a<n.length;a++){let u=n[a];Bu(u[se],u,t,e,r,s)}}function QM(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Cn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Cn.Important),t.setStyle(n,r,i,s))}}function YM(t,e,n){t.setAttribute(e,"style",n)}function aT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function cT(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&af(t,e,r),i!==null&&aT(t,e,i),s!==null&&YM(t,e,s)}var os={};function L9(t=1){uT(Et(),Te(),is()+t,!1)}function uT(t,e,n,r){if(!r)if((e[Z]&3)===3){let s=t.preOrderCheckHooks;s!==null&&eu(e,s,n)}else{let s=t.preOrderHooks;s!==null&&tu(e,s,0,n)}Ur(n)}function rn(t,e=ne.Default){let n=Te();if(n===null)return W(t,e);let r=pt();return FE(r,n,ct(t),e)}function lT(){let t="invalid";throw new Error(t)}function dT(t,e,n,r,i,s){let o=he(null);try{let a=null;i&sr.SignalBased&&(a=e[r][En]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&sr.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):uE(e,a,r,s)}finally{he(o)}}function ZM(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ur(~i);else{let s=i,o=n[++r],a=n[++r];BN(o,s);let u=e[s];a(2,u)}}}finally{Ur(-1)}}function $u(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[Sn]=i,p[Z]=r|4|128|8|64,(l!==null||t&&t[Z]&2048)&&(p[Z]|=2048),gE(p),p[dt]=p[rs]=t,p[jt]=n,p[Zt]=o||t&&t[Zt],p[$e]=a||t&&t[$e],p[Ki]=u||t&&t[Ki]||null,p[Bt]=s,p[xu]=_M(),p[cu]=h,p[oE]=l,p[Jt]=e.type==2?t[Jt]:p,p}function Hu(t,e,n,r,i){let s=t.data[e];if(s===null)s=JM(t,e,n,r,i),jN()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=LN();s.injectorIndex=o===null?-1:o.injectorIndex}return jo(s,!0),s}function JM(t,e,n,r,i){let s=IE(),o=wE(),a=o?s:s&&s.parent,u=t.data[e]=rx(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function hT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function fT(t,e,n,r,i){let s=is(),o=r&2;try{Ur(-1),o&&e.length>ar&&uT(t,e,ar,!1),Kt(o?2:0,i),n(r,i)}finally{Ur(s),Kt(o?3:1,i)}}function pT(t,e,n){if(cE(e)){let r=he(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{he(r)}}}function gT(t,e,n){_E()&&(ux(t,e,n,Pt(n,e)),(n.flags&64)===64&&wT(t,e,n))}function mT(t,e,n=Pt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function yT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Tp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Tp(t,e,n,r,i,s,o,a,u,l,h){let p=ar+r,m=p+i,v=XM(p,m),C=typeof l=="function"?l():l;return v[se]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function XM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:os);return n}function ex(t,e,n,r){let s=r.get(CM,YE)||n===Yt.ShadowDom,o=t.selectRootElement(e,s);return tx(o),o}function tx(t){nx(t)}var nx=()=>null;function rx(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return PN()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function vw(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=sr.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?_w(r,n,l,a,u):_w(r,n,l,a)}return r}function _w(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function ix(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,v=m?m.inputs:null,C=m?m.outputs:null;u=vw(0,p.inputs,h,u,v),l=vw(1,p.outputs,h,l,C);let N=u!==null&&o!==null&&!Jf(e)?Ix(u,h,o):null;a.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function sx(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function vT(t,e,n,r,i,s,o,a){let u=Pt(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Dp(t,n,h,r,i),Pu(e)&&ox(n,e.index)):e.type&3?(r=sx(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function ox(t,e){let n=dr(e,t);n[Z]&16||(n[Z]|=64)}function _T(t,e,n,r){if(_E()){let i=r===null?null:{"":-1},s=dx(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&IT(t,e,n,o,i,a),i&&hx(n,r,i)}n.mergedAttrs=No(n.mergedAttrs,n.attrs)}function IT(t,e,n,r,i,s){for(let l=0;l<r.length;l++)yf(mu(n,e),t,r[l].type);px(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=hT(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=No(n.mergedAttrs,h.hostAttrs),gx(t,n,e,u,h),fx(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}ix(t,n,s)}function ax(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;cx(o)!=a&&o.push(a),o.push(n,r,s)}}function cx(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function ux(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Pu(n)&&mx(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||mu(n,e),Br(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=Zi(e,t,a,n);if(Br(l,e),o!==null&&_x(e,a-i,l,u,n,o),cr(u)){let h=dr(n.index,e);h[jt]=Zi(e,t,a,n)}}}function wT(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=$N();try{Ur(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];pf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&lx(u,l)}}finally{Ur(-1),pf(o)}}function lx(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function dx(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(eN(e,o.selectors,!1))if(r||(r=[]),cr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;Sf(t,e,u)}else r.unshift(o),Sf(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Sf(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function hx(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new q(-301,!1);r.push(e[i],s)}}}function fx(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;cr(e)&&(n[""]=t)}}function px(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function gx(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=qi(i.type,!0)),o=new jr(s,cr(i),rn);t.blueprint[r]=o,n[r]=o,ax(t,e,r,hT(t,n,i.hostVars,os),i)}function mx(t,e,n){let r=Pt(e,t),i=yT(n),s=t[Zt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=qu(t,$u(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function yx(t,e,n,r,i,s){let o=Pt(t,e);vx(e[$e],o,s,t.value,n,r,i)}function vx(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Ru(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function _x(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];dT(r,n,u,l,h,p)}}function Ix(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function ET(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function TT(t,e){let n=t.contentQueries;if(n!==null){let r=he(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];TE(s),a.contentQueries(2,e[o],o)}}}finally{he(r)}}}function qu(t,e){return t[xo]?t[iw][Ut]=e:t[xo]=e,t[iw]=e,e}function Af(t,e,n){TE(0);let r=he(null);try{e(t,n)}finally{he(r)}}function wx(t){return t[uu]??=[]}function Ex(t){return t.cleanup??=[]}function DT(t,e){let n=t[Ki],r=n?n.get(bn,null):null;r&&r.handleError(e)}function Dp(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];dT(h,l,r,a,u,i)}}function Tx(t,e,n){let r=fE(e,t);PM(t[$e],r,n)}function Dx(t,e){let n=dr(e,t),r=n[se];bx(r,n);let i=n[Sn];i!==null&&n[cu]===null&&(n[cu]=yp(i,n[Ki])),bp(r,n,n[jt])}function bx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function bp(t,e,n){rp(e);try{let r=t.viewQuery;r!==null&&Af(1,r,n);let i=t.template;i!==null&&fT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Yi]?.finishViewCreation(t),t.staticContentQueries&&TT(t,e),t.staticViewQueries&&Af(2,t.viewQuery,n);let s=t.components;s!==null&&Cx(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Z]&=-5,ip()}}function Cx(t,e){for(let n=0;n<e.length;n++)Dx(t,e[n])}function Sx(t,e,n,r){let i=he(null);try{let s=e.tView,a=t[Z]&4096?4096:16,u=$u(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Qi]=l;let h=t[Yi];return h!==null&&(u[Yi]=h.createEmbeddedView(s)),bp(s,u,n),u}finally{he(i)}}function Iw(t,e){return!e||e.firstChild===null||qE(t)}function Ax(t,e,n,r=!0){let i=e[se];if(FM(i,e,t,n),r){let o=Cf(n,t),a=e[$e],u=sT(a,t[Fr]);u!==null&&kM(i,t[Bt],a,e,u,o)}let s=e[cu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function wu(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Xt(s)),An(s)&&Rx(s,r);let o=n.type;if(o&8)wu(t,e,n.child,r);else if(o&32){let a=_p(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=oT(e,n);if(Array.isArray(a))r.push(...a);else{let u=Vr(e[Jt]);wu(u[se],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Rx(t,e){for(let n=xt;n<t.length;n++){let r=t[n],i=r[se].firstChild;i!==null&&wu(r[se],r,i,e)}t[Fr]!==t[Sn]&&e.push(t[Fr])}var bT=[];function Nx(t){return t[Mt]??Mx(t)}function Mx(t){let e=bT.pop()??Object.create(Px);return e.lView=t,e}function xx(t){t.lView[Mt]!==t&&(t.lView=null,bT.push(t))}var Px=ye(L({},Eo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Lu(t.lView)},consumerOnSignalRead(){this.lView[Mt]=this}});function Ox(t){let e=t[Mt]??Object.create(kx);return e.lView=t,e}var kx=ye(L({},Eo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Vr(t.lView);for(;e&&!CT(e[se]);)e=Vr(e);e&&mE(e)},consumerOnSignalRead(){this.lView[Mt]=this}});function CT(t){return t.type!==2}var Lx=100;function ST(t,e=!0,n=0){let r=t[Zt],i=r.rendererFactory,s=!1;s||i.begin?.();try{Fx(t,n)}catch(o){throw e&&DT(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Fx(t,e){let n=EE();try{ow(!0),Rf(t,e);let r=0;for(;ku(t);){if(r===Lx)throw new q(103,!1);r++,Rf(t,1)}}finally{ow(n)}}function Vx(t,e,n,r){let i=e[Z];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Zt].inlineEffectRunner?.flush(),rp(e);let a=!0,u=null,l=null;s||(CT(t)?(l=Nx(e),u=Ec(l)):lI()===null?(a=!1,l=Ox(e),u=Ec(l)):e[Mt]&&(Th(e[Mt]),e[Mt]=null));try{gE(e),VN(t.bindingStartIndex),n!==null&&fT(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let v=t.preOrderCheckHooks;v!==null&&eu(e,v,null)}else{let v=t.preOrderHooks;v!==null&&tu(e,v,0,null),Wh(e,0)}if(o||Ux(e),AT(e,0),t.contentQueries!==null&&TT(t,e),!s)if(h){let v=t.contentCheckHooks;v!==null&&eu(e,v)}else{let v=t.contentHooks;v!==null&&tu(e,v,1),Wh(e,1)}ZM(t,e);let p=t.components;p!==null&&NT(e,p,0);let m=t.viewQuery;if(m!==null&&Af(2,m,r),!s)if(h){let v=t.viewCheckHooks;v!==null&&eu(e,v)}else{let v=t.viewHooks;v!==null&&tu(e,v,2),Wh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Gh]){for(let v of e[Gh])v();e[Gh]=null}s||(e[Z]&=-73)}catch(h){throw s||Lu(e),h}finally{l!==null&&(wh(l,u),a&&xx(l)),ip()}}function AT(t,e){for(let n=GE(t);n!==null;n=WE(n))for(let r=xt;r<n.length;r++){let i=n[r];RT(i,e)}}function Ux(t){for(let e=GE(t);e!==null;e=WE(e)){if(!(e[Z]&hu.HasTransplantedViews))continue;let n=e[du];for(let r=0;r<n.length;r++){let i=n[r];mE(i)}}}function jx(t,e,n){let r=dr(e,t);RT(r,n)}function RT(t,e){np(t)&&Rf(t,e)}function Rf(t,e){let r=t[se],i=t[Z],s=t[Mt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Eh(s)),o||=!1,s&&(s.dirty=!1),t[Z]&=-9217,o)Vx(r,t,r.template,t[jt]);else if(i&8192){AT(t,1);let a=r.components;a!==null&&NT(t,a,1)}}function NT(t,e,n){for(let r=0;r<e.length;r++)jx(t,e[r],n)}function Cp(t,e){let n=EE()?64:1088;for(t[Zt].changeDetectionScheduler?.notify(e);t;){t[Z]|=n;let r=Vr(t);if(df(t)&&!r)return t;t=r}return null}var $r=class{get rootNodes(){let e=this._lView,n=e[se];return wu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[jt]}set context(e){this._lView[jt]=e}get destroyed(){return(this._lView[Z]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[dt];if(An(e)){let n=e[lu],r=n?n.indexOf(this):-1;r>-1&&(bf(e,r),ou(n,r))}this._attachedToViewContainer=!1}rT(this._lView[se],this._lView)}onDestroy(e){yE(this._lView,e)}markForCheck(){Cp(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){ff(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,ST(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=df(this._lView),n=this._lView[Qi];n!==null&&!e&&Ip(n,this._lView),tT(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new q(902,!1);this._appRef=e;let n=df(this._lView),r=this._lView[Qi];r!==null&&!n&&nT(r,this._lView),ff(this._lView)}},zu=(()=>{class t{static{this.__NG_ELEMENT_ID__=Hx}}return t})(),Bx=zu,$x=class extends Bx{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Sx(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new $r(i)}};function Hx(){return qx(pt(),Te())}function qx(t,e){return t.type&4?new $x(e,t,Vu(t,e)):null}var V9=new RegExp(`^(\\d+)*(${DM}|${TM})*(.*)`);var zx=()=>null;function ww(t,e){return zx(t,e)}var Ji=class{},Gu=new z("",{providedIn:"root",factory:()=>!1});var MT=new z(""),xT=new z(""),Nf=class{},Eu=class{};function Gx(t){let e=Error(`No component factory found for ${lt(t)}.`);return e[Wx]=t,e}var Wx="ngComponent";var Mf=class{resolveComponentFactory(e){throw Gx(e)}},Xi=class{static{this.NULL=new Mf}},es=class{},Sp=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>Kx()}}return t})();function Kx(){let t=Te(),e=pt(),n=dr(e.index,t);return(ir(n)?n:t)[$e]}var Qx=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>null})}}return t})();function xf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=KI(i,a);else if(s==2){let u=a,l=e[++o];r=KI(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Tu=class extends Xi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=or(e);return new ts(n,this.ngModule)}};function Ew(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:sr.None;e?n.push({propName:o,templateName:r,isSignal:(a&sr.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function Yx(t){let e=t.toLowerCase();return e==="svg"?bN:e==="math"?CN:null}var ts=class extends Eu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Ew(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Ew(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=iN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=he(null);try{i=i||this.ngModule;let o=i instanceof wt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new gf(e,o):e,u=a.get(es,null);if(u===null)throw new q(407,!1);let l=a.get(Qx,null),h=a.get(Ji,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",C=r?ex(m,r,this.componentDef.encapsulation,a):eT(m,v,Yx(v)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let R=null;C!==null&&(R=yp(C,a,!0));let k=Tp(0,null,null,1,0,null,null,null,null,null,null),j=$u(null,k,null,N,null,null,p,m,a,null,R);rp(j);let V,$,_e=null;try{let K=this.componentDef,E,y=null;K.findHostDirectiveDefs?(E=[],y=new Map,K.findHostDirectiveDefs(K,E,y),E.push(K)):E=[K];let I=Zx(j,C);_e=Jx(I,C,K,E,j,p,m),$=pE(k,ar),C&&tP(m,K,C,r),n!==void 0&&nP($,this.ngContentSelectors,n),V=eP(_e,K,E,y,j,[rP]),bp(k,j,null)}catch(K){throw _e!==null&&Tf(_e),Tf(j),K}finally{ip()}return new Pf(this.componentType,V,Vu($,j),j,$)}finally{he(s)}}},Pf=class extends Nf{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new $r(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Dp(s[se],s,i,e,n),this.previousInputValues.set(e,n);let o=dr(this._tNode.index,s);Cp(o,1)}}get injector(){return new Lr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Zx(t,e){let n=t[se],r=ar;return t[r]=e,Hu(n,r,2,"#host",null)}function Jx(t,e,n,r,i,s,o){let a=i[se];Xx(r,t,e,o);let u=null;e!==null&&(u=yp(e,i[Ki]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=$u(i,yT(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&Sf(a,t,r.length-1),qu(i,p),i[t.index]=p}function Xx(t,e,n,r){for(let i of t)e.mergedAttrs=No(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(xf(e,e.mergedAttrs,!0),n!==null&&cT(r,n,e))}function eP(t,e,n,r,i,s){let o=pt(),a=i[se],u=Pt(o,i);IT(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=Zi(i,a,p,o);Br(m,i)}wT(a,i,o),u&&Br(u,i);let l=Zi(i,a,o.directiveStart+o.componentOffset,o);if(t[jt]=i[jt]=l,s!==null)for(let h of s)h(l,e);return pT(a,o,i),l}function tP(t,e,n,r){if(r)af(t,n,["ng-version","18.2.9"]);else{let{attrs:i,classes:s}=sN(e.selectors[0]);i&&af(t,n,i),s&&s.length>0&&aT(t,n,s.join(" "))}}function nP(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function rP(){let t=pt();cp(Te()[se],t)}var as=(()=>{class t{static{this.__NG_ELEMENT_ID__=iP}}return t})();function iP(){let t=pt();return oP(t,Te())}var sP=as,PT=class extends sP{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Vu(this._hostTNode,this._hostLView)}get injector(){return new Lr(this._hostTNode,this._hostLView)}get parentInjector(){let e=up(this._hostTNode,this._hostLView);if(ME(e)){let n=gu(e,this._hostLView),r=pu(e),i=n[se].data[r+8];return new Lr(i,n)}else return new Lr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Tw(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-xt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=ww(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Iw(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!wN(e),a;if(o)a=n;else{let C=n||{};a=C.index,r=C.injector,i=C.projectableNodes,s=C.environmentInjector||C.ngModuleRef}let u=o?e:new ts(or(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(wt,null);N&&(s=N)}let h=or(u.componentType??{}),p=ww(this._lContainer,h?.id??null),m=p?.firstChild??null,v=u.create(l,i,m,s);return this.insertImpl(v.hostView,a,Iw(this._hostTNode,p)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(SN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[dt],l=new PT(u,u[Bt],u[dt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Ax(o,i,s,r),e.attachToViewContainerRef(),Hw(Jh(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Tw(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=bf(this._lContainer,n);r&&(ou(Jh(this._lContainer),n),rT(r[se],r))}detach(e){let n=this._adjustIndex(e,-1),r=bf(this._lContainer,n);return r&&ou(Jh(this._lContainer),n)!=null?new $r(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Tw(t){return t[lu]}function Jh(t){return t[lu]||(t[lu]=[])}function oP(t,e){let n,r=e[t.index];return An(r)?n=r:(n=ET(r,e,null,t),e[t.index]=n,qu(e,n)),cP(n,e,t,r),new PT(n,t,e)}function aP(t,e){let n=t[$e],r=n.createComment(""),i=Pt(e,t),s=sT(n,i);return Iu(n,s,r,$M(n,i),!1),r}var cP=dP,uP=()=>!1;function lP(t,e,n){return uP(t,e,n)}function dP(t,e,n,r){if(t[Fr])return;let i;n.type&8?i=Xt(r):i=aP(e,n),t[Fr]=i}var Dw=new Set;function cs(t){Dw.has(t)||(Dw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function hP(t){return typeof t=="function"&&t[En]!==void 0}function j9(t,e){cs("NgSignals");let n=wI(t),r=n[En];return e?.equal&&(r.equal=e.equal),n.set=i=>Dh(r,i),n.update=i=>EI(r,i),n.asReadonly=fP.bind(n),n}function fP(){let t=this[En];if(t.readonlyFn===void 0){let e=()=>this();e[En]=t,t.readonlyFn=e}return t.readonlyFn}function OT(t){return hP(t)&&typeof t.set=="function"}function pP(t){return Object.getPrototypeOf(t.prototype).constructor}function gP(t){let e=pP(t.type),n=!0,r=[t];for(;e;){let i;if(cr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new q(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Yc(t.inputs),o.inputTransforms=Yc(t.inputTransforms),o.declaredInputs=Yc(t.declaredInputs),o.outputs=Yc(t.outputs);let a=i.hostBindings;a&&IP(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&vP(t,u),l&&_P(t,l),mP(t,i),bR(t.outputs,i.outputs),cr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===gP&&(n=!1)}}e=Object.getPrototypeOf(e)}yP(r)}function mP(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function yP(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=No(i.hostAttrs,n=No(n,i.hostAttrs))}}function Yc(t){return t===zi?{}:t===Nt?[]:t}function vP(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function _P(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function IP(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var ur=class{},Po=class{};var Of=class extends ur{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Tu(this);let s=Jw(e);this._bootstrapComponents=XE(s.bootstrap),this._r3Injector=jE(e,n,[{provide:ur,useValue:this},{provide:Xi,useValue:this.componentFactoryResolver},...r],lt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},kf=class extends Po{constructor(e){super(),this.moduleType=e}create(e){return new Of(this.moduleType,e,[])}};var Du=class extends ur{constructor(e){super(),this.componentFactoryResolver=new Tu(this),this.instance=null;let n=new Mo([...e.providers,{provide:ur,useValue:this},{provide:Xi,useValue:this.componentFactoryResolver}],e.parent||ep(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Wu(t,e,n=null){return new Du({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function kT(t){return EP(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function wP(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function EP(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Bo(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function TP(t){return(t.flags&32)===32}function DP(t,e,n,r,i,s,o,a,u){let l=e.consts,h=Hu(e,t,4,o||null,a||null);_T(e,n,h,fu(l,u)),cp(e,h);let p=h.tView=Tp(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function bP(t,e,n,r,i,s,o,a,u,l){let h=n+ar,p=e.firstCreatePass?DP(h,e,t,r,i,s,o,a,u):e.data[h];jo(p,!1);let m=SP(e,t,p,n);op()&&wp(e,t,m,p),Br(m,t);let v=ET(m,t,m,p);return t[h]=v,qu(t,v),lP(v,p,t),tp(p)&&gT(e,t,p),u!=null&&mT(t,p,l),p}function CP(t,e,n,r,i,s,o,a){let u=Te(),l=Et(),h=fu(l.consts,s);return bP(u,l,t,e,n,r,i,h,o,a),CP}var SP=AP;function AP(t,e,n,r){return ap(!0),e[$e].createComment("")}var Bi=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Bi||{}),LT=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}}return t})(),Lf=class t{constructor(){this.ngZone=O(ge),this.scheduler=O(Ji),this.errorHandler=O(bn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Bi.EarlyRead,Bi.Write,Bi.MixedReadWrite,Bi.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}},Ff=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Ap(t,e){!e?.injector&&IN(Ap);let n=e?.injector??O(et);return NM(n)?(cs("NgAfterNextRender"),NP(t,n,e,!0)):MP}function RP(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function NP(t,e,n,r){let i=e.get(LT);i.impl??=e.get(Lf);let s=n?.phase??Bi.MixedReadWrite,o=n?.manualCleanup!==!0?e.get(dp):null,a=new Ff(i.impl,RP(t,s),r,o);return i.impl.register(a),a}var MP={destroy(){}};function FT(t,e,n,r){let i=Te(),s=Fu();if(Bo(i,s,e)){let o=Et(),a=sp();yx(a,i,t,e,n,r)}return FT}function xP(t,e,n,r){return Bo(t,Fu(),n)?e+Ru(n)+r:os}function Zc(t,e){return t<<17|e<<2}function Hr(t){return t>>17&32767}function PP(t){return(t&2)==2}function OP(t,e){return t&131071|e<<17}function Vf(t){return t|2}function ns(t){return(t&131068)>>2}function Xh(t,e){return t&-131069|e<<2}function kP(t){return(t&1)===1}function Uf(t){return t|1}function LP(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Hr(o),u=ns(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Fo(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=Hr(t[a+1]);t[r+1]=Zc(m,a),m!==0&&(t[m+1]=Xh(t[m+1],r)),t[a+1]=OP(t[a+1],r)}else t[r+1]=Zc(a,0),a!==0&&(t[a+1]=Xh(t[a+1],r)),a=r;else t[r+1]=Zc(u,0),a===0?a=r:t[u+1]=Xh(t[u+1],r),u=r;l&&(t[r+1]=Vf(t[r+1])),bw(t,h,r,!0),bw(t,h,r,!1),FP(e,h,t,r,s),o=Zc(a,u),s?e.classBindings=o:e.styleBindings=o}function FP(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Fo(s,e)>=0&&(n[r+1]=Uf(n[r+1]))}function bw(t,e,n,r){let i=t[n+1],s=e===null,o=r?Hr(i):ns(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];VP(u,e)&&(a=!0,t[o+1]=r?Uf(l):Vf(l)),o=r?Hr(l):ns(l)}a&&(t[n+1]=r?Vf(i):Uf(i))}function VP(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Fo(t,e)>=0:!1}function UP(t,e,n){let r=Te(),i=Fu();if(Bo(r,i,e)){let s=Et(),o=sp();vT(s,o,r,t,e,r[$e],n,!1)}return UP}function Cw(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Dp(t,n,s[o],o,r)}function jP(t,e){return BP(t,e,null,!0),jP}function BP(t,e,n,r){let i=Te(),s=Et(),o=UN(2);if(s.firstUpdatePass&&HP(s,t,o,r),e!==os&&Bo(i,o,e)){let a=s.data[is()];KP(s,a,i,i[$e],t,i[o+1]=QP(e,n),r,o)}}function $P(t,e){return e>=t.expandoStartIndex}function HP(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[is()],o=$P(t,n);YP(s,r)&&e===null&&!o&&(e=!1),e=qP(i,s,e,r),LP(i,s,e,n,o,r)}}function qP(t,e,n,r){let i=HN(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=ef(null,t,e,n,r),n=Oo(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=ef(i,t,e,n,r),s===null){let u=zP(t,e,r);u!==void 0&&Array.isArray(u)&&(u=ef(null,t,e,u[1],r),u=Oo(u,e.attrs,r),GP(t,e,r,u))}else s=WP(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function zP(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ns(r)!==0)return t[Hr(r)]}function GP(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Hr(i)]=r}function WP(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Oo(r,o,n)}return Oo(r,e.attrs,n)}function ef(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Oo(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Oo(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),zR(t,o,n?!0:e[++s]))}return t===void 0?null:t}function KP(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=kP(l)?Sw(u,e,n,i,ns(l),o):void 0;if(!bu(h)){bu(s)||PP(l)&&(s=Sw(u,null,n,i,a,o));let p=fE(is(),n);QM(r,o,p,i,s)}}function Sw(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===os&&(m=p?Nt:void 0);let v=p?qh(m,r):h===r?m:void 0;if(l&&!bu(v)&&(v=qh(u,r)),bu(v)&&(a=v,o))return a;let C=t[i+1];i=o?Hr(C):ns(C)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=qh(u,r))}return a}function bu(t){return t!==void 0}function QP(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=lt(ju(t)))),t}function YP(t,e){return(t.flags&(e?8:16))!==0}function ZP(t,e,n,r,i,s){let o=e.consts,a=fu(o,i),u=Hu(e,t,2,r,a);return _T(e,n,u,fu(o,s)),u.attrs!==null&&xf(u,u.attrs,!1),u.mergedAttrs!==null&&xf(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function VT(t,e,n,r){let i=Te(),s=Et(),o=ar+t,a=i[$e],u=s.firstCreatePass?ZP(o,s,i,e,n,r):s.data[o],l=JP(s,i,u,a,e,t);i[o]=l;let h=tp(u);return jo(u,!0),cT(a,l,u),!TP(u)&&op()&&wp(s,i,l,u),NN()===0&&Br(l,i),MN(),h&&(gT(s,i,u),pT(s,u,i)),r!==null&&mT(i,u),VT}function UT(){let t=pt();wE()?FN():(t=t.parent,jo(t,!1));let e=t;ON(e)&&kN(),xN();let n=Et();return n.firstCreatePass&&(cp(n,t),cE(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&YN(e)&&Cw(n,e,Te(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ZN(e)&&Cw(n,e,Te(),e.stylesWithoutHost,!1),UT}function Rp(t,e,n,r){return VT(t,e,n,r),UT(),Rp}var JP=(t,e,n,r,i,s)=>(ap(!0),eT(r,i,GN()));function B9(){return Te()}var Cu="en-US";var XP=Cu;function eO(t){typeof t=="string"&&(XP=t.toLowerCase().replace(/_/g,"-"))}var tO=(t,e,n)=>{};function jT(t,e,n,r){let i=Te(),s=Et(),o=pt();return BT(s,i,i[$e],o,t,e,r),jT}function nO(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[uu],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function BT(t,e,n,r,i,s,o){let a=tp(r),l=t.firstCreatePass&&Ex(t),h=e[jt],p=wx(e),m=!0;if(r.type&3||o){let N=Pt(r,e),R=o?o(N):N,k=p.length,j=o?$=>o(Xt($[r.index])):r.index,V=null;if(!o&&a&&(V=nO(t,e,i,r.index)),V!==null){let $=V.__ngLastListenerFn__||V;$.__ngNextListenerFn__=s,V.__ngLastListenerFn__=s,m=!1}else{s=Rw(r,e,h,s),tO(N,i,s);let $=n.listen(R,i,s);p.push(s,$),l&&l.push(i,j,k,k+1)}}else s=Rw(r,e,h,s);let v=r.outputs,C;if(m&&v!==null&&(C=v[i])){let N=C.length;if(N)for(let R=0;R<N;R+=2){let k=C[R],j=C[R+1],_e=e[k][j].subscribe(s),K=p.length;p.push(s,_e),l&&l.push(i,r.index,K,-(K+1))}}}function Aw(t,e,n,r){let i=he(null);try{return Kt(6,e,n),n(r)!==!1}catch(s){return DT(t,s),!1}finally{Kt(7,e,n),he(i)}}function Rw(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?dr(t.index,e):e;Cp(o,5);let a=Aw(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)a=Aw(e,n,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function $9(t=1){return zN(t)}function H9(t,e=""){let n=Te(),r=Et(),i=t+ar,s=r.firstCreatePass?Hu(r,i,1,e,null):r.data[i],o=rO(r,n,s,e,t);n[i]=o,op()&&wp(r,n,o,s),jo(s,!1)}var rO=(t,e,n,r,i)=>(ap(!0),xM(e[$e],r));function iO(t){return $T("",t,""),iO}function $T(t,e,n){let r=Te(),i=xP(r,t,e,n);return i!==os&&Tx(r,is(),i),$T}function sO(t,e,n){OT(e)&&(e=e());let r=Te(),i=Fu();if(Bo(r,i,e)){let s=Et(),o=sp();vT(s,o,r,t,e,r[$e],n,!1)}return sO}function q9(t,e){let n=OT(t);return n&&t.set(e),n}function oO(t,e){let n=Te(),r=Et(),i=pt();return BT(r,n,n[$e],i,t,e),oO}function aO(t,e,n){let r=Et();if(r.firstCreatePass){let i=cr(t);jf(n,r.data,r.blueprint,i,!0),jf(e,r.data,r.blueprint,i,!1)}}function jf(t,e,n,r,i){if(t=ct(t),Array.isArray(t))for(let s=0;s<t.length;s++)jf(t[s],e,n,r,i);else{let s=Et(),o=Te(),a=pt(),u=Wi(t)?t:ct(t.provide),l=iE(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Wi(t)||!t.multi){let v=new jr(l,i,rn),C=nf(u,e,i?h:h+m,p);C===-1?(yf(mu(a,o),s,u),tf(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),o.push(v)):(n[C]=v,o[C]=v)}else{let v=nf(u,e,h+m,p),C=nf(u,e,h,h+m),N=v>=0&&n[v],R=C>=0&&n[C];if(i&&!R||!i&&!N){yf(mu(a,o),s,u);let k=lO(i?uO:cO,n.length,i,r,l);!i&&R&&(n[C].providerFactory=k),tf(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(k),o.push(k)}else{let k=HT(n[i?C:v],l,!i&&r);tf(s,t,v>-1?v:C,k)}!i&&r&&R&&n[C].componentProviders++}}}function tf(t,e,n,r){let i=Wi(e),s=fN(e);if(i||s){let u=(s?ct(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function HT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function nf(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function cO(t,e,n,r){return Bf(this.multi,[])}function uO(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Zi(n,n[se],this.providerFactory.index,r);s=a.slice(0,o),Bf(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Bf(i,s);return s}function Bf(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function lO(t,e,n,r,i){let s=new jr(t,n,rn);return s.multi=[],s.index=e,s.componentProviders=0,HT(s,i,r&&!n),s}function z9(t,e=[]){return n=>{n.providersResolver=(r,i)=>aO(r,i?i(t):t,e)}}var dO=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=tE(!1,n.type),i=r.length>0?Wu([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=B({token:t,providedIn:"environment",factory:()=>new t(W(wt))})}}return t})();function qT(t){cs("NgStandalone"),t.getStandaloneInjector=e=>e.get(dO).getOrCreateStandaloneInjector(t)}var lr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},zT=new lr("18.2.9");var Ku=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var GT=new z("");function $o(t){return!!t&&typeof t.then=="function"}function WT(t){return!!t&&typeof t.subscribe=="function"}var Qu=new z(""),KT=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=O(Qu,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if($o(s))n.push(s);else if(WT(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Yu=new z("");function hO(){II(()=>{throw new q(600,!1)})}function fO(t){return t.isBoundToModule}var pO=10;function gO(t,e,n){try{let r=n();return $o(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var qr=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=O(mM),this.afterRenderManager=O(LT),this.zonelessEnabled=O(Gu),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new at,this.afterTick=new at,this.componentTypes=[],this.components=[],this.isStable=O(ss).hasPendingTasks.pipe(ie(n=>!n)),this._injector=O(wt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Eu;if(!this._injector.get(KT).done){let m=!i&&Zw(n),v=!1;throw new q(405,v)}let o;i?o=n:o=this._injector.get(Xi).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=fO(o)?void 0:this._injector.get(ur),u=r||o.selector,l=o.create(et.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(GT,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),nu(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new q(101,!1);let n=he(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,he(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(es,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<pO;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)mO(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ku(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;nu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Yu,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>nu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new q(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function nu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function mO(t,e,n,r){if(!n&&!ku(t))return;ST(t,e,n&&!r?0:1)}var $f=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Zu=(()=>{class t{compileModuleSync(n){return new kf(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Jw(n),s=XE(i.declarations).reduce((o,a)=>{let u=or(a);return u&&o.push(new ts(u)),o},[]);return new $f(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var yO=(()=>{class t{constructor(){this.zone=O(ge),this.changeDetectionScheduler=O(Ji),this.applicationRef=O(qr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),vO=new z("",{factory:()=>!1});function QT({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ge(ye(L({},YT()),{scheduleInRootZone:n})),[{provide:ge,useFactory:t},{provide:Gi,multi:!0,useFactory:()=>{let r=O(yO,{optional:!0});return()=>r.initialize()}},{provide:Gi,multi:!0,useFactory:()=>{let r=O(_O);return()=>{r.initialize()}}},e===!0?{provide:MT,useValue:!0}:[],{provide:xT,useValue:n??BE}]}function G9(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=QT({ngZoneFactory:()=>{let i=YT(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&cs("NgZone_CoalesceEvent"),new ge(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return en([{provide:vO,useValue:!0},{provide:Gu,useValue:!1},r])}function YT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var _O=(()=>{class t{constructor(){this.subscription=new Ae,this.initialized=!1,this.zone=O(ge),this.pendingTasks=O(ss)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ge.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var IO=(()=>{class t{constructor(){this.appRef=O(qr),this.taskService=O(ss),this.ngZone=O(ge),this.zonelessEnabled=O(Gu),this.disableScheduling=O(MT,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ae,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(vu):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(xT,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ef||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?hw:$E;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(vu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,hw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function wO(){return typeof $localize<"u"&&$localize.locale||Cu}var Np=new z("",{providedIn:"root",factory:()=>O(Np,ne.Optional|ne.SkipSelf)||wO()});var Hf=new z("");function Jc(t){return!t.moduleRef}function EO(t){let e=Jc(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ge);return n.run(()=>{Jc(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(bn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),Jc(t)){let s=()=>e.destroy(),o=t.platformInjector.get(Hf);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(Hf);o.add(s),t.moduleRef.onDestroy(()=>{nu(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return gO(r,n,()=>{let s=e.get(KT);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Np,Cu);if(eO(o||Cu),Jc(t)){let a=e.get(qr);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return TO(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function TO(t,e){let n=t.injector.get(qr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new q(-403,!1);e.push(t)}var ru=null;function DO(t=[],e){return et.create({name:e,providers:[{provide:Mu,useValue:"platform"},{provide:Hf,useValue:new Set([()=>ru=null])},...t]})}function bO(t=[]){if(ru)return ru;let e=DO(t);return ru=e,hO(),CO(e),e}function CO(t){t.get(gp,null)?.forEach(n=>n())}var Ho=(()=>{class t{static{this.__NG_ELEMENT_ID__=SO}}return t})();function SO(t){return AO(pt(),Te(),(t&16)===16)}function AO(t,e,n){if(Pu(t)&&!n){let r=dr(t.index,e);return new $r(r,r)}else if(t.type&175){let r=e[Jt];return new $r(r,e)}return null}var qf=class{constructor(){}supports(e){return kT(e)}create(e){return new zf(e)}},RO=(t,e)=>e,zf=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||RO}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<Nw(r,i,s)?n:r,a=Nw(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let v=m<s.length?s[m]:s[m]=0,C=v+m;h<=C&&C<l&&(s[m]=v+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!kT(e))throw new q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,wP(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Gf(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Su),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Su),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Gf=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Wf=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Su=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Wf,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Nw(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Mw(){return new Mp([new qf])}var Mp=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:Mw})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Mw()),deps:[[t,new Yf,new tt]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new q(901,!1)}}return t})();function ZT(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=bO(r),s=[QT({}),{provide:Ji,useExisting:IO},...n||[]],o=new Du({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return EO({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function JT(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function W9(t,e){cs("NgSignals");let n=yI(t);return e?.equal&&(n[En].equal=e.equal),n}function NO(t){let e=he(null);try{return t()}finally{he(e)}}function XT(t){let e=or(t);if(!e)return null;let n=new ts(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var iD=null;function us(){return iD}function sD(t){iD??=t}var Ju=class{};var gt=new z(""),Lp=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(PO),providedIn:"platform"})}}return t})(),oD=new z(""),PO=(()=>{class t extends Lp{constructor(){super(),this._doc=O(gt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return us().getBaseHref(this._doc)}onPopState(n){let r=us().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=us().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function Fp(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function eD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Rn(t){return t&&t[0]!=="?"?"?"+t:t}var zr=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(Vp),providedIn:"root"})}}return t})(),aD=new z(""),Vp=(()=>{class t extends zr{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(gt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Fp(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Rn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Rn(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Rn(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(W(Lp),W(aD,8))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),cD=(()=>{class t extends zr{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Fp(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Rn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Rn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(W(Lp),W(aD,8))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),ls=(()=>{class t{constructor(n){this._subject=new ut,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=LO(eD(tD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Rn(r))}normalize(n){return t.stripTrailingSlash(kO(this._basePath,tD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Rn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Rn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Rn}static{this.joinWithSlash=Fp}static{this.stripTrailingSlash=eD}static{this.\u0275fac=function(r){return new(r||t)(W(zr))}}static{this.\u0275prov=B({token:t,factory:()=>OO(),providedIn:"root"})}}return t})();function OO(){return new ls(W(zr))}function kO(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function tD(t){return t.replace(/\/index.html$/,"")}function LO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function uD(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var xp=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},IW=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new xp(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),nD(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);nD(s,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(rn(as),rn(zu),rn(Mp))}}static{this.\u0275dir=Uo({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function nD(t,e){t.context.$implicit=e.item}var wW=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new Pp,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){rD("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){rD("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(rn(as),rn(zu))}}static{this.\u0275dir=Uo({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),Pp=class{constructor(){this.$implicit=null,this.ngIf=null}};function rD(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${lt(e)}'.`)}var FO=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Vo({type:t})}static{this.\u0275inj=Lo({})}}return t})(),Up="browser",VO="server";function UO(t){return t===Up}function jp(t){return t===VO}var lD=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>UO(O(nn))?new Op(O(gt),window):new kp})}}return t})(),Op=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=jO(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function jO(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var kp=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Xu=class{};var Hp=class extends Ju{constructor(){super(...arguments),this.supportsDOMEvents=!0}},qp=class t extends Hp{static makeCurrent(){sD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=BO();return n==null?null:$O(n)}resetBaseElement(){zo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return uD(document.cookie,e)}},zo=null;function BO(){return zo=zo||document.querySelector("base"),zo?zo.getAttribute("href"):null}function $O(t){return new URL(t,document.baseURI).pathname}var HO=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),zp=new z(""),pD=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new q(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(W(zp),W(ge))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),el=class{constructor(e){this._doc=e}},Bp="ng-app-id",gD=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=jp(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Bp}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Bp),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Bp,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(W(gt),W(pp),W(mp,8),W(nn))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),$p={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Wp=/%COMP%/g,mD="%COMP%",qO=`_nghost-${mD}`,zO=`_ngcontent-${mD}`,GO=!0,WO=new z("",{providedIn:"root",factory:()=>GO});function KO(t){return zO.replace(Wp,t)}function QO(t){return qO.replace(Wp,t)}function yD(t,e){return e.map(n=>n.replace(Wp,t))}var dD=(()=>{class t{constructor(n,r,i,s,o,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=jp(a),this.defaultRenderer=new Go(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Yt.ShadowDom&&(r=ye(L({},r),{encapsulation:Yt.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof tl?i.applyToHost(n):i instanceof Wo&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Yt.Emulated:s=new tl(u,l,r,this.appId,h,o,a,p);break;case Yt.ShadowDom:return new Gp(u,l,n,r,o,a,this.nonce,p);default:s=new Wo(u,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(W(pD),W(gD),W(pp),W(WO),W(gt),W(nn),W(ge),W(mp))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),Go=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS($p[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(hD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(hD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new q(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=$p[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=$p[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Cn.DashCase|Cn.Important)?e.style.setProperty(n,r,i&Cn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Cn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=us().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function hD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Gp=class extends Go{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=yD(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Wo=class extends Go{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?yD(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},tl=class extends Wo{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=KO(l),this.hostAttr=QO(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},YO=(()=>{class t extends el{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(W(gt))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),fD=["alt","control","meta","shift"],ZO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},JO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},XO=(()=>{class t extends el{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>us().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),fD.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=ZO[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),fD.forEach(o=>{if(o!==i){let a=JO[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(W(gt))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function KW(t,e){return ZT(L({rootComponent:t},ek(e)))}function ek(t){return{appProviders:[...sk,...t?.providers??[]],platformProviders:ik}}function tk(){qp.makeCurrent()}function nk(){return new bn}function rk(){return QE(document),document}var ik=[{provide:nn,useValue:Up},{provide:gp,useValue:tk,multi:!0},{provide:gt,useFactory:rk,deps:[]}];var sk=[{provide:Mu,useValue:"root"},{provide:bn,useFactory:nk,deps:[]},{provide:zp,useClass:YO,multi:!0,deps:[gt,ge,nn]},{provide:zp,useClass:XO,multi:!0,deps:[gt]},dD,gD,pD,{provide:es,useExisting:dD},{provide:Xu,useClass:HO,deps:[]},[]];var vD=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(W(gt))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var te="primary",ua=Symbol("RouteTitle"),Jp=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ms(t){return new Jp(t)}function ak(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ck(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!sn(t[n],e[n]))return!1;return!0}function sn(t,e){let n=t?Xp(t):void 0,r=e?Xp(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!RD(t[i],e[i]))return!1;return!0}function Xp(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function RD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function ND(t){return t.length>0?t[t.length-1]:null}function pr(t){return Vh(t)?t:$o(t)?xe(Promise.resolve(t)):Y(t)}var uk={exact:xD,subset:PD},MD={exact:lk,subset:dk,ignored:()=>!0};function _D(t,e,n){return uk[n.paths](t.root,e.root,n.matrixParams)&&MD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function lk(t,e){return sn(t,e)}function xD(t,e,n){if(!Wr(t.segments,e.segments)||!il(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!xD(t.children[r],e.children[r],n))return!1;return!0}function dk(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>RD(t[n],e[n]))}function PD(t,e,n){return OD(t,e,e.segments,n)}function OD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Wr(i,n)||e.hasChildren()||!il(i,n,r))}else if(t.segments.length===n.length){if(!Wr(t.segments,n)||!il(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!PD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Wr(t.segments,i)||!il(t.segments,i,r)||!t.children[te]?!1:OD(t.children[te],e,s,r)}}function il(t,e,n){return e.every((r,i)=>MD[n](t[i].parameters,r.parameters))}var Mn=class{constructor(e=new me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ms(this.queryParams),this._queryParamMap}toString(){return pk.serialize(this)}},me=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sl(this)}},Gr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ms(this.parameters),this._parameterMap}toString(){return LD(this)}};function hk(t,e){return Wr(t,e)&&t.every((n,r)=>sn(n.parameters,e[r].parameters))}function Wr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function fk(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===te&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==te&&(n=n.concat(e(i,r)))}),n}var la=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>new ys,providedIn:"root"})}}return t})(),ys=class{parse(e){let n=new tg(e);return new Mn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ko(e.root,!0)}`,r=yk(e.queryParams),i=typeof e.fragment=="string"?`#${gk(e.fragment)}`:"";return`${n}${r}${i}`}},pk=new ys;function sl(t){return t.segments.map(e=>LD(e)).join("/")}function Ko(t,e){if(!t.hasChildren())return sl(t);if(e){let n=t.children[te]?Ko(t.children[te],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==te&&r.push(`${i}:${Ko(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=fk(t,(r,i)=>i===te?[Ko(t.children[te],!1)]:[`${i}:${Ko(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[te]!=null?`${sl(t)}/${n[0]}`:`${sl(t)}/(${n.join("//")})`}}function kD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nl(t){return kD(t).replace(/%3B/gi,";")}function gk(t){return encodeURI(t)}function eg(t){return kD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ol(t){return decodeURIComponent(t)}function ID(t){return ol(t.replace(/\+/g,"%20"))}function LD(t){return`${eg(t.path)}${mk(t.parameters)}`}function mk(t){return Object.entries(t).map(([e,n])=>`;${eg(e)}=${eg(n)}`).join("")}function yk(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${nl(n)}=${nl(i)}`).join("&"):`${nl(n)}=${nl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var vk=/^[^\/()?;#]+/;function Kp(t){let e=t.match(vk);return e?e[0]:""}var _k=/^[^\/()?;=#]+/;function Ik(t){let e=t.match(_k);return e?e[0]:""}var wk=/^[^=?&#]+/;function Ek(t){let e=t.match(wk);return e?e[0]:""}var Tk=/^[^&#]+/;function Dk(t){let e=t.match(Tk);return e?e[0]:""}var tg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[te]=new me(e,n)),r}parseSegment(){let e=Kp(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new q(4009,!1);return this.capture(e),new Gr(ol(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Ik(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Kp(this.remaining);i&&(r=i,this.capture(r))}e[ol(n)]=ol(r)}parseQueryParam(e){let n=Ek(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Dk(this.remaining);o&&(r=o,this.capture(r))}let i=ID(n),s=ID(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Kp(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new q(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=te);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[te]:new me([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new q(4011,!1)}};function FD(t){return t.segments.length>0?new me([],{[te]:t}):t}function VD(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=VD(i);if(r===te&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new me(t.segments,e);return bk(n)}function bk(t){if(t.numberOfChildren===1&&t.children[te]){let e=t.children[te];return new me(t.segments.concat(e.segments),e.children)}return t}function ea(t){return t instanceof Mn}function Ck(t,e,n=null,r=null){let i=UD(t);return jD(i,e,n,r)}function UD(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new me(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=FD(r);return e??i}function jD(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Qp(i,i,i,n,r);let s=Sk(e);if(s.toRoot())return Qp(i,i,new me([],{}),n,r);let o=Ak(s,i,t),a=o.processChildren?Zo(o.segmentGroup,o.index,s.commands):$D(o.segmentGroup,o.index,s.commands);return Qp(i,o.segmentGroup,a,n,r)}function al(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ta(t){return typeof t=="object"&&t!=null&&t.outlets}function Qp(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=BD(t,e,n);let a=FD(VD(o));return new Mn(a,s,i)}function BD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=BD(s,e,n)}),new me(t.segments,r)}var cl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&al(r[0]))throw new q(4003,!1);let i=r.find(ta);if(i&&i!==ND(r))throw new q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Sk(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new cl(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new cl(n,e,r)}var fs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Ak(t,e,n){if(t.isAbsolute)return new fs(e,!0,0);if(!n)return new fs(e,!1,NaN);if(n.parent===null)return new fs(n,!0,0);let r=al(t.commands[0])?0:1,i=n.segments.length-1+r;return Rk(n,i,t.numberOfDoubleDots)}function Rk(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new q(4005,!1);i=r.segments.length}return new fs(r,!1,i-s)}function Nk(t){return ta(t[0])?t[0].outlets:{[te]:t}}function $D(t,e,n){if(t??=new me([],{}),t.segments.length===0&&t.hasChildren())return Zo(t,e,n);let r=Mk(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new me(t.segments.slice(0,r.pathIndex),{});return s.children[te]=new me(t.segments.slice(r.pathIndex),t.children),Zo(s,0,i)}else return r.match&&i.length===0?new me(t.segments,{}):r.match&&!t.hasChildren()?ng(t,e,n):r.match?Zo(t,0,i):ng(t,e,n)}function Zo(t,e,n){if(n.length===0)return new me(t.segments,{});{let r=Nk(n),i={};if(Object.keys(r).some(s=>s!==te)&&t.children[te]&&t.numberOfChildren===1&&t.children[te].segments.length===0){let s=Zo(t.children[te],e,n);return new me(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=$D(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new me(t.segments,i)}}function Mk(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(ta(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!ED(u,l,o))return s;r+=2}else{if(!ED(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ng(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(ta(s)){let u=xk(s.outlets);return new me(r,u)}if(i===0&&al(n[0])){let u=t.segments[e];r.push(new Gr(u.path,wD(n[0]))),i++;continue}let o=ta(s)?s.outlets[te]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&al(a)?(r.push(new Gr(o,wD(a))),i+=2):(r.push(new Gr(o,{})),i++)}return new me(r,{})}function xk(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=ng(new me([],{}),0,r))}),e}function wD(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function ED(t,e,n){return t==n.path&&sn(e,n.parameters)}var Jo="imperative",qe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(qe||{}),Ot=class{constructor(e,n){this.id=e,this.url=n}},vs=class extends Ot{constructor(e,n,r="imperative",i=null){super(e,n),this.type=qe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},xn=class extends Ot{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=qe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Dt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Dt||{}),ul=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ul||{}),Nn=class extends Ot{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},hr=class extends Ot{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationSkipped}},na=class extends Ot{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=qe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ll=class extends Ot{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rg=class extends Ot{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ig=class extends Ot{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=qe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},sg=class extends Ot{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},og=class extends Ot{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ag=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},cg=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ug=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lg=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dg=class{constructor(e){this.snapshot=e,this.type=qe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hg=class{constructor(e){this.snapshot=e,this.type=qe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dl=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=qe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ra=class{},_s=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function Pk(t,e){return t.providers&&!t._injector&&(t._injector=Wu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function $t(t){return t.outlet||te}function Ok(t,e){let n=t.filter(r=>$t(r)===e);return n.push(...t.filter(r=>$t(r)!==e)),n}function da(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var fg=class{get injector(){return da(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ha(this.rootInjector),this.attachRef=null}},ha=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new fg(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(W(wt))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),hl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=pg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=pg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=gg(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return gg(e,this._root).map(n=>n.value)}};function pg(t,e){if(t===e.value)return e;for(let n of e.children){let r=pg(t,n);if(r)return r}return null}function gg(t,e){if(t===e.value)return[e];for(let n of e.children){let r=gg(t,n);if(r.length)return r.unshift(e),r}return[]}var Tt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function hs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var fl=class extends hl{constructor(e,n){super(e),this.snapshot=n,Dg(this,e)}toString(){return this.snapshot.toString()}};function HD(t){let e=kk(t),n=new je([new Gr("",{})]),r=new je({}),i=new je({}),s=new je({}),o=new je(""),a=new Kr(n,r,s,o,i,te,t,e.root);return a.snapshot=e.root,new fl(new Tt(a,[]),e)}function kk(t){let e={},n={},r={},i="",s=new ps([],e,r,i,n,te,t,null,{});return new gl("",new Tt(s,[]))}var Kr=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ie(l=>l[ua]))??Y(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(e=>ms(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(e=>ms(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function pl(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&zD(i)&&(r.resolve[ua]=i.title),r}var ps=class{get title(){return this.data?.[ua]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ms(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ms(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},gl=class extends hl{constructor(e,n){super(n),this.url=e,Dg(this,n)}toString(){return qD(this._root)}};function Dg(t,e){e.value._routerState=t,e.children.forEach(n=>Dg(t,n))}function qD(t){let e=t.children.length>0?` { ${t.children.map(qD).join(", ")} } `:"";return`${t.value}${e}`}function Yp(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,sn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),sn(e.params,n.params)||t.paramsSubject.next(n.params),ck(e.url,n.url)||t.urlSubject.next(n.url),sn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function mg(t,e){let n=sn(t.params,e.params)&&hk(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||mg(t.parent,e.parent))}function zD(t){return typeof t.title=="string"||t.title===null}var Lk=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=te,this.activateEvents=new ut,this.deactivateEvents=new ut,this.attachEvents=new ut,this.detachEvents=new ut,this.parentContexts=O(ha),this.location=O(as),this.changeDetector=O(Ho),this.inputBinder=O(_l,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new q(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new q(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new yg(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Uo({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ou]})}}return t})(),yg=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Kr?this.route:e===ha?this.childContexts:this.parent.get(e,n)}},_l=new z(""),TD=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=bo([r.queryParams,r.params,r.data]).pipe(At(([s,o,a],u)=>(a=L(L(L({},s),o),a),u===0?Y(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let o=XT(r.component);if(!o){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(n,i)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function Fk(t,e,n){let r=ia(t,e._root,n?n._root:void 0);return new fl(r,e)}function ia(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Vk(t,e,n);return new Tt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ia(t,a)),o}}let r=Uk(e.value),i=e.children.map(s=>ia(t,s));return new Tt(r,i)}}function Vk(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ia(t,r,i);return ia(t,r)})}function Uk(t){return new Kr(new je(t.url),new je(t.params),new je(t.queryParams),new je(t.fragment),new je(t.data),t.outlet,t.component,t)}var sa=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},GD="ngNavigationCancelingError";function ml(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=ea(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=WD(!1,Dt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function WD(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[GD]=!0,n.cancellationCode=e,n}function jk(t){return KD(t)&&ea(t.url)}function KD(t){return!!t&&t[GD]}var Bk=(t,e,n,r)=>ie(i=>(new vg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),vg=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Yp(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=hs(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=hs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=hs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=hs(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new hg(s.value.snapshot))}),e.children.length&&this.forwardEvent(new lg(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Yp(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Yp(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},yl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},gs=class{constructor(e,n){this.component=e,this.route=n}};function $k(t,e,n){let r=t._root,i=e?e._root:null;return Qo(r,i,n,[r.value])}function Hk(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ws(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Lw(t)?t:e.get(t):r}function Qo(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=hs(e);return t.children.forEach(o=>{qk(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Xo(a,n.getContext(o),i)),i}function qk(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=zk(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new yl(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Qo(t,e,a?a.children:null,r,i):Qo(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new gs(a.outlet.component,o))}else o&&Xo(e,a,i),i.canActivateChecks.push(new yl(r)),s.component?Qo(t,null,a?a.children:null,r,i):Qo(t,null,n,r,i);return i}function zk(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Wr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Wr(t.url,e.url)||!sn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mg(t,e)||!sn(t.queryParams,e.queryParams);case"paramsChange":default:return!mg(t,e)}}function Xo(t,e,n){let r=hs(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Xo(o,e.children.getContext(s),n):Xo(o,null,n):Xo(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new gs(e.outlet.component,i)):n.canDeactivateChecks.push(new gs(null,i)):n.canDeactivateChecks.push(new gs(null,i))}function fa(t){return typeof t=="function"}function Gk(t){return typeof t=="boolean"}function Wk(t){return t&&fa(t.canLoad)}function Kk(t){return t&&fa(t.canActivate)}function Qk(t){return t&&fa(t.canActivateChild)}function Yk(t){return t&&fa(t.canDeactivate)}function Zk(t){return t&&fa(t.canMatch)}function QD(t){return t instanceof Tn||t?.name==="EmptyError"}var rl=Symbol("INITIAL_VALUE");function Is(){return At(t=>bo(t.map(e=>e.pipe(Dn(1),$h(rl)))).pipe(ie(e=>{for(let n of e)if(n!==!0){if(n===rl)return rl;if(n===!1||Jk(n))return n}return!0}),St(e=>e!==rl),Dn(1)))}function Jk(t){return ea(t)||t instanceof sa}function Xk(t,e){return Le(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?Y(ye(L({},n),{guardsResult:!0})):e1(o,r,i,t).pipe(Le(a=>a&&Gk(a)?t1(r,s,t,e):Y(a)),ie(a=>ye(L({},n),{guardsResult:a})))})}function e1(t,e,n,r){return xe(t).pipe(Le(i=>o1(i.component,i.route,n,e,r)),Wt(i=>i!==!0,!0))}function t1(t,e,n,r){return xe(e).pipe(kr(i=>Li(r1(i.route.parent,r),n1(i.route,r),s1(t,i.path,n),i1(t,i.route,n))),Wt(i=>i!==!0,!0))}function n1(t,e){return t!==null&&e&&e(new dg(t)),Y(!0)}function r1(t,e){return t!==null&&e&&e(new ug(t)),Y(!0)}function i1(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(s=>Wc(()=>{let o=da(e)??n,a=ws(s,o),u=Kk(a)?a.canActivate(e,t):tn(o,()=>a(e,t));return pr(u).pipe(Wt())}));return Y(i).pipe(Is())}function s1(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Hk(o)).filter(o=>o!==null).map(o=>Wc(()=>{let a=o.guards.map(u=>{let l=da(o.node)??n,h=ws(u,l),p=Qk(h)?h.canActivateChild(r,t):tn(l,()=>h(r,t));return pr(p).pipe(Wt())});return Y(a).pipe(Is())}));return Y(s).pipe(Is())}function o1(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Y(!0);let o=s.map(a=>{let u=da(e)??i,l=ws(a,u),h=Yk(l)?l.canDeactivate(t,e,n,r):tn(u,()=>l(t,e,n,r));return pr(h).pipe(Wt())});return Y(o).pipe(Is())}function a1(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let s=i.map(o=>{let a=ws(o,t),u=Wk(a)?a.canLoad(e,n):tn(t,()=>a(e,n));return pr(u)});return Y(s).pipe(Is(),YD(r))}function YD(t){return Nh(Be(e=>{if(typeof e!="boolean")throw ml(t,e)}),ie(e=>e===!0))}function c1(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let s=i.map(o=>{let a=ws(o,t),u=Zk(a)?a.canMatch(e,n):tn(t,()=>a(e,n));return pr(u)});return Y(s).pipe(Is(),YD(r))}var oa=class{constructor(e){this.segmentGroup=e||null}},aa=class extends Error{constructor(e){super(),this.urlTree=e}};function ds(t){return Oi(new oa(t))}function u1(t){return Oi(new q(4e3,!1))}function l1(t){return Oi(WD(!1,Dt.GuardRejected))}var _g=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[te])return u1(`${e.redirectTo}`);i=i.children[te]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:C,title:N}=i,R=tn(s,()=>a({params:v,data:C,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:N}));if(R instanceof Mn)throw new aa(R);n=R}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new aa(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Mn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new me(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new q(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Ig={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function d1(t,e,n,r,i){let s=ZD(t,e,n);return s.matched?(r=Pk(e,r),c1(r,e,n,i).pipe(ie(o=>o===!0?s:L({},Ig)))):Y(s)}function ZD(t,e,n){if(e.path==="**")return h1(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},Ig):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ak)(n,t,e);if(!i)return L({},Ig);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function h1(t){return{matched:!0,parameters:t.length>0?ND(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function DD(t,e,n,r){return n.length>0&&g1(t,n,r)?{segmentGroup:new me(e,p1(r,new me(n,t.children))),slicedSegments:[]}:n.length===0&&m1(t,n,r)?{segmentGroup:new me(t.segments,f1(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new me(t.segments,t.children),slicedSegments:n}}function f1(t,e,n,r){let i={};for(let s of n)if(Il(t,e,s)&&!r[$t(s)]){let o=new me([],{});i[$t(s)]=o}return L(L({},r),i)}function p1(t,e){let n={};n[te]=e;for(let r of t)if(r.path===""&&$t(r)!==te){let i=new me([],{});n[$t(r)]=i}return n}function g1(t,e,n){return n.some(r=>Il(t,e,r)&&$t(r)!==te)}function m1(t,e,n){return n.some(r=>Il(t,e,r))}function Il(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function y1(t,e,n){return e.length===0&&!t.children[n]}var wg=class{};function v1(t,e,n,r,i,s,o="emptyOnly"){return new Eg(t,e,n,r,i,o,s).recognize()}var _1=31,Eg=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new _g(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new q(4002,`'${e.segmentGroup}'`)}recognize(){let e=DD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ie(({children:n,rootSnapshot:r})=>{let i=new Tt(r,n),s=new gl("",i),o=Ck(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new ps([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),te,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,te,n).pipe(ie(r=>({children:r,rootSnapshot:n})),er(r=>{if(r instanceof aa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof oa?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(ie(o=>o instanceof Tt?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return xe(s).pipe(kr(o=>{let a=r.children[o],u=Ok(n,o);return this.processSegmentGroup(e,u,a,o,i)}),Bh((o,a)=>(o.push(...a),o)),tr(null),jh(),Le(o=>{if(o===null)return ds(r);let a=JD(o);return I1(a),Y(a)}))}processSegment(e,n,r,i,s,o,a){return xe(n).pipe(kr(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,s,o,a).pipe(er(l=>{if(l instanceof oa)return Y(null);throw l}))),Wt(u=>!!u),er(u=>{if(QD(u))return y1(r,i,s)?Y(new wg):ds(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,u){return $t(r)!==o&&(o===te||!Il(i,s,r))?ds(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,u):ds(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=ZD(n,i,s);if(!u)return ds(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>_1&&(this.allowRedirects=!1));let v=new ps(s,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,bD(i),$t(i),i.component??i._loadedComponent??null,i,CD(i)),C=pl(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(C.params),v.data=Object.freeze(C.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(Le(R=>this.processSegment(e,r,n,R.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=d1(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(At(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(At(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=u,C=new ps(m,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,bD(r),$t(r),r.component??r._loadedComponent??null,r,CD(r)),N=pl(C,o,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:k}=DD(n,m,v,l);if(k.length===0&&R.hasChildren())return this.processChildren(h,l,R,C).pipe(ie(V=>new Tt(C,V)));if(l.length===0&&k.length===0)return Y(new Tt(C,[]));let j=$t(r)===s;return this.processSegment(h,l,R,k,j?te:s,!0,C).pipe(ie(V=>new Tt(C,V instanceof Tt?[V]:[])))}))):ds(n)))}getChildConfig(e,n,r){return n.children?Y({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Y({routes:n._loadedRoutes,injector:n._loadedInjector}):a1(e,n,r,this.urlSerializer).pipe(Le(i=>i?this.configLoader.loadChildren(e,n).pipe(Be(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):l1(n))):Y({routes:[],injector:e})}};function I1(t){t.sort((e,n)=>e.value.outlet===te?-1:n.value.outlet===te?1:e.value.outlet.localeCompare(n.value.outlet))}function w1(t){let e=t.value.routeConfig;return e&&e.path===""}function JD(t){let e=[],n=new Set;for(let r of t){if(!w1(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=JD(r.children);e.push(new Tt(r.value,i))}return e.filter(r=>!n.has(r))}function bD(t){return t.data||{}}function CD(t){return t.resolve||{}}function E1(t,e,n,r,i,s){return Le(o=>v1(t,e,n,r,o.extractedUrl,i,s).pipe(ie(({state:a,tree:u})=>ye(L({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function T1(t,e){return Le(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Y(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of XD(u))o.add(l);let a=0;return xe(o).pipe(kr(u=>s.has(u)?D1(u,r,t,e):(u.data=pl(u,u.parent,t).resolve,Y(void 0))),Be(()=>a++),Fi(1),Le(u=>a===o.size?Y(n):It))})}function XD(t){let e=t.children.map(n=>XD(n)).flat();return[t,...e]}function D1(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!zD(i)&&(s[ua]=i.title),b1(s,t,e,r).pipe(ie(o=>(t._resolvedData=o,t.data=pl(t,t.parent,n).resolve,null)))}function b1(t,e,n,r){let i=Xp(t);if(i.length===0)return Y({});let s={};return xe(i).pipe(Le(o=>C1(t[o],e,n,r).pipe(Wt(),Be(a=>{if(a instanceof sa)throw ml(new ys,a);s[o]=a}))),Fi(1),Uh(s),er(o=>QD(o)?It:Oi(o)))}function C1(t,e,n,r){let i=da(e)??r,s=ws(t,i),o=s.resolve?s.resolve(e,n):tn(i,()=>s(e,n));return pr(o)}function Zp(t){return At(e=>{let n=t(e);return n?xe(n).pipe(ie(()=>e)):Y(e)})}var eb=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===te);return r}getResolvedTitleForRoute(n){return n.data[ua]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(S1),providedIn:"root"})}}return t})(),S1=(()=>{class t extends eb{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(W(vD))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),pa=new z("",{providedIn:"root",factory:()=>({})}),A1=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Kw({type:t,selectors:[["ng-component"]],standalone:!0,features:[qT],decls:1,vars:0,template:function(r,i){r&1&&Rp(0,"router-outlet")},dependencies:[Lk],encapsulation:2})}}return t})();function bg(t){let e=t.children&&t.children.map(bg),n=e?ye(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==te&&(n.component=A1),n}var ca=new z(""),Cg=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(Zu)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Y(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=pr(n.loadComponent()).pipe(ie(tb),Be(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Co(()=>{this.componentLoaders.delete(n)})),i=new Ni(r,()=>new at).pipe(Ri());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=R1(r,this.compiler,n,this.onLoadEndListener).pipe(Co(()=>{this.childrenLoaders.delete(r)})),o=new Ni(s,()=>new at).pipe(Ri());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function R1(t,e,n,r){return pr(t.loadChildren()).pipe(ie(tb),Le(i=>i instanceof Po||Array.isArray(i)?Y(i):xe(e.compileModuleAsync(i))),ie(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(ca,[],{optional:!0,self:!0}).flat()),{routes:o.map(bg),injector:s}}))}function N1(t){return t&&typeof t=="object"&&"default"in t}function tb(t){return N1(t)?t.default:t}var Sg=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(M1),providedIn:"root"})}}return t})(),M1=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),nb=new z(""),rb=new z("");function x1(t,e,n){let r=t.get(rb),i=t.get(gt);return t.get(ge).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),P1(t))),{onViewTransitionCreated:u}=r;return u&&tn(t,()=>u({transition:a,from:e,to:n})),o})}function P1(t){return new Promise(e=>{Ap({read:()=>setTimeout(e)},{injector:t})})}var O1=new z(""),Ag=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new at,this.transitionAbortSubject=new at,this.configLoader=O(Cg),this.environmentInjector=O(wt),this.urlSerializer=O(la),this.rootContexts=O(ha),this.location=O(ls),this.inputBindingEnabled=O(_l,{optional:!0})!==null,this.titleStrategy=O(eb),this.options=O(pa,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(Sg),this.createViewTransition=O(nb,{optional:!0}),this.navigationErrorHandler=O(O1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let n=i=>this.events.next(new ag(i)),r=i=>this.events.next(new cg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ye(L(L({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new je({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Jo,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(St(s=>s.id!==0),ie(s=>ye(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),At(s=>{let o=!1,a=!1;return Y(s).pipe(At(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Dt.SupersededByNewNavigation),It;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ye(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new hr(u.id,this.urlSerializer.serialize(u.rawUrl),p,ul.IgnoredSameUrlNavigation)),u.resolve(!1),It}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Y(u).pipe(At(p=>{let m=this.transitions?.getValue();return this.events.next(new vs(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?It:Promise.resolve(p)}),E1(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Be(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ye(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new ll(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:C,extras:N}=u,R=new vs(p,this.urlSerializer.serialize(m),v,C);this.events.next(R);let k=HD(this.rootComponentType).snapshot;return this.currentTransition=s=ye(L({},u),{targetSnapshot:k,urlAfterRedirects:m,extras:ye(L({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Y(s)}else{let p="";return this.events.next(new hr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,ul.IgnoredByUrlHandlingStrategy)),u.resolve(!1),It}}),Be(u=>{let l=new rg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ie(u=>(this.currentTransition=s=ye(L({},u),{guards:$k(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),Xk(this.environmentInjector,u=>this.events.next(u)),Be(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw ml(this.urlSerializer,u.guardsResult);let l=new ig(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),St(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Dt.GuardRejected),!1)),Zp(u=>{if(u.guards.canActivateChecks.length)return Y(u).pipe(Be(l=>{let h=new sg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),At(l=>{let h=!1;return Y(l).pipe(T1(this.paramsInheritanceStrategy,this.environmentInjector),Be({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Dt.NoDataFromResolver)}}))}),Be(l=>{let h=new og(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Zp(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Be(m=>{h.component=m}),ie(()=>{})));for(let m of h.children)p.push(...l(m));return p};return bo(l(u.targetSnapshot.root)).pipe(tr(null),Dn(1))}),Zp(()=>this.afterPreactivation()),At(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?xe(h).pipe(ie(()=>s)):Y(s)}),ie(u=>{let l=Fk(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=ye(L({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Be(()=>{this.events.next(new ra)}),Bk(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Dn(1),Be({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new xn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),Hh(this.transitionAbortSubject.pipe(Be(u=>{throw u}))),Co(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Dt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),er(u=>{if(a=!0,KD(u))this.events.next(new Nn(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),jk(u)?this.events.next(new _s(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let l=new na(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let h=tn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof sa){let{message:p,cancellationCode:m}=ml(this.urlSerializer,h);this.events.next(new Nn(s.id,this.urlSerializer.serialize(s.extractedUrl),p,m)),this.events.next(new _s(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=n.errorHandler(u);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return It}))}))}cancelNavigationTransition(n,r,i){let s=new Nn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function k1(t){return t!==Jo}var L1=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(F1),providedIn:"root"})}}return t})(),Tg=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},F1=(()=>{class t extends Tg{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=lp(t)))(i||t)}})()}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ib=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(V1),providedIn:"root"})}}return t})(),V1=(()=>{class t extends ib{constructor(){super(...arguments),this.location=O(ls),this.urlSerializer=O(la),this.options=O(pa,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(Sg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Mn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=HD(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof vs)this.stateMemento=this.createStateMemento();else if(n instanceof hr)this.rawUrlTree=r.initialUrl;else if(n instanceof ll){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof ra?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Nn&&(n.code===Dt.GuardRejected||n.code===Dt.NoDataFromResolver)?this.restoreHistory(r):n instanceof na?this.restoreHistory(r,!0):n instanceof xn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Mn?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=L(L({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=lp(t)))(i||t)}})()}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Yo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Yo||{});function sb(t,e){t.events.pipe(St(n=>n instanceof xn||n instanceof Nn||n instanceof na||n instanceof hr),ie(n=>n instanceof xn||n instanceof hr?Yo.COMPLETE:(n instanceof Nn?n.code===Dt.Redirect||n.code===Dt.SupersededByNewNavigation:!1)?Yo.REDIRECTING:Yo.FAILED),St(n=>n!==Yo.REDIRECTING),Dn(1)).subscribe(()=>{e()})}function U1(t){throw t}var j1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},B1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},fr=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=O(Ku),this.stateManager=O(ib),this.options=O(pa,{optional:!0})||{},this.pendingTasks=O(ss),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O(Ag),this.urlSerializer=O(la),this.location=O(ls),this.urlHandlingStrategy=O(Sg),this._events=new at,this.errorHandler=this.options.errorHandler||U1,this.navigated=!1,this.routeReuseStrategy=O(L1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O(ca,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(_l,{optional:!0}),this.eventsSubscription=new Ae,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Nn&&r.code!==Dt.Redirect&&r.code!==Dt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof xn)this.navigated=!0;else if(r instanceof _s){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||k1(i.source)},o);this.scheduleNavigation(a,Jo,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}H1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Jo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(bg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=UD(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return jD(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=ea(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Jo,null,r)}navigate(n,r={skipLocationChange:!1}){return $1(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=L({},j1):r===!1?i=L({},B1):i=r,ea(n))return _D(this.currentUrlTree,n,i);let s=this.parseUrl(n);return _D(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return sb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function $1(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new q(4008,!1)}function H1(t){return!(t instanceof ra)&&!(t instanceof _s)}var vl=class{};var q1=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(St(n=>n instanceof xn),kr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Wu(s.providers,n,`Route: ${s.path}`));let o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return xe(i).pipe(ki())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=Y(null);let s=i.pipe(Le(o=>o===null?Y(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return xe([s,o]).pipe(ki())}else return s})}static{this.\u0275fac=function(r){return new(r||t)(W(fr),W(Zu),W(wt),W(vl),W(Cg))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ob=new z(""),z1=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof vs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof xn?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof hr&&n.code===ul.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof dl&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new dl(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){lT()}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function m6(t,...e){return en([{provide:ca,multi:!0,useValue:t},[],{provide:Kr,useFactory:ab,deps:[fr]},{provide:Yu,multi:!0,useFactory:cb},e.map(n=>n.\u0275providers)])}function ab(t){return t.routerState.root}function ga(t,e){return{\u0275kind:t,\u0275providers:e}}function cb(){let t=O(et);return e=>{let n=t.get(qr);if(e!==n.components[0])return;let r=t.get(fr),i=t.get(ub);t.get(Rg)===1&&r.initialNavigation(),t.get(lb,null,ne.Optional)?.setUpPreloading(),t.get(ob,null,ne.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ub=new z("",{factory:()=>new at}),Rg=new z("",{providedIn:"root",factory:()=>1});function G1(){return ga(2,[{provide:Rg,useValue:0},{provide:Qu,multi:!0,deps:[et],useFactory:e=>{let n=e.get(oD,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(fr),s=e.get(ub);sb(i,()=>{r(!0)}),e.get(Ag).afterPreactivation=()=>(r(!0),s.closed?Y(void 0):s),i.initialNavigation()}))}}])}function W1(){return ga(3,[{provide:Qu,multi:!0,useFactory:()=>{let e=O(fr);return()=>{e.setUpLocationChangeListener()}}},{provide:Rg,useValue:2}])}var lb=new z("");function K1(t){return ga(0,[{provide:lb,useExisting:q1},{provide:vl,useExisting:t}])}function Q1(){return ga(8,[TD,{provide:_l,useExisting:TD}])}function Y1(t){let e=[{provide:nb,useValue:x1},{provide:rb,useValue:L({skipNextTransition:!!t?.skipInitialTransition},t)}];return ga(9,e)}var SD=new z("ROUTER_FORROOT_GUARD"),Z1=[ls,{provide:la,useClass:ys},fr,ha,{provide:Kr,useFactory:ab,deps:[fr]},Cg,[]],y6=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[Z1,[],{provide:ca,multi:!0,useValue:n},{provide:SD,useFactory:tL,deps:[[fr,new tt,new Yf]]},{provide:pa,useValue:r||{}},r?.useHash?X1():eL(),J1(),r?.preloadingStrategy?K1(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?nL(r):[],r?.bindToComponentInputs?Q1().\u0275providers:[],r?.enableViewTransitions?Y1().\u0275providers:[],rL()]}}static forChild(n){return{ngModule:t,providers:[{provide:ca,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||t)(W(SD,8))}}static{this.\u0275mod=Vo({type:t})}static{this.\u0275inj=Lo({})}}return t})();function J1(){return{provide:ob,useFactory:()=>{let t=O(lD),e=O(ge),n=O(pa),r=O(Ag),i=O(la);return n.scrollOffset&&t.setOffset(n.scrollOffset),new z1(i,r,t,e,n)}}}function X1(){return{provide:zr,useClass:cD}}function eL(){return{provide:zr,useClass:Vp}}function tL(t){return"guarded"}function nL(t){return[t.initialNavigation==="disabled"?W1().\u0275providers:[],t.initialNavigation==="enabledBlocking"?G1().\u0275providers:[]]}var AD=new z("");function rL(){return[{provide:AD,useFactory:cb},{provide:Yu,multi:!0,useExisting:AD}]}var hb=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},iL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},fb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,v=l&63;u||(v=64,o||(m=64)),r.push(n[h],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new Mg;let m=s<<2|a>>4;if(r.push(m),l!==64){let v=a<<4&240|l>>2;if(r.push(v),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Mg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},sL=function(t){let e=hb(t);return fb.encodeByteArray(e,!0)},ma=function(t){return sL(t).replace(/\./g,"")},Pg=function(t){try{return fb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function oL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var aL=()=>oL().__FIREBASE_DEFAULTS__,cL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Pg(t[1]);return e&&JSON.parse(e)},El=()=>{try{return aL()||cL()||uL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Og=t=>{var e,n;return(n=(e=El())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Tl=t=>{let e=Og(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},kg=()=>{var t;return(t=El())===null||t===void 0?void 0:t.config},Lg=t=>{var e;return(e=El())===null||e===void 0?void 0:e[`_${t}`]};var wl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Dl(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ma(JSON.stringify(n)),ma(JSON.stringify(o)),""].join(".")}function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function lL(){var t;let e=(t=El())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mb(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vb(){let t=ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _b(){return!lL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fg(){try{return typeof indexedDB=="object"}catch{return!1}}function Ib(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var dL="FirebaseError",ht=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=dL,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pn.prototype.create)}},Pn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?hL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ht(i,a,r)}};function hL(t,e){return t.replace(fL,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var fL=/\{\$([^}]+)}/g;function wb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(db(s)&&db(o)){if(!Qr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function db(t){return t!==null&&typeof t=="object"}function ya(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Es(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ts(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Eb(t,e){let n=new xg(t,e);return n.subscribe.bind(n)}var xg=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");pL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ng),i.error===void 0&&(i.error=Ng),i.complete===void 0&&(i.complete=Ng);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function pL(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ng(){}var I6=4*60*60*1e3;function De(t){return t&&t._delegate?t._delegate:t}var mt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Yr="[DEFAULT]";var Vg=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new wl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mL(e))try{this.getOrInitializeService({instanceIdentifier:Yr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Yr){return this.instances.has(e)}getOptions(e=Yr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yr){return this.component?this.component.multipleInstances?e:Yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function gL(t){return t===Yr?void 0:t}function mL(t){return t.instantiationMode==="EAGER"}var bl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Vg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var yL=[],ae=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ae||{}),vL={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},_L=ae.INFO,IL={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},wL=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=IL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},gr=class{constructor(e){this.name=e,this._logLevel=_L,this._logHandler=wL,this._userLogHandler=null,yL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}};var EL=(t,e)=>e.some(n=>t instanceof n),Tb,Db;function TL(){return Tb||(Tb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DL(){return Db||(Db=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var bb=new WeakMap,jg=new WeakMap,Cb=new WeakMap,Ug=new WeakMap,$g=new WeakMap;function bL(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(on(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&bb.set(n,t)}).catch(()=>{}),$g.set(e,t),e}function CL(t){if(jg.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});jg.set(t,e)}var Bg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Cb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return on(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Sb(t){Bg=t(Bg)}function SL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Cl(this),e,...n);return Cb.set(r,e.sort?e.sort():[e]),on(r)}:DL().includes(t)?function(...e){return t.apply(Cl(this),e),on(bb.get(this))}:function(...e){return on(t.apply(Cl(this),e))}}function AL(t){return typeof t=="function"?SL(t):(t instanceof IDBTransaction&&CL(t),EL(t,TL())?new Proxy(t,Bg):t)}function on(t){if(t instanceof IDBRequest)return bL(t);if(Ug.has(t))return Ug.get(t);let e=AL(t);return e!==t&&(Ug.set(t,e),$g.set(e,t)),e}var Cl=t=>$g.get(t);function Rb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=on(o);return r&&o.addEventListener("upgradeneeded",u=>{r(on(o.result),u.oldVersion,u.newVersion,on(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var RL=["get","getKey","getAll","getAllKeys","count"],NL=["put","add","delete","clear"],Hg=new Map;function Ab(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hg.get(e))return Hg.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=NL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||RL.includes(n)))return;let s=function(o,...a){return _(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Hg.set(e,s),s}Sb(t=>ye(L({},t),{get:(e,n,r)=>Ab(e,n)||t.get(e,n,r),has:(e,n)=>!!Ab(e,n)||t.has(e,n)}));var zg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ML(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function ML(t){let e=t.getComponent();return e?.type==="VERSION"}var Gg="@firebase/app",Nb="0.10.13";var On=new gr("@firebase/app"),xL="@firebase/app-compat",PL="@firebase/analytics-compat",OL="@firebase/analytics",kL="@firebase/app-check-compat",LL="@firebase/app-check",FL="@firebase/auth",VL="@firebase/auth-compat",UL="@firebase/database",jL="@firebase/data-connect",BL="@firebase/database-compat",$L="@firebase/functions",HL="@firebase/functions-compat",qL="@firebase/installations",zL="@firebase/installations-compat",GL="@firebase/messaging",WL="@firebase/messaging-compat",KL="@firebase/performance",QL="@firebase/performance-compat",YL="@firebase/remote-config",ZL="@firebase/remote-config-compat",JL="@firebase/storage",XL="@firebase/storage-compat",eF="@firebase/firestore",tF="@firebase/vertexai-preview",nF="@firebase/firestore-compat",rF="firebase",iF="10.14.1";var Wg="[DEFAULT]",sF={[Gg]:"fire-core",[xL]:"fire-core-compat",[OL]:"fire-analytics",[PL]:"fire-analytics-compat",[LL]:"fire-app-check",[kL]:"fire-app-check-compat",[FL]:"fire-auth",[VL]:"fire-auth-compat",[UL]:"fire-rtdb",[jL]:"fire-data-connect",[BL]:"fire-rtdb-compat",[$L]:"fire-fn",[HL]:"fire-fn-compat",[qL]:"fire-iid",[zL]:"fire-iid-compat",[GL]:"fire-fcm",[WL]:"fire-fcm-compat",[KL]:"fire-perf",[QL]:"fire-perf-compat",[YL]:"fire-rc",[ZL]:"fire-rc-compat",[JL]:"fire-gcs",[XL]:"fire-gcs-compat",[eF]:"fire-fst",[nF]:"fire-fst-compat",[tF]:"fire-vertex","fire-js":"fire-js",[rF]:"fire-js-all"};var va=new Map,oF=new Map,Kg=new Map;function Mb(t,e){try{t.container.addComponent(e)}catch(n){On.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function an(t){let e=t.name;if(Kg.has(e))return On.debug(`There were multiple attempts to register component ${e}.`),!1;Kg.set(e,t);for(let n of va.values())Mb(n,t);for(let n of oF.values())Mb(n,t);return!0}function Zr(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ht(t){return t.settings!==void 0}var aF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new Pn("app","Firebase",aF);var Qg=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}};var cn=iF;function Jg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Wg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw mr.create("bad-app-name",{appName:String(i)});if(n||(n=kg()),!n)throw mr.create("no-options");let s=va.get(i);if(s){if(Qr(n,s.options)&&Qr(r,s.config))return s;throw mr.create("duplicate-app",{appName:i})}let o=new bl(i);for(let u of Kg.values())o.addComponent(u);let a=new Qg(n,r,o);return va.set(i,a),a}function yr(t=Wg){let e=va.get(t);if(!e&&t===Wg&&kg())return Jg();if(!e)throw mr.create("no-app",{appName:t});return e}function Sl(){return Array.from(va.values())}function Ce(t,e,n){var r;let i=(r=sF[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),On.warn(a.join(" "));return}an(new mt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var cF="firebase-heartbeat-database",uF=1,_a="firebase-heartbeat-store",qg=null;function kb(){return qg||(qg=Rb(cF,uF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_a)}catch(n){console.warn(n)}}}}).catch(t=>{throw mr.create("idb-open",{originalErrorMessage:t.message})})),qg}function lF(t){return _(this,null,function*(){try{let n=(yield kb()).transaction(_a),r=yield n.objectStore(_a).get(Lb(t));return yield n.done,r}catch(e){if(e instanceof ht)On.warn(e.message);else{let n=mr.create("idb-get",{originalErrorMessage:e?.message});On.warn(n.message)}}})}function xb(t,e){return _(this,null,function*(){try{let r=(yield kb()).transaction(_a,"readwrite");yield r.objectStore(_a).put(e,Lb(t)),yield r.done}catch(n){if(n instanceof ht)On.warn(n.message);else{let r=mr.create("idb-set",{originalErrorMessage:n?.message});On.warn(r.message)}}})}function Lb(t){return`${t.name}!${t.options.appId}`}var dF=1024,hF=30*24*60*60*1e3,Yg=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Zg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Pb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=hF}),this._storage.overwrite(this._heartbeatsCache))}catch(r){On.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Pb(),{heartbeatsToSend:r,unsentEntries:i}=fF(this._heartbeatsCache.heartbeats),s=ma(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return On.warn(n),""}})}};function Pb(){return new Date().toISOString().substring(0,10)}function fF(t,e=dF){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Ob(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ob(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Zg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Fg()?Ib().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield lF(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return xb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return xb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Ob(t){return ma(JSON.stringify({version:2,heartbeats:t})).length}function pF(t){an(new mt("platform-logger",e=>new zg(e),"PRIVATE")),an(new mt("heartbeat",e=>new Yg(e),"PRIVATE")),Ce(Gg,Nb,t),Ce(Gg,Nb,"esm2017"),Ce("fire-js","")}pF("");var gF="firebase",mF="10.14.1";Ce(gF,mF,"app");var vr=new lr("ANGULARFIRE2_VERSION");function Ia(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var bs=(t,e)=>{let n=e?[e]:Sl(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Xr=class{constructor(){return bs(yF)}},yF="app-check";function Ds(){}var Al=class{zone;delegate;constructor(e,n=Lh){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Xg=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ds,{},Ds,Ds)),n.pipe(Be({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ei=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Al(Zone.current)),this.insideAngular=n.run(()=>new Al(Zone.current,kh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(W(ge))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Rl(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function vF(t){return Rl().ngZone.runOutsideAngular(()=>t())}function Jr(t){return Rl().ngZone.run(()=>t())}function _F(t){return IF(Rl())(t)}function IF(t){return function(n){return n=n.lift(new Xg(t.ngZone)),n.pipe(Xn(t.outsideAngular),Jn(t.insideAngular))}}var wF=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Jr(()=>t.apply(void 0,r))},Pe=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Jr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ds,{},Ds,Ds))),r[s]=wF(r[s],n));let i=vF(()=>t.apply(this,r));if(!e)if(i instanceof ue){let s=Rl();return i.pipe(Xn(s.outsideAngular),Jn(s.insideAngular))}else return Jr(()=>i);return i instanceof ue?i.pipe(_F):i instanceof Promise?Jr(()=>new Promise((s,o)=>i.then(a=>Jr(()=>s(a)),a=>Jr(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Jr(()=>i)};var kn=class{constructor(e){return e}},ti=class{constructor(){return Sl()}};function EF(t){return t&&t.length===1?t[0]:new kn(yr())}var em=new z("angularfire2._apps"),TF={provide:kn,useFactory:EF,deps:[[new tt,em]]},DF={provide:ti,deps:[[new tt,em]]};function bF(t){return(e,n)=>{let r=n.get(nn);Ce("angularfire",vr.full,"core"),Ce("angularfire",vr.full,"app"),Ce("angular",zT.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new kn(i)}}function o3(t,...e){return en([TF,DF,{provide:em,useFactory:bF(t),multi:!0,deps:[ge,et,ei,...e]}])}var a3=Pe(Jg,!0);function Xb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var eC=Xb,tC=new Pn("auth","Firebase",Xb());var kl=new gr("@firebase/auth");function CF(t,...e){kl.logLevel<=ae.WARN&&kl.warn(`Auth (${cn}): ${t}`,...e)}function Ml(t,...e){kl.logLevel<=ae.ERROR&&kl.error(`Auth (${cn}): ${t}`,...e)}function ln(t,...e){throw Tm(t,...e)}function ni(t,...e){return Tm(t,...e)}function nC(t,e,n){let r=Object.assign(Object.assign({},eC()),{[e]:n});return new Pn("auth","Firebase",r).create(e,{appName:t.name})}function Vn(t){return nC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tm(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tC.create(t,...e)}function H(t,e,...n){if(!t)throw Tm(e,...n)}function Ln(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ml(e),new Error(e)}function Ir(t,e){t||Ln(e)}function im(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function SF(){return Fb()==="http:"||Fb()==="https:"}function Fb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function AF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SF()||mb()||"connection"in navigator)?navigator.onLine:!0}function RF(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ri=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ir(n>e,"Short delay should be less than long delay!"),this.isMobile=pb()||yb()}get(){return AF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Dm(t,e){Ir(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Ll=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var NF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var MF=new ri(3e4,6e4);function Un(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function jn(s,o,a,u){return _(this,arguments,function*(t,e,n,r,i={}){return rC(t,i,()=>_(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=ya(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let v=Object.assign({method:e,headers:m},l);return gb()||(v.referrerPolicy="no-referrer"),Ll.fetch()(iC(t,t.config.apiHost,n,p),v)}))})}function rC(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},NF),e);try{let i=new sm(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Nl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Nl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Nl(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw nC(t,h,l);ln(t,h)}}catch(i){if(i instanceof ht)throw i;ln(t,"network-request-failed",{message:String(i)})}})}function Aa(s,o,a,u){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield jn(t,e,n,r,i);return"mfaPendingCredential"in l&&ln(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function iC(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Dm(t.config,i):`${t.config.apiScheme}://${i}`}function xF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var sm=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ni(this.auth,"network-request-failed")),MF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Nl(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ni(t,e,r);return i.customData._tokenResponse=n,i}function Vb(t){return t!==void 0&&t.enterprise!==void 0}var om=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return xF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function PF(t,e){return _(this,null,function*(){return jn(t,"GET","/v2/recaptchaConfig",Un(t,e))})}function OF(t,e){return _(this,null,function*(){return jn(t,"POST","/v1/accounts:delete",e)})}function sC(t,e){return _(this,null,function*(){return jn(t,"POST","/v1/accounts:lookup",e)})}function wa(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function bm(t,e=!1){return _(this,null,function*(){let n=De(t),r=yield n.getIdToken(e),i=Cm(r);H(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:wa(tm(i.auth_time)),issuedAtTime:wa(tm(i.iat)),expirationTime:wa(tm(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function tm(t){return Number(t)*1e3}function Cm(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ml("JWT malformed, contained fewer than 3 sections"),null;try{let i=Pg(n);return i?JSON.parse(i):(Ml("Failed to decode base64 JWT payload"),null)}catch(i){return Ml("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Ub(t){let e=Cm(t);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ta(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof ht&&kF(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function kF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var am=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Da=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wa(this.lastLoginAt),this.creationTime=wa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Fl(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Ta(t,sC(n,{idToken:r}));H(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?oC(s.providerUserInfo):[],a=LF(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Da(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function Sm(t){return _(this,null,function*(){let e=De(t);yield Fl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function LF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function oC(t){return t.map(e=>{var{providerId:n}=e,r=Fh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function FF(t,e){return _(this,null,function*(){let n=yield rC(t,{},()=>_(this,null,function*(){let r=ya({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=iC(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ll.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function VF(t,e){return _(this,null,function*(){return jn(t,"POST","/v2/accounts:revokeToken",Un(t,e))})}var Ea=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ub(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){H(e.length!==0,"internal-error");let n=Ub(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield FF(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(H(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(H(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(H(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Ln("not implemented")}};function _r(t,e){H(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Cs=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Fh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new am(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Da(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield Ta(this,this.stsTokenManager.getToken(this.auth,e));return H(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return bm(this,e)}reload(){return Sm(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Fl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Ht(this.auth.app))return Promise.reject(Vn(this.auth));let e=yield this.getIdToken();return yield Ta(this,OF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,j=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:V,emailVerified:$,isAnonymous:_e,providerData:K,stsTokenManager:E}=n;H(V&&E,e,"internal-error");let y=Ea.fromJSON(this.name,E);H(typeof V=="string",e,"internal-error"),_r(p,e.name),_r(m,e.name),H(typeof $=="boolean",e,"internal-error"),H(typeof _e=="boolean",e,"internal-error"),_r(v,e.name),_r(C,e.name),_r(N,e.name),_r(R,e.name),_r(k,e.name),_r(j,e.name);let I=new t({uid:V,auth:e,email:m,emailVerified:$,displayName:p,isAnonymous:_e,photoURL:C,phoneNumber:v,tenantId:N,stsTokenManager:y,createdAt:k,lastLoginAt:j});return K&&Array.isArray(K)&&(I.providerData=K.map(T=>Object.assign({},T))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new Ea;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Fl(s),s})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];H(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?oC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ea;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Da(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var jb=new Map;function Fn(t){Ir(t instanceof Function,"Expected a class definition");let e=jb.get(t);return e?(Ir(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,jb.set(t,e),e)}var UF=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),cm=UF;function xl(t,e,n){return`firebase:${t}:${e}:${n}`}var Vl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=xl(this.userKey,i.apiKey,s),this.fullPersistenceKey=xl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Cs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(Fn(cm),e,r);let i=(yield Promise.all(n.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Fn(cm),o=xl(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=Cs._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>_(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function Bb(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hC(e))return"Blackberry";if(fC(e))return"Webos";if(cC(e))return"Safari";if((e.includes("chrome/")||uC(e))&&!e.includes("edge/"))return"Chrome";if(dC(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function aC(t=ze()){return/firefox\//i.test(t)}function cC(t=ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uC(t=ze()){return/crios\//i.test(t)}function lC(t=ze()){return/iemobile/i.test(t)}function dC(t=ze()){return/android/i.test(t)}function hC(t=ze()){return/blackberry/i.test(t)}function fC(t=ze()){return/webos/i.test(t)}function Am(t=ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function jF(t=ze()){var e;return Am(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function BF(){return vb()&&document.documentMode===10}function pC(t=ze()){return Am(t)||dC(t)||fC(t)||hC(t)||/windows phone/i.test(t)||lC(t)}function gC(t,e=[]){let n;switch(t){case"Browser":n=Bb(ze());break;case"Worker":n=`${Bb(ze())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cn}/${r}`}var um=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function $F(n){return _(this,arguments,function*(t,e={}){return jn(t,"GET","/v2/passwordPolicy",Un(t,e))})}var HF=6,lm=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:HF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var dm=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ul(this),this.idTokenSubscription=new Ul(this),this.beforeStateQueue=new um(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fn(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Vl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield sC(this,{idToken:e}),r=yield Cs._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(Ht(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Fl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=RF()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Ht(this.app))return Promise.reject(Vn(this));let n=e?De(e):null;return n&&H(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Ht(this.app)?Promise.reject(Vn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ht(this.app)?Promise.reject(Vn(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Fn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield $F(this),n=new lm(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield VF(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Fn(e)||this._popupRedirectResolver;H(n,this,"argument-error"),this.redirectPersistenceManager=yield Vl.create(this,[Fn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&CF(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function si(t){return De(t)}var Ul=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Eb(n=>this.observer=n)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Gl={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qF(t){Gl=t}function mC(t){return Gl.loadJS(t)}function zF(){return Gl.recaptchaEnterpriseScript}function GF(){return Gl.gapiScript}function yC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var WF="recaptcha-enterprise",KF="NO_RECAPTCHA",hm=class{constructor(e){this.type=WF,this.auth=si(e)}verify(e="verify",n=!1){return _(this,null,function*(){function r(s){return _(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>_(this,null,function*(){PF(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new om(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;Vb(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(KF)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Vb(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=zF();u.length!==0&&(u+=a),mC(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function $b(t,e,n,r=!1){return _(this,null,function*(){let i=new hm(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function fm(t,e,n,r){return _(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield $b(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>_(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield $b(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function Rm(t,e){let n=Zr(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Qr(s,e??{}))return i;ln(i,"already-initialized")}return n.initialize({options:e})}function QF(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Fn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Nm(t,e,n){let r=si(t);H(r._canInitEmulator,r,"emulator-config-failed"),H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=vC(e),{host:o,port:a}=YF(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||ZF()}function vC(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function YF(t){let e=vC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Hb(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Hb(o)}}}function Hb(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function ZF(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var ba=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ln("not implemented")}_getIdTokenResponse(e){return Ln("not implemented")}_linkToIdToken(e,n){return Ln("not implemented")}_getReauthenticationResolver(e){return Ln("not implemented")}};function JF(t,e){return _(this,null,function*(){return jn(t,"POST","/v1/accounts:signUp",e)})}function XF(t,e){return _(this,null,function*(){return Aa(t,"POST","/v1/accounts:signInWithPassword",Un(t,e))})}function eV(t,e){return _(this,null,function*(){return jn(t,"POST","/v1/accounts:sendOobCode",Un(t,e))})}function tV(t,e){return _(this,null,function*(){return eV(t,e)})}function nV(t,e){return _(this,null,function*(){return Aa(t,"POST","/v1/accounts:signInWithEmailLink",Un(t,e))})}function rV(t,e){return _(this,null,function*(){return Aa(t,"POST","/v1/accounts:signInWithEmailLink",Un(t,e))})}var Ca=class t extends ba{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fm(e,n,"signInWithPassword",XF);case"emailLink":return nV(e,{email:this._email,oobCode:this._password});default:ln(e,"internal-error")}})}_linkToIdToken(e,n){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fm(e,r,"signUpPassword",JF);case"emailLink":return rV(e,{idToken:n,email:this._email,oobCode:this._password});default:ln(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function nm(t,e){return _(this,null,function*(){return Aa(t,"POST","/v1/accounts:signInWithIdp",Un(t,e))})}function iV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sV(t){let e=Es(Ts(t)).link,n=e?Es(Ts(e)).deep_link_id:null,r=Es(Ts(t)).deep_link_id;return(r?Es(Ts(r)).link:null)||r||n||e||t}var jl=class t{constructor(e){var n,r,i,s,o,a;let u=Es(Ts(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=iV((i=u.mode)!==null&&i!==void 0?i:null);H(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=sV(e);try{return new t(n)}catch{return null}}};var _C=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Ca._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=jl.parseLink(r);return H(i,"argument-error"),Ca._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Bl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var pm=class extends Bl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function oV(t,e){return _(this,null,function*(){return Aa(t,"POST","/v1/accounts:signUp",Un(t,e))})}var Ss=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let s=yield Cs._fromIdTokenResponse(e,r,i),o=qb(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=qb(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function qb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var gm=class t extends ht{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function IC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?gm._fromErrorAndOperation(t,s,e,r):s})}function aV(t,e,n=!1){return _(this,null,function*(){let r=yield Ta(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Ss._forOperation(t,"link",r)})}function cV(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(Ht(r.app))return Promise.reject(Vn(r));let i="reauthenticate";try{let s=yield Ta(t,IC(r,i,e,t),n);H(s.idToken,r,"internal-error");let o=Cm(s.idToken);H(o,r,"internal-error");let{sub:a}=o;return H(t.uid===a,r,"user-mismatch"),Ss._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ln(r,"user-mismatch"),s}})}function wC(t,e,n=!1){return _(this,null,function*(){if(Ht(t.app))return Promise.reject(Vn(t));let r="signIn",i=yield IC(t,r,e),s=yield Ss._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Mm(t,e){return _(this,null,function*(){return wC(si(t),e)})}function uV(t,e,n){var r;H(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),H(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(H(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(H(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}function EC(t){return _(this,null,function*(){let e=si(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function xm(t,e,n){return _(this,null,function*(){if(Ht(t.app))return Promise.reject(Vn(t));let r=si(t),o=yield fm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oV).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&EC(t),u}),a=yield Ss._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function Pm(t,e,n){return Ht(t.app)?Promise.reject(Vn(t)):Mm(De(t),_C.credential(e,n)).catch(r=>_(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&EC(t),r}))}function Om(t,e){return _(this,null,function*(){let n=De(t),i={requestType:"VERIFY_EMAIL",idToken:yield t.getIdToken()};e&&uV(n.auth,i,e);let{email:s}=yield tV(n.auth,i);s!==t.email&&(yield t.reload())})}function km(t,e,n,r){return De(t).onIdTokenChanged(e,n,r)}function Lm(t,e,n){return De(t).beforeAuthStateChanged(e,n)}function Fm(t){return De(t).signOut()}var $l="__sak";var Hl=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($l,"1"),this.storage.removeItem($l),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var lV=1e3,dV=10,hV=(()=>{class t extends Hl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pC(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);BF()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,dV):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},lV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield Yn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield Yn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield Yn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),TC=hV;var fV=(()=>{class t extends Hl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Vm=fV;function pV(t){return Promise.all(t.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var gV=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,o)})),l=yield pV(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function DC(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var mm=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=DC("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function un(){return window}function mV(t){un().location.href=t}function bC(){return typeof un().WorkerGlobalScope<"u"&&typeof un().importScripts=="function"}function yV(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function vV(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _V(){return bC()?self:null}var CC="firebaseLocalStorageDb",IV=1,ql="firebaseLocalStorage",SC="fbase_key",ii=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Wl(t,e){return t.transaction([ql],e?"readwrite":"readonly").objectStore(ql)}function wV(){let t=indexedDB.deleteDatabase(CC);return new ii(t).toPromise()}function ym(){let t=indexedDB.open(CC,IV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(ql,{keyPath:SC})}catch(i){n(i)}}),t.addEventListener("success",()=>_(this,null,function*(){let r=t.result;r.objectStoreNames.contains(ql)?e(r):(r.close(),yield wV(),e(yield ym()))}))})}function zb(t,e,n){return _(this,null,function*(){let r=Wl(t,!0).put({[SC]:e,value:n});return new ii(r).toPromise()})}function EV(t,e){return _(this,null,function*(){let n=Wl(t,!1).get(e),r=yield new ii(n).toPromise();return r===void 0?null:r.value})}function Gb(t,e){let n=Wl(t,!0).delete(e);return new ii(n).toPromise()}var TV=800,DV=3,bV=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield ym(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>DV)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return bC()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=gV._getInstance(_V()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield yV(),!this.activeServiceWorker)return;this.sender=new mm(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||vV()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield ym();return yield zb(n,$l,"1"),yield Gb(n,$l),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>zb(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>EV(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>Gb(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(s=>{let o=Wl(s,!1).getAll();return new ii(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),TV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),AC=bV;var g3=yC("rcb"),m3=new ri(3e4,6e4);function CV(t,e){return e?Fn(e):(H(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Sa=class extends ba{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nm(e,this._buildIdpRequest())}_linkToIdToken(e,n){return nm(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return nm(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function SV(t){return wC(t.auth,new Sa(t),t.bypassAuthState)}function AV(t){let{auth:e,user:n}=t;return H(n,e,"internal-error"),cV(n,new Sa(t),t.bypassAuthState)}function RV(t){return _(this,null,function*(){let{auth:e,user:n}=t;return H(n,e,"internal-error"),aV(n,new Sa(t),t.bypassAuthState)})}var vm=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SV;case"linkViaPopup":case"linkViaRedirect":return RV;case"reauthViaPopup":case"reauthViaRedirect":return AV;default:ln(this.auth,"internal-error")}}resolve(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var y3=new ri(2e3,1e4);var NV="pendingRedirect",Pl=new Map,_m=class t extends vm{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=Pl.get(this.auth._key());if(!e){try{let r=(yield MV(this.resolver,this.auth))?yield Yn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Pl.set(this.auth._key(),e)}return this.bypassAuthState||Pl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Yn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Yn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function MV(t,e){return _(this,null,function*(){let n=OV(e),r=PV(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function xV(t,e){Pl.set(t._key(),e)}function PV(t){return Fn(t._redirectPersistence)}function OV(t){return xl(NV,t.config.apiKey,t.name)}function kV(t,e,n=!1){return _(this,null,function*(){if(Ht(t.app))return Promise.reject(Vn(t));let r=si(t),i=CV(r,e),o=yield new _m(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var LV=10*60*1e3,Im=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!RC(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ni(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LV&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wb(e))}saveEventToCache(e){this.cachedEventUids.add(Wb(e)),this.lastProcessedEventTime=Date.now()}};function Wb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function RC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function FV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RC(t);default:return!1}}function VV(n){return _(this,arguments,function*(t,e={}){return jn(t,"GET","/v1/projects",e)})}var UV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jV=/^https?/;function BV(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield VV(t);for(let n of e)try{if($V(n))return}catch{}ln(t,"unauthorized-domain")})}function $V(t){let e=im(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!jV.test(n))return!1;if(UV.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var HV=new ri(3e4,6e4);function Kb(){let t=un().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function qV(t){return new Promise((e,n)=>{var r,i,s;function o(){Kb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kb(),n(ni(t,"network-request-failed"))},timeout:HV.get()})}if(!((i=(r=un().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=un().gapi)===null||s===void 0)&&s.load)o();else{let a=yC("iframefcb");return un()[a]=()=>{gapi.load?o():n(ni(t,"network-request-failed"))},mC(`${GF()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Ol=null,e})}var Ol=null;function zV(t){return Ol=Ol||qV(t),Ol}var GV=new ri(5e3,15e3),WV="__/auth/iframe",KV="emulator/auth/iframe",QV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZV(t){let e=t.config;H(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Dm(e,KV):`https://${t.config.authDomain}/${WV}`,r={apiKey:e.apiKey,appName:t.name,v:cn},i=YV.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ya(r).slice(1)}`}function JV(t){return _(this,null,function*(){let e=yield zV(t),n=un().gapi;return H(n,t,"internal-error"),e.open({where:document.body,url:ZV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QV,dontclear:!0},r=>new Promise((i,s)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=ni(t,"network-request-failed"),a=un().setTimeout(()=>{s(o)},GV.get());function u(){un().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var XV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eU=500,tU=600,nU="_blank",rU="http://localhost",zl=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function iU(t,e,n,r=eU,i=tU){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},XV),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ze().toLowerCase();n&&(a=uC(l)?nU:n),aC(l)&&(e=e||rU,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[v,C])=>`${m}${v}=${C},`,"");if(jF(l)&&a!=="_self")return sU(e||"",a),new zl(null);let p=window.open(e||"",a,h);H(p,t,"popup-blocked");try{p.focus()}catch{}return new zl(p)}function sU(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var oU="__/auth/handler",aU="emulator/auth/handler",cU=encodeURIComponent("fac");function Qb(t,e,n,r,i,s){return _(this,null,function*(){H(t.config.authDomain,t,"auth-domain-config-required"),H(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:cn,eventId:i};if(e instanceof Bl){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",wb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof pm){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${cU}=${encodeURIComponent(u)}`:"";return`${uU(t)}?${ya(a).slice(1)}${l}`})}function uU({config:t}){return t.emulator?Dm(t,aU):`https://${t.authDomain}/${oU}`}var rm="webStorageSupport",wm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vm,this._completeRedirectFn=kV,this._overrideRedirectResult=xV}_openPopup(e,n,r,i){return _(this,null,function*(){var s;Ir((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield Qb(e,n,r,im(),i);return iU(e,o,DC())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let s=yield Qb(e,n,r,im(),i);return mV(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ir(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield JV(e),r=new Im(e);return n.register("authEvent",i=>(H(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(rm,{type:rm},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[rm];o!==void 0&&n(!!o),ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=BV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pC()||cC()||Am()}},NC=wm;var Yb="@firebase/auth",Zb="1.7.9";var Em=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function lU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dU(t){an(new mt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;H(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gC(t)},l=new dm(r,i,s,u);return QF(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),an(new mt("auth-internal",e=>{let n=si(e.getProvider("auth").getImmediate());return(r=>new Em(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ce(Yb,Zb,lU(t)),Ce(Yb,Zb,"esm2017")}var hU=5*60,fU=Lg("authIdTokenMaxAge")||hU,Jb=null,pU=t=>e=>_(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>fU)return;let i=n?.token;Jb!==i&&(Jb=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Um(t=yr()){let e=Zr(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Rm(t,{popupRedirectResolver:NC,persistence:[AC,TC,Vm]}),r=Lg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=pU(s.toString());Lm(n,o,()=>o(n.currentUser)),km(n,a=>o(a))}}let i=Og("auth");return i&&Nm(n,`http://${i}`),n}function gU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}qF({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=ni("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",gU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dU("Browser");var MC="auth",oi=class{constructor(e){return e}},Ra=class{constructor(){return bs(MC)}};var jm=new z("angularfire2.auth-instances");function ij(t,e){let n=Ia(MC,t,e);return n&&new oi(n)}function sj(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new oi(r)}}var oj={provide:Ra,deps:[[new tt,jm]]},aj={provide:oi,useFactory:ij,deps:[[new tt,jm],kn]};function e8(t,...e){return Ce("angularfire",vr.full,"auth"),en([aj,oj,{provide:jm,useFactory:sj(t),multi:!0,deps:[ge,et,ei,ti,[new tt,Xr],...e]}])}var xC=Pe(xm,!0);var t8=Pe(Um,!0);var PC=Pe(Om,!0);var OC=Pe(Pm,!0);var kC=Pe(Fm,!0);var LC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},FC={};var wr,Bm;(function(){var t;function e(E,y){function I(){}I.prototype=y.prototype,E.D=y.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(T,D,S){for(var w=Array(arguments.length-2),_n=2;_n<arguments.length;_n++)w[_n-2]=arguments[_n];return y.prototype[D].apply(T,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,y,I){I||(I=0);var T=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)T[D]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(D=0;16>D;++D)T[D]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=E.g[0],I=E.g[1],D=E.g[2];var S=E.g[3],w=y+(S^I&(D^S))+T[0]+3614090360&4294967295;y=I+(w<<7&4294967295|w>>>25),w=S+(D^y&(I^D))+T[1]+3905402710&4294967295,S=y+(w<<12&4294967295|w>>>20),w=D+(I^S&(y^I))+T[2]+606105819&4294967295,D=S+(w<<17&4294967295|w>>>15),w=I+(y^D&(S^y))+T[3]+3250441966&4294967295,I=D+(w<<22&4294967295|w>>>10),w=y+(S^I&(D^S))+T[4]+4118548399&4294967295,y=I+(w<<7&4294967295|w>>>25),w=S+(D^y&(I^D))+T[5]+1200080426&4294967295,S=y+(w<<12&4294967295|w>>>20),w=D+(I^S&(y^I))+T[6]+2821735955&4294967295,D=S+(w<<17&4294967295|w>>>15),w=I+(y^D&(S^y))+T[7]+4249261313&4294967295,I=D+(w<<22&4294967295|w>>>10),w=y+(S^I&(D^S))+T[8]+1770035416&4294967295,y=I+(w<<7&4294967295|w>>>25),w=S+(D^y&(I^D))+T[9]+2336552879&4294967295,S=y+(w<<12&4294967295|w>>>20),w=D+(I^S&(y^I))+T[10]+4294925233&4294967295,D=S+(w<<17&4294967295|w>>>15),w=I+(y^D&(S^y))+T[11]+2304563134&4294967295,I=D+(w<<22&4294967295|w>>>10),w=y+(S^I&(D^S))+T[12]+1804603682&4294967295,y=I+(w<<7&4294967295|w>>>25),w=S+(D^y&(I^D))+T[13]+4254626195&4294967295,S=y+(w<<12&4294967295|w>>>20),w=D+(I^S&(y^I))+T[14]+2792965006&4294967295,D=S+(w<<17&4294967295|w>>>15),w=I+(y^D&(S^y))+T[15]+1236535329&4294967295,I=D+(w<<22&4294967295|w>>>10),w=y+(D^S&(I^D))+T[1]+4129170786&4294967295,y=I+(w<<5&4294967295|w>>>27),w=S+(I^D&(y^I))+T[6]+3225465664&4294967295,S=y+(w<<9&4294967295|w>>>23),w=D+(y^I&(S^y))+T[11]+643717713&4294967295,D=S+(w<<14&4294967295|w>>>18),w=I+(S^y&(D^S))+T[0]+3921069994&4294967295,I=D+(w<<20&4294967295|w>>>12),w=y+(D^S&(I^D))+T[5]+3593408605&4294967295,y=I+(w<<5&4294967295|w>>>27),w=S+(I^D&(y^I))+T[10]+38016083&4294967295,S=y+(w<<9&4294967295|w>>>23),w=D+(y^I&(S^y))+T[15]+3634488961&4294967295,D=S+(w<<14&4294967295|w>>>18),w=I+(S^y&(D^S))+T[4]+3889429448&4294967295,I=D+(w<<20&4294967295|w>>>12),w=y+(D^S&(I^D))+T[9]+568446438&4294967295,y=I+(w<<5&4294967295|w>>>27),w=S+(I^D&(y^I))+T[14]+3275163606&4294967295,S=y+(w<<9&4294967295|w>>>23),w=D+(y^I&(S^y))+T[3]+4107603335&4294967295,D=S+(w<<14&4294967295|w>>>18),w=I+(S^y&(D^S))+T[8]+1163531501&4294967295,I=D+(w<<20&4294967295|w>>>12),w=y+(D^S&(I^D))+T[13]+2850285829&4294967295,y=I+(w<<5&4294967295|w>>>27),w=S+(I^D&(y^I))+T[2]+4243563512&4294967295,S=y+(w<<9&4294967295|w>>>23),w=D+(y^I&(S^y))+T[7]+1735328473&4294967295,D=S+(w<<14&4294967295|w>>>18),w=I+(S^y&(D^S))+T[12]+2368359562&4294967295,I=D+(w<<20&4294967295|w>>>12),w=y+(I^D^S)+T[5]+4294588738&4294967295,y=I+(w<<4&4294967295|w>>>28),w=S+(y^I^D)+T[8]+2272392833&4294967295,S=y+(w<<11&4294967295|w>>>21),w=D+(S^y^I)+T[11]+1839030562&4294967295,D=S+(w<<16&4294967295|w>>>16),w=I+(D^S^y)+T[14]+4259657740&4294967295,I=D+(w<<23&4294967295|w>>>9),w=y+(I^D^S)+T[1]+2763975236&4294967295,y=I+(w<<4&4294967295|w>>>28),w=S+(y^I^D)+T[4]+1272893353&4294967295,S=y+(w<<11&4294967295|w>>>21),w=D+(S^y^I)+T[7]+4139469664&4294967295,D=S+(w<<16&4294967295|w>>>16),w=I+(D^S^y)+T[10]+3200236656&4294967295,I=D+(w<<23&4294967295|w>>>9),w=y+(I^D^S)+T[13]+681279174&4294967295,y=I+(w<<4&4294967295|w>>>28),w=S+(y^I^D)+T[0]+3936430074&4294967295,S=y+(w<<11&4294967295|w>>>21),w=D+(S^y^I)+T[3]+3572445317&4294967295,D=S+(w<<16&4294967295|w>>>16),w=I+(D^S^y)+T[6]+76029189&4294967295,I=D+(w<<23&4294967295|w>>>9),w=y+(I^D^S)+T[9]+3654602809&4294967295,y=I+(w<<4&4294967295|w>>>28),w=S+(y^I^D)+T[12]+3873151461&4294967295,S=y+(w<<11&4294967295|w>>>21),w=D+(S^y^I)+T[15]+530742520&4294967295,D=S+(w<<16&4294967295|w>>>16),w=I+(D^S^y)+T[2]+3299628645&4294967295,I=D+(w<<23&4294967295|w>>>9),w=y+(D^(I|~S))+T[0]+4096336452&4294967295,y=I+(w<<6&4294967295|w>>>26),w=S+(I^(y|~D))+T[7]+1126891415&4294967295,S=y+(w<<10&4294967295|w>>>22),w=D+(y^(S|~I))+T[14]+2878612391&4294967295,D=S+(w<<15&4294967295|w>>>17),w=I+(S^(D|~y))+T[5]+4237533241&4294967295,I=D+(w<<21&4294967295|w>>>11),w=y+(D^(I|~S))+T[12]+1700485571&4294967295,y=I+(w<<6&4294967295|w>>>26),w=S+(I^(y|~D))+T[3]+2399980690&4294967295,S=y+(w<<10&4294967295|w>>>22),w=D+(y^(S|~I))+T[10]+4293915773&4294967295,D=S+(w<<15&4294967295|w>>>17),w=I+(S^(D|~y))+T[1]+2240044497&4294967295,I=D+(w<<21&4294967295|w>>>11),w=y+(D^(I|~S))+T[8]+1873313359&4294967295,y=I+(w<<6&4294967295|w>>>26),w=S+(I^(y|~D))+T[15]+4264355552&4294967295,S=y+(w<<10&4294967295|w>>>22),w=D+(y^(S|~I))+T[6]+2734768916&4294967295,D=S+(w<<15&4294967295|w>>>17),w=I+(S^(D|~y))+T[13]+1309151649&4294967295,I=D+(w<<21&4294967295|w>>>11),w=y+(D^(I|~S))+T[4]+4149444226&4294967295,y=I+(w<<6&4294967295|w>>>26),w=S+(I^(y|~D))+T[11]+3174756917&4294967295,S=y+(w<<10&4294967295|w>>>22),w=D+(y^(S|~I))+T[2]+718787259&4294967295,D=S+(w<<15&4294967295|w>>>17),w=I+(S^(D|~y))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+S&4294967295}r.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var I=y-this.blockSize,T=this.B,D=this.h,S=0;S<y;){if(D==0)for(;S<=I;)i(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<y;)if(T[D++]=E.charCodeAt(S++),D==this.blockSize){i(this,T),D=0;break}}else for(;S<y;)if(T[D++]=E[S++],D==this.blockSize){i(this,T),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var I=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=I&255,I/=256;for(this.u(E),E=Array(16),y=I=0;4>y;++y)for(var T=0;32>T;T+=8)E[I++]=this.g[y]>>>T&255;return E};function s(E,y){var I=a;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=y(E)}function o(E,y){this.h=y;for(var I=[],T=!0,D=E.length-1;0<=D;D--){var S=E[D]|0;T&&S==y||(I[D]=S,T=!1)}this.g=I}var a={};function u(E){return-128<=E&&128>E?s(E,function(y){return new o([y|0],0>y?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return R(l(-E));for(var y=[],I=1,T=0;E>=I;T++)y[T]=E/I|0,I*=4294967296;return new o(y,0)}function h(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return R(h(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(y,8)),T=p,D=0;D<E.length;D+=8){var S=Math.min(8,E.length-D),w=parseInt(E.substring(D,D+S),y);8>S?(S=l(Math.pow(y,S)),T=T.j(S).add(l(w))):(T=T.j(I),T=T.add(l(w)))}return T}var p=u(0),m=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var E=0,y=1,I=0;I<this.g.length;I++){var T=this.i(I);E+=(0<=T?T:4294967296+T)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C(this))return"0";if(N(this))return"-"+R(this).toString(E);for(var y=l(Math.pow(E,6)),I=this,T="";;){var D=$(I,y).g;I=k(I,D.j(y));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=D,C(I))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function C(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function N(E){return E.h==-1}t.l=function(E){return E=k(this,E),N(E)?-1:C(E)?0:1};function R(E){for(var y=E.g.length,I=[],T=0;T<y;T++)I[T]=~E.g[T];return new o(I,~E.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],T=0,D=0;D<=y;D++){var S=T+(this.i(D)&65535)+(E.i(D)&65535),w=(S>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);T=w>>>16,S&=65535,w&=65535,I[D]=w<<16|S}return new o(I,I[I.length-1]&-2147483648?-1:0)};function k(E,y){return E.add(R(y))}t.j=function(E){if(C(this)||C(E))return p;if(N(this))return N(E)?R(this).j(R(E)):R(R(this).j(E));if(N(E))return R(this.j(R(E)));if(0>this.l(v)&&0>E.l(v))return l(this.m()*E.m());for(var y=this.g.length+E.g.length,I=[],T=0;T<2*y;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var D=0;D<E.g.length;D++){var S=this.i(T)>>>16,w=this.i(T)&65535,_n=E.i(D)>>>16,to=E.i(D)&65535;I[2*T+2*D]+=w*to,j(I,2*T+2*D),I[2*T+2*D+1]+=S*to,j(I,2*T+2*D+1),I[2*T+2*D+1]+=w*_n,j(I,2*T+2*D+1),I[2*T+2*D+2]+=S*_n,j(I,2*T+2*D+2)}for(T=0;T<y;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=y;T<2*y;T++)I[T]=0;return new o(I,0)};function j(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function V(E,y){this.g=E,this.h=y}function $(E,y){if(C(y))throw Error("division by zero");if(C(E))return new V(p,p);if(N(E))return y=$(R(E),y),new V(R(y.g),R(y.h));if(N(y))return y=$(E,R(y)),new V(R(y.g),y.h);if(30<E.g.length){if(N(E)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var I=m,T=y;0>=T.l(E);)I=_e(I),T=_e(T);var D=K(I,1),S=K(T,1);for(T=K(T,2),I=K(I,2);!C(T);){var w=S.add(T);0>=w.l(E)&&(D=D.add(I),S=w),T=K(T,1),I=K(I,1)}return y=k(E,D.j(y)),new V(D,y)}for(D=p;0<=E.l(y);){for(I=Math.max(1,Math.floor(E.m()/y.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=l(I),w=S.j(y);N(w)||0<w.l(E);)I-=T,S=l(I),w=S.j(y);C(S)&&(S=m),D=D.add(S),E=k(E,w)}return new V(D,E)}t.A=function(E){return $(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)&E.i(T);return new o(I,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)|E.i(T);return new o(I,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)^E.i(T);return new o(I,this.h^E.h)};function _e(E){for(var y=E.g.length+1,I=[],T=0;T<y;T++)I[T]=E.i(T)<<1|E.i(T-1)>>>31;return new o(I,E.h)}function K(E,y){var I=y>>5;y%=32;for(var T=E.g.length-I,D=[],S=0;S<T;S++)D[S]=0<y?E.i(S+I)>>>y|E.i(S+I+1)<<32-y:E.i(S+I);return new o(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Bm=FC.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,wr=FC.Integer=o}).apply(typeof LC<"u"?LC:typeof self<"u"?self:typeof window<"u"?window:{});var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bn={};var $m,uj,As,Hm,Na,Ql,qm,zm,Gm;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kl=="object"&&Kl];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,A){for(var P=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)P[Ie-2]=arguments[Ie];return d.prototype[b].apply(g,P)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,A=g.length||0;c.length=b+A;for(let P=0;P<A;P++)c[b+P]=g[P]}else c.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function j(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function $(c){return $[" "](c),c}$[" "]=function(){};var _e=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function K(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function E(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function w(){var c=Gd;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class _n{constructor(){this.h=this.g=null}add(d,f){let g=to.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var to=new k(()=>new c0,c=>c.reset());class c0{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let no,ro=!1,Gd=new _n,i_=()=>{let c=a.Promise.resolve(void 0);no=()=>{c.then(u0)}};var u0=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){S(f)}var d=to;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}ro=!1};function Gn(){this.s=this.s,this.C=this.C}Gn.prototype.s=!1,Gn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Gn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ye(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Ye.prototype.h=function(){this.defaultPrevented=!0};var l0=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function io(c,d){if(Ye.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(_e){e:{try{$(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:d0[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&io.aa.h.call(this)}}C(io,Ye);var d0={2:"touch",3:"pen",4:"mouse"};io.prototype.h=function(){io.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var so="closure_listenable_"+(1e6*Math.random()|0),h0=0;function f0(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++h0,this.da=this.fa=!1}function nc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function rc(c){this.src=c,this.g={},this.h=0}rc.prototype.add=function(c,d,f,g,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var P=Kd(c,d,g,b);return-1<P?(d=c[P],f||(d.fa=!1)):(d=new f0(d,this.src,A,!!g,b),d.fa=f,c.push(d)),d};function Wd(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(nc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Kd(c,d,f,g){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var Qd="closure_lm_"+(1e6*Math.random()|0),Yd={};function s_(c,d,f,g,b){if(g&&g.once)return a_(c,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)s_(c,d[A],f,g,b);return null}return f=eh(f),c&&c[so]?c.K(d,f,l(g)?!!g.capture:!!g,b):o_(c,d,f,!1,g,b)}function o_(c,d,f,g,b,A){if(!d)throw Error("Invalid event type");var P=l(b)?!!b.capture:!!b,Ie=Jd(c);if(Ie||(c[Qd]=Ie=new rc(c)),f=Ie.add(d,f,g,P,A),f.proxy)return f;if(g=p0(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)l0||(b=P),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(u_(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function p0(){function c(f){return d.call(c.src,c.listener,f)}let d=g0;return c}function a_(c,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)a_(c,d[A],f,g,b);return null}return f=eh(f),c&&c[so]?c.L(d,f,l(g)?!!g.capture:!!g,b):o_(c,d,f,!0,g,b)}function c_(c,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)c_(c,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=eh(f),c&&c[so]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Kd(A,f,g,b),-1<f&&(nc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Jd(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Kd(d,f,g,b)),(f=-1<c?d[c]:null)&&Zd(f))}function Zd(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[so])Wd(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(u_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Jd(d))?(Wd(f,c),f.h==0&&(f.src=null,d[Qd]=null)):nc(c)}}}function u_(c){return c in Yd?Yd[c]:Yd[c]="on"+c}function g0(c,d){if(c.da)c=!0;else{d=new io(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Zd(c),c=f.call(g,d)}return c}function Jd(c){return c=c[Qd],c instanceof rc?c:null}var Xd="__closure_events_fn_"+(1e9*Math.random()>>>0);function eh(c){return typeof c=="function"?c:(c[Xd]||(c[Xd]=function(d){return c.handleEvent(d)}),c[Xd])}function Ze(){Gn.call(this),this.i=new rc(this),this.M=this,this.F=null}C(Ze,Gn),Ze.prototype[so]=!0,Ze.prototype.removeEventListener=function(c,d,f,g){c_(this,c,d,f,g)};function st(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Ye(d,c);else if(d instanceof Ye)d.target=d.target||c;else{var b=d;d=new Ye(g,c),T(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var P=d.g=f[A];b=ic(P,g,!0,d)&&b}if(P=d.g=c,b=ic(P,g,!0,d)&&b,b=ic(P,g,!1,d)&&b,f)for(A=0;A<f.length;A++)P=d.g=f[A],b=ic(P,g,!1,d)&&b}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)nc(f[g]);delete c.g[d],c.h--}}this.F=null},Ze.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Ze.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function ic(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var P=d[A];if(P&&!P.da&&P.capture==f){var Ie=P.listener,We=P.ha||P.src;P.fa&&Wd(c.i,P),b=Ie.call(We,g)!==!1&&b}}return b&&!g.defaultPrevented}function l_(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function d_(c){c.g=l_(()=>{c.g=null,c.i&&(c.i=!1,d_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class m0 extends Gn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:d_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oo(c){Gn.call(this),this.h=c,this.g={}}C(oo,Gn);var h_=[];function f_(c){K(c.g,function(d,f){this.g.hasOwnProperty(f)&&Zd(d)},c),c.g={}}oo.prototype.N=function(){oo.aa.N.call(this),f_(this)},oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var th=a.JSON.stringify,y0=a.JSON.parse,v0=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function nh(){}nh.prototype.h=null;function p_(c){return c.h||(c.h=c.i())}function g_(){}var ao={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rh(){Ye.call(this,"d")}C(rh,Ye);function ih(){Ye.call(this,"c")}C(ih,Ye);var Sr={},m_=null;function sc(){return m_=m_||new Ze}Sr.La="serverreachability";function y_(c){Ye.call(this,Sr.La,c)}C(y_,Ye);function co(c){let d=sc();st(d,new y_(d))}Sr.STAT_EVENT="statevent";function v_(c,d){Ye.call(this,Sr.STAT_EVENT,c),this.stat=d}C(v_,Ye);function ot(c){let d=sc();st(d,new v_(d,c))}Sr.Ma="timingevent";function __(c,d){Ye.call(this,Sr.Ma,c),this.size=d}C(__,Ye);function uo(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function lo(){this.g=!0}lo.prototype.xa=function(){this.g=!1};function _0(c,d,f,g,b,A){c.info(function(){if(c.g)if(A)for(var P="",Ie=A.split("&"),We=0;We<Ie.length;We++){var fe=Ie[We].split("=");if(1<fe.length){var Je=fe[0];fe=fe[1];var Xe=Je.split("_");P=2<=Xe.length&&Xe[1]=="type"?P+(Je+"="+fe+"&"):P+(Je+"=redacted&")}}else P=null;else P=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+P})}function I0(c,d,f,g,b,A,P){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+P})}function Ii(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+E0(c,f)+(g?" "+g:"")})}function w0(c,d){c.info(function(){return"TIMEOUT: "+d})}lo.prototype.info=function(){};function E0(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var P=1;P<b.length;P++)b[P]=""}}}}return th(f)}catch{return d}}var oc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},I_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sh;function ac(){}C(ac,nh),ac.prototype.g=function(){return new XMLHttpRequest},ac.prototype.i=function(){return{}},sh=new ac;function Wn(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new oo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new w_}function w_(){this.i=null,this.g="",this.h=!1}var E_={},oh={};function ah(c,d,f){c.L=1,c.v=dc(In(d)),c.m=f,c.P=!0,T_(c,null)}function T_(c,d){c.F=Date.now(),cc(c),c.A=In(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),F_(f.i,"t",g),c.C=0,f=c.j.J,c.h=new w_,c.g=tI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new m0(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(h_[0]=b.toString()),b=h_);for(var A=0;A<b.length;A++){var P=s_(f,b[A],g||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),co(),_0(c.i,c.u,c.A,c.l,c.R,c.m)}Wn.prototype.ca=function(c){c=c.target;let d=this.M;d&&wn(c)==3?d.j():this.Y(c)},Wn.prototype.Y=function(c){try{if(c==this.g)e:{let Xe=wn(this.g);var d=this.g.Ba();let Ti=this.g.Z();if(!(3>Xe)&&(Xe!=3||this.g&&(this.h.h||this.g.oa()||q_(this.g)))){this.J||Xe!=4||d==7||(d==8||0>=Ti?co(3):co(2)),ch(this);var f=this.g.Z();this.X=f;t:if(D_(this)){var g=q_(this.g);c="";var b=g.length,A=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ar(this),ho(this);var P="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=f==200,I0(this.i,this.u,this.A,this.l,this.R,Xe,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,We=this.g;if((Ie=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(Ie)){var fe=Ie;break t}}fe=null}if(f=fe)Ii(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,uh(this,f);else{this.o=!1,this.s=3,ot(12),Ar(this),ho(this);break e}}if(this.P){f=!0;let Lt;for(;!this.J&&this.C<P.length;)if(Lt=T0(this,P),Lt==oh){Xe==4&&(this.s=4,ot(14),f=!1),Ii(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==E_){this.s=4,ot(15),Ii(this.i,this.l,P,"[Invalid Chunk]"),f=!1;break}else Ii(this.i,this.l,Lt,null),uh(this,Lt);if(D_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||P.length!=0||this.h.h||(this.s=1,ot(16),f=!1),this.o=this.o&&f,!f)Ii(this.i,this.l,P,"[Invalid Chunked Response]"),Ar(this),ho(this);else if(0<P.length&&!this.W){this.W=!0;var Je=this.j;Je.g==this&&Je.ba&&!Je.M&&(Je.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),gh(Je),Je.M=!0,ot(11))}}else Ii(this.i,this.l,P,null),uh(this,P);Xe==4&&Ar(this),this.o&&!this.J&&(Xe==4?Z_(this.j,this):(this.o=!1,cc(this)))}else j0(this.g),f==400&&0<P.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),Ar(this),ho(this)}}}catch{}finally{}};function D_(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function T0(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?oh:(f=Number(d.substring(f,g)),isNaN(f)?E_:(g+=1,g+f>d.length?oh:(d=d.slice(g,g+f),c.C=g+f,d)))}Wn.prototype.cancel=function(){this.J=!0,Ar(this)};function cc(c){c.S=Date.now()+c.I,b_(c,c.I)}function b_(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=uo(m(c.ba,c),d)}function ch(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Wn.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(w0(this.i,this.A),this.L!=2&&(co(),ot(17)),Ar(this),this.s=2,ho(this)):b_(this,this.S-c)};function ho(c){c.j.G==0||c.J||Z_(c.j,c)}function Ar(c){ch(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,f_(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function uh(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||lh(f.h,c))){if(!c.K&&lh(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)mc(f),pc(f);else break e;ph(f),ot(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=uo(m(f.Za,f),6e3));if(1>=A_(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Nr(f,11)}else if((c.K||f.g==c)&&mc(f),!j(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let fe=b[d];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];let Je=fe[3];Je!=null&&(f.la=Je,f.j.info("VER="+f.la));let Xe=fe[4];Xe!=null&&(f.Aa=Xe,f.j.info("SVER="+f.Aa));let Ti=fe[5];Ti!=null&&typeof Ti=="number"&&0<Ti&&(g=1.5*Ti,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Lt=c.g;if(Lt){let vc=Lt.g?Lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vc){var A=g.h;A.g||vc.indexOf("spdy")==-1&&vc.indexOf("quic")==-1&&vc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(dh(A,A.h),A.h=null))}if(g.D){let mh=Lt.g?Lt.g.getResponseHeader("X-HTTP-Session-Id"):null;mh&&(g.ya=mh,Ee(g.I,g.D,mh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var P=c;if(g.qa=eI(g,g.J?g.ia:null,g.W),P.K){R_(g.h,P);var Ie=P,We=g.L;We&&(Ie.I=We),Ie.B&&(ch(Ie),cc(Ie)),g.g=P}else Q_(g);0<f.i.length&&gc(f)}else fe[0]!="stop"&&fe[0]!="close"||Nr(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Nr(f,7):fh(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}co(4)}catch{}}var D0=class{constructor(c,d){this.g=c,this.map=d}};function C_(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function S_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function A_(c){return c.h?1:c.g?c.g.size:0}function lh(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function dh(c,d){c.g?c.g.add(d):c.h=d}function R_(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}C_.prototype.cancel=function(){if(this.i=N_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function N_(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function b0(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function C0(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function M_(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=C0(c),g=b0(c),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],c)}var x_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function S0(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var A=c[f].substring(0,g);b=c[f].substring(g+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Rr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Rr){this.h=c.h,uc(this,c.j),this.o=c.o,this.g=c.g,lc(this,c.s),this.l=c.l;var d=c.i,f=new go;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),P_(this,f),this.m=c.m}else c&&(d=String(c).match(x_))?(this.h=!1,uc(this,d[1]||"",!0),this.o=fo(d[2]||""),this.g=fo(d[3]||"",!0),lc(this,d[4]),this.l=fo(d[5]||"",!0),P_(this,d[6]||"",!0),this.m=fo(d[7]||"")):(this.h=!1,this.i=new go(null,this.h))}Rr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(po(d,O_,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(po(d,O_,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(po(f,f.charAt(0)=="/"?N0:R0,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",po(f,x0)),c.join("")};function In(c){return new Rr(c)}function uc(c,d,f){c.j=f?fo(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function lc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function P_(c,d,f){d instanceof go?(c.i=d,P0(c.i,c.h)):(f||(d=po(d,M0)),c.i=new go(d,c.h))}function Ee(c,d,f){c.i.set(d,f)}function dc(c){return Ee(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function fo(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function po(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,A0),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function A0(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var O_=/[#\/\?@]/g,R0=/[#\?:]/g,N0=/[#\?]/g,M0=/[#\?@]/g,x0=/#/g;function go(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Kn(c){c.g||(c.g=new Map,c.h=0,c.i&&S0(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=go.prototype,t.add=function(c,d){Kn(this),this.i=null,c=wi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function k_(c,d){Kn(c),d=wi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function L_(c,d){return Kn(c),d=wi(c,d),c.g.has(d)}t.forEach=function(c,d){Kn(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},t.na=function(){Kn(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},t.V=function(c){Kn(this);let d=[];if(typeof c=="string")L_(this,c)&&(d=d.concat(this.g.get(wi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Kn(this),this.i=null,c=wi(this,c),L_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function F_(c,d,f){k_(c,d),0<f.length&&(c.i=null,c.g.set(wi(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),P=this.V(g);for(g=0;g<P.length;g++){var b=A;P[g]!==""&&(b+="="+encodeURIComponent(String(P[g]))),c.push(b)}}return this.i=c.join("&")};function wi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function P0(c,d){d&&!c.j&&(Kn(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(k_(this,g),F_(this,b,f))},c)),c.j=d}function O0(c,d){let f=new lo;if(a.Image){let g=new Image;g.onload=v(Qn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(Qn,f,"TestLoadImage: error",!1,d,g),g.onabort=v(Qn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(Qn,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function k0(c,d){let f=new lo,g=new AbortController,b=setTimeout(()=>{g.abort(),Qn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?Qn(f,"TestPingServer: ok",!0,d):Qn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Qn(f,"TestPingServer: error",!1,d)})}function Qn(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function L0(){this.g=new v0}function F0(c,d,f){let g=f||"";try{M_(c,function(b,A){let P=b;l(b)&&(P=th(b)),d.push(g+A+"="+encodeURIComponent(P))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function mo(c){this.l=c.Ub||null,this.j=c.eb||!1}C(mo,nh),mo.prototype.g=function(){return new hc(this.l,this.j)},mo.prototype.i=function(c){return function(){return c}}({});function hc(c,d){Ze.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(hc,Ze),t=hc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,vo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,vo(this)),this.g&&(this.readyState=3,vo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;V_(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function V_(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?yo(this):vo(this),this.readyState==3&&V_(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,yo(this))},t.Qa=function(c){this.g&&(this.response=c,yo(this))},t.ga=function(){this.g&&yo(this)};function yo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,vo(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function vo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(hc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function U_(c){let d="";return K(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function hh(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=U_(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ee(c,d,f))}function Se(c){Ze.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Se,Ze);var V0=/^https?$/i,U0=["POST","PUT"];t=Se.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sh.g(),this.v=this.o?p_(this.o):p_(sh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){j_(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(U0,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of f)this.g.setRequestHeader(A,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{H_(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){j_(this,A)}};function j_(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,B_(c),fc(c)}function B_(c){c.A||(c.A=!0,st(c,"complete"),st(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,st(this,"complete"),st(this,"abort"),fc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fc(this,!0)),Se.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?$_(this):this.bb())},t.bb=function(){$_(this)};function $_(c){if(c.h&&typeof o<"u"&&(!c.v[1]||wn(c)!=4||c.Z()!=2)){if(c.u&&wn(c)==4)l_(c.Ea,0,c);else if(st(c,"readystatechange"),wn(c)==4){c.h=!1;try{let P=c.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=P===0){var b=String(c.D).match(x_)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!V0.test(b?b.toLowerCase():"")}f=g}if(f)st(c,"complete"),st(c,"success");else{c.m=6;try{var A=2<wn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",B_(c)}}finally{fc(c)}}}}function fc(c,d){if(c.g){H_(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||st(c,"ready");try{f.onreadystatechange=g}catch{}}}function H_(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function wn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),y0(d)}};function q_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function j0(c){let d={};c=(c.g&&2<=wn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(j(c[g]))continue;var f=D(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}E(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _o(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function z_(c){this.Aa=0,this.i=[],this.j=new lo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_o("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_o("baseRetryDelayMs",5e3,c),this.cb=_o("retryDelaySeedMs",1e4,c),this.Wa=_o("forwardChannelMaxRetries",2,c),this.wa=_o("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new C_(c&&c.concurrentRequestLimit),this.Da=new L0,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=z_.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){ot(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=eI(this,null,this.W),gc(this)};function fh(c){if(G_(c),c.G==3){var d=c.U++,f=In(c.I);if(Ee(f,"SID",c.K),Ee(f,"RID",d),Ee(f,"TYPE","terminate"),Io(c,f),d=new Wn(c,c.j,d),d.L=2,d.v=dc(In(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=tI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),cc(d)}X_(c)}function pc(c){c.g&&(gh(c),c.g.cancel(),c.g=null)}function G_(c){pc(c),c.u&&(a.clearTimeout(c.u),c.u=null),mc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function gc(c){if(!S_(c.h)&&!c.s){c.s=!0;var d=c.Ga;no||i_(),ro||(no(),ro=!0),Gd.add(d,c),c.B=0}}function B0(c,d){return A_(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=uo(m(c.Ga,c,d),J_(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Wn(this,this.j,c),A=this.o;if(this.S&&(A?(A=y(A),T(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=K_(this,b,d),f=In(this.I),Ee(f,"RID",c),Ee(f,"CVER",22),this.D&&Ee(f,"X-HTTP-Session-Id",this.D),Io(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(U_(A)))+"&"+d:this.m&&hh(f,this.m,A)),dh(this.h,b),this.Ua&&Ee(f,"TYPE","init"),this.P?(Ee(f,"$req",d),Ee(f,"SID","null"),b.T=!0,ah(b,f,null)):ah(b,f,d),this.G=2}}else this.G==3&&(c?W_(this,c):this.i.length==0||S_(this.h)||W_(this))};function W_(c,d){var f;d?f=d.l:f=c.U++;let g=In(c.I);Ee(g,"SID",c.K),Ee(g,"RID",f),Ee(g,"AID",c.T),Io(c,g),c.m&&c.o&&hh(g,c.m,c.o),f=new Wn(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=K_(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),dh(c.h,f),ah(f,g,d)}function Io(c,d){c.H&&K(c.H,function(f,g){Ee(d,g,f)}),c.l&&M_({},function(f,g){Ee(d,g,f)})}function K_(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let P=["count="+f];A==-1?0<f?(A=b[0].g,P.push("ofs="+A)):A=0:P.push("ofs="+A);let Ie=!0;for(let We=0;We<f;We++){let fe=b[We].g,Je=b[We].map;if(fe-=A,0>fe)A=Math.max(0,b[We].g-100),Ie=!1;else try{F0(Je,P,"req"+fe+"_")}catch{g&&g(Je)}}if(Ie){g=P.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Q_(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;no||i_(),ro||(no(),ro=!0),Gd.add(d,c),c.v=0}}function ph(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=uo(m(c.Fa,c),J_(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Y_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=uo(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),pc(this),Y_(this))};function gh(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Y_(c){c.g=new Wn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=In(c.qa);Ee(d,"RID","rpc"),Ee(d,"SID",c.K),Ee(d,"AID",c.T),Ee(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ee(d,"TO",c.ja),Ee(d,"TYPE","xmlhttp"),Io(c,d),c.m&&c.o&&hh(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=dc(In(d)),f.m=null,f.P=!0,T_(f,c)}t.Za=function(){this.C!=null&&(this.C=null,pc(this),ph(this),ot(19))};function mc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Z_(c,d){var f=null;if(c.g==d){mc(c),gh(c),c.g=null;var g=2}else if(lh(c.h,d))f=d.D,R_(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=sc(),st(g,new __(g,f)),gc(c)}else Q_(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&B0(c,d)||g==2&&ph(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:Nr(c,5);break;case 4:Nr(c,10);break;case 3:Nr(c,6);break;default:Nr(c,2)}}}function J_(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Nr(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let b=!g;g=new Rr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||uc(g,"https"),dc(g),b?O0(g.toString(),f):k0(g.toString(),f)}else ot(2);c.G=0,c.l&&c.l.sa(d),X_(c),G_(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function X_(c){if(c.G=0,c.ka=[],c.l){let d=N_(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function eI(c,d,f){var g=f instanceof Rr?In(f):new Rr(f);if(g.g!="")d&&(g.g=d+"."+g.g),lc(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new Rr(null);g&&uc(A,g),d&&(A.g=d),b&&lc(A,b),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Ee(g,f,d),Ee(g,"VER",c.la),Io(c,g),g}function tI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Se(new mo({eb:f})):new Se(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function nI(){}t=nI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function yc(){}yc.prototype.g=function(c,d){return new vt(c,d)};function vt(c,d){Ze.call(this),this.g=new z_(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!j(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!j(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ei(this)}C(vt,Ze),vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vt.prototype.close=function(){fh(this.g)},vt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=th(c),c=f);d.i.push(new D0(d.Ya++,c)),d.G==3&&gc(d)},vt.prototype.N=function(){this.g.l=null,delete this.j,fh(this.g),delete this.g,vt.aa.N.call(this)};function rI(c){rh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(rI,rh);function iI(){ih.call(this),this.status=1}C(iI,ih);function Ei(c){this.g=c}C(Ei,nI),Ei.prototype.ua=function(){st(this.g,"a")},Ei.prototype.ta=function(c){st(this.g,new rI(c))},Ei.prototype.sa=function(c){st(this.g,new iI)},Ei.prototype.ra=function(){st(this.g,"b")},yc.prototype.createWebChannel=yc.prototype.g,vt.prototype.send=vt.prototype.o,vt.prototype.open=vt.prototype.m,vt.prototype.close=vt.prototype.close,Gm=Bn.createWebChannelTransport=function(){return new yc},zm=Bn.getStatEventTarget=function(){return sc()},qm=Bn.Event=Sr,Ql=Bn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},oc.NO_ERROR=0,oc.TIMEOUT=8,oc.HTTP_ERROR=6,Na=Bn.ErrorCode=oc,I_.COMPLETE="complete",Hm=Bn.EventType=I_,g_.EventType=ao,ao.OPEN="a",ao.CLOSE="b",ao.ERROR="c",ao.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,As=Bn.WebChannel=g_,uj=Bn.FetchXmlHttpFactory=mo,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,$m=Bn.XhrIo=Se}).apply(typeof Kl<"u"?Kl:typeof self<"u"?self:typeof window<"u"?window:{});var VC="@firebase/firestore";var Ge=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ge.UNAUTHENTICATED=new Ge(null),Ge.GOOGLE_CREDENTIALS=new Ge("google-credentials-uid"),Ge.FIRST_PARTY=new Ge("first-party-uid"),Ge.MOCK_USER=new Ge("mock-user");var Qs="10.14.0";var li=new gr("@firebase/firestore");function Ma(){return li.logLevel}function F(t,...e){if(li.logLevel<=ae.DEBUG){let n=e.map(Cv);li.debug(`Firestore (${Qs}): ${t}`,...n)}}function $n(t,...e){if(li.logLevel<=ae.ERROR){let n=e.map(Cv);li.error(`Firestore (${Qs}): ${t}`,...n)}}function ks(t,...e){if(li.logLevel<=ae.WARN){let n=e.map(Cv);li.warn(`Firestore (${Qs}): ${t}`,...n)}}function Cv(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function Q(t="Unexpected state"){let e=`FIRESTORE (${Qs}) INTERNAL ASSERTION FAILED: `+t;throw $n(e),new Error(e)}function ve(t,e){t||Q()}function J(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends ht{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var qt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var ed=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Zm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ge.UNAUTHENTICATED))}shutdown(){}},Jm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Xm=class{constructor(e){this.t=e,this.currentUser=Ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new qt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new qt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new qt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new ed(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new Ge(e)}},ey=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ge.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ty=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new ey(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ge.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ny=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ry=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ve(this.o===void 0);let r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new ny(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function lj(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var td=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=lj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function pe(t,e){return t<e?-1:t>e?1:0}function Ls(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ke=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new U(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new U(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new U(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ke(0,0))}static max(){return new t(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var nd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Re=class t extends nd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new U(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},dj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ct=class t extends nd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return dj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new U(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new U(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new U(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new U(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var G=class t{constructor(e){this.path=e}static fromPath(e){return new t(Re.fromString(e))}static fromName(e){return new t(Re.fromString(e).popFirst(5))}static empty(){return new t(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Re(e.slice()))}};var iy=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};iy.UNKNOWN_ID=-1;function hj(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new di(i,G.empty(),e)}function fj(t){return new di(t.readTime,t.key,-1)}var di=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ee.min(),G.empty(),-1)}static max(){return new t(ee.max(),G.empty(),-1)}};function pj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}var gj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",sy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ka(t){return _(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==gj)throw t;F("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function mj(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qa(t){return t.name==="IndexedDbTransactionError"}var gS=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Od(t){return t==null}function Fa(t){return t===0&&1/t==-1/0}function yj(t){return typeof t=="number"&&Number.isInteger(t)&&!Fa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var vj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],p8=[...vj,"documentOverlays"],_j=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ij=_j,wj=[...Ij,"indexConfiguration","indexState","indexEntries"];var g8=[...wj,"globals"];function UC(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ne=class t{constructor(e,n){this.comparator=e,this.root=n||hn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xs(this.root,e,this.comparator,!1)}getReverseIterator(){return new xs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xs(this.root,e,this.comparator,!0)}},xs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},hn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();let e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}};hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,i,s){return this}insert(e,n,r){return new hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var rt=class t{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rd(this.data.getIterator())}getIteratorFrom(e){return new rd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},rd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var kt=class t{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new t([])}unionWith(e){let n=new rt(Ct.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ls(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var id=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var it=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new id("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};it.EMPTY_BYTE_STRING=new it("");var Ej=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hn(t){if(ve(!!t),typeof t=="string"){let e=0,n=Ej.exec(t);if(ve(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Dr(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}function Sv(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Av(t){let e=t.mapValue.fields.__previous_value__;return Sv(e)?Av(e):e}function Va(t){let e=Hn(t.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}var oy=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},sd=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Yl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function hi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sv(t)?4:vS(t)?9007199254740991:yS(t)?10:11:Q()}function gn(t,e){if(t===e)return!0;let n=hi(t);if(n!==hi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Va(t).isEqual(Va(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Hn(i.timestampValue),a=Hn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Dr(i.bytesValue).isEqual(Dr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return be(i.geoPointValue.latitude)===be(s.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return be(i.integerValue)===be(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=be(i.doubleValue),a=be(s.doubleValue);return o===a?Fa(o)===Fa(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ls(t.arrayValue.values||[],e.arrayValue.values||[],gn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(UC(o)!==UC(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!gn(o[u],a[u])))return!1;return!0}(t,e);default:return Q()}}function Ua(t,e){return(t.values||[]).find(n=>gn(n,e))!==void 0}function Fs(t,e){if(t===e)return 0;let n=hi(t),r=hi(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=be(s.integerValue||s.doubleValue),u=be(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return jC(t.timestampValue,e.timestampValue);case 4:return jC(Va(t),Va(e));case 5:return pe(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Dr(s),u=Dr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=pe(a[l],u[l]);if(h!==0)return h}return pe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=pe(be(s.latitude),be(o.latitude));return a!==0?a:pe(be(s.longitude),be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return BC(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},m=o.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,C=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=pe(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:BC(v,C)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Yl.mapValue&&o===Yl.mapValue)return 0;if(s===Yl.mapValue)return 1;if(o===Yl.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=pe(u[p],h[p]);if(m!==0)return m;let v=Fs(a[u[p]],l[h[p]]);if(v!==0)return v}return pe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Q()}}function jC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);let n=Hn(t),r=Hn(e),i=pe(n.seconds,r.seconds);return i!==0?i:pe(n.nanos,r.nanos)}function BC(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=Fs(n[i],r[i]);if(s)return s}return pe(n.length,r.length)}function Vs(t){return ay(t)}function ay(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Hn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Dr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=ay(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${ay(n.fields[o])}`;return i+"}"}(t.mapValue):Q()}function cy(t){return!!t&&"integerValue"in t}function Rv(t){return!!t&&"arrayValue"in t}function $C(t){return!!t&&"nullValue"in t}function HC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jl(t){return!!t&&"mapValue"in t}function yS(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Pa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return yi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Pa(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function vS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var bt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Jl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pa(n)}setAll(e){let n=Ct.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Pa(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Jl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Jl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){yi(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Pa(this.value))}};function _S(t){let e=[];return yi(t.fields,(n,r)=>{let i=new Ct([n]);if(Jl(r)){let s=_S(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new kt(e)}var zt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ee.min(),ee.min(),ee.min(),bt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ee.min(),ee.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ee.min(),ee.min(),bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Us=class{constructor(e,n){this.position=e,this.inclusive=n}};function qC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Fs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function zC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gn(t.position[n],e.position[n]))return!1;return!0}var js=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Tj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var od=class{},He=class t extends od{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ly(e,n,r):n==="array-contains"?new fy(e,r):n==="in"?new py(e,r):n==="not-in"?new gy(e,r):n==="array-contains-any"?new my(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new dy(e,r):new hy(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fs(n,this.value)):n!==null&&hi(this.value)===hi(n)&&this.matchesComparison(Fs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},mn=class t extends od{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return IS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function IS(t){return t.op==="and"}function wS(t){return Dj(t)&&IS(t)}function Dj(t){for(let e of t.filters)if(e instanceof mn)return!1;return!0}function uy(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+Vs(t.value);if(wS(t))return t.filters.map(e=>uy(e)).join(",");{let e=t.filters.map(n=>uy(n)).join(",");return`${t.op}(${e})`}}function ES(t,e){return t instanceof He?function(r,i){return i instanceof He&&r.op===i.op&&r.field.isEqual(i.field)&&gn(r.value,i.value)}(t,e):t instanceof mn?function(r,i){return i instanceof mn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&ES(o,i.filters[a]),!0):!1}(t,e):void Q()}function TS(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${Vs(n.value)}`}(t):t instanceof mn?function(n){return n.op.toString()+" {"+n.getFilters().map(TS).join(" ,")+"}"}(t):"Filter"}var ly=class extends He{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){let n=G.comparator(e.key,this.key);return this.matchesComparison(n)}},dy=class extends He{constructor(e,n){super(e,"in",n),this.keys=DS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},hy=class extends He{constructor(e,n){super(e,"not-in",n),this.keys=DS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function DS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}var fy=class extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Rv(n)&&Ua(n.arrayValue,this.value)}},py=class extends He{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ua(this.value.arrayValue,n)}},gy=class extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ua(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Ua(this.value.arrayValue,n)}},my=class extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Rv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ua(this.value.arrayValue,r))}};var yy=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function GC(t,e=null,n=[],r=[],i=null,s=null,o=null){return new yy(t,e,n,r,i,s,o)}function Nv(t){let e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>uy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Od(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vs(r)).join(",")),e.ue=n}return e.ue}function Mv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Tj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ES(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zC(t.startAt,e.startAt)&&zC(t.endAt,e.endAt)}function vy(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Bs=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function bj(t,e,n,r,i,s,o,a){return new Bs(t,e,n,r,i,s,o,a)}function xv(t){return new Bs(t)}function WC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Cj(t){return t.collectionGroup!==null}function Oa(t){let e=J(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new rt(Ct.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new js(s,r))}),n.has(Ct.keyField().canonicalString())||e.ce.push(new js(Ct.keyField(),r))}return e.ce}function fn(t){let e=J(t);return e.le||(e.le=Sj(e,Oa(t))),e.le}function Sj(t,e){if(t.limitType==="F")return GC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new js(i.field,s)});let n=t.endAt?new Us(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Us(t.startAt.position,t.startAt.inclusive):null;return GC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _y(t,e,n){return new Bs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kd(t,e){return Mv(fn(t),fn(e))&&t.limitType===e.limitType}function bS(t){return`${Nv(fn(t))}|lt:${t.limitType}`}function Rs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>TS(i)).join(", ")}]`),Od(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Vs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Vs(i)).join(",")),`Target(${r})`}(fn(t))}; limitType=${t.limitType})`}function Ld(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Oa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=qC(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Oa(r),i)||r.endAt&&!function(o,a,u){let l=qC(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Oa(r),i))}(t,e)}function Aj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CS(t){return(e,n)=>{let r=!1;for(let i of Oa(t)){let s=Rj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Rj(t,e,n){let r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Fs(u,l):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}var br=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yi(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return mS(this.inner)}size(){return this.innerSize}};var Nj=new Ne(G.comparator);function qn(){return Nj}var SS=new Ne(G.comparator);function xa(...t){let e=SS;for(let n of t)e=e.insert(n.key,n);return e}function AS(t){let e=SS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ai(){return ka()}function RS(){return ka()}function ka(){return new br(t=>t.toString(),(t,e)=>t.isEqual(e))}var Mj=new Ne(G.comparator),xj=new rt(G.comparator);function ce(...t){let e=xj;for(let n of t)e=e.add(n);return e}var Pj=new rt(pe);function Oj(){return Pj}function Pv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fa(e)?"-0":e}}function NS(t){return{integerValue:""+t}}function kj(t,e){return yj(e)?NS(e):Pv(t,e)}var $s=class{constructor(){this._=void 0}};function Lj(t,e,n){return t instanceof Hs?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Sv(s)&&(s=Av(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof fi?xS(t,e):t instanceof pi?PS(t,e):function(i,s){let o=MS(i,s),a=KC(o)+KC(i.Pe);return cy(o)&&cy(i.Pe)?NS(a):Pv(i.serializer,a)}(t,e)}function Fj(t,e,n){return t instanceof fi?xS(t,e):t instanceof pi?PS(t,e):n}function MS(t,e){return t instanceof qs?function(r){return cy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Hs=class extends $s{},fi=class extends $s{constructor(e){super(),this.elements=e}};function xS(t,e){let n=OS(e);for(let r of t.elements)n.some(i=>gn(i,r))||n.push(r);return{arrayValue:{values:n}}}var pi=class extends $s{constructor(e){super(),this.elements=e}};function PS(t,e){let n=OS(e);for(let r of t.elements)n=n.filter(i=>!gn(i,r));return{arrayValue:{values:n}}}var qs=class extends $s{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function KC(t){return be(t.integerValue||t.doubleValue)}function OS(t){return Rv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Vj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof fi&&i instanceof fi||r instanceof pi&&i instanceof pi?Ls(r.elements,i.elements,gn):r instanceof qs&&i instanceof qs?gn(r.Pe,i.Pe):r instanceof Hs&&i instanceof Hs}(t.transform,e.transform)}var Iy=class{constructor(e,n){this.version=e,this.transformResults=n}},Er=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Xl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var zs=class{};function kS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ad(t.key,Er.none()):new gi(t.key,t.data,Er.none());{let n=t.data,r=bt.empty(),i=new rt(Ct.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new yn(t.key,r,new kt(i.toArray()),Er.none())}}function Uj(t,e,n){t instanceof gi?function(i,s,o){let a=i.value.clone(),u=YC(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof yn?function(i,s,o){if(!Xl(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=YC(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(LS(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function La(t,e,n,r){return t instanceof gi?function(s,o,a,u){if(!Xl(s.precondition,o))return a;let l=s.value.clone(),h=ZC(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof yn?function(s,o,a,u){if(!Xl(s.precondition,o))return a;let l=ZC(s.fieldTransforms,u,o),h=o.data;return h.setAll(LS(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Xl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function jj(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=MS(r.transform,i||null);s!=null&&(n===null&&(n=bt.empty()),n.set(r.field,s))}return n||null}function QC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ls(r,i,(s,o)=>Vj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var gi=class extends zs{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},yn=class extends zs{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function LS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function YC(t,e,n){let r=new Map;ve(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Fj(o,a,n[i]))}return r}function ZC(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,Lj(s,o,e))}return r}var ad=class extends zs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},wy=class extends zs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ey=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Uj(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=La(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=La(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=RS();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=kS(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Ls(this.mutations,e.mutations,(n,r)=>QC(n,r))&&Ls(this.baseMutations,e.baseMutations,(n,r)=>QC(n,r))}},Ty=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ve(e.mutations.length===r.length);let i=function(){return Mj}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Dy=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var by=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Fe,de;function Bj(t){switch(t){default:return Q();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function FS(t){if(t===void 0)return $n("GRPC error has no .code"),M.UNKNOWN;switch(t){case Fe.OK:return M.OK;case Fe.CANCELLED:return M.CANCELLED;case Fe.UNKNOWN:return M.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return M.INTERNAL;case Fe.UNAVAILABLE:return M.UNAVAILABLE;case Fe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Fe.NOT_FOUND:return M.NOT_FOUND;case Fe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Fe.ABORTED:return M.ABORTED;case Fe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Fe.DATA_LOSS:return M.DATA_LOSS;default:return Q()}}(de=Fe||(Fe={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var JC=null;function $j(){return new TextEncoder}var Hj=new wr([4294967295,4294967295],0);function XC(t){let e=$j().encode(t),n=new Bm;return n.update(e),new Uint8Array(n.digest())}function eS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new wr([n,r],0),new wr([i,s],0)]}var Cy=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ci(`Invalid padding: ${n}`);if(r<0)throw new ci(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ci(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ci(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=wr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(wr.fromNumber(r)));return i.compare(Hj)===1&&(i=new wr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=XC(e),[r,i]=eS(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=XC(e),[r,i]=eS(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ci=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var cd=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ja.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ee.min(),i,new Ne(pe),qn(),ce())}},ja=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ce(),ce(),ce())}};var Ps=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},ud=class{constructor(e,n){this.targetId=e,this.me=n}},ld=class{constructor(e,n,r=it.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},dd=class{constructor(){this.fe=0,this.ge=nS(),this.pe=it.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new ja(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=nS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Sy=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=qn(),this.qe=tS(),this.Qe=new Ne(pe)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(vy(s))if(r===0){let o=new G(s.path);this.Ue(n,o,zt.newNoDocument(o,ee.min()))}else ve(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}JC?.et(function(h,p,m,v,C){var N,R,k,j,V,$;let _e={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},K=p.unchangedNames;return K&&(_e.bloomFilter={applied:C===0,hashCount:(N=K?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(j=(k=(R=K?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&j!==void 0?j:0,padding:($=(V=K?.bits)===null||V===void 0?void 0:V.padding)!==null&&$!==void 0?$:0,mightContain:E=>{var y;return(y=v?.mightContain(E))!==null&&y!==void 0&&y}}),_e}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Dr(r).toUint8Array()}catch(u){if(u instanceof id)return ks("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Cy(o,i,s)}catch(u){return ks(u instanceof ci?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&vy(a.target)){let u=new G(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,zt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ce();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new cd(e,n,this.Qe,this.ke,r);return this.ke=qn(),this.qe=tS(),this.Qe=new Ne(pe),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new dd,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new rt(pe),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new dd),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function tS(){return new Ne(G.comparator)}function nS(){return new Ne(G.comparator)}var qj={asc:"ASCENDING",desc:"DESCENDING"},zj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gj={and:"AND",or:"OR"},Ay=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Ry(t,e){return t.useProto3Json||Od(e)?e:{value:e}}function hd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Wj(t,e){return hd(t,e.toTimestamp())}function pn(t){return ve(!!t),ee.fromTimestamp(function(n){let r=Hn(n);return new Ke(r.seconds,r.nanos)}(t))}function Ov(t,e){return Ny(t,e).canonicalString()}function Ny(t,e){let n=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function US(t){let e=Re.fromString(t);return ve(qS(e)),e}function My(t,e){return Ov(t.databaseId,e.path)}function Wm(t,e){let n=US(e);if(n.get(1)!==t.databaseId.projectId)throw new U(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new U(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(BS(n))}function jS(t,e){return Ov(t.databaseId,e)}function Kj(t){let e=US(t);return e.length===4?Re.emptyPath():BS(e)}function xy(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function BS(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function rS(t,e,n){return{name:My(t,e),fields:n.value.mapValue.fields}}function Qj(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(ve(h===void 0||typeof h=="string"),it.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array),it.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?M.UNKNOWN:FS(l.code);return new U(h,l.message||"")}(o);n=new ld(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Wm(t,r.document.name),s=pn(r.document.updateTime),o=r.document.createTime?pn(r.document.createTime):ee.min(),a=new bt({mapValue:{fields:r.document.fields}}),u=zt.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Ps(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Wm(t,r.document),s=r.readTime?pn(r.readTime):ee.min(),o=zt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ps([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Wm(t,r.document),s=r.removedTargetIds||[];n=new Ps([],s,i,null)}else{if(!("filter"in e))return Q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new by(i,s),a=r.targetId;n=new ud(a,o)}}return n}function Yj(t,e){let n;if(e instanceof gi)n={update:rS(t,e.key,e.value)};else if(e instanceof ad)n={delete:My(t,e.key)};else if(e instanceof yn)n={update:rS(t,e.key,e.data),updateMask:s2(e.fieldMask)};else{if(!(e instanceof wy))return Q();n={verify:My(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Hs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof pi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qs)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Wj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q()}(t,e.precondition)),n}function Zj(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?pn(i.updateTime):pn(s);return o.isEqual(ee.min())&&(o=pn(s)),new Iy(o,i.transformResults||[])}(n,e))):[]}function Jj(t,e){return{documents:[jS(t,e.path)]}}function Xj(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=jS(t,i);let s=function(l){if(l.length!==0)return HS(mn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Ns(m.field),direction:n2(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Ry(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function e2(t){let e=Kj(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ve(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=$S(p);return m instanceof mn&&wS(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(C){return new js(Ms(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Od(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,v=p.values||[];return new Us(v,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new Us(v,m)}(n.endAt)),bj(e,i,o,s,a,"F",u,l)}function t2(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $S(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ms(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ms(n.unaryFilter.field);return He.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ms(n.unaryFilter.field);return He.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ms(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return He.create(Ms(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return mn.create(n.compositeFilter.filters.map(r=>$S(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function n2(t){return qj[t]}function r2(t){return zj[t]}function i2(t){return Gj[t]}function Ns(t){return{fieldPath:t.canonicalString()}}function Ms(t){return Ct.fromServerFormat(t.fieldPath)}function HS(t){return t instanceof He?function(n){if(n.op==="=="){if(HC(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NAN"}};if($C(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(HC(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NOT_NAN"}};if($C(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ns(n.field),op:r2(n.op),value:n.value}}}(t):t instanceof mn?function(n){let r=n.getFilters().map(i=>HS(i));return r.length===1?r[0]:{compositeFilter:{op:i2(n.op),filters:r}}}(t):Q()}function s2(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ba=class t{constructor(e,n,r,i,s=ee.min(),o=ee.min(),a=it.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Py=class{constructor(e){this.ct=e}};function o2(t){let e=e2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_y(e,e.limit,"L"):e}var fd=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(be(e.integerValue));else if("doubleValue"in e){let r=be(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Fa(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Hn(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Dr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?vS(e)?this.dt(n,Number.MAX_SAFE_INTEGER):yS(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Q()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(be(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),G.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};fd.vt=new fd;var Oy=class{constructor(){this.un=new ky}addToCollectionParentIndex(e,n){return this.un.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(di.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(di.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},ky=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new rt(Re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rt(Re.comparator)).toArray()}};var y8=new Uint8Array(0);var dn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(41943040,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);var $a=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var Ly=class{constructor(){this.changes=new br(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Fy=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Vy=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&La(r.mutation,i,kt.empty(),Ke.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){let i=ai();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=xa();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=ai();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=qn(),o=ka(),a=function(){return ka()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof yn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),La(h.mutation,l,h.mutation.getFieldMask(),Ke.now())):o.set(l.key,kt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new Fy(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=ka(),i=new Ne((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||kt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ce()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=RS();h.forEach(m=>{if(!s.has(m)){let v=kS(n.get(m),r.get(m));v!==null&&p.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Cj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):x.resolve(ai()),a=-1,u=s;return o.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,ce())).next(h=>({batchId:a,changes:AS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=xa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=xa();return this.indexManager.getCollectionParents(e,s).next(a=>x.forEach(a,u=>{let l=function(p,m){return new Bs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,zt.newInvalidDocument(h)))});let a=xa();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&La(h.mutation,l,kt.empty(),Ke.now()),Ld(n,l)&&(a=a.insert(u,l))}),a})}};var Uy=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return x.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:pn(i.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:o2(i.bundledQuery),readTime:pn(i.readTime)}}(n)),x.resolve()}};var jy=class{constructor(){this.overlays=new Ne(G.comparator),this.Ir=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ai();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=ai(),s=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ne((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=ai(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ai(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Dy(n,r));let s=this.Ir.get(n);s===void 0&&(s=ce(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var By=class{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var Ha=class{constructor(){this.Tr=new rt(Ve.Er),this.dr=new rt(Ve.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Ve(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ve(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new G(new Re([])),r=new Ve(n,e),i=new Ve(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new G(new Re([])),r=new Ve(n,e),i=new Ve(n,e+1),s=ce();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Ve(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ve=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||pe(e.wr,n.wr)}static Ar(e,n){return pe(e.wr,n.wr)||G.comparator(e.key,n.key)}};var $y=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new rt(Ve.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Ey(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Ve(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ve(n,0),i=new Ve(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rt(pe);return n.forEach(i=>{let s=new Ve(i,0),o=new Ve(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;G.isDocumentKey(s)||(s=s.child(""));let o=new Ve(new G(s),0),a=new rt(pe);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),x.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(n.mutations,i=>{let s=new Ve(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Ve(n,0),i=this.br.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Hy=class{constructor(e){this.Mr=e,this.docs=function(){return new Ne(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(e,n){let r=qn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():zt.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=qn(),o=n.path,a=new G(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||pj(fj(h),r)<=0||(i.has(h.key)||Ld(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Q()}Or(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new qy(this)}getSize(e){return x.resolve(this.size)}},qy=class extends Ly{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var zy=class{constructor(e){this.persistence=e,this.Nr=new br(n=>Nv(n),Mv),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ha,this.targetCount=0,this.kr=$a.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),x.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new $a(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.Kn(n),x.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Br.containsKey(n))}};var Gy=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new gS(0),this.Kr=!1,this.Kr=!0,this.$r=new By,this.referenceDelegate=e(this),this.Ur=new zy(this),this.indexManager=new Oy,this.remoteDocumentCache=function(i){return new Hy(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Py(n),this.Gr=new Uy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new $y(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new Wy(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Wy=class extends sy{constructor(e){super(),this.currentSequenceNumber=e}},Ky=class t{constructor(e){this.persistence=e,this.Jr=new Ha,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),x.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=G.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return x.or([()=>x.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Qy=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ce(),i=ce();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Yy=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Zy=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _b()?8:mj(ze())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Yy;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ma()<=ae.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Rs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(Ma()<=ae.DEBUG&&F("QueryEngine","Query:",Rs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ma()<=ae.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Rs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fn(n))):x.resolve())}Yi(e,n){if(WC(n))return x.resolve(null);let r=fn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=_y(n,null,"F"),r=fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ce(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,o,u.readTime)?this.Yi(e,_y(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return WC(n)||i.isEqual(ee.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?x.resolve(null):(Ma()<=ae.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Rs(n)),this.rs(e,o,n,hj(i,-1)).next(a=>a))})}ts(e,n){let r=new rt(CS(e));return n.forEach((i,s)=>{Ld(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ma()<=ae.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Rs(n)),this.Ji.getDocumentsMatchingQuery(e,n,di.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Jy=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ne(pe),this._s=new br(s=>Nv(s),Mv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vy(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function a2(t,e,n,r){return new Jy(t,e,n,r)}function zS(t,e){return _(this,null,function*(){let n=J(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=ce();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function c2(t,e){let n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),v=x.resolve();return m.forEach(C=>{v=v.next(()=>h.getEntry(u,C)).next(N=>{let R=l.docVersions.get(C);ve(R!==null),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ce();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function GS(t){let e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function u2(t,e){let n=J(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(it.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(N,R,k){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,v,h)&&a.push(n.Ur.updateTargetData(s,v))});let u=qn(),l=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(l2(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(ee.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function l2(t,e,n){let r=ce(),i=ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=qn();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function d2(t,e){let n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function h2(t,e){let n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ba(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function Xy(t,e,n){return _(this,null,function*(){let r=J(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Qa(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function iS(t,e,n){let r=J(t),i=ee.min(),s=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=J(u),m=p._s.get(h);return m!==void 0?x.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,fn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ee.min(),n?s:ce())).next(a=>(f2(r,Aj(e),a),{documents:a,Ts:s})))}function f2(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var pd=class{constructor(){this.activeTargetIds=Oj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var ev=class{constructor(){this.so=new pd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new pd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var tv=class{_o(e){}shutdown(){}};var gd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Zl=null;function Km(){return Zl===null?Zl=function(){return 268435456+Math.round(2147483648*Math.random())}():Zl++,"0x"+Zl.toString(16)}var p2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var nv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var nt="WebChannelConnection",rv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=Km(),u=this.xo(n,r.toUriEncodedString());F("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(F("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ks("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=p2[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=Km();return new Promise((o,a)=>{let u=new $m;u.setWithCredentials(!0),u.listenOnce(Hm.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Na.NO_ERROR:let h=u.getResponseJson();F(nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Na.TIMEOUT:F(nt,`RPC '${e}' ${s} timed out`),a(new U(M.DEADLINE_EXCEEDED,"Request time out"));break;case Na.HTTP_ERROR:let p=u.getStatus();if(F(nt,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let C=function(R){let k=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(k)>=0?k:M.UNKNOWN}(v.status);a(new U(C,v.message))}else a(new U(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new U(M.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{F(nt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);F(nt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Km(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Gm(),a=zm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");F(nt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,v=!1,C=new nv({Io:R=>{v?F(nt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(F(nt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),F(nt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),N=(R,k,j)=>{R.listen(k,V=>{try{j(V)}catch($){setTimeout(()=>{throw $},0)}})};return N(p,As.EventType.OPEN,()=>{v||(F(nt,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),N(p,As.EventType.CLOSE,()=>{v||(v=!0,F(nt,`RPC '${e}' stream ${i} transport closed`),C.So())}),N(p,As.EventType.ERROR,R=>{v||(v=!0,ks(nt,`RPC '${e}' stream ${i} transport errored:`,R),C.So(new U(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,As.EventType.MESSAGE,R=>{var k;if(!v){let j=R.data[0];ve(!!j);let V=j,$=V.error||((k=V[0])===null||k===void 0?void 0:k.error);if($){F(nt,`RPC '${e}' stream ${i} received error:`,$);let _e=$.status,K=function(I){let T=Fe[I];if(T!==void 0)return FS(T)}(_e),E=$.message;K===void 0&&(K=M.INTERNAL,E="Unknown error status: "+_e+" with message "+$.message),v=!0,C.So(new U(K,E)),p.close()}else F(nt,`RPC '${e}' stream ${i} received:`,j),C.bo(j)}}),N(a,qm.STAT_EVENT,R=>{R.stat===Ql.PROXY?F(nt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Ql.NOPROXY&&F(nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}};function Qm(){return typeof document<"u"?document:null}function Fd(t){return new Ay(t,!0)}var md=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var yd=class{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new md(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?($n(n.toString()),$n("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new U(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},iv=class extends yd{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=Qj(this.serializer,e),r=function(s){if(!("targetChange"in s))return ee.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?pn(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=xy(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=vy(u)?{documents:Jj(s,u)}:{query:Xj(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=VS(s,o.resumeToken);let l=Ry(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=hd(s,o.snapshotVersion.toTimestamp());let l=Ry(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=t2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=xy(this.serializer),n.removeTarget=e,this.a_(n)}},sv=class extends yd{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=Zj(e.writeResults,e.commitTime),r=pn(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=xy(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Yj(this.serializer,r))};this.a_(n)}};var ov=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new U(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Ny(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Ny(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},av=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?($n(n),this.D_=!1):F("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var cv=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>_(this,null,function*(){vi(this)&&(F("RemoteStore","Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=J(u);l.L_.add(4),yield Ya(l),l.q_.set("Unknown"),l.L_.delete(4),yield Vd(l)})}(this))}))}),this.q_=new av(r,i)}};function Vd(t){return _(this,null,function*(){if(vi(t))for(let e of t.B_)yield e(!0)})}function Ya(t){return _(this,null,function*(){for(let e of t.B_)yield e(!1)})}function WS(t,e){let n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Vv(n)?Fv(n):Ys(n).r_()&&Lv(n,e))}function kv(t,e){let n=J(t),r=Ys(n);n.N_.delete(e),r.r_()&&KS(n,e),n.N_.size===0&&(r.r_()?r.o_():vi(n)&&n.q_.set("Unknown"))}function Lv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ys(t).A_(e)}function KS(t,e){t.Q_.xe(e),Ys(t).R_(e)}function Fv(t){t.Q_=new Sy({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ys(t).start(),t.q_.v_()}function Vv(t){return vi(t)&&!Ys(t).n_()&&t.N_.size>0}function vi(t){return J(t).L_.size===0}function QS(t){t.Q_=void 0}function g2(t){return _(this,null,function*(){t.q_.set("Online")})}function m2(t){return _(this,null,function*(){t.N_.forEach((e,n)=>{Lv(t,e)})})}function y2(t,e){return _(this,null,function*(){QS(t),Vv(t)?(t.q_.M_(e),Fv(t)):t.q_.set("Unknown")})}function v2(t,e,n){return _(this,null,function*(){if(t.q_.set("Online"),e instanceof ld&&e.state===2&&e.cause)try{yield function(i,s){return _(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vd(t,r)}else if(e instanceof Ps?t.Q_.Ke(e):e instanceof ud?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{let r=yield GS(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(it.EMPTY_BYTE_STRING,h.snapshotVersion)),KS(s,u);let p=new Ba(h.target,u,l,h.sequenceNumber);Lv(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){F("RemoteStore","Failed to raise snapshot:",r),yield vd(t,r)}})}function vd(t,e,n){return _(this,null,function*(){if(!Qa(e))throw e;t.L_.add(1),yield Ya(t),t.q_.set("Offline"),n||(n=()=>GS(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){F("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Vd(t)}))})}function YS(t,e){return e().catch(n=>vd(t,n,e))}function Ud(t){return _(this,null,function*(){let e=J(t),n=Cr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;_2(e);)try{let i=yield d2(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,I2(e,i)}catch(i){yield vd(e,i)}ZS(e)&&JS(e)})}function _2(t){return vi(t)&&t.O_.length<10}function I2(t,e){t.O_.push(e);let n=Cr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ZS(t){return vi(t)&&!Cr(t).n_()&&t.O_.length>0}function JS(t){Cr(t).start()}function w2(t){return _(this,null,function*(){Cr(t).p_()})}function E2(t){return _(this,null,function*(){let e=Cr(t);for(let n of t.O_)e.m_(n.mutations)})}function T2(t,e,n){return _(this,null,function*(){let r=t.O_.shift(),i=Ty.from(r,e,n);yield YS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Ud(t)})}function D2(t,e){return _(this,null,function*(){e&&Cr(t).V_&&(yield function(r,i){return _(this,null,function*(){if(function(o){return Bj(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();Cr(r).s_(),yield YS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Ud(r)}})}(t,e)),ZS(t)&&JS(t)})}function sS(t,e){return _(this,null,function*(){let n=J(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");let r=vi(n);n.L_.add(3),yield Ya(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Vd(n)})}function b2(t,e){return _(this,null,function*(){let n=J(t);e?(n.L_.delete(2),yield Vd(n)):e||(n.L_.add(2),yield Ya(n),n.q_.set("Unknown"))})}function Ys(t){return t.K_||(t.K_=function(n,r,i){let s=J(n);return s.w_(),new iv(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:g2.bind(null,t),Ro:m2.bind(null,t),mo:y2.bind(null,t),d_:v2.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.K_.s_(),Vv(t)?Fv(t):t.q_.set("Unknown")):(yield t.K_.stop(),QS(t))}))),t.K_}function Cr(t){return t.U_||(t.U_=function(n,r,i){let s=J(n);return s.w_(),new sv(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:w2.bind(null,t),mo:D2.bind(null,t),f_:E2.bind(null,t),g_:T2.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.U_.s_(),yield Ud(t)):(yield t.U_.stop(),t.O_.length>0&&(F("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var uv=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new qt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Uv(t,e){if($n("AsyncQueue",`${e}: ${t}`),Qa(t))return new U(M.UNAVAILABLE,`${e}: ${t}`);throw t}var _d=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=xa(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Id=class{constructor(){this.W_=new Ne(G.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},Gs=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,_d.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var lv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},dv=class{constructor(){this.queries=oS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=J(n),s=i.queries;i.queries=oS(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new U(M.ABORTED,"Firestore shutting down"))}};function oS(){return new br(t=>bS(t),kd)}function XS(t,e){return _(this,null,function*(){let n=J(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new lv,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=Uv(o,`Initialization of query '${Rs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&jv(n)})}function eA(t,e){return _(this,null,function*(){let n=J(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function C2(t,e){let n=J(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&jv(n)}function S2(t,e,n){let r=J(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function jv(t){t.Y_.forEach(e=>{e.next()})}var hv,aS;(aS=hv||(hv={})).ea="default",aS.Cache="cache";var wd=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Gs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Gs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==hv.Cache}};var Ed=class{constructor(e){this.key=e}},Td=class{constructor(e){this.key=e}},fv=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=CS(e),this.Ra=new _d(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Id,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=Ld(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),N=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),R=!1;m&&v?m.data.isEqual(v.data)?C!==N&&(r.track({type:3,doc:v}),R=!0):this.ga(m,v)||(r.track({type:2,doc:v}),R=!0,(u&&this.Aa(v,u)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),R=!0):m&&!v&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(v?(o=o.add(v),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(v,C){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return N(v)-N(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new Gs(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Id,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Td(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Ed(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Gs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},pv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},gv=class{constructor(e){this.key=e,this.va=!1}},mv=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new br(a=>bS(a),kd),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne(G.comparator),this.Na=new Map,this.La=new Ha,this.Ba={},this.ka=new Map,this.qa=$a.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function A2(t,e,n=!0){return _(this,null,function*(){let r=oA(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield tA(r,e,n,!0),i})}function R2(t,e){return _(this,null,function*(){let n=oA(t);yield tA(n,e,!0,!1)})}function tA(t,e,n,r){return _(this,null,function*(){let i=yield h2(t.localStore,fn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield N2(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&WS(t.remoteStore,i),a})}function N2(t,e,n,r,i){return _(this,null,function*(){t.Ka=(p,m,v)=>function(N,R,k,j){return _(this,null,function*(){let V=R.view.ma(k);V.ns&&(V=yield iS(N.localStore,R.query,!1).then(({documents:E})=>R.view.ma(E,V)));let $=j&&j.targetChanges.get(R.targetId),_e=j&&j.targetMismatches.get(R.targetId)!=null,K=R.view.applyChanges(V,N.isPrimaryClient,$,_e);return uS(N,R.targetId,K.wa),K.snapshot})}(t,p,m,v);let s=yield iS(t.localStore,e,!0),o=new fv(e,s.Ts),a=o.ma(s.documents),u=ja.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);uS(t,n,l.wa);let h=new pv(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function M2(t,e,n){return _(this,null,function*(){let r=J(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!kd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Xy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&kv(r.remoteStore,i.targetId),yv(r,i.targetId)}).catch(Ka))):(yv(r,i.targetId),yield Xy(r.localStore,i.targetId,!0))})}function x2(t,e){return _(this,null,function*(){let n=J(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kv(n.remoteStore,r.targetId))})}function P2(t,e,n){return _(this,null,function*(){let r=j2(t);try{let i=yield function(o,a){let u=J(o),l=Ke.now(),h=a.reduce((v,C)=>v.add(C.key),ce()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let C=qn(),N=ce();return u.cs.getEntries(v,h).next(R=>{C=R,C.forEach((k,j)=>{j.isValidDocument()||(N=N.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,C)).next(R=>{p=R;let k=[];for(let j of a){let V=jj(j,p.get(j.key).overlayedDocument);V!=null&&k.push(new yn(j.key,V,_S(V.value.mapValue),Er.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,k,a)}).next(R=>{m=R;let k=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(v,R.batchId,k)})}).then(()=>({batchId:m.batchId,changes:AS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Ne(pe)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Za(r,i.changes),yield Ud(r.remoteStore)}catch(i){let s=Uv(i,"Failed to persist write");n.reject(s)}})}function nA(t,e){return _(this,null,function*(){let n=J(t);try{let r=yield u2(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ve(o.va):i.removedDocuments.size>0&&(ve(o.va),o.va=!1))}),yield Za(n,r,e)}catch(r){yield Ka(r)}})}function cS(t,e,n){let r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=J(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&jv(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function O2(t,e,n){return _(this,null,function*(){let r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ne(G.comparator);o=o.insert(s,zt.newNoDocument(s,ee.min()));let a=ce().add(s),u=new cd(ee.min(),new Map,new Ne(pe),o,a);yield nA(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Bv(r)}else yield Xy(r.localStore,e,!1).then(()=>yv(r,e,n)).catch(Ka)})}function k2(t,e){return _(this,null,function*(){let n=J(t),r=e.batch.batchId;try{let i=yield c2(n.localStore,e);iA(n,r,null),rA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Za(n,i)}catch(i){yield Ka(i)}})}function L2(t,e,n){return _(this,null,function*(){let r=J(t);try{let i=yield function(o,a){let u=J(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ve(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);iA(r,e,n),rA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Za(r,i)}catch(i){yield Ka(i)}})}function rA(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function iA(t,e,n){let r=J(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function yv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||sA(t,r)})}function sA(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(kv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Bv(t))}function uS(t,e,n){for(let r of n)r instanceof Ed?(t.La.addReference(r.key,e),F2(t,r)):r instanceof Td?(F("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||sA(t,r.key)):Q()}function F2(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(F("SyncEngine","New document in limbo: "+n),t.xa.add(r),Bv(t))}function Bv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new G(Re.fromString(e)),r=t.qa.next();t.Na.set(r,new gv(n)),t.Oa=t.Oa.insert(n,r),WS(t.remoteStore,new Ba(fn(xv(n.path)),r,"TargetPurposeLimboResolution",gS.oe))}}function Za(t,e,n){return _(this,null,function*(){let r=J(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Qy.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return _(this,null,function*(){let h=J(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>x.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Qa(p))throw p;F("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),C=v.snapshotVersion,N=v.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(m,N)}}})}(r.localStore,s))})}function V2(t,e){return _(this,null,function*(){let n=J(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());let r=yield zS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new U(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Za(n,r.hs)}})}function U2(t,e){let n=J(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let i=ce(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function oA(t){let e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O2.bind(null,e),e.Ca.d_=C2.bind(null,e.eventManager),e.Ca.$a=S2.bind(null,e.eventManager),e}function j2(t){let e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L2.bind(null,e),e}var lS=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=Fd(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return a2(this.persistence,new Zy,n.initialUser,this.serializer)}Ga(n){return new Gy(Ky.Zr,this.serializer)}Wa(n){return new ev}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var B2=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>cS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=V2.bind(null,this.syncEngine),yield b2(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new dv}()}createDatastore(n){let r=Fd(n.databaseInfo.databaseId),i=function(o){return new rv(o)}(n.databaseInfo);return function(o,a,u,l){return new ov(o,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,u){return new cv(i,s,o,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>cS(this.syncEngine,r,0),function(){return gd.D()?new gd:new tv}())}createSyncEngine(n,r){return function(s,o,a,u,l,h,p){let m=new mv(s,o,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield function(s){return _(this,null,function*(){let o=J(s);F("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Ya(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Dd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):$n("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var vv=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ge.UNAUTHENTICATED,this.clientId=td.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>_(this,null,function*(){F("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(F("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new qt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Uv(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Ym(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield zS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function dS(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield $2(t);F("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>sS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>sS(e.remoteStore,i)),t._onlineComponents=e})}function $2(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ym(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ks("Error using user provided cache. Falling back to memory cache: "+n),yield Ym(t,new lS)}}else F("FirestoreClient","Using default OfflineComponentProvider"),yield Ym(t,new lS);return t._offlineComponents})}function aA(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),yield dS(t,t._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),yield dS(t,new B2))),t._onlineComponents})}function H2(t){return aA(t).then(e=>e.syncEngine)}function cA(t){return _(this,null,function*(){let e=yield aA(t),n=e.eventManager;return n.onListen=A2.bind(null,e.syncEngine),n.onUnlisten=M2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=R2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=x2.bind(null,e.syncEngine),n})}function q2(t,e,n={}){let r=new qt;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,a,u,l){let h=new Dd({next:m=>{h.Za(),o.enqueueAndForget(()=>eA(s,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new U(M.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?l.reject(new U(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new wd(xv(a.path),h,{includeMetadataChanges:!0,_a:!0});return XS(s,p)}(yield cA(t),t.asyncQueue,e,n,r)})),r.promise}function z2(t,e,n={}){let r=new qt;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,a,u,l){let h=new Dd({next:m=>{h.Za(),o.enqueueAndForget(()=>eA(s,p)),m.fromCache&&u.source==="server"?l.reject(new U(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new wd(a,h,{includeMetadataChanges:!0,_a:!0});return XS(s,p)}(yield cA(t),t.asyncQueue,e,n,r)})),r.promise}function uA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var hS=new Map;function lA(t,e,n){if(!n)throw new U(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function G2(t,e,n,r){if(e===!0&&r===!0)throw new U(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function fS(t){if(!G.isDocumentKey(t))throw new U(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pS(t){if(G.isDocumentKey(t))throw new U(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $v(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function zn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new U(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=$v(t);throw new U(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var bd=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new U(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}G2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ws=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bd(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Zm;switch(r.type){case"firstParty":return new ty(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=hS.get(n);r&&(F("ComponentProvider","Removing Datastore"),hS.delete(n),r.terminate())}(this),Promise.resolve()}};function dA(t,e,n,r={}){var i;let s=(t=zn(t,Ws))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ks("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ge.MOCK_USER;else{a=Dl(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new U(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ge(l)}t._authCredentials=new Jm(new ed(a,u))}}var Cd=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},yt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Tr=class t extends Cd{constructor(e,n,r){super(e,n,xv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new G(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function hA(t,e,...n){if(t=De(t),lA("collection","path",e),t instanceof Ws){let r=Re.fromString(e,...n);return pS(r),new Tr(t,null,r)}{if(!(t instanceof yt||t instanceof Tr))throw new U(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Re.fromString(e,...n));return pS(r),new Tr(t.firestore,null,r)}}function fA(t,e,...n){if(t=De(t),arguments.length===1&&(e=td.newId()),lA("doc","path",e),t instanceof Ws){let r=Re.fromString(e,...n);return fS(r),new yt(t,null,new G(r))}{if(!(t instanceof yt||t instanceof Tr))throw new U(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Re.fromString(e,...n));return fS(r),new yt(t.firestore,t instanceof Tr?t.converter:null,new G(r))}}var Sd=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new md(this,"async_queue_retry"),this.Vu=()=>{let r=Qm();r&&F("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=Qm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=Qm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new qt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return _(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Qa(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw $n("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=uv.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Q()}verifyOperationInProgress(){}wu(){return _(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};var mi=class extends Ws{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Sd,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Sd(e),this._firestoreClient=void 0,yield e}})}};function pA(t,e){let n=typeof t=="object"?t:yr(),r=typeof t=="string"?t:e||"(default)",i=Zr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Tl("firestore");s&&dA(i,...s)}return i}function Hv(t){if(t._terminated)throw new U(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||W2(t),t._firestoreClient}function W2(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new oy(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,uA(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new vv(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var qa=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(it.fromBase64String(e))}catch(n){throw new U(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ks=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new U(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var za=class{constructor(e){this._methodName=e}};var Ga=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new U(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new U(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}};var Wa=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var K2=/^__.*__$/,_v=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new yn(e,this.data,this.fieldMask,n,this.fieldTransforms):new gi(e,this.data,n,this.fieldTransforms)}},Ad=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new yn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function gA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}var Iv=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Nd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(gA(this.Cu)&&K2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},wv=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fd(e)}Qu(e,n,r,i=!1){return new Iv({Cu:e,methodName:n,qu:r,path:Ct.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function mA(t){let e=t._freezeSettings(),n=Fd(t._databaseId);return new wv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Q2(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);qv("Data must be an object, but it was:",o,r);let a=yA(r,o),u,l;if(s.merge)u=new kt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=Ev(e,p,n);if(!o.contains(m))throw new U(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);_A(h,m)||h.push(m)}u=new kt(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new _v(new bt(a),u,l)}var Rd=class t extends za{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function Y2(t,e,n,r){let i=t.Qu(1,e,n);qv("Data must be an object, but it was:",i,r);let s=[],o=bt.empty();yi(r,(u,l)=>{let h=zv(e,u,n);l=De(l);let p=i.Nu(h);if(l instanceof Rd)s.push(h);else{let m=jd(l,p);m!=null&&(s.push(h),o.set(h,m))}});let a=new kt(s);return new Ad(o,a,i.fieldTransforms)}function Z2(t,e,n,r,i,s){let o=t.Qu(1,e,n),a=[Ev(e,r,n)],u=[i];if(s.length%2!=0)throw new U(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Ev(e,s[m])),u.push(s[m+1]);let l=[],h=bt.empty();for(let m=a.length-1;m>=0;--m)if(!_A(l,a[m])){let v=a[m],C=u[m];C=De(C);let N=o.Nu(v);if(C instanceof Rd)l.push(v);else{let R=jd(C,N);R!=null&&(l.push(v),h.set(v,R))}}let p=new kt(l);return new Ad(h,p,o.fieldTransforms)}function jd(t,e){if(vA(t=De(t)))return qv("Unsupported field value:",e,t),yA(t,e);if(t instanceof za)return function(r,i){if(!gA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=jd(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=De(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ke.fromDate(r);return{timestampValue:hd(i.serializer,s)}}if(r instanceof Ke){let s=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hd(i.serializer,s)}}if(r instanceof Ga)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qa)return{bytesValue:VS(i.serializer,r._byteString)};if(r instanceof yt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ov(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Wa)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Pv(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${$v(r)}`)}(t,e)}function yA(t,e){let n={};return mS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yi(t,(r,i)=>{let s=jd(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function vA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof Ga||t instanceof qa||t instanceof yt||t instanceof za||t instanceof Wa)}function qv(t,e,n){if(!vA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=$v(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Ev(t,e,n){if((e=De(e))instanceof Ks)return e._internalPath;if(typeof e=="string")return zv(t,e);throw Nd("Field path arguments must be of type string or ",t,!1,void 0,n)}var J2=new RegExp("[~\\*/\\[\\]]");function zv(t,e,n){if(e.search(J2)>=0)throw Nd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ks(...e.split("."))._internalPath}catch{throw Nd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nd(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new U(M.INVALID_ARGUMENT,a+t+u)}function _A(t,e){return t.some(n=>n.isEqual(e))}var Md=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Tv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(IA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Tv=class extends Md{data(){return super.data()}};function IA(t,e){return typeof e=="string"?zv(t,e):e instanceof Ks?e._internalPath:e._delegate._internalPath}function X2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new U(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Dv=class{convertValue(e,n="none"){switch(hi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return yi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>be(o.doubleValue));return new Wa(s)}convertGeoPoint(e){return new Ga(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Av(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Va(e));default:return null}}convertTimestamp(e){let n=Hn(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Re.fromString(e);ve(qS(r));let i=new sd(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||$n(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function eB(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ui=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},xd=class extends Md{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Os(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(IA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Os=class extends xd{data(e={}){return super.data(e)}},bv=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ui(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Os(this._firestore,this._userDataWriter,r.key,r,new ui(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new U(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new Os(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ui(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new Os(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ui(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:tB(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function tB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}function wA(t){t=zn(t,yt);let e=zn(t.firestore,mi);return q2(Hv(e),t._key).then(n=>nB(e,t,n))}var Pd=class extends Dv{constructor(e){super(),this.firestore=e}convertBytes(e){return new qa(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,n)}};function EA(t){t=zn(t,Cd);let e=zn(t.firestore,mi),n=Hv(e),r=new Pd(e);return X2(t._query),z2(n,t._query).then(i=>new bv(e,r,t,i))}function TA(t,e,n){t=zn(t,yt);let r=zn(t.firestore,mi),i=eB(t.converter,e,n);return bA(r,[Q2(mA(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Er.none())])}function DA(t,e,n,...r){t=zn(t,yt);let i=zn(t.firestore,mi),s=mA(i),o;return o=typeof(e=De(e))=="string"||e instanceof Ks?Z2(s,"updateDoc",t._key,e,n,r):Y2(s,"updateDoc",t._key,e),bA(i,[o.toMutation(t._key,Er.exists(!0))])}function bA(t,e){return function(r,i){let s=new qt;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return P2(yield H2(r),i,s)})),s.promise}(Hv(t),e)}function nB(t,e,n){let r=n.docs.get(e._key),i=new Pd(t);return new xd(t,i,e._key,r,new ui(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Qs=i})(cn),an(new mt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new mi(new Xm(r.getProvider("auth-internal")),new ry(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new U(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sd(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ce(VC,"4.7.3",e),Ce(VC,"4.7.3","esm2017")})();var _i=class{constructor(e){return e}},CA="firestore",Gv=class{constructor(){return bs(CA)}};var Wv=new z("angularfire2.firestore-instances");function rB(t,e){let n=Ia(CA,t,e);return n&&new _i(n)}function iB(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new _i(r)}}var sB={provide:Gv,deps:[[new tt,Wv]]},oB={provide:_i,useFactory:rB,deps:[[new tt,Wv],kn]};function F5(t,...e){return Ce("angularfire",vr.full,"fst"),en([oB,sB,{provide:Wv,useFactory:iB(t),multi:!0,deps:[ge,et,ei,ti,[new tt,Ra],[new tt,Xr],...e]}])}var SA=Pe(hA,!0);var Zs=Pe(fA,!0);var AA=Pe(wA,!0);var RA=Pe(EA,!0);var V5=Pe(pA,!0);var NA=Pe(TA,!0);var Bd=Pe(DA,!0);var FA="firebasestorage.googleapis.com",VA="storageBucket",cB=2*60*1e3,uB=10*60*1e3;var Me=class t extends ht{constructor(e,n,r=0){super(Kv(e),`Firebase Storage: ${n} (${Kv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Kv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Oe=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Oe||{});function Kv(t){return"storage/"+t}function e_(){let t="An unknown error occurred, please check the error payload for server response.";return new Me(Oe.UNKNOWN,t)}function lB(t){return new Me(Oe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function dB(t){return new Me(Oe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hB(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Me(Oe.UNAUTHENTICATED,t)}function fB(){return new Me(Oe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function pB(t){return new Me(Oe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function gB(){return new Me(Oe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mB(){return new Me(Oe.CANCELED,"User canceled the upload/download.")}function yB(t){return new Me(Oe.INVALID_URL,"Invalid URL '"+t+"'.")}function vB(t){return new Me(Oe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function _B(){return new Me(Oe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+VA+"' property when initializing the app?")}function IB(){return new Me(Oe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function wB(){return new Me(Oe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function EB(t){return new Me(Oe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Qv(t){return new Me(Oe.INVALID_ARGUMENT,t)}function UA(){return new Me(Oe.APP_DELETED,"The Firebase app was deleted.")}function TB(t){return new Me(Oe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xa(t,e){return new Me(Oe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ja(t){throw new Me(Oe.INTERNAL_ERROR,"Internal error: "+t)}var Gt=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw vB(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l($){$.path_=decodeURIComponent($.path)}let h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${p}/${h}/b/${i}/o${m}`,"i"),C={bucket:1,path:3},N=n===FA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",k=new RegExp(`^https?://${N}/${i}/${R}`,"i"),V=[{regex:a,indices:u,postModify:s},{regex:v,indices:C,postModify:l},{regex:k,indices:{bucket:1,path:2},postModify:l}];for(let $=0;$<V.length;$++){let _e=V[$],K=_e.regex.exec(e);if(K){let E=K[_e.indices.bucket],y=K[_e.indices.path];y||(y=""),r=new t(E,y),_e.postModify(r);break}}if(r==null)throw yB(e);return r}},Yv=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function DB(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function h(...R){l||(l=!0,e.apply(null,R))}function p(R){i=setTimeout(()=>{i=null,t(v,u())},R)}function m(){s&&clearTimeout(s)}function v(R,...k){if(l){m();return}if(R){m(),h.call(null,R,...k);return}if(u()||o){m(),h.call(null,R,...k);return}r<64&&(r*=2);let V;a===1?(a=2,V=0):V=(r+Math.random())*1e3,p(V)}let C=!1;function N(R){C||(C=!0,m(),!l&&(i!==null?(R||(a=2),clearTimeout(i),p(0)):R||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,N(!0)},n),N}function bB(t){t(!1)}function CB(t){return t!==void 0}function SB(t){return typeof t=="object"&&!Array.isArray(t)}function t_(t){return typeof t=="string"||t instanceof String}function MA(t){return n_()&&t instanceof Blob}function n_(){return typeof Blob<"u"}function xA(t,e,n,r){if(r<e)throw Qv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Qv(`Invalid value for '${t}'. Expected ${n} or less.`)}function r_(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function jA(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Xs=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Xs||{});function AB(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var Zv=class{constructor(e,n,r,i,s,o,a,u,l,h,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,C)=>{this.resolve_=v,this.reject_=C,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Js(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Xs.NO_ERROR,u=s.getStatus();if(!a||AB(u,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===Xs.ABORT;r(!1,new Js(!1,null,h));return}let l=this.successCodes_.indexOf(u)!==-1;r(!0,new Js(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(a,a.getResponse());CB(u)?s(u):s()}catch(u){o(u)}else if(a!==null){let u=e_();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){let u=this.appDelete_?UA():mB();o(u)}else{let u=gB();o(u)}};this.canceled_?n(!1,new Js(!1,null,!0)):this.backoffId_=DB(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&bB(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Js=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function RB(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function NB(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function MB(t,e){e&&(t["X-Firebase-GMPID"]=e)}function xB(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function PB(t,e,n,r,i,s,o=!0){let a=jA(t.urlParams),u=t.url+a,l=Object.assign({},t.headers);return MB(l,e),RB(l,n),NB(l,s),xB(l,r),new Zv(u,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function OB(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function kB(...t){let e=OB();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(n_())return new Blob(t);throw new Me(Oe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function LB(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function FB(t){if(typeof atob>"u")throw EB("base-64");return atob(t)}var vn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},ec=class{constructor(e,n){this.data=e,this.contentType=n||null}};function VB(t,e){switch(t){case vn.RAW:return new ec(BA(e));case vn.BASE64:case vn.BASE64URL:return new ec($A(t,e));case vn.DATA_URL:return new ec(jB(e),BB(e))}throw e_()}function BA(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function UB(t){let e;try{e=decodeURIComponent(t)}catch{throw Xa(vn.DATA_URL,"Malformed data URL.")}return BA(e)}function $A(t,e){switch(t){case vn.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Xa(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case vn.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Xa(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=FB(e)}catch(i){throw i.message.includes("polyfill")?i:Xa(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var Hd=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw Xa(vn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=$B(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function jB(t){let e=new Hd(t);return e.base64?$A(vn.BASE64,e.rest):UB(e.rest)}function BB(t){return new Hd(t).contentType}function $B(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var qd=class t{constructor(e,n){let r=0,i="";MA(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(MA(this.data_)){let r=this.data_,i=LB(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(n_()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(kB.apply(null,n))}else{let n=e.map(o=>t_(o)?VB(vn.RAW,o).data:o.data_),r=0;n.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new t(i,!0)}}uploadData(){return this.data_}};function HA(t){let e;try{e=JSON.parse(t)}catch{return null}return SB(e)?e:null}function HB(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function qB(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function qA(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function zB(t,e){return e}var Qe=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||zB}},$d=null;function GB(t){return!t_(t)||t.length<2?t:qA(t)}function zA(){if($d)return $d;let t=[];t.push(new Qe("bucket")),t.push(new Qe("generation")),t.push(new Qe("metageneration")),t.push(new Qe("name","fullPath",!0));function e(s,o){return GB(o)}let n=new Qe("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}let i=new Qe("size");return i.xform=r,t.push(i),t.push(new Qe("timeCreated")),t.push(new Qe("updated")),t.push(new Qe("md5Hash",null,!0)),t.push(new Qe("cacheControl",null,!0)),t.push(new Qe("contentDisposition",null,!0)),t.push(new Qe("contentEncoding",null,!0)),t.push(new Qe("contentLanguage",null,!0)),t.push(new Qe("contentType",null,!0)),t.push(new Qe("metadata","customMetadata",!0)),$d=t,$d}function WB(t,e){function n(){let r=t.bucket,i=t.fullPath,s=new Gt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function KB(t,e,n){let r={};r.type="file";let i=n.length;for(let s=0;s<i;s++){let o=n[s];r[o.local]=o.xform(r,e[o.server])}return WB(r,t),r}function GA(t,e,n){let r=HA(e);return r===null?null:KB(t,r,n)}function QB(t,e,n,r){let i=HA(e);if(i===null||!t_(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(l=>{let h=t.bucket,p=t.fullPath,m="/b/"+o(h)+"/o/"+o(p),v=r_(m,n,r),C=jA({alt:"media",token:l});return v+C})[0]}function YB(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}var zd=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function WA(t){if(!t)throw e_()}function ZB(t,e){function n(r,i){let s=GA(t,i,e);return WA(s!==null),s}return n}function JB(t,e){function n(r,i){let s=GA(t,i,e);return WA(s!==null),QB(s,i,t.host,t._protocol)}return n}function KA(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=fB():i=hB():n.getStatus()===402?i=dB(t.bucket):n.getStatus()===403?i=pB(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function XB(t){let e=KA(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=lB(t.path)),s.serverResponse=i.serverResponse,s}return n}function e$(t,e,n){let r=e.fullServerUrl(),i=r_(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new zd(i,s,JB(t,n),o);return a.errorHandler=XB(e),a}function t$(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function n$(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=t$(null,e)),r}function r$(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let $=0;$<2;$++)V=V+Math.random().toString().slice(2);return V}let u=a();o["Content-Type"]="multipart/related; boundary="+u;let l=n$(e,r,i),h=YB(l,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,m=`\r
--`+u+"--",v=qd.getBlob(p,r,m);if(v===null)throw IB();let C={name:l.fullPath},N=r_(s,t.host,t._protocol),R="POST",k=t.maxUploadRetryTime,j=new zd(N,R,ZB(t,n),k);return j.urlParams=C,j.headers=o,j.body=v.uploadData(),j.errorHandler=KA(e),j}var H5=256*1024;var PA=null,Jv=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Ja("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ja("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ja("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ja("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ja("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},Xv=class extends Jv{initXhr(){this.xhr_.responseType="text"}};function QA(){return PA?PA():new Xv}var eo=class t{constructor(e,n){this._service=e,n instanceof Gt?this._location=n:this._location=Gt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Gt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qA(this._location.path)}get storage(){return this._service}get parent(){let e=HB(this._location.path);if(e===null)return null;let n=new Gt(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw TB(e)}};function i$(t,e,n){t._throwIfRoot("uploadBytes");let r=r$(t.storage,t._location,zA(),new qd(e,!0),n);return t.storage.makeRequestWithTokens(r,QA).then(i=>({metadata:i,ref:t}))}function s$(t){t._throwIfRoot("getDownloadURL");let e=e$(t.storage,t._location,zA());return t.storage.makeRequestWithTokens(e,QA).then(n=>{if(n===null)throw wB();return n})}function o$(t,e){let n=qB(t._location.path,e),r=new Gt(t._location.bucket,n);return new eo(t.storage,r)}function a$(t){return/^[A-Za-z]+:\/\//.test(t)}function c$(t,e){return new eo(t,e)}function YA(t,e){if(t instanceof tc){let n=t;if(n._bucket==null)throw _B();let r=new eo(n,n._bucket);return e!=null?YA(r,e):r}else return e!==void 0?o$(t,e):t}function u$(t,e){if(e&&a$(e)){if(t instanceof tc)return c$(t,e);throw Qv("To use ref(service, url), the first argument must be a Storage instance.")}else return YA(t,e)}function OA(t,e){let n=e?.[VA];return n==null?null:Gt.makeFromBucketSpec(n,t)}function l$(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Dl(i,t.app.options.projectId))}var tc=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=FA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=cB,this._maxUploadRetryTime=uB,this._requests=new Set,i!=null?this._bucket=Gt.makeFromBucketSpec(i,this._host):this._bucket=OA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gt.makeFromBucketSpec(this._url,e):this._bucket=OA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return _(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return _(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new eo(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Yv(UA());{let o=PB(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return _(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},kA="@firebase/storage",LA="0.13.2";var ZA="storage";function JA(t,e,n){return t=De(t),i$(t,e,n)}function XA(t){return t=De(t),s$(t)}function e0(t,e){return t=De(t),u$(t,e)}function t0(t=yr(),e){t=De(t);let r=Zr(t,ZA).getImmediate({identifier:e}),i=Tl("storage");return i&&n0(r,...i),r}function n0(t,e,n,r={}){l$(t,e,n,r)}function d$(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new tc(n,r,i,e,cn)}function h$(){an(new mt(ZA,d$,"PUBLIC").setMultipleInstances(!0)),Ce(kA,LA,""),Ce(kA,LA,"esm2017")}h$();var r0=Pe(XA,!0);var i0=Pe(t0,!0);var s0=Pe(e0,!0);var o0=Pe(JA,!0);var a0=class t{constructor(e,n){this.auth=e;this.firestore=n}userSubject=new je(null);uploadImage(e){return _(this,null,function*(){let n=i0(),r=s0(n,`images/${e.name}`);try{return yield o0(r,e),yield r0(r)}catch(i){throw console.error("Error al subir la imagen:",i),i}})}registerUser(e,n,r,i){return _(this,null,function*(){try{let s=yield xC(this.auth,e,n);yield PC(s.user);let o=i!=="especialista",a=ye(L({uid:s.user.uid},r),{role:i,createdAt:new Date,habilitado:o,emailVerificado:!1});return yield NA(Zs(this.firestore,"users",s.user.uid),a),ye(L({},s.user),{role:i})}catch(s){throw console.error(`Error al registrar el ${i}:`,s),s}})}verificarCorreo(e){return _(this,null,function*(){let n=this.auth.currentUser;if(n){yield n.reload();let r=yield this.getUserData(n.uid);n.emailVerified&&(yield Bd(Zs(this.firestore,`users/${n.uid}`),{emailVerificado:!0}))}})}login(e,n){return _(this,null,function*(){try{let r=yield OC(this.auth,e,n);yield this.verificarCorreo(r.user.uid);let i=yield this.getUserData(r.user.uid);if(i.role==="especialista"){if(!i.habilitado)throw new Error("Tu cuenta debe ser aprobada por un administrador antes de poder iniciar sesi\xF3n.");if(!i.emailVerificado)throw new Error("Debes verificar tu correo electr\xF3nico para ingresar.")}else if(!i.emailVerificado)throw new Error("Debes verificar tu correo electr\xF3nico para ingresar.");return this.userSubject.next(L(L({},r.user),i)),L(L({},r.user),i)}catch(r){throw console.error("Error en el login:",r),r}})}getUserData(e){return _(this,null,function*(){let n=Zs(this.firestore,`users/${e}`),r=yield AA(n);if(r.exists())return r.data();throw new Error("No se encontr\xF3 el documento del usuario")})}logout(){return kC(this.auth).then(()=>{this.userSubject.next(null)})}habilitarUsuario(e){return _(this,null,function*(){let n=Zs(this.firestore,"users",e);yield Bd(n,{habilitado:!0})})}inhabilitarUsuario(e){return _(this,null,function*(){let n=Zs(this.firestore,"users",e);yield Bd(n,{habilitado:!1})})}obtenerUsuarios(){return _(this,null,function*(){let e=SA(this.firestore,"users");return(yield RA(e)).docs.map(r=>L({id:r.id},r.data()))})}getUser(){return this.userSubject.asObservable()}static \u0275fac=function(n){return new(n||t)(W(oi),W(_i))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};export{L as a,ye as b,f$ as c,p$ as d,_ as e,at as f,xe as g,ie as h,ER as i,q as j,Ow as k,B as l,Lo as m,z as n,W as o,Kw as p,Vo as q,Uo as r,Ou as s,P9 as t,O9 as u,lp as v,ut as w,Uu as x,k9 as y,L9 as z,rn as A,Sp as B,j9 as C,gP as D,CP as E,FT as F,UP as G,jP as H,VT as I,UT as J,Rp as K,B9 as L,jT as M,$9 as N,H9 as O,iO as P,$T as Q,sO as R,q9 as S,oO as T,z9 as U,qT as V,$o as W,G9 as X,Ho as Y,JT as Z,W9 as _,NO as $,us as aa,IW as ba,wW as ca,FO as da,KW as ea,Lk as fa,fr as ga,m6 as ha,y6 as ia,o3 as ja,a3 as ka,e8 as la,t8 as ma,F5 as na,V5 as oa,a0 as pa};
