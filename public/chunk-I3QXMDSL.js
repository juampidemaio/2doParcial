var X0=Object.create;var wh=Object.defineProperty,eR=Object.defineProperties,tR=Object.getOwnPropertyDescriptor,nR=Object.getOwnPropertyDescriptors,rR=Object.getOwnPropertyNames,lI=Object.getOwnPropertySymbols,hI=Object.getPrototypeOf,fI=Object.prototype.hasOwnProperty,iR=Object.prototype.propertyIsEnumerable,sR=Reflect.get;var dI=(t,e,n)=>e in t?wh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||={})fI.call(e,n)&&dI(t,n,e[n]);if(lI)for(var n of lI(e))iR.call(e,n)&&dI(t,n,e[n]);return t},ve=(t,e)=>eR(t,nR(e));var O$=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var oR=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of rR(e))!fI.call(t,i)&&i!==n&&wh(t,i,{get:()=>e[i],enumerable:!(r=tR(e,i))||r.enumerable});return t};var k$=(t,e,n)=>(n=t!=null?X0(hI(t)):{},oR(e||!t||!t.__esModule?wh(n,"default",{value:t,enumerable:!0}):n,t));var Xn=(t,e,n)=>sR(hI(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});function pI(t,e){return Object.is(t,e)}var je=null,wc=!1,Ec=1,Dn=Symbol("SIGNAL");function he(t){let e=je;return je=t,e}function gI(){return je}var bo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Dh(t){if(wc)throw new Error("");if(je===null)return;je.consumerOnSignalRead(t);let e=je.nextProducerIndex++;if(Cc(je),e<je.producerNode.length&&je.producerNode[e]!==t&&Do(je)){let n=je.producerNode[e];bc(n,je.producerIndexOfThis[e])}je.producerNode[e]!==t&&(je.producerNode[e]=t,je.producerIndexOfThis[e]=Do(je)?_I(t,je,e):0),je.producerLastReadVersion[e]=t.version}function aR(){Ec++}function mI(t){if(!(Do(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Ec)){if(!t.producerMustRecompute(t)&&!Ch(t)){t.dirty=!1,t.lastCleanEpoch=Ec;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Ec}}function yI(t){if(t.liveConsumerNode===void 0)return;let e=wc;wc=!0;try{for(let n of t.liveConsumerNode)n.dirty||cR(n)}finally{wc=e}}function vI(){return je?.consumerAllowSignalWrites!==!1}function cR(t){t.dirty=!0,yI(t),t.consumerMarkedDirty?.(t)}function Dc(t){return t&&(t.nextProducerIndex=0),he(t)}function bh(t,e){if(he(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Do(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)bc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ch(t){Cc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(mI(n),r!==n.version))return!0}return!1}function Sh(t){if(Cc(t),Do(t))for(let e=0;e<t.producerNode.length;e++)bc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function _I(t,e,n){if(II(t),t.liveConsumerNode.length===0&&wI(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=_I(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function bc(t,e){if(II(t),t.liveConsumerNode.length===1&&wI(t))for(let r=0;r<t.producerNode.length;r++)bc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Cc(i),i.producerIndexOfThis[r]=e}}function Do(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Cc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function II(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function wI(t){return t.producerNode!==void 0}function EI(t){let e=Object.create(uR);e.computation=t;let n=()=>{if(mI(e),Dh(e),e.value===Tc)throw e.error;return e.value};return n[Dn]=e,n}var Eh=Symbol("UNSET"),Th=Symbol("COMPUTING"),Tc=Symbol("ERRORED"),uR=ve(L({},bo),{value:Eh,dirty:!0,error:null,equal:pI,producerMustRecompute(t){return t.value===Eh||t.value===Th},producerRecomputeValue(t){if(t.value===Th)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Th;let n=Dc(t),r;try{r=t.computation()}catch(i){r=Tc,t.error=i}finally{bh(t,n)}if(e!==Eh&&e!==Tc&&r!==Tc&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function lR(){throw new Error}var TI=lR;function DI(){TI()}function bI(t){TI=t}var dR=null;function CI(t){let e=Object.create(AI);e.value=t;let n=()=>(Dh(e),e.value);return n[Dn]=e,n}function Ah(t,e){vI()||DI(),t.equal(t.value,e)||(t.value=e,hR(t))}function SI(t,e){vI()||DI(),Ah(t,e(t.value))}var AI=ve(L({},bo),{equal:pI,value:void 0});function hR(t){t.version++,aR(),yI(t),dR?.()}function X(t){return typeof t=="function"}function Ri(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Sc=Ri(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Pr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ae=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(s){e=s instanceof Sc?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{RI(s)}catch(o){e=e??[],o instanceof Sc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Sc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)RI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Pr(n,e)}remove(e){let{_finalizers:n}=this;n&&Pr(n,e),e instanceof t&&e._removeParent(this)}};Ae.EMPTY=(()=>{let t=new Ae;return t.closed=!0,t})();var Rh=Ae.EMPTY;function Ac(t){return t instanceof Ae||t&&"closed"in t&&X(t.remove)&&X(t.add)&&X(t.unsubscribe)}function RI(t){X(t)?t():t.unsubscribe()}var Vt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ni={setTimeout(t,e,...n){let{delegate:r}=Ni;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ni;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Rc(t){Ni.setTimeout(()=>{let{onUnhandledError:e}=Vt;if(e)e(t);else throw t})}function Co(){}var NI=Nh("C",void 0,void 0);function MI(t){return Nh("E",void 0,t)}function xI(t){return Nh("N",t,void 0)}function Nh(t,e,n){return{kind:t,value:e,error:n}}var Or=null;function Mi(t){if(Vt.useDeprecatedSynchronousErrorHandling){let e=!Or;if(e&&(Or={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Or;if(Or=null,n)throw r}}else t()}function PI(t){Vt.useDeprecatedSynchronousErrorHandling&&Or&&(Or.errorThrown=!0,Or.error=t)}var kr=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ac(e)&&e.add(this)):this.destination=gR}static create(e,n,r){return new xi(e,n,r)}next(e){this.isStopped?xh(xI(e),this):this._next(e)}error(e){this.isStopped?xh(MI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?xh(NI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},fR=Function.prototype.bind;function Mh(t,e){return fR.call(t,e)}var Ph=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Nc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Nc(r)}else Nc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Nc(n)}}},xi=class extends kr{constructor(e,n,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Vt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Mh(e.next,s),error:e.error&&Mh(e.error,s),complete:e.complete&&Mh(e.complete,s)}):i=e}this.destination=new Ph(i)}};function Nc(t){Vt.useDeprecatedSynchronousErrorHandling?PI(t):Rc(t)}function pR(t){throw t}function xh(t,e){let{onStoppedNotification:n}=Vt;n&&Ni.setTimeout(()=>n(t,e))}var gR={closed:!0,next:Co,error:pR,complete:Co};var Pi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wt(t){return t}function Oh(...t){return kh(t)}function kh(t){return t.length===0?wt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ue=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=yR(n)?n:new xi(n,r,i);return Mi(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=OI(r),new r((i,s)=>{let o=new xi({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Pi](){return this}pipe(...n){return kh(n)(this)}toPromise(n){return n=OI(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function OI(t){var e;return(e=t??Vt.Promise)!==null&&e!==void 0?e:Promise}function mR(t){return t&&X(t.next)&&X(t.error)&&X(t.complete)}function yR(t){return t&&t instanceof kr||mR(t)&&Ac(t)}function Lh(t){return X(t?.lift)}function le(t){return e=>{if(Lh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function se(t,e,n,r,i){return new Fh(t,e,n,r,i)}var Fh=class extends kr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Oi(){return le((t,e)=>{let n=null;t._refCount++;let r=se(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ki=class extends ue{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Lh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ae;let n=this.getSubject();e.add(this.source.subscribe(se(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ae.EMPTY)}return e}refCount(){return Oi()(this)}};var kI=Ri(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var at=(()=>{class t extends ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Mc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new kI}next(n){Mi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Mi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Mi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Rh:(this.currentObservers=null,s.push(n),new Ae(()=>{this.currentObservers=null,Pr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ue;return n.source=this,n}}return t.create=(e,n)=>new Mc(e,n),t})(),Mc=class extends at{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Rh}};var Be=class extends at{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Vh={now(){return(Vh.delegate||Date).now()},delegate:void 0};var xc=class extends Ae{constructor(e,n){super()}schedule(e,n=0){return this}};var So={setInterval(t,e,...n){let{delegate:r}=So;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=So;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Li=class extends xc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return So.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&So.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Pr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Fi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Fi.now=Vh.now;var Vi=class extends Fi{constructor(e,n=Fi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Uh=new Vi(Li);var Pc=class extends Li{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Oc=class extends Vi{};var jh=new Oc(Pc);var Et=new ue(t=>t.complete());function LI(t){return t&&X(t.schedule)}function FI(t){return t[t.length-1]}function kc(t){return X(FI(t))?t.pop():void 0}function er(t){return LI(FI(t))?t.pop():void 0}function Bh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function UI(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function VI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Lr(t){return this instanceof Lr?(this.v=t,this):new Lr(t)}function jI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(v){return function(C){return Promise.resolve(C).then(v,p)}}function a(v,C){r[v]&&(i[v]=function(N){return new Promise(function(R,k){s.push([v,N,R,k])>1||u(v,N)})},C&&(i[v]=C(i[v])))}function u(v,C){try{l(r[v](C))}catch(N){m(s[0][3],N)}}function l(v){v.value instanceof Lr?Promise.resolve(v.value.v).then(h,p):m(s[0][2],v)}function h(v){u("next",v)}function p(v){u("throw",v)}function m(v,C){v(C),s.shift(),s.length&&u(s[0][0],s[0][1])}}function BI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof VI=="function"?VI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var Lc=t=>t&&typeof t.length=="number"&&typeof t!="function";function Fc(t){return X(t?.then)}function Vc(t){return X(t[Pi])}function Uc(t){return Symbol.asyncIterator&&X(t?.[Symbol.asyncIterator])}function jc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function vR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Bc=vR();function $c(t){return X(t?.[Bc])}function Hc(t){return jI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Lr(n.read());if(i)return yield Lr(void 0);yield yield Lr(r)}}finally{n.releaseLock()}})}function qc(t){return X(t?.getReader)}function ke(t){if(t instanceof ue)return t;if(t!=null){if(Vc(t))return _R(t);if(Lc(t))return IR(t);if(Fc(t))return wR(t);if(Uc(t))return $I(t);if($c(t))return ER(t);if(qc(t))return TR(t)}throw jc(t)}function _R(t){return new ue(e=>{let n=t[Pi]();if(X(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function IR(t){return new ue(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function wR(t){return new ue(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Rc)})}function ER(t){return new ue(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function $I(t){return new ue(e=>{DR(t,e).catch(n=>e.error(n))})}function TR(t){return $I(Hc(t))}function DR(t,e){var n,r,i,s;return UI(this,void 0,void 0,function*(){try{for(n=BI(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function pt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function tr(t,e=0){return le((n,r)=>{n.subscribe(se(r,i=>pt(r,t,()=>r.next(i),e),()=>pt(r,t,()=>r.complete(),e),i=>pt(r,t,()=>r.error(i),e)))})}function nr(t,e=0){return le((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function HI(t,e){return ke(t).pipe(nr(e),tr(e))}function qI(t,e){return ke(t).pipe(nr(e),tr(e))}function zI(t,e){return new ue(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function GI(t,e){return new ue(n=>{let r;return pt(n,e,()=>{r=t[Bc](),pt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function zc(t,e){if(!t)throw new Error("Iterable cannot be null");return new ue(n=>{pt(n,e,()=>{let r=t[Symbol.asyncIterator]();pt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function WI(t,e){return zc(Hc(t),e)}function KI(t,e){if(t!=null){if(Vc(t))return HI(t,e);if(Lc(t))return zI(t,e);if(Fc(t))return qI(t,e);if(Uc(t))return zc(t,e);if($c(t))return GI(t,e);if(qc(t))return WI(t,e)}throw jc(t)}function xe(t,e){return e?KI(t,e):ke(t)}function Y(...t){let e=er(t);return xe(t,e)}function Ui(t,e){let n=X(t)?t:()=>t,r=i=>i.error(n());return new ue(e?i=>e.schedule(r,0,i):r)}function $h(t){return!!t&&(t instanceof ue||X(t.lift)&&X(t.subscribe))}var bn=Ri(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function oe(t,e){return le((n,r)=>{let i=0;n.subscribe(se(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:bR}=Array;function CR(t,e){return bR(e)?t(...e):t(e)}function Gc(t){return oe(e=>CR(t,e))}var{isArray:SR}=Array,{getPrototypeOf:AR,prototype:RR,keys:NR}=Object;function Wc(t){if(t.length===1){let e=t[0];if(SR(e))return{args:e,keys:null};if(MR(e)){let n=NR(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function MR(t){return t&&typeof t=="object"&&AR(t)===RR}function Kc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ao(...t){let e=er(t),n=kc(t),{args:r,keys:i}=Wc(t);if(r.length===0)return xe([],e);let s=new ue(xR(r,e,i?o=>Kc(i,o):wt));return n?s.pipe(Gc(n)):s}function xR(t,e,n=wt){return r=>{QI(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)QI(e,()=>{let l=xe(t[u],e),h=!1;l.subscribe(se(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function QI(t,e,n){t?pt(n,t,e):e()}function YI(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},v=N=>l<r?C(N):u.push(N),C=N=>{s&&e.next(N),l++;let R=!1;ke(n(N,h++)).subscribe(se(e,k=>{i?.(k),s?v(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();o?pt(e,o,()=>C(k)):C(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(se(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Le(t,e,n=1/0){return X(e)?Le((r,i)=>oe((s,o)=>e(r,s,i,o))(ke(t(r,i))),n):(typeof e=="number"&&(n=e),le((r,i)=>YI(r,i,t,n)))}function ji(t=1/0){return Le(wt,t)}function ZI(){return ji(1)}function Bi(...t){return ZI()(xe(t,er(t)))}function Qc(t){return new ue(e=>{ke(t()).subscribe(e)})}function PR(...t){let e=kc(t),{args:n,keys:r}=Wc(t),i=new ue(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;ke(n[h]).subscribe(se(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?Kc(r,a):a),s.complete())}))}});return e?i.pipe(Gc(e)):i}function Rt(t,e){return le((n,r)=>{let i=0;n.subscribe(se(r,s=>t.call(e,s,i++)&&r.next(s)))})}function rr(t){return le((e,n)=>{let r=null,i=!1,s;r=e.subscribe(se(n,void 0,void 0,o=>{s=ke(t(o,rr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function JI(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(se(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function Fr(t,e){return X(e)?Le(t,e,1):Le(t,1)}function ir(t){return le((e,n)=>{let r=!1;e.subscribe(se(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Cn(t){return t<=0?()=>Et:le((e,n)=>{let r=0;e.subscribe(se(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Hh(t){return oe(()=>t)}function Yc(t=OR){return le((e,n)=>{let r=!1;e.subscribe(se(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function OR(){return new bn}function Ro(t){return le((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Qt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Rt((i,s)=>t(i,s,r)):wt,Cn(1),n?ir(e):Yc(()=>new bn))}function $i(t){return t<=0?()=>Et:le((e,n)=>{let r=[];e.subscribe(se(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function qh(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Rt((i,s)=>t(i,s,r)):wt,$i(1),n?ir(e):Yc(()=>new bn))}function zh(t,e){return le(JI(t,e,arguments.length>=2,!0))}function Gh(...t){let e=er(t);return le((n,r)=>{(e?Bi(t,n,e):Bi(t,n)).subscribe(r)})}function Nt(t,e){return le((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(se(r,u=>{i?.unsubscribe();let l=0,h=s++;ke(t(u,h)).subscribe(i=se(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Wh(t){return le((e,n)=>{ke(t).subscribe(se(n,()=>n.complete(),Co)),!n.closed&&e.subscribe(n)})}function $e(t,e,n){let r=X(t)||e||n?{next:t,error:e,complete:n}:t;return r?le((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(se(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):wt}var Lw="https://g.co/ng/security#xss",H=class extends Error{constructor(e,n){super(Jf(e,n)),this.code=e}};function Jf(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Vo(t){return{toString:t}.toString()}var Zc="__parameters__";function kR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Fw(t,e,n){return Vo(()=>{let r=kR(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(Zc)?u[Zc]:Object.defineProperty(u,Zc,{value:[]})[Zc];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Ee(t){for(let e in t)if(t[e]===Ee)return e;throw Error("Could not find renamed property on target object.")}function LR(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function lt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(lt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function XI(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var FR=Ee({__forward_ref__:Ee});function Vw(t){return t.__forward_ref__=Vw,t.toString=function(){return lt(this())},t}function ct(t){return Uw(t)?t():t}function Uw(t){return typeof t=="function"&&t.hasOwnProperty(FR)&&t.__forward_ref__===Vw}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Uo(t){return{providers:t.providers||[],imports:t.imports||[]}}function Mu(t){return ew(t,Bw)||ew(t,$w)}function jw(t){return Mu(t)!==null}function ew(t,e){return t.hasOwnProperty(e)?t[e]:null}function VR(t){let e=t&&(t[Bw]||t[$w]);return e||null}function tw(t){return t&&(t.hasOwnProperty(nw)||t.hasOwnProperty(UR))?t[nw]:null}var Bw=Ee({\u0275prov:Ee}),nw=Ee({\u0275inj:Ee}),$w=Ee({ngInjectableDef:Ee}),UR=Ee({ngInjectorDef:Ee}),z=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Hw(t){return t&&!!t.\u0275providers}var jR=Ee({\u0275cmp:Ee}),BR=Ee({\u0275dir:Ee}),$R=Ee({\u0275pipe:Ee}),HR=Ee({\u0275mod:Ee}),ou=Ee({\u0275fac:Ee}),Mo=Ee({__NG_ELEMENT_ID__:Ee}),rw=Ee({__NG_ENV_ID__:Ee});function Vr(t){return typeof t=="string"?t:t==null?"":String(t)}function qR(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Vr(t)}function zR(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new H(-200,t)}function Xf(t,e){throw new H(-201,!1)}var ne=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ne||{}),cf;function qw(){return cf}function gt(t){let e=cf;return cf=t,e}function zw(t,e,n){let r=Mu(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ne.Optional)return null;if(e!==void 0)return e;Xf(t,"Injector")}var GR={},xo=GR,uf="__NG_DI_FLAG__",au="ngTempTokenPath",WR="ngTokenPath",KR=/\n/gm,QR="\u0275",iw="__source",Wi;function YR(){return Wi}function sr(t){let e=Wi;return Wi=t,e}function ZR(t,e=ne.Default){if(Wi===void 0)throw new H(-203,!1);return Wi===null?zw(t,void 0,e):Wi.get(t,e&ne.Optional?null:void 0,e)}function W(t,e=ne.Default){return(qw()||ZR)(ct(t),e)}function O(t,e=ne.Default){return W(t,xu(e))}function xu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function lf(t){let e=[];for(let n=0;n<t.length;n++){let r=ct(t[n]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,s=ne.Default;for(let o=0;o<r.length;o++){let a=r[o],u=JR(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(W(i,s))}else e.push(W(r))}return e}function Gw(t,e){return t[uf]=e,t.prototype[uf]=e,t}function JR(t){return t[uf]}function XR(t,e,n,r){let i=t[au];throw e[iw]&&i.unshift(e[iw]),t.message=eN(`
`+t.message,i,n,r),t[WR]=i,t[au]=null,t}function eN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==QR?t.slice(2):t;let i=lt(e);if(Array.isArray(e))i=e.map(lt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):lt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(KR,`
  `)}`}var tt=Gw(Fw("Optional"),8);var ep=Gw(Fw("SkipSelf"),4);function jr(t,e){let n=t.hasOwnProperty(ou);return n?t[ou]:null}function tp(t,e){t.forEach(n=>Array.isArray(n)?tp(n,e):e(n))}function Ww(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function cu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function tN(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function nN(t,e,n){let r=jo(t,e);return r>=0?t[r|1]=n:(r=~r,tN(t,r,e,n)),r}function Kh(t,e){let n=jo(t,e);if(n>=0)return t[n|1]}function jo(t,e){return rN(t,e,1)}function rN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Qi={},Mt=[],Yi=new z(""),Kw=new z("",-1),Qw=new z(""),uu=class{get(e,n=xo){if(n===xo){let r=new Error(`NullInjectorError: No provider for ${lt(e)}!`);throw r.name="NullInjectorError",r}return n}},Yw=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Yw||{}),Jt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Jt||{}),cr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(cr||{});function iN(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function df(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];oN(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function sN(t){return t===3||t===4||t===6}function oN(t){return t.charCodeAt(0)===64}function Po(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?sw(t,n,i,null,e[++r]):sw(t,n,i,null,null))}}return t}function sw(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Zw="ng-template";function aN(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&iN(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(np(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function np(t){return t.type===4&&t.value!==Zw}function cN(t,e,n){let r=t.type===4&&!n?Zw:t.value;return e===r}function uN(t,e,n){let r=4,i=t.attrs,s=i!==null?hN(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Ut(r)&&!Ut(u))return!1;if(o&&Ut(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!cN(t,u,n)||u===""&&e.length===1){if(Ut(r))return!1;o=!0}}else if(r&8){if(i===null||!aN(t,i,u,n)){if(Ut(r))return!1;o=!0}}else{let l=e[++a],h=lN(u,i,np(t),n);if(h===-1){if(Ut(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Ut(r))return!1;o=!0}}}}return Ut(r)||o}function Ut(t){return(t&1)===0}function lN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return fN(e,t)}function dN(t,e,n=!1){for(let r=0;r<e.length;r++)if(uN(t,e[r],n))return!0;return!1}function hN(t){for(let e=0;e<t.length;e++){let n=t[e];if(sN(n))return e}return t.length}function fN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function ow(t,e){return t?":not("+e.trim()+")":e}function pN(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Ut(o)&&(e+=ow(s,i),i=""),r=o,s=s||!Ut(r);n++}return i!==""&&(e+=ow(s,i)),e}function gN(t){return t.map(pN).join(",")}function mN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Ut(i))break;i=s}r++}return{attrs:e,classes:n}}function Jw(t){return Vo(()=>{let e=iE(t),n=ve(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Yw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Jt.Emulated,styles:t.styles||Mt,_:null,schemas:t.schemas||null,tView:null,id:""});sE(n);let r=t.dependencies;return n.directiveDefs=cw(r,!1),n.pipeDefs=cw(r,!0),n.id=_N(n),n})}function yN(t){return ur(t)||eE(t)}function vN(t){return t!==null}function Bo(t){return Vo(()=>({type:t.type,bootstrap:t.bootstrap||Mt,declarations:t.declarations||Mt,imports:t.imports||Mt,exports:t.exports||Mt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function aw(t,e){if(t==null)return Qi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=cr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==cr.None?[r,a]:r,e[s]=o):n[s]=r}return n}function as(t){return Vo(()=>{let e=iE(t);return sE(e),e})}function Xw(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function ur(t){return t[jR]||null}function eE(t){return t[BR]||null}function tE(t){return t[$R]||null}function nE(t){let e=ur(t)||eE(t)||tE(t);return e!==null?e.standalone:!1}function rE(t,e){let n=t[HR]||null;if(!n&&e===!0)throw new Error(`Type ${lt(t)} does not have '\u0275mod' property.`);return n}function iE(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Qi,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Mt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:aw(t.inputs,e),outputs:aw(t.outputs),debugInfo:null}}function sE(t){t.features?.forEach(e=>e(t))}function cw(t,e){if(!t)return null;let n=e?tE:yN;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(vN)}function _N(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function rn(t){return{\u0275providers:t}}function IN(...t){return{\u0275providers:oE(!0,t),\u0275fromNgModule:!0}}function oE(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return tp(e,o=>{let a=o;hf(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&aE(i,s),n}function aE(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];rp(i,s=>{e(s,r)})}}function hf(t,e,n,r){if(t=ct(t),!t)return!1;let i=null,s=tw(t),o=!s&&ur(t);if(!s&&!o){let u=t.ngModule;if(s=tw(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)hf(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{tp(s.imports,h=>{hf(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&aE(l,e)}if(!a){let l=jr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Mt},i),e({provide:Qw,useValue:i,multi:!0},i),e({provide:Yi,useValue:()=>W(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;rp(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function rp(t,e){for(let n of t)Hw(n)&&(n=n.\u0275providers),Array.isArray(n)?rp(n,e):e(n)}var wN=Ee({provide:String,useValue:Ee});function cE(t){return t!==null&&typeof t=="object"&&wN in t}function EN(t){return!!(t&&t.useExisting)}function TN(t){return!!(t&&t.useFactory)}function Zi(t){return typeof t=="function"}function DN(t){return!!t.useClass}var Pu=new z(""),tu={},bN={},Qh;function ip(){return Qh===void 0&&(Qh=new uu),Qh}var Tt=class{},Oo=class extends Tt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,pf(e,o=>this.processProvider(o)),this.records.set(Kw,Hi(void 0,this)),i.has("environment")&&this.records.set(Tt,Hi(void 0,this));let s=this.records.get(Pu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Qw,Mt,ne.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=he(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),he(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=sr(this),r=gt(void 0),i;try{return e()}finally{sr(n),gt(r)}}get(e,n=xo,r=ne.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(rw))return e[rw](this);r=xu(r);let i,s=sr(this),o=gt(void 0);try{if(!(r&ne.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=NN(e)&&Mu(e);l&&this.injectableDefInScope(l)?u=Hi(ff(e),tu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ne.Self?ip():this.parent;return n=r&ne.Optional&&n===xo?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[au]=a[au]||[]).unshift(lt(e)),s)throw a;return XR(a,e,"R3InjectorError",this.source)}else throw a}finally{gt(o),sr(s)}}resolveInjectorInitializers(){let e=he(null),n=sr(this),r=gt(void 0),i;try{let s=this.get(Yi,Mt,ne.Self);for(let o of s)o()}finally{sr(n),gt(r),he(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(lt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(e){e=ct(e);let n=Zi(e)?e:ct(e&&e.provide),r=SN(e);if(!Zi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Hi(void 0,tu,!0),i.factory=()=>lf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=he(null);try{return n.value===tu&&(n.value=bN,n.value=n.factory()),typeof n.value=="object"&&n.value&&RN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{he(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ct(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ff(t){let e=Mu(t),n=e!==null?e.factory:jr(t);if(n!==null)return n;if(t instanceof z)throw new H(204,!1);if(t instanceof Function)return CN(t);throw new H(204,!1)}function CN(t){if(t.length>0)throw new H(204,!1);let n=VR(t);return n!==null?()=>n.factory(t):()=>new t}function SN(t){if(cE(t))return Hi(void 0,t.useValue);{let e=uE(t);return Hi(e,tu)}}function uE(t,e,n){let r;if(Zi(t)){let i=ct(t);return jr(i)||ff(i)}else if(cE(t))r=()=>ct(t.useValue);else if(TN(t))r=()=>t.useFactory(...lf(t.deps||[]));else if(EN(t))r=()=>W(ct(t.useExisting));else{let i=ct(t&&(t.useClass||t.provide));if(AN(t))r=()=>new i(...lf(t.deps));else return jr(i)||ff(i)}return r}function Hi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function AN(t){return!!t.deps}function RN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function NN(t){return typeof t=="function"||typeof t=="object"&&t instanceof z}function pf(t,e){for(let n of t)Array.isArray(n)?pf(n,e):n&&Hw(n)?pf(n.\u0275providers,e):e(n)}function sn(t,e){t instanceof Oo&&t.assertNotDestroyed();let n,r=sr(t),i=gt(void 0);try{return e()}finally{sr(r),gt(i)}}function lE(){return qw()!==void 0||YR()!=null}function MN(t){if(!lE())throw new H(-203,!1)}function xN(t){return typeof t=="function"}var Nn=0,ie=1,Z=2,dt=3,jt=4,$t=5,lu=6,du=7,Bt=8,Ji=9,Xt=10,Fe=11,ko=12,uw=13,cs=14,en=15,Xi=16,qi=17,es=18,Ou=19,dE=20,or=21,Yh=22,xt=23,tn=25,hE=1;var Br=7,hu=8,fu=9,Pt=10,pu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(pu||{});function ar(t){return Array.isArray(t)&&typeof t[hE]=="object"}function Mn(t){return Array.isArray(t)&&t[hE]===!0}function fE(t){return(t.flags&4)!==0}function ku(t){return t.componentOffset>-1}function sp(t){return(t.flags&1)===1}function lr(t){return!!t.template}function gf(t){return(t[Z]&512)!==0}var mf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function pE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Lu(){return gE}function gE(t){return t.type.prototype.ngOnChanges&&(t.setInput=ON),PN}Lu.ngInherit=!0;function PN(){let t=yE(this),e=t?.current;if(e){let n=t.previous;if(n===Qi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function ON(t,e,n,r,i){let s=this.declaredInputs[r],o=yE(t)||kN(t,{previous:Qi,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new mf(l&&l.currentValue,n,u===Qi),pE(t,e,i,n)}var mE="__ngSimpleChanges__";function yE(t){return t[mE]||null}function kN(t,e){return t[mE]=e}var lw=null;var Yt=function(t,e,n){lw?.(t,e,n)},LN="svg",FN="math";function nn(t){for(;Array.isArray(t);)t=t[Nn];return t}function vE(t,e){return nn(e[t])}function Ot(t,e){return nn(e[t.index])}function _E(t,e){return t.data[e]}function VN(t,e){return t[e]}function fr(t,e){let n=e[t];return ar(n)?n:n[Nn]}function op(t){return(t[Z]&128)===128}function UN(t){return Mn(t[dt])}function gu(t,e){return e==null?null:t[e]}function IE(t){t[qi]=0}function wE(t){t[Z]&1024||(t[Z]|=1024,op(t)&&Vu(t))}function jN(t,e){for(;t>0;)e=e[cs],t--;return e}function Fu(t){return!!(t[Z]&9216||t[xt]?.dirty)}function yf(t){t[Xt].changeDetectionScheduler?.notify(8),t[Z]&64&&(t[Z]|=1024),Fu(t)&&Vu(t)}function Vu(t){t[Xt].changeDetectionScheduler?.notify(0);let e=$r(t);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!op(e)));)e=$r(e)}function EE(t,e){if((t[Z]&256)===256)throw new H(911,!1);t[or]===null&&(t[or]=[]),t[or].push(e)}function BN(t,e){if(t[or]===null)return;let n=t[or].indexOf(e);n!==-1&&t[or].splice(n,1)}function $r(t){let e=t[dt];return Mn(e)?e[dt]:e}var re={lFrame:xE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var TE=!1;function $N(){return re.lFrame.elementDepthCount}function HN(){re.lFrame.elementDepthCount++}function qN(){re.lFrame.elementDepthCount--}function DE(){return re.bindingsEnabled}function zN(){return re.skipHydrationRootTNode!==null}function GN(t){return re.skipHydrationRootTNode===t}function WN(){re.skipHydrationRootTNode=null}function pe(){return re.lFrame.lView}function ht(){return re.lFrame.tView}function eW(t){return re.lFrame.contextLView=t,t[Bt]}function tW(t){return re.lFrame.contextLView=null,t}function mt(){let t=bE();for(;t!==null&&t.type===64;)t=t.parent;return t}function bE(){return re.lFrame.currentTNode}function KN(){let t=re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function $o(t,e){let n=re.lFrame;n.currentTNode=t,n.isParent=e}function CE(){return re.lFrame.isParent}function QN(){re.lFrame.isParent=!1}function SE(){return TE}function dw(t){TE=t}function Uu(){let t=re.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function YN(){return re.lFrame.bindingIndex}function ZN(t){return re.lFrame.bindingIndex=t}function ju(){return re.lFrame.bindingIndex++}function AE(t){let e=re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function JN(){return re.lFrame.inI18n}function XN(t,e){let n=re.lFrame;n.bindingIndex=n.bindingRootIndex=t,vf(e)}function eM(){return re.lFrame.currentDirectiveIndex}function vf(t){re.lFrame.currentDirectiveIndex=t}function tM(t){let e=re.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function RE(t){re.lFrame.currentQueryIndex=t}function nM(t){let e=t[ie];return e.type===2?e.declTNode:e.type===1?t[$t]:null}function NE(t,e,n){if(n&ne.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ne.Host);)if(i=nM(s),i===null||(s=s[cs],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=re.lFrame=ME();return r.currentTNode=e,r.lView=t,!0}function ap(t){let e=ME(),n=t[ie];re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ME(){let t=re.lFrame,e=t===null?null:t.child;return e===null?xE(t):e}function xE(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function PE(){let t=re.lFrame;return re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var OE=PE;function cp(){let t=PE();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function rM(t){return(re.lFrame.contextLView=jN(t,re.lFrame.contextLView))[Bt]}function Kr(){return re.lFrame.selectedIndex}function Hr(t){re.lFrame.selectedIndex=t}function Bu(){let t=re.lFrame;return _E(t.tView,t.selectedIndex)}function iM(){return re.lFrame.currentNamespace}var kE=!0;function up(){return kE}function lp(t){kE=t}function sM(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=gE(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function dp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function nu(t,e,n){LE(t,e,3,n)}function ru(t,e,n,r){(t[Z]&3)===n&&LE(t,e,n,r)}function Zh(t,e){let n=t[Z];(n&3)===e&&(n&=16383,n+=1,t[Z]=n)}function LE(t,e,n,r){let i=r!==void 0?t[qi]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[qi]+=65536),(a<s||s==-1)&&(oM(t,n,e,u),t[qi]=(t[qi]&4294901760)+u+2),u++}function hw(t,e){Yt(4,t,e);let n=he(null);try{e.call(t)}finally{he(n),Yt(5,t,e)}}function oM(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[Z]>>14<t[qi]>>16&&(t[Z]&3)===e&&(t[Z]+=16384,hw(a,s)):hw(a,s)}var Ki=-1,qr=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function aM(t){return t instanceof qr}function cM(t){return(t.flags&8)!==0}function uM(t){return(t.flags&16)!==0}var Jh={},_f=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=xu(r);let i=this.injector.get(e,Jh,r);return i!==Jh||n===Jh?i:this.parentInjector.get(e,n,r)}};function FE(t){return t!==Ki}function mu(t){return t&32767}function lM(t){return t>>16}function yu(t,e){let n=lM(t),r=e;for(;n>0;)r=r[cs],n--;return r}var If=!0;function vu(t){let e=If;return If=t,e}var dM=256,VE=dM-1,UE=5,hM=0,Zt={};function fM(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Mo)&&(r=n[Mo]),r==null&&(r=n[Mo]=hM++);let i=r&VE,s=1<<i;e.data[t+(i>>UE)]|=s}function _u(t,e){let n=jE(t,e);if(n!==-1)return n;let r=e[ie];r.firstCreatePass&&(t.injectorIndex=e.length,Xh(r.data,t),Xh(e,null),Xh(r.blueprint,null));let i=hp(t,e),s=t.injectorIndex;if(FE(i)){let o=mu(i),a=yu(i,e),u=a[ie].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Xh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function jE(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function hp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=zE(i),r===null)return Ki;if(n++,i=i[cs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ki}function wf(t,e,n){fM(t,e,n)}function BE(t,e,n){if(n&ne.Optional||t!==void 0)return t;Xf(e,"NodeInjector")}function $E(t,e,n,r){if(n&ne.Optional&&r===void 0&&(r=null),!(n&(ne.Self|ne.Host))){let i=t[Ji],s=gt(void 0);try{return i?i.get(e,r,n&ne.Optional):zw(e,r,n&ne.Optional)}finally{gt(s)}}return BE(r,e,n)}function HE(t,e,n,r=ne.Default,i){if(t!==null){if(e[Z]&2048&&!(r&ne.Self)){let o=vM(t,e,n,r,Zt);if(o!==Zt)return o}let s=qE(t,e,n,r,Zt);if(s!==Zt)return s}return $E(e,n,r,i)}function qE(t,e,n,r,i){let s=mM(n);if(typeof s=="function"){if(!NE(e,t,r))return r&ne.Host?BE(i,n,r):$E(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ne.Optional))Xf(n);else return o}finally{OE()}}else if(typeof s=="number"){let o=null,a=jE(t,e),u=Ki,l=r&ne.Host?e[en][$t]:null;for((a===-1||r&ne.SkipSelf)&&(u=a===-1?hp(t,e):e[a+8],u===Ki||!pw(r,!1)?a=-1:(o=e[ie],a=mu(u),e=yu(u,e)));a!==-1;){let h=e[ie];if(fw(s,a,h.data)){let p=pM(a,e,n,o,r,l);if(p!==Zt)return p}u=e[a+8],u!==Ki&&pw(r,e[ie].data[a+8]===l)&&fw(s,a,e)?(o=h,a=mu(u),e=yu(u,e)):a=-1}}return i}function pM(t,e,n,r,i,s){let o=e[ie],a=o.data[t+8],u=r==null?ku(a)&&If:r!=o&&(a.type&3)!==0,l=i&ne.Host&&s===a,h=gM(a,o,n,u,l);return h!==null?ts(e,o,h,a):Zt}function gM(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let C=o[v];if(v<u&&n===C||v>=u&&C.type===n)return v}if(i){let v=o[u];if(v&&lr(v)&&v.type===n)return u}return null}function ts(t,e,n,r){let i=t[n],s=e.data;if(aM(i)){let o=i;o.resolving&&zR(qR(s[n]));let a=vu(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?gt(o.injectImpl):null,h=NE(t,r,ne.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&sM(n,s[n],e)}finally{l!==null&&gt(l),vu(a),o.resolving=!1,OE()}}return i}function mM(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Mo)?t[Mo]:void 0;return typeof e=="number"?e>=0?e&VE:yM:e}function fw(t,e,n){let r=1<<t;return!!(n[e+(t>>UE)]&r)}function pw(t,e){return!(t&ne.Self)&&!(t&ne.Host&&e)}var Ur=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return HE(this._tNode,this._lView,e,xu(r),n)}};function yM(){return new Ur(mt(),pe())}function fp(t){return Vo(()=>{let e=t.prototype.constructor,n=e[ou]||Ef(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[ou]||Ef(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ef(t){return Uw(t)?()=>{let e=Ef(ct(t));return e&&e()}:jr(t)}function vM(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Z]&2048&&!(o[Z]&512);){let a=qE(s,o,n,r|ne.Self,Zt);if(a!==Zt)return a;let u=s.parent;if(!u){let l=o[dE];if(l){let h=l.get(n,Zt,r);if(h!==Zt)return h}u=zE(o),o=o[cs]}s=u}return i}function zE(t){let e=t[ie],n=e.type;return n===2?e.declTNode:n===1?t[$t]:null}function gw(t,e=null,n=null,r){let i=GE(t,e,n,r);return i.resolveInjectorInitializers(),i}function GE(t,e=null,n=null,r,i=new Set){let s=[n||Mt,IN(t)];return r=r||(typeof t=="object"?void 0:lt(t)),new Oo(s,e||ip(),r||null,i)}var et=class t{static{this.THROW_IF_NOT_FOUND=xo}static{this.NULL=new uu}static create(e,n){if(Array.isArray(e))return gw({name:""},n,e,"");{let r=e.name??"";return gw({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=B({token:t,providedIn:"any",factory:()=>W(Kw)})}static{this.__NG_ELEMENT_ID__=-1}};var _M=new z("");_M.__NG_ELEMENT_ID__=t=>{let e=mt();if(e===null)throw new H(204,!1);if(e.type&2)return e.value;if(t&ne.Optional)return null;throw new H(204,!1)};var IM="ngOriginalError";function ef(t){return t[IM]}var WE=!0,pp=(()=>{class t{static{this.__NG_ELEMENT_ID__=wM}static{this.__NG_ENV_ID__=n=>n}}return t})(),Tf=class extends pp{constructor(e){super(),this._lView=e}onDestroy(e){return EE(this._lView,e),()=>BN(this._lView,e)}};function wM(){return new Tf(pe())}var us=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Be(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}}return t})();var Df=class extends at{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,lE()&&(this.destroyRef=O(pp,{optional:!0})??void 0,this.pendingTasks=O(us,{optional:!0})??void 0)}emit(e){let n=he(null);try{super.next(e)}finally{he(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ae&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ut=Df;function Iu(...t){}function KE(t){let e,n;function r(){t=Iu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function mw(t){return queueMicrotask(()=>t()),()=>{t=Iu}}var gp="isAngularZone",wu=gp+"_ID",EM=0,me=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ut(!1),this.onMicrotaskEmpty=new ut(!1),this.onStable=new ut(!1),this.onError=new ut(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=WE}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,bM(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(gp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new H(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,TM,Iu,Iu);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},TM={};function mp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function DM(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){KE(()=>{t.callbackScheduled=!1,bf(t),t.isCheckStableRunning=!0,mp(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),bf(t)}function bM(t){let e=()=>{DM(t)},n=EM++;t._inner=t._inner.fork({name:"angular",properties:{[gp]:!0,[wu]:n,[wu+n]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(CM(u))return r.invokeTask(s,o,a,u);try{return yw(t),r.invokeTask(s,o,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),vw(t)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return yw(t),r.invoke(s,o,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!SM(u)&&e(),vw(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,bf(t),mp(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function bf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function yw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function vw(t){t._nesting--,mp(t)}var Cf=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ut,this.onMicrotaskEmpty=new ut,this.onStable=new ut,this.onError=new ut}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function CM(t){return QE(t,"__ignore_ng_zone__")}function SM(t){return QE(t,"__scheduler_tick__")}function QE(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Sn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ef(e);for(;n&&ef(n);)n=ef(n);return n||null}},AM=new z("",{providedIn:"root",factory:()=>{let t=O(me),e=O(Sn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function RM(){return $u(mt(),pe())}function $u(t,e){return new Ho(Ot(t,e))}var Ho=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=RM}}return t})();function YE(t){return(t.flags&128)===128}var ZE=new Map,NM=0;function MM(){return NM++}function xM(t){ZE.set(t[Ou],t)}function Sf(t){ZE.delete(t[Ou])}var _w="__ngContext__";function zr(t,e){ar(e)?(t[_w]=e[Ou],xM(e)):t[_w]=e}function JE(t){return eT(t[ko])}function XE(t){return eT(t[jt])}function eT(t){for(;t!==null&&!Mn(t);)t=t[jt];return t}var Af;function tT(t){Af=t}function PM(){if(Af!==void 0)return Af;if(typeof document<"u")return document;throw new H(210,!1)}var yp=new z("",{providedIn:"root",factory:()=>OM}),OM="ng",vp=new z(""),on=new z("",{providedIn:"platform",factory:()=>"unknown"});var _p=new z("",{providedIn:"root",factory:()=>PM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var kM="h",LM="b";var FM=()=>null;function Ip(t,e,n=!1){return FM(t,e,n)}var nT=!1,VM=new z("",{providedIn:"root",factory:()=>nT});var Eu=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Lw})`}};function Hu(t){return t instanceof Eu?t.changingThisBreaksApplicationSecurity:t}function rT(t,e){let n=UM(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Lw})`)}return n===e}function UM(t){return t instanceof Eu&&t.getTypeName()||null}var jM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function iT(t){return t=String(t),t.match(jM)?t:"unsafe:"+t}var wp=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(wp||{});function nW(t){let e=BM();return e?e.sanitize(wp.URL,t)||"":rT(t,"URL")?Hu(t):iT(Vr(t))}function BM(){let t=pe();return t&&t[Xt].sanitizer}function sT(t){return t instanceof Function?t():t}function $M(t){return(t??O(et)).get(on)==="browser"}var An=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(An||{}),HM;function Ep(t,e){return HM(t,e)}function zi(t,e,n,r,i){if(r!=null){let s,o=!1;Mn(r)?s=r:ar(r)&&(o=!0,r=r[Nn]);let a=nn(r);t===0&&n!==null?i==null?lT(e,n,a):Tu(e,n,a,i||null,!0):t===1&&n!==null?Tu(e,n,a,i||null,!0):t===2?ix(e,a,o):t===3&&e.destroyNode(a),s!=null&&ox(e,t,s,n,i)}}function qM(t,e){return t.createText(e)}function zM(t,e,n){t.setValue(e,n)}function oT(t,e,n){return t.createElement(e,n)}function GM(t,e){aT(t,e),e[Nn]=null,e[$t]=null}function WM(t,e,n,r,i,s){r[Nn]=i,r[$t]=e,qu(t,r,n,1,i,s)}function aT(t,e){e[Xt].changeDetectionScheduler?.notify(9),qu(t,e,e[Fe],2,null,null)}function KM(t){let e=t[ko];if(!e)return tf(t[ie],t);for(;e;){let n=null;if(ar(e))n=e[ko];else{let r=e[Pt];r&&(n=r)}if(!n){for(;e&&!e[jt]&&e!==t;)ar(e)&&tf(e[ie],e),e=e[dt];e===null&&(e=t),ar(e)&&tf(e[ie],e),n=e&&e[jt]}e=n}}function QM(t,e,n,r){let i=Pt+r,s=n.length;r>0&&(n[i-1][jt]=e),r<s-Pt?(e[jt]=n[i],Ww(n,Pt+r,e)):(n.push(e),e[jt]=null),e[dt]=n;let o=e[Xi];o!==null&&n!==o&&cT(o,e);let a=e[es];a!==null&&a.insertView(t),yf(e),e[Z]|=128}function cT(t,e){let n=t[fu],r=e[dt];if(ar(r))t[Z]|=pu.HasTransplantedViews;else{let i=r[dt][en];e[en]!==i&&(t[Z]|=pu.HasTransplantedViews)}n===null?t[fu]=[e]:n.push(e)}function Tp(t,e){let n=t[fu],r=n.indexOf(e);n.splice(r,1)}function Rf(t,e){if(t.length<=Pt)return;let n=Pt+e,r=t[n];if(r){let i=r[Xi];i!==null&&i!==t&&Tp(i,r),e>0&&(t[n-1][jt]=r[jt]);let s=cu(t,Pt+e);GM(r[ie],r);let o=s[es];o!==null&&o.detachView(s[ie]),r[dt]=null,r[jt]=null,r[Z]&=-129}return r}function uT(t,e){if(!(e[Z]&256)){let n=e[Fe];n.destroyNode&&qu(t,e,n,3,null,null),KM(e)}}function tf(t,e){if(e[Z]&256)return;let n=he(null);try{e[Z]&=-129,e[Z]|=256,e[xt]&&Sh(e[xt]),ZM(t,e),YM(t,e),e[ie].type===1&&e[Fe].destroy();let r=e[Xi];if(r!==null&&Mn(e[dt])){r!==e[dt]&&Tp(r,e);let i=e[es];i!==null&&i.detachView(t)}Sf(e)}finally{he(n)}}function YM(t,e){let n=t.cleanup,r=e[du];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[du]=null);let i=e[or];if(i!==null){e[or]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function ZM(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof qr)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];Yt(4,a,u);try{u.call(a)}finally{Yt(5,a,u)}}else{Yt(4,i,s);try{s.call(i)}finally{Yt(5,i,s)}}}}}function JM(t,e,n){return XM(t,e.parent,n)}function XM(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Nn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Jt.None||s===Jt.Emulated)return null}return Ot(r,n)}}function Tu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function lT(t,e,n){t.appendChild(e,n)}function Iw(t,e,n,r,i){r!==null?Tu(t,e,n,r,i):lT(t,e,n)}function dT(t,e){return t.parentNode(e)}function ex(t,e){return t.nextSibling(e)}function tx(t,e,n){return rx(t,e,n)}function nx(t,e,n){return t.type&40?Ot(t,n):null}var rx=nx,ww;function Dp(t,e,n,r){let i=JM(t,r,e),s=e[Fe],o=r.parent||e[$t],a=tx(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)Iw(s,i,n[u],a,!1);else Iw(s,i,n,a,!1);ww!==void 0&&ww(s,r,e,n,i)}function No(t,e){if(e!==null){let n=e.type;if(n&3)return Ot(e,t);if(n&4)return Nf(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return No(t,r);{let i=t[e.index];return Mn(i)?Nf(-1,i):nn(i)}}else{if(n&128)return No(t,e.next);if(n&32)return Ep(e,t)()||nn(t[e.index]);{let r=hT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=$r(t[en]);return No(i,r)}else return No(t,e.next)}}}return null}function hT(t,e){if(e!==null){let r=t[en][$t],i=e.projection;return r.projection[i]}return null}function Nf(t,e){let n=Pt+t+1;if(n<e.length){let r=e[n],i=r[ie].firstChild;if(i!==null)return No(r,i)}return e[Br]}function ix(t,e,n){t.removeChild(null,e,n)}function bp(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(o&&e===0&&(a&&zr(nn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)bp(t,e,n.child,r,i,s,!1),zi(e,t,i,a,s);else if(u&32){let l=Ep(n,r),h;for(;h=l();)zi(e,t,i,h,s);zi(e,t,i,a,s)}else u&16?sx(t,e,r,n,i,s):zi(e,t,i,a,s);n=o?n.projectionNext:n.next}}function qu(t,e,n,r,i,s){bp(n,r,t.firstChild,e,i,s,!1)}function sx(t,e,n,r,i,s){let o=n[en],u=o[$t].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];zi(e,t,i,h,s)}else{let l=u,h=o[dt];YE(r)&&(l.flags|=128),bp(t,e,l,h,i,s,!0)}}function ox(t,e,n,r,i){let s=n[Br],o=nn(n);s!==o&&zi(e,t,r,s,i);for(let a=Pt;a<n.length;a++){let u=n[a];qu(u[ie],u,t,e,r,s)}}function ax(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:An.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=An.Important),t.setStyle(n,r,i,s))}}function cx(t,e,n){t.setAttribute(e,"style",n)}function fT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function pT(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&df(t,e,r),i!==null&&fT(t,e,i),s!==null&&cx(t,e,s)}var Ht={};function rW(t=1){gT(ht(),pe(),Kr()+t,!1)}function gT(t,e,n,r){if(!r)if((e[Z]&3)===3){let s=t.preOrderCheckHooks;s!==null&&nu(e,s,n)}else{let s=t.preOrderHooks;s!==null&&ru(e,s,0,n)}Hr(n)}function Dt(t,e=ne.Default){let n=pe();if(n===null)return W(t,e);let r=mt();return HE(r,n,ct(t),e)}function mT(){let t="invalid";throw new Error(t)}function yT(t,e,n,r,i,s){let o=he(null);try{let a=null;i&cr.SignalBased&&(a=e[r][Dn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&cr.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):pE(e,a,r,s)}finally{he(o)}}function ux(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Hr(~i);else{let s=i,o=n[++r],a=n[++r];XN(o,s);let u=e[s];a(2,u)}}}finally{Hr(-1)}}function zu(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[Nn]=i,p[Z]=r|4|128|8|64,(l!==null||t&&t[Z]&2048)&&(p[Z]|=2048),IE(p),p[dt]=p[cs]=t,p[Bt]=n,p[Xt]=o||t&&t[Xt],p[Fe]=a||t&&t[Fe],p[Ji]=u||t&&t[Ji]||null,p[$t]=s,p[Ou]=MM(),p[lu]=h,p[dE]=l,p[en]=e.type==2?t[en]:p,p}function Gu(t,e,n,r,i){let s=t.data[e];if(s===null)s=lx(t,e,n,r,i),JN()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=KN();s.injectorIndex=o===null?-1:o.injectorIndex}return $o(s,!0),s}function lx(t,e,n,r,i){let s=bE(),o=CE(),a=o?s:s&&s.parent,u=t.data[e]=gx(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function vT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function _T(t,e,n,r,i){let s=Kr(),o=r&2;try{Hr(-1),o&&e.length>tn&&gT(t,e,tn,!1),Yt(o?2:0,i),n(r,i)}finally{Hr(s),Yt(o?3:1,i)}}function IT(t,e,n){if(fE(e)){let r=he(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{he(r)}}}function wT(t,e,n){DE()&&(wx(t,e,n,Ot(n,e)),(n.flags&64)===64&&CT(t,e,n))}function ET(t,e,n=Ot){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function TT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Cp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Cp(t,e,n,r,i,s,o,a,u,l,h){let p=tn+r,m=p+i,v=dx(p,m),C=typeof l=="function"?l():l;return v[ie]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function dx(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ht);return n}function hx(t,e,n,r){let s=r.get(VM,nT)||n===Jt.ShadowDom,o=t.selectRootElement(e,s);return fx(o),o}function fx(t){px(t)}var px=()=>null;function gx(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return zN()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Ew(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=cr.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?Tw(r,n,l,a,u):Tw(r,n,l,a)}return r}function Tw(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function mx(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,v=m?m.inputs:null,C=m?m.outputs:null;u=Ew(0,p.inputs,h,u,v),l=Ew(1,p.outputs,h,l,C);let N=u!==null&&o!==null&&!np(e)?xx(u,h,o):null;a.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function yx(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Sp(t,e,n,r,i,s,o,a){let u=Ot(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Ap(t,n,h,r,i),ku(e)&&vx(n,e.index)):e.type&3?(r=yx(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function vx(t,e){let n=fr(e,t);n[Z]&16||(n[Z]|=64)}function DT(t,e,n,r){if(DE()){let i=r===null?null:{"":-1},s=Tx(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&bT(t,e,n,o,i,a),i&&Dx(n,r,i)}n.mergedAttrs=Po(n.mergedAttrs,n.attrs)}function bT(t,e,n,r,i,s){for(let l=0;l<r.length;l++)wf(_u(n,e),t,r[l].type);Cx(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=vT(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Po(n.mergedAttrs,h.hostAttrs),Sx(t,n,e,u,h),bx(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}mx(t,n,s)}function _x(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;Ix(o)!=a&&o.push(a),o.push(n,r,s)}}function Ix(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function wx(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;ku(n)&&Ax(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||_u(n,e),zr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=ts(e,t,a,n);if(zr(l,e),o!==null&&Mx(e,a-i,l,u,n,o),lr(u)){let h=fr(n.index,e);h[Bt]=ts(e,t,a,n)}}}function CT(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=eM();try{Hr(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];vf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Ex(u,l)}}finally{Hr(-1),vf(o)}}function Ex(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Tx(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(dN(e,o.selectors,!1))if(r||(r=[]),lr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;Mf(t,e,u)}else r.unshift(o),Mf(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Mf(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Dx(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new H(-301,!1);r.push(e[i],s)}}}function bx(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;lr(e)&&(n[""]=t)}}function Cx(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Sx(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=jr(i.type,!0)),o=new qr(s,lr(i),Dt);t.blueprint[r]=o,n[r]=o,_x(t,e,r,vT(t,n,i.hostVars,Ht),i)}function Ax(t,e,n){let r=Ot(e,t),i=TT(n),s=t[Xt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Wu(t,zu(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function Rx(t,e,n,r,i,s){let o=Ot(t,e);Nx(e[Fe],o,s,t.value,n,r,i)}function Nx(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Vr(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function Mx(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];yT(r,n,u,l,h,p)}}function xx(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function ST(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function AT(t,e){let n=t.contentQueries;if(n!==null){let r=he(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];RE(s),a.contentQueries(2,e[o],o)}}}finally{he(r)}}}function Wu(t,e){return t[ko]?t[uw][jt]=e:t[ko]=e,t[uw]=e,e}function xf(t,e,n){RE(0);let r=he(null);try{e(t,n)}finally{he(r)}}function Px(t){return t[du]??=[]}function Ox(t){return t.cleanup??=[]}function RT(t,e){let n=t[Ji],r=n?n.get(Sn,null):null;r&&r.handleError(e)}function Ap(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];yT(h,l,r,a,u,i)}}function NT(t,e,n){let r=vE(e,t);zM(t[Fe],r,n)}function kx(t,e){let n=fr(e,t),r=n[ie];Lx(r,n);let i=n[Nn];i!==null&&n[lu]===null&&(n[lu]=Ip(i,n[Ji])),Rp(r,n,n[Bt])}function Lx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Rp(t,e,n){ap(e);try{let r=t.viewQuery;r!==null&&xf(1,r,n);let i=t.template;i!==null&&_T(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[es]?.finishViewCreation(t),t.staticContentQueries&&AT(t,e),t.staticViewQueries&&xf(2,t.viewQuery,n);let s=t.components;s!==null&&Fx(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Z]&=-5,cp()}}function Fx(t,e){for(let n=0;n<e.length;n++)kx(t,e[n])}function Vx(t,e,n,r){let i=he(null);try{let s=e.tView,a=t[Z]&4096?4096:16,u=zu(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Xi]=l;let h=t[es];return h!==null&&(u[es]=h.createEmbeddedView(s)),Rp(s,u,n),u}finally{he(i)}}function Dw(t,e){return!e||e.firstChild===null||YE(t)}function Ux(t,e,n,r=!0){let i=e[ie];if(QM(i,e,t,n),r){let o=Nf(n,t),a=e[Fe],u=dT(a,t[Br]);u!==null&&WM(i,t[$t],a,e,u,o)}let s=e[lu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Du(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(nn(s)),Mn(s)&&jx(s,r);let o=n.type;if(o&8)Du(t,e,n.child,r);else if(o&32){let a=Ep(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=hT(e,n);if(Array.isArray(a))r.push(...a);else{let u=$r(e[en]);Du(u[ie],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function jx(t,e){for(let n=Pt;n<t.length;n++){let r=t[n],i=r[ie].firstChild;i!==null&&Du(r[ie],r,i,e)}t[Br]!==t[Nn]&&e.push(t[Br])}var MT=[];function Bx(t){return t[xt]??$x(t)}function $x(t){let e=MT.pop()??Object.create(qx);return e.lView=t,e}function Hx(t){t.lView[xt]!==t&&(t.lView=null,MT.push(t))}var qx=ve(L({},bo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Vu(t.lView)},consumerOnSignalRead(){this.lView[xt]=this}});function zx(t){let e=t[xt]??Object.create(Gx);return e.lView=t,e}var Gx=ve(L({},bo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=$r(t.lView);for(;e&&!xT(e[ie]);)e=$r(e);e&&wE(e)},consumerOnSignalRead(){this.lView[xt]=this}});function xT(t){return t.type!==2}var Wx=100;function PT(t,e=!0,n=0){let r=t[Xt],i=r.rendererFactory,s=!1;s||i.begin?.();try{Kx(t,n)}catch(o){throw e&&RT(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Kx(t,e){let n=SE();try{dw(!0),Pf(t,e);let r=0;for(;Fu(t);){if(r===Wx)throw new H(103,!1);r++,Pf(t,1)}}finally{dw(n)}}function Qx(t,e,n,r){let i=e[Z];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Xt].inlineEffectRunner?.flush(),ap(e);let a=!0,u=null,l=null;s||(xT(t)?(l=Bx(e),u=Dc(l)):gI()===null?(a=!1,l=zx(e),u=Dc(l)):e[xt]&&(Sh(e[xt]),e[xt]=null));try{IE(e),ZN(t.bindingStartIndex),n!==null&&_T(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let v=t.preOrderCheckHooks;v!==null&&nu(e,v,null)}else{let v=t.preOrderHooks;v!==null&&ru(e,v,0,null),Zh(e,0)}if(o||Yx(e),OT(e,0),t.contentQueries!==null&&AT(t,e),!s)if(h){let v=t.contentCheckHooks;v!==null&&nu(e,v)}else{let v=t.contentHooks;v!==null&&ru(e,v,1),Zh(e,1)}ux(t,e);let p=t.components;p!==null&&LT(e,p,0);let m=t.viewQuery;if(m!==null&&xf(2,m,r),!s)if(h){let v=t.viewCheckHooks;v!==null&&nu(e,v)}else{let v=t.viewHooks;v!==null&&ru(e,v,2),Zh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Yh]){for(let v of e[Yh])v();e[Yh]=null}s||(e[Z]&=-73)}catch(h){throw s||Vu(e),h}finally{l!==null&&(bh(l,u),a&&Hx(l)),cp()}}function OT(t,e){for(let n=JE(t);n!==null;n=XE(n))for(let r=Pt;r<n.length;r++){let i=n[r];kT(i,e)}}function Yx(t){for(let e=JE(t);e!==null;e=XE(e)){if(!(e[Z]&pu.HasTransplantedViews))continue;let n=e[fu];for(let r=0;r<n.length;r++){let i=n[r];wE(i)}}}function Zx(t,e,n){let r=fr(e,t);kT(r,n)}function kT(t,e){op(t)&&Pf(t,e)}function Pf(t,e){let r=t[ie],i=t[Z],s=t[xt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Ch(s)),o||=!1,s&&(s.dirty=!1),t[Z]&=-9217,o)Qx(r,t,r.template,t[Bt]);else if(i&8192){OT(t,1);let a=r.components;a!==null&&LT(t,a,1)}}function LT(t,e,n){for(let r=0;r<e.length;r++)Zx(t,e[r],n)}function Np(t,e){let n=SE()?64:1088;for(t[Xt].changeDetectionScheduler?.notify(e);t;){t[Z]|=n;let r=$r(t);if(gf(t)&&!r)return t;t=r}return null}var Gr=class{get rootNodes(){let e=this._lView,n=e[ie];return Du(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Bt]}set context(e){this._lView[Bt]=e}get destroyed(){return(this._lView[Z]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[dt];if(Mn(e)){let n=e[hu],r=n?n.indexOf(this):-1;r>-1&&(Rf(e,r),cu(n,r))}this._attachedToViewContainer=!1}uT(this._lView[ie],this._lView)}onDestroy(e){EE(this._lView,e)}markForCheck(){Np(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){yf(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,PT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=gf(this._lView),n=this._lView[Xi];n!==null&&!e&&Tp(n,this._lView),aT(this._lView[ie],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let n=gf(this._lView),r=this._lView[Xi];r!==null&&!n&&cT(r,this._lView),yf(this._lView)}},Ku=(()=>{class t{static{this.__NG_ELEMENT_ID__=eP}}return t})(),Jx=Ku,Xx=class extends Jx{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Vx(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Gr(i)}};function eP(){return tP(mt(),pe())}function tP(t,e){return t.type&4?new Xx(e,t,$u(t,e)):null}var sW=new RegExp(`^(\\d+)*(${LM}|${kM})*(.*)`);var nP=()=>null;function bw(t,e){return nP(t,e)}var ns=class{},Qu=new z("",{providedIn:"root",factory:()=>!1});var FT=new z(""),VT=new z(""),Of=class{},bu=class{};function rP(t){let e=Error(`No component factory found for ${lt(t)}.`);return e[iP]=t,e}var iP="ngComponent";var kf=class{resolveComponentFactory(e){throw rP(e)}},rs=class{static{this.NULL=new kf}},is=class{},Yu=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>sP()}}return t})();function sP(){let t=pe(),e=mt(),n=fr(e.index,t);return(ar(n)?n:t)[Fe]}var oP=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>null})}}return t})();function Lf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=XI(i,a);else if(s==2){let u=a,l=e[++o];r=XI(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Cu=class extends rs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ur(e);return new ss(n,this.ngModule)}};function Cw(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:cr.None;e?n.push({propName:o,templateName:r,isSignal:(a&cr.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function aP(t){let e=t.toLowerCase();return e==="svg"?LN:e==="math"?FN:null}var ss=class extends bu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Cw(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Cw(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=gN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=he(null);try{i=i||this.ngModule;let o=i instanceof Tt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new _f(e,o):e,u=a.get(is,null);if(u===null)throw new H(407,!1);let l=a.get(oP,null),h=a.get(ns,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",C=r?hx(m,r,this.componentDef.encapsulation,a):oT(m,v,aP(v)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let R=null;C!==null&&(R=Ip(C,a,!0));let k=Cp(0,null,null,1,0,null,null,null,null,null,null),j=zu(null,k,null,N,null,null,p,m,a,null,R);ap(j);let V,$,Ie=null;try{let K=this.componentDef,E,y=null;K.findHostDirectiveDefs?(E=[],y=new Map,K.findHostDirectiveDefs(K,E,y),E.push(K)):E=[K];let I=cP(j,C);Ie=uP(I,C,K,E,j,p,m),$=_E(k,tn),C&&hP(m,K,C,r),n!==void 0&&fP($,this.ngContentSelectors,n),V=dP(Ie,K,E,y,j,[pP]),Rp(k,j,null)}catch(K){throw Ie!==null&&Sf(Ie),Sf(j),K}finally{cp()}return new Ff(this.componentType,V,$u($,j),j,$)}finally{he(s)}}},Ff=class extends Of{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Gr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Ap(s[ie],s,i,e,n),this.previousInputValues.set(e,n);let o=fr(this._tNode.index,s);Np(o,1)}}get injector(){return new Ur(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function cP(t,e){let n=t[ie],r=tn;return t[r]=e,Gu(n,r,2,"#host",null)}function uP(t,e,n,r,i,s,o){let a=i[ie];lP(r,t,e,o);let u=null;e!==null&&(u=Ip(e,i[Ji]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=zu(i,TT(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&Mf(a,t,r.length-1),Wu(i,p),i[t.index]=p}function lP(t,e,n,r){for(let i of t)e.mergedAttrs=Po(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Lf(e,e.mergedAttrs,!0),n!==null&&pT(r,n,e))}function dP(t,e,n,r,i,s){let o=mt(),a=i[ie],u=Ot(o,i);bT(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=ts(i,a,p,o);zr(m,i)}CT(a,i,o),u&&zr(u,i);let l=ts(i,a,o.directiveStart+o.componentOffset,o);if(t[Bt]=i[Bt]=l,s!==null)for(let h of s)h(l,e);return IT(a,o,i),l}function hP(t,e,n,r){if(r)df(t,n,["ng-version","18.2.9"]);else{let{attrs:i,classes:s}=mN(e.selectors[0]);i&&df(t,n,i),s&&s.length>0&&fT(t,n,s.join(" "))}}function fP(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function pP(){let t=mt();dp(pe()[ie],t)}var ls=(()=>{class t{static{this.__NG_ELEMENT_ID__=gP}}return t})();function gP(){let t=mt();return yP(t,pe())}var mP=ls,UT=class extends mP{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return $u(this._hostTNode,this._hostLView)}get injector(){return new Ur(this._hostTNode,this._hostLView)}get parentInjector(){let e=hp(this._hostTNode,this._hostLView);if(FE(e)){let n=yu(e,this._hostLView),r=mu(e),i=n[ie].data[r+8];return new Ur(i,n)}else return new Ur(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Sw(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Pt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=bw(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Dw(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!xN(e),a;if(o)a=n;else{let C=n||{};a=C.index,r=C.injector,i=C.projectableNodes,s=C.environmentInjector||C.ngModuleRef}let u=o?e:new ss(ur(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(Tt,null);N&&(s=N)}let h=ur(u.componentType??{}),p=bw(this._lContainer,h?.id??null),m=p?.firstChild??null,v=u.create(l,i,m,s);return this.insertImpl(v.hostView,a,Dw(this._hostTNode,p)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(UN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[dt],l=new UT(u,u[$t],u[dt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Ux(o,i,s,r),e.attachToViewContainerRef(),Ww(nf(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Sw(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Rf(this._lContainer,n);r&&(cu(nf(this._lContainer),n),uT(r[ie],r))}detach(e){let n=this._adjustIndex(e,-1),r=Rf(this._lContainer,n);return r&&cu(nf(this._lContainer),n)!=null?new Gr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Sw(t){return t[hu]}function nf(t){return t[hu]||(t[hu]=[])}function yP(t,e){let n,r=e[t.index];return Mn(r)?n=r:(n=ST(r,e,null,t),e[t.index]=n,Wu(e,n)),_P(n,e,t,r),new UT(n,t,e)}function vP(t,e){let n=t[Fe],r=n.createComment(""),i=Ot(e,t),s=dT(n,i);return Tu(n,s,r,ex(n,i),!1),r}var _P=EP,IP=()=>!1;function wP(t,e,n){return IP(t,e,n)}function EP(t,e,n,r){if(t[Br])return;let i;n.type&8?i=nn(r):i=vP(e,n),t[Br]=i}var Aw=new Set;function ds(t){Aw.has(t)||(Aw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function TP(t){return typeof t=="function"&&t[Dn]!==void 0}function aW(t,e){ds("NgSignals");let n=CI(t),r=n[Dn];return e?.equal&&(r.equal=e.equal),n.set=i=>Ah(r,i),n.update=i=>SI(r,i),n.asReadonly=DP.bind(n),n}function DP(){let t=this[Dn];if(t.readonlyFn===void 0){let e=()=>this();e[Dn]=t,t.readonlyFn=e}return t.readonlyFn}function jT(t){return TP(t)&&typeof t.set=="function"}function bP(t){return Object.getPrototypeOf(t.prototype).constructor}function CP(t){let e=bP(t.type),n=!0,r=[t];for(;e;){let i;if(lr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Jc(t.inputs),o.inputTransforms=Jc(t.inputTransforms),o.declaredInputs=Jc(t.declaredInputs),o.outputs=Jc(t.outputs);let a=i.hostBindings;a&&MP(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&RP(t,u),l&&NP(t,l),SP(t,i),LR(t.outputs,i.outputs),lr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===CP&&(n=!1)}}e=Object.getPrototypeOf(e)}AP(r)}function SP(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function AP(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Po(i.hostAttrs,n=Po(n,i.hostAttrs))}}function Jc(t){return t===Qi?{}:t===Mt?[]:t}function RP(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function NP(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function MP(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var dr=class{},Lo=class{};var Vf=class extends dr{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Cu(this);let s=rE(e);this._bootstrapComponents=sT(s.bootstrap),this._r3Injector=GE(e,n,[{provide:dr,useValue:this},{provide:rs,useValue:this.componentFactoryResolver},...r],lt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Uf=class extends Lo{constructor(e){super(),this.moduleType=e}create(e){return new Vf(this.moduleType,e,[])}};var Su=class extends dr{constructor(e){super(),this.componentFactoryResolver=new Cu(this),this.instance=null;let n=new Oo([...e.providers,{provide:dr,useValue:this},{provide:rs,useValue:this.componentFactoryResolver}],e.parent||ip(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Zu(t,e,n=null){return new Su({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function BT(t){return PP(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function xP(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function PP(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Mp(t,e,n){return t[e]=n}function OP(t,e){return t[e]}function Rn(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function $T(t,e,n,r){let i=Rn(t,e,n);return Rn(t,e+1,r)||i}function kP(t,e,n,r,i){let s=$T(t,e,n,r);return Rn(t,e+2,i)||s}function LP(t){return(t.flags&32)===32}function FP(t,e,n,r,i,s,o,a,u){let l=e.consts,h=Gu(e,t,4,o||null,a||null);DT(e,n,h,gu(l,u)),dp(e,h);let p=h.tView=Cp(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function VP(t,e,n,r,i,s,o,a,u,l){let h=n+tn,p=e.firstCreatePass?FP(h,e,t,r,i,s,o,a,u):e.data[h];$o(p,!1);let m=jP(e,t,p,n);up()&&Dp(e,t,m,p),zr(m,t);let v=ST(m,t,m,p);return t[h]=v,Wu(t,v),wP(v,p,t),sp(p)&&wT(e,t,p),u!=null&&ET(t,p,l),p}function UP(t,e,n,r,i,s,o,a){let u=pe(),l=ht(),h=gu(l.consts,s);return VP(u,l,t,e,n,r,i,h,o,a),UP}var jP=BP;function BP(t,e,n,r){return lp(!0),e[Fe].createComment("")}var Gi=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Gi||{}),HT=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}}return t})(),jf=class t{constructor(){this.ngZone=O(me),this.scheduler=O(ns),this.errorHandler=O(Sn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Gi.EarlyRead,Gi.Write,Gi.MixedReadWrite,Gi.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}},Bf=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function xp(t,e){!e?.injector&&MN(xp);let n=e?.injector??O(et);return $M(n)?(ds("NgAfterNextRender"),HP(t,n,e,!0)):qP}function $P(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function HP(t,e,n,r){let i=e.get(HT);i.impl??=e.get(jf);let s=n?.phase??Gi.MixedReadWrite,o=n?.manualCleanup!==!0?e.get(pp):null,a=new Bf(i.impl,$P(t,s),r,o);return i.impl.register(a),a}var qP={destroy(){}};function qT(t,e,n,r){let i=pe(),s=ju();if(Rn(i,s,e)){let o=ht(),a=Bu();Rx(a,i,t,e,n,r)}return qT}function zT(t,e,n,r){return Rn(t,ju(),n)?e+Vr(n)+r:Ht}function zP(t,e,n,r,i,s,o,a){let u=YN(),l=kP(t,u,n,i,o);return AE(3),l?e+Vr(n)+r+Vr(i)+s+Vr(o)+a:Ht}function Xc(t,e){return t<<17|e<<2}function Wr(t){return t>>17&32767}function GP(t){return(t&2)==2}function WP(t,e){return t&131071|e<<17}function $f(t){return t|2}function os(t){return(t&131068)>>2}function rf(t,e){return t&-131069|e<<2}function KP(t){return(t&1)===1}function Hf(t){return t|1}function QP(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Wr(o),u=os(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||jo(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=Wr(t[a+1]);t[r+1]=Xc(m,a),m!==0&&(t[m+1]=rf(t[m+1],r)),t[a+1]=WP(t[a+1],r)}else t[r+1]=Xc(a,0),a!==0&&(t[a+1]=rf(t[a+1],r)),a=r;else t[r+1]=Xc(u,0),a===0?a=r:t[u+1]=rf(t[u+1],r),u=r;l&&(t[r+1]=$f(t[r+1])),Rw(t,h,r,!0),Rw(t,h,r,!1),YP(e,h,t,r,s),o=Xc(a,u),s?e.classBindings=o:e.styleBindings=o}function YP(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&jo(s,e)>=0&&(n[r+1]=Hf(n[r+1]))}function Rw(t,e,n,r){let i=t[n+1],s=e===null,o=r?Wr(i):os(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];ZP(u,e)&&(a=!0,t[o+1]=r?Hf(l):$f(l)),o=r?Wr(l):os(l)}a&&(t[n+1]=r?$f(i):Hf(i))}function ZP(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?jo(t,e)>=0:!1}function JP(t,e,n){let r=pe(),i=ju();if(Rn(r,i,e)){let s=ht(),o=Bu();Sp(s,o,r,t,e,r[Fe],n,!1)}return JP}function Nw(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Ap(t,n,s[o],o,r)}function XP(t,e){return eO(t,e,null,!0),XP}function eO(t,e,n,r){let i=pe(),s=ht(),o=AE(2);if(s.firstUpdatePass&&nO(s,t,o,r),e!==Ht&&Rn(i,o,e)){let a=s.data[Kr()];aO(s,a,i,i[Fe],t,i[o+1]=cO(e,n),r,o)}}function tO(t,e){return e>=t.expandoStartIndex}function nO(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Kr()],o=tO(t,n);uO(s,r)&&e===null&&!o&&(e=!1),e=rO(i,s,e,r),QP(i,s,e,n,o,r)}}function rO(t,e,n,r){let i=tM(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=sf(null,t,e,n,r),n=Fo(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=sf(i,t,e,n,r),s===null){let u=iO(t,e,r);u!==void 0&&Array.isArray(u)&&(u=sf(null,t,e,u[1],r),u=Fo(u,e.attrs,r),sO(t,e,r,u))}else s=oO(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function iO(t,e,n){let r=n?e.classBindings:e.styleBindings;if(os(r)!==0)return t[Wr(r)]}function sO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Wr(i)]=r}function oO(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Fo(r,o,n)}return Fo(r,e.attrs,n)}function sf(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Fo(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Fo(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),nN(t,o,n?!0:e[++s]))}return t===void 0?null:t}function aO(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=KP(l)?Mw(u,e,n,i,os(l),o):void 0;if(!Au(h)){Au(s)||GP(l)&&(s=Mw(u,null,n,i,a,o));let p=vE(Kr(),n);ax(r,o,p,i,s)}}function Mw(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===Ht&&(m=p?Mt:void 0);let v=p?Kh(m,r):h===r?m:void 0;if(l&&!Au(v)&&(v=Kh(u,r)),Au(v)&&(a=v,o))return a;let C=t[i+1];i=o?Wr(C):os(C)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=Kh(u,r))}return a}function Au(t){return t!==void 0}function cO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=lt(Hu(t)))),t}function uO(t,e){return(t.flags&(e?8:16))!==0}function lO(t,e,n,r,i,s){let o=e.consts,a=gu(o,i),u=Gu(e,t,2,r,a);return DT(e,n,u,gu(o,s)),u.attrs!==null&&Lf(u,u.attrs,!1),u.mergedAttrs!==null&&Lf(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function GT(t,e,n,r){let i=pe(),s=ht(),o=tn+t,a=i[Fe],u=s.firstCreatePass?lO(o,s,i,e,n,r):s.data[o],l=dO(s,i,u,a,e,t);i[o]=l;let h=sp(u);return $o(u,!0),pT(a,l,u),!LP(u)&&up()&&Dp(s,i,l,u),$N()===0&&zr(l,i),HN(),h&&(wT(s,i,u),IT(s,u,i)),r!==null&&ET(i,u),GT}function WT(){let t=mt();CE()?QN():(t=t.parent,$o(t,!1));let e=t;GN(e)&&WN(),qN();let n=ht();return n.firstCreatePass&&(dp(n,t),fE(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&cM(e)&&Nw(n,e,pe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&uM(e)&&Nw(n,e,pe(),e.stylesWithoutHost,!1),WT}function Pp(t,e,n,r){return GT(t,e,n,r),WT(),Pp}var dO=(t,e,n,r,i,s)=>(lp(!0),oT(r,i,iM()));function cW(){return pe()}var Ru="en-US";var hO=Ru;function fO(t){typeof t=="string"&&(hO=t.toLowerCase().replace(/_/g,"-"))}var pO=(t,e,n)=>{};function KT(t,e,n,r){let i=pe(),s=ht(),o=mt();return QT(s,i,i[Fe],o,t,e,r),KT}function gO(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[du],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function QT(t,e,n,r,i,s,o){let a=sp(r),l=t.firstCreatePass&&Ox(t),h=e[Bt],p=Px(e),m=!0;if(r.type&3||o){let N=Ot(r,e),R=o?o(N):N,k=p.length,j=o?$=>o(nn($[r.index])):r.index,V=null;if(!o&&a&&(V=gO(t,e,i,r.index)),V!==null){let $=V.__ngLastListenerFn__||V;$.__ngNextListenerFn__=s,V.__ngLastListenerFn__=s,m=!1}else{s=Pw(r,e,h,s),pO(N,i,s);let $=n.listen(R,i,s);p.push(s,$),l&&l.push(i,j,k,k+1)}}else s=Pw(r,e,h,s);let v=r.outputs,C;if(m&&v!==null&&(C=v[i])){let N=C.length;if(N)for(let R=0;R<N;R+=2){let k=C[R],j=C[R+1],Ie=e[k][j].subscribe(s),K=p.length;p.push(s,Ie),l&&l.push(i,r.index,K,-(K+1))}}}function xw(t,e,n,r){let i=he(null);try{return Yt(6,e,n),n(r)!==!1}catch(s){return RT(t,s),!1}finally{Yt(7,e,n),he(i)}}function Pw(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?fr(t.index,e):e;Np(o,5);let a=xw(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)a=xw(e,n,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function uW(t=1){return rM(t)}function mO(t,e,n,r,i){let s=pe(),o=zT(s,e,n,r);if(o!==Ht){let a=ht(),u=Bu();Sp(a,u,s,t,o,s[Fe],i,!1)}return mO}function yO(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function lW(t,e=""){let n=pe(),r=ht(),i=t+tn,s=r.firstCreatePass?Gu(r,i,1,e,null):r.data[i],o=vO(r,n,s,e,t);n[i]=o,up()&&Dp(r,n,o,s),$o(s,!1)}var vO=(t,e,n,r,i)=>(lp(!0),qM(e[Fe],r));function _O(t){return YT("",t,""),_O}function YT(t,e,n){let r=pe(),i=zT(r,t,e,n);return i!==Ht&&NT(r,Kr(),i),YT}function IO(t,e,n,r,i,s,o){let a=pe(),u=zP(a,t,e,n,r,i,s,o);return u!==Ht&&NT(a,Kr(),u),IO}function wO(t,e,n){jT(e)&&(e=e());let r=pe(),i=ju();if(Rn(r,i,e)){let s=ht(),o=Bu();Sp(s,o,r,t,e,r[Fe],n,!1)}return wO}function dW(t,e){let n=jT(t);return n&&t.set(e),n}function EO(t,e){let n=pe(),r=ht(),i=mt();return QT(r,n,n[Fe],i,t,e),EO}function TO(t,e,n){let r=ht();if(r.firstCreatePass){let i=lr(t);qf(n,r.data,r.blueprint,i,!0),qf(e,r.data,r.blueprint,i,!1)}}function qf(t,e,n,r,i){if(t=ct(t),Array.isArray(t))for(let s=0;s<t.length;s++)qf(t[s],e,n,r,i);else{let s=ht(),o=pe(),a=mt(),u=Zi(t)?t:ct(t.provide),l=uE(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Zi(t)||!t.multi){let v=new qr(l,i,Dt),C=af(u,e,i?h:h+m,p);C===-1?(wf(_u(a,o),s,u),of(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),o.push(v)):(n[C]=v,o[C]=v)}else{let v=af(u,e,h+m,p),C=af(u,e,h,h+m),N=v>=0&&n[v],R=C>=0&&n[C];if(i&&!R||!i&&!N){wf(_u(a,o),s,u);let k=CO(i?bO:DO,n.length,i,r,l);!i&&R&&(n[C].providerFactory=k),of(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(k),o.push(k)}else{let k=ZT(n[i?C:v],l,!i&&r);of(s,t,v>-1?v:C,k)}!i&&r&&R&&n[C].componentProviders++}}}function of(t,e,n,r){let i=Zi(e),s=DN(e);if(i||s){let u=(s?ct(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function ZT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function af(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function DO(t,e,n,r){return zf(this.multi,[])}function bO(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ts(n,n[ie],this.providerFactory.index,r);s=a.slice(0,o),zf(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],zf(i,s);return s}function zf(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function CO(t,e,n,r,i){let s=new qr(t,n,Dt);return s.multi=[],s.index=e,s.componentProviders=0,ZT(s,i,r&&!n),s}function hW(t,e=[]){return n=>{n.providersResolver=(r,i)=>TO(r,i?i(t):t,e)}}var SO=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=oE(!1,n.type),i=r.length>0?Zu([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=B({token:t,providedIn:"environment",factory:()=>new t(W(Tt))})}}return t})();function JT(t){ds("NgStandalone"),t.getStandaloneInjector=e=>e.get(SO).getOrCreateStandaloneInjector(t)}function fW(t,e,n){let r=Uu()+t,i=pe();return i[r]===Ht?Mp(i,r,n?e.call(n):e()):OP(i,r)}function pW(t,e,n,r){return eD(pe(),Uu(),t,e,n,r)}function gW(t,e,n,r,i){return AO(pe(),Uu(),t,e,n,r,i)}function XT(t,e){let n=t[e];return n===Ht?void 0:n}function eD(t,e,n,r,i,s){let o=e+n;return Rn(t,o,i)?Mp(t,o+1,s?r.call(s,i):r(i)):XT(t,o+1)}function AO(t,e,n,r,i,s,o){let a=e+n;return $T(t,a,i,s)?Mp(t,a+2,o?r.call(o,i,s):r(i,s)):XT(t,a+2)}function mW(t,e){let n=ht(),r,i=t+tn;n.firstCreatePass?(r=RO(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=jr(r.type,!0)),o,a=gt(Dt);try{let u=vu(!1),l=s();return vu(u),yO(n,pe(),i,l),l}finally{gt(a)}}function RO(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function yW(t,e,n){let r=t+tn,i=pe(),s=VN(i,r);return NO(i,r)?eD(i,Uu(),e,s.transform,n,s):s.transform(n)}function NO(t,e){return t[ie].data[e].pure}var hr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},tD=new hr("18.2.9");var Ju=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var nD=new z("");function qo(t){return!!t&&typeof t.then=="function"}function rD(t){return!!t&&typeof t.subscribe=="function"}var Xu=new z(""),iD=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=O(Xu,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(qo(s))n.push(s);else if(rD(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),el=new z("");function MO(){bI(()=>{throw new H(600,!1)})}function xO(t){return t.isBoundToModule}var PO=10;function OO(t,e,n){try{let r=n();return qo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Qr=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=O(AM),this.afterRenderManager=O(HT),this.zonelessEnabled=O(Qu),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new at,this.afterTick=new at,this.componentTypes=[],this.components=[],this.isStable=O(us).hasPendingTasks.pipe(oe(n=>!n)),this._injector=O(Tt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof bu;if(!this._injector.get(iD).done){let m=!i&&nE(n),v=!1;throw new H(405,v)}let o;i?o=n:o=this._injector.get(rs).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=xO(o)?void 0:this._injector.get(dr),u=r||o.selector,l=o.create(et.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(nD,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),iu(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new H(101,!1);let n=he(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,he(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(is,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<PO;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)kO(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Fu(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;iu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(el,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>iu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new H(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function iu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function kO(t,e,n,r){if(!n&&!Fu(t))return;PT(t,e,n&&!r?0:1)}var Gf=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},tl=(()=>{class t{compileModuleSync(n){return new Uf(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=rE(n),s=sT(i.declarations).reduce((o,a)=>{let u=ur(a);return u&&o.push(new ss(u)),o},[]);return new Gf(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var LO=(()=>{class t{constructor(){this.zone=O(me),this.changeDetectionScheduler=O(ns),this.applicationRef=O(Qr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),FO=new z("",{factory:()=>!1});function sD({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new me(ve(L({},oD()),{scheduleInRootZone:n})),[{provide:me,useFactory:t},{provide:Yi,multi:!0,useFactory:()=>{let r=O(LO,{optional:!0});return()=>r.initialize()}},{provide:Yi,multi:!0,useFactory:()=>{let r=O(VO);return()=>{r.initialize()}}},e===!0?{provide:FT,useValue:!0}:[],{provide:VT,useValue:n??WE}]}function vW(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=sD({ngZoneFactory:()=>{let i=oD(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&ds("NgZone_CoalesceEvent"),new me(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return rn([{provide:FO,useValue:!0},{provide:Qu,useValue:!1},r])}function oD(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var VO=(()=>{class t{constructor(){this.subscription=new Ae,this.initialized=!1,this.zone=O(me),this.pendingTasks=O(us)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{me.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var UO=(()=>{class t{constructor(){this.appRef=O(Qr),this.taskService=O(us),this.ngZone=O(me),this.zonelessEnabled=O(Qu),this.disableScheduling=O(FT,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ae,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(wu):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(VT,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Cf||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?mw:KE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(wu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,mw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function jO(){return typeof $localize<"u"&&$localize.locale||Ru}var Op=new z("",{providedIn:"root",factory:()=>O(Op,ne.Optional|ne.SkipSelf)||jO()});var Wf=new z("");function eu(t){return!t.moduleRef}function BO(t){let e=eu(t)?t.r3Injector:t.moduleRef.injector,n=e.get(me);return n.run(()=>{eu(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Sn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),eu(t)){let s=()=>e.destroy(),o=t.platformInjector.get(Wf);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(Wf);o.add(s),t.moduleRef.onDestroy(()=>{iu(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return OO(r,n,()=>{let s=e.get(iD);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Op,Ru);if(fO(o||Ru),eu(t)){let a=e.get(Qr);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return $O(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function $O(t,e){let n=t.injector.get(Qr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new H(-403,!1);e.push(t)}var su=null;function HO(t=[],e){return et.create({name:e,providers:[{provide:Pu,useValue:"platform"},{provide:Wf,useValue:new Set([()=>su=null])},...t]})}function qO(t=[]){if(su)return su;let e=HO(t);return su=e,MO(),zO(e),e}function zO(t){t.get(vp,null)?.forEach(n=>n())}var zo=(()=>{class t{static{this.__NG_ELEMENT_ID__=GO}}return t})();function GO(t){return WO(mt(),pe(),(t&16)===16)}function WO(t,e,n){if(ku(t)&&!n){let r=fr(t.index,e);return new Gr(r,r)}else if(t.type&175){let r=e[en];return new Gr(r,e)}return null}var Kf=class{constructor(){}supports(e){return BT(e)}create(e){return new Qf(e)}},KO=(t,e)=>e,Qf=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||KO}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<Ow(r,i,s)?n:r,a=Ow(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let v=m<s.length?s[m]:s[m]=0,C=v+m;h<=C&&C<l&&(s[m]=v+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!BT(e))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,xP(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Yf(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Nu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Nu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Yf=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Zf=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Nu=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Zf,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Ow(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function kw(){return new kp([new Kf])}var kp=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:kw})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||kw()),deps:[[t,new ep,new tt]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new H(901,!1)}}return t})();function aD(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=qO(r),s=[sD({}),{provide:ns,useExisting:UO},...n||[]],o=new Su({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return BO({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function cD(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function _W(t,e){ds("NgSignals");let n=EI(t);return e?.equal&&(n[Dn].equal=e.equal),n}function QO(t){let e=he(null);try{return t()}finally{he(e)}}function uD(t){let e=ur(t);if(!e)return null;let n=new ss(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var gD=null;function hs(){return gD}function mD(t){gD??=t}var nl=class{};var yt=new z(""),Bp=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(JO),providedIn:"platform"})}}return t})(),yD=new z(""),JO=(()=>{class t extends Bp{constructor(){super(),this._doc=O(yt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return hs().getBaseHref(this._doc)}onPopState(n){let r=hs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=hs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function $p(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function lD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function xn(t){return t&&t[0]!=="?"?"?"+t:t}var Yr=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(Hp),providedIn:"root"})}}return t})(),vD=new z(""),Hp=(()=>{class t extends Yr{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(yt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return $p(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+xn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+xn(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+xn(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(W(Bp),W(vD,8))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),_D=(()=>{class t extends Yr{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=$p(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+xn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+xn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(W(Bp),W(vD,8))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),fs=(()=>{class t{constructor(n){this._subject=new ut,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=tk(lD(dD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+xn(r))}normalize(n){return t.stripTrailingSlash(ek(this._basePath,dD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+xn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+xn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=xn}static{this.joinWithSlash=$p}static{this.stripTrailingSlash=lD}static{this.\u0275fac=function(r){return new(r||t)(W(Yr))}}static{this.\u0275prov=B({token:t,factory:()=>XO(),providedIn:"root"})}}return t})();function XO(){return new fs(W(Yr))}function ek(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function dD(t){return t.replace(/\/index.html$/,"")}function tk(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function ID(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Lp=/\s+/,hD=[],zW=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=hD,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(Lp):hD}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Lp):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Lp).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(Dt(Ho),Dt(Yu))}}static{this.\u0275dir=as({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();var Fp=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},GW=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Fp(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),fD(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);fD(s,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Dt(ls),Dt(Ku),Dt(kp))}}static{this.\u0275dir=as({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function fD(t,e){t.context.$implicit=e.item}var WW=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new Vp,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){pD("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){pD("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Dt(ls),Dt(Ku))}}static{this.\u0275dir=as({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),Vp=class{constructor(){this.$implicit=null,this.ngIf=null}};function pD(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${lt(e)}'.`)}function nk(t,e){return new H(2100,!1)}var rk=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,KW=(()=>{class t{transform(n){if(n==null)return null;if(typeof n!="string")throw nk(t,n);return n.replace(rk,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275pipe=Xw({name:"titlecase",type:t,pure:!0,standalone:!0})}}return t})();var ik=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Bo({type:t})}static{this.\u0275inj=Uo({})}}return t})(),qp="browser",sk="server";function ok(t){return t===qp}function zp(t){return t===sk}var wD=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>ok(O(on))?new Up(O(yt),window):new jp})}}return t})(),Up=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=ak(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function ak(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var jp=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},rl=class{};var Kp=class extends nl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Qp=class t extends Kp{static makeCurrent(){mD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=ck();return n==null?null:uk(n)}resetBaseElement(){Wo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ID(document.cookie,e)}},Wo=null;function ck(){return Wo=Wo||document.querySelector("base"),Wo?Wo.getAttribute("href"):null}function uk(t){return new URL(t,document.baseURI).pathname}var lk=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),Yp=new z(""),bD=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(W(Yp),W(me))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),il=class{constructor(e){this._doc=e}},Gp="ng-app-id",CD=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=zp(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Gp}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Gp),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Gp,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(W(yt),W(yp),W(_p,8),W(on))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),Wp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Jp=/%COMP%/g,SD="%COMP%",dk=`_nghost-${SD}`,hk=`_ngcontent-${SD}`,fk=!0,pk=new z("",{providedIn:"root",factory:()=>fk});function gk(t){return hk.replace(Jp,t)}function mk(t){return dk.replace(Jp,t)}function AD(t,e){return e.map(n=>n.replace(Jp,t))}var ED=(()=>{class t{constructor(n,r,i,s,o,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=zp(a),this.defaultRenderer=new Ko(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Jt.ShadowDom&&(r=ve(L({},r),{encapsulation:Jt.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof sl?i.applyToHost(n):i instanceof Qo&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Jt.Emulated:s=new sl(u,l,r,this.appId,h,o,a,p);break;case Jt.ShadowDom:return new Zp(u,l,n,r,o,a,this.nonce,p);default:s=new Qo(u,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(W(bD),W(CD),W(yp),W(pk),W(yt),W(on),W(me),W(_p))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),Ko=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Wp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(TD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(TD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Wp[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Wp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(An.DashCase|An.Important)?e.style.setProperty(n,r,i&An.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&An.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=hs().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function TD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Zp=class extends Ko{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=AD(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Qo=class extends Ko{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?AD(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},sl=class extends Qo{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=gk(l),this.hostAttr=mk(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},yk=(()=>{class t extends il{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(W(yt))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),DD=["alt","control","meta","shift"],vk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_k={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Ik=(()=>{class t extends il{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>hs().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),DD.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=vk[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),DD.forEach(o=>{if(o!==i){let a=_k[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(W(yt))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function w6(t,e){return aD(L({rootComponent:t},wk(e)))}function wk(t){return{appProviders:[...Ck,...t?.providers??[]],platformProviders:bk}}function Ek(){Qp.makeCurrent()}function Tk(){return new Sn}function Dk(){return tT(document),document}var bk=[{provide:on,useValue:qp},{provide:vp,useValue:Ek,multi:!0},{provide:yt,useFactory:Dk,deps:[]}];var Ck=[{provide:Pu,useValue:"root"},{provide:Sn,useFactory:Tk,deps:[]},{provide:Yp,useClass:yk,multi:!0,deps:[yt,me,on]},{provide:Yp,useClass:Ik,multi:!0,deps:[yt]},ED,CD,bD,{provide:is,useExisting:ED},{provide:rl,useClass:lk,deps:[]},[]];var RD=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(W(yt))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var te="primary",da=Symbol("RouteTitle"),rg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function _s(t){return new rg(t)}function Ak(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Rk(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!an(t[n],e[n]))return!1;return!0}function an(t,e){let n=t?ig(t):void 0,r=e?ig(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!jD(t[i],e[i]))return!1;return!0}function ig(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function jD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function BD(t){return t.length>0?t[t.length-1]:null}function mr(t){return $h(t)?t:qo(t)?xe(Promise.resolve(t)):Y(t)}var Nk={exact:HD,subset:qD},$D={exact:Mk,subset:xk,ignored:()=>!0};function ND(t,e,n){return Nk[n.paths](t.root,e.root,n.matrixParams)&&$D[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Mk(t,e){return an(t,e)}function HD(t,e,n){if(!Jr(t.segments,e.segments)||!cl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!HD(t.children[r],e.children[r],n))return!1;return!0}function xk(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>jD(t[n],e[n]))}function qD(t,e,n){return zD(t,e,e.segments,n)}function zD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Jr(i,n)||e.hasChildren()||!cl(i,n,r))}else if(t.segments.length===n.length){if(!Jr(t.segments,n)||!cl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!qD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Jr(t.segments,i)||!cl(t.segments,i,r)||!t.children[te]?!1:zD(t.children[te],e,s,r)}}function cl(t,e,n){return e.every((r,i)=>$D[n](t[i].parameters,r.parameters))}var On=class{constructor(e=new ye([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=_s(this.queryParams),this._queryParamMap}toString(){return kk.serialize(this)}},ye=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ul(this)}},Zr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=_s(this.parameters),this._parameterMap}toString(){return WD(this)}};function Pk(t,e){return Jr(t,e)&&t.every((n,r)=>an(n.parameters,e[r].parameters))}function Jr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Ok(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===te&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==te&&(n=n.concat(e(i,r)))}),n}var ha=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>new Is,providedIn:"root"})}}return t})(),Is=class{parse(e){let n=new og(e);return new On(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Yo(e.root,!0)}`,r=Vk(e.queryParams),i=typeof e.fragment=="string"?`#${Lk(e.fragment)}`:"";return`${n}${r}${i}`}},kk=new Is;function ul(t){return t.segments.map(e=>WD(e)).join("/")}function Yo(t,e){if(!t.hasChildren())return ul(t);if(e){let n=t.children[te]?Yo(t.children[te],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==te&&r.push(`${i}:${Yo(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Ok(t,(r,i)=>i===te?[Yo(t.children[te],!1)]:[`${i}:${Yo(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[te]!=null?`${ul(t)}/${n[0]}`:`${ul(t)}/(${n.join("//")})`}}function GD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ol(t){return GD(t).replace(/%3B/gi,";")}function Lk(t){return encodeURI(t)}function sg(t){return GD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ll(t){return decodeURIComponent(t)}function MD(t){return ll(t.replace(/\+/g,"%20"))}function WD(t){return`${sg(t.path)}${Fk(t.parameters)}`}function Fk(t){return Object.entries(t).map(([e,n])=>`;${sg(e)}=${sg(n)}`).join("")}function Vk(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ol(n)}=${ol(i)}`).join("&"):`${ol(n)}=${ol(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Uk=/^[^\/()?;#]+/;function Xp(t){let e=t.match(Uk);return e?e[0]:""}var jk=/^[^\/()?;=#]+/;function Bk(t){let e=t.match(jk);return e?e[0]:""}var $k=/^[^=?&#]+/;function Hk(t){let e=t.match($k);return e?e[0]:""}var qk=/^[^&#]+/;function zk(t){let e=t.match(qk);return e?e[0]:""}var og=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ye([],{}):new ye([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[te]=new ye(e,n)),r}parseSegment(){let e=Xp(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new Zr(ll(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Bk(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Xp(this.remaining);i&&(r=i,this.capture(r))}e[ll(n)]=ll(r)}parseQueryParam(e){let n=Hk(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=zk(this.remaining);o&&(r=o,this.capture(r))}let i=MD(n),s=MD(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Xp(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=te);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[te]:new ye([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function KD(t){return t.segments.length>0?new ye([],{[te]:t}):t}function QD(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=QD(i);if(r===te&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new ye(t.segments,e);return Gk(n)}function Gk(t){if(t.numberOfChildren===1&&t.children[te]){let e=t.children[te];return new ye(t.segments.concat(e.segments),e.children)}return t}function na(t){return t instanceof On}function Wk(t,e,n=null,r=null){let i=YD(t);return ZD(i,e,n,r)}function YD(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new ye(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=KD(r);return e??i}function ZD(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return eg(i,i,i,n,r);let s=Kk(e);if(s.toRoot())return eg(i,i,new ye([],{}),n,r);let o=Qk(s,i,t),a=o.processChildren?Xo(o.segmentGroup,o.index,s.commands):XD(o.segmentGroup,o.index,s.commands);return eg(i,o.segmentGroup,a,n,r)}function dl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ra(t){return typeof t=="object"&&t!=null&&t.outlets}function eg(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=JD(t,e,n);let a=KD(QD(o));return new On(a,s,i)}function JD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=JD(s,e,n)}),new ye(t.segments,r)}var hl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&dl(r[0]))throw new H(4003,!1);let i=r.find(ra);if(i&&i!==BD(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Kk(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new hl(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new hl(n,e,r)}var ms=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Qk(t,e,n){if(t.isAbsolute)return new ms(e,!0,0);if(!n)return new ms(e,!1,NaN);if(n.parent===null)return new ms(n,!0,0);let r=dl(t.commands[0])?0:1,i=n.segments.length-1+r;return Yk(n,i,t.numberOfDoubleDots)}function Yk(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new ms(r,!1,i-s)}function Zk(t){return ra(t[0])?t[0].outlets:{[te]:t}}function XD(t,e,n){if(t??=new ye([],{}),t.segments.length===0&&t.hasChildren())return Xo(t,e,n);let r=Jk(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new ye(t.segments.slice(0,r.pathIndex),{});return s.children[te]=new ye(t.segments.slice(r.pathIndex),t.children),Xo(s,0,i)}else return r.match&&i.length===0?new ye(t.segments,{}):r.match&&!t.hasChildren()?ag(t,e,n):r.match?Xo(t,0,i):ag(t,e,n)}function Xo(t,e,n){if(n.length===0)return new ye(t.segments,{});{let r=Zk(n),i={};if(Object.keys(r).some(s=>s!==te)&&t.children[te]&&t.numberOfChildren===1&&t.children[te].segments.length===0){let s=Xo(t.children[te],e,n);return new ye(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=XD(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ye(t.segments,i)}}function Jk(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(ra(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!PD(u,l,o))return s;r+=2}else{if(!PD(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ag(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(ra(s)){let u=Xk(s.outlets);return new ye(r,u)}if(i===0&&dl(n[0])){let u=t.segments[e];r.push(new Zr(u.path,xD(n[0]))),i++;continue}let o=ra(s)?s.outlets[te]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&dl(a)?(r.push(new Zr(o,xD(a))),i+=2):(r.push(new Zr(o,{})),i++)}return new ye(r,{})}function Xk(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=ag(new ye([],{}),0,r))}),e}function xD(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function PD(t,e,n){return t==n.path&&an(e,n.parameters)}var ea="imperative",qe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(qe||{}),kt=class{constructor(e,n){this.id=e,this.url=n}},ws=class extends kt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=qe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},kn=class extends kt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=qe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ct=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ct||{}),fl=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(fl||{}),Pn=class extends kt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},pr=class extends kt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationSkipped}},ia=class extends kt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=qe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},pl=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cg=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ug=class extends kt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=qe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},lg=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dg=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hg=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},fg=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},pg=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gg=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mg=class{constructor(e){this.snapshot=e,this.type=qe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yg=class{constructor(e){this.snapshot=e,this.type=qe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gl=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=qe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},sa=class{},Es=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function e1(t,e){return t.providers&&!t._injector&&(t._injector=Zu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function qt(t){return t.outlet||te}function t1(t,e){let n=t.filter(r=>qt(r)===e);return n.push(...t.filter(r=>qt(r)!==e)),n}function fa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var vg=class{get injector(){return fa(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new pa(this.rootInjector),this.attachRef=null}},pa=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new vg(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(W(Tt))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ml=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=_g(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=_g(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Ig(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ig(e,this._root).map(n=>n.value)}};function _g(t,e){if(t===e.value)return e;for(let n of e.children){let r=_g(t,n);if(r)return r}return null}function Ig(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Ig(t,n);if(r.length)return r.unshift(e),r}return[]}var bt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function gs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var yl=class extends ml{constructor(e,n){super(e),this.snapshot=n,Rg(this,e)}toString(){return this.snapshot.toString()}};function eb(t){let e=n1(t),n=new Be([new Zr("",{})]),r=new Be({}),i=new Be({}),s=new Be({}),o=new Be(""),a=new Xr(n,r,s,o,i,te,t,e.root);return a.snapshot=e.root,new yl(new bt(a,[]),e)}function n1(t){let e={},n={},r={},i="",s=new ys([],e,r,i,n,te,t,null,{});return new _l("",new bt(s,[]))}var Xr=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(oe(l=>l[da]))??Y(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>_s(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>_s(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function vl(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&nb(i)&&(r.resolve[da]=i.title),r}var ys=class{get title(){return this.data?.[da]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=_s(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=_s(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},_l=class extends ml{constructor(e,n){super(n),this.url=e,Rg(this,n)}toString(){return tb(this._root)}};function Rg(t,e){e.value._routerState=t,e.children.forEach(n=>Rg(t,n))}function tb(t){let e=t.children.length>0?` { ${t.children.map(tb).join(", ")} } `:"";return`${t.value}${e}`}function tg(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,an(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),an(e.params,n.params)||t.paramsSubject.next(n.params),Rk(e.url,n.url)||t.urlSubject.next(n.url),an(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function wg(t,e){let n=an(t.params,e.params)&&Pk(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||wg(t.parent,e.parent))}function nb(t){return typeof t.title=="string"||t.title===null}var r1=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=te,this.activateEvents=new ut,this.deactivateEvents=new ut,this.attachEvents=new ut,this.detachEvents=new ut,this.parentContexts=O(pa),this.location=O(ls),this.changeDetector=O(zo),this.inputBinder=O(Tl,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Eg(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=as({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Lu]})}}return t})(),Eg=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Xr?this.route:e===pa?this.childContexts:this.parent.get(e,n)}},Tl=new z(""),OD=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=Ao([r.queryParams,r.params,r.data]).pipe(Nt(([s,o,a],u)=>(a=L(L(L({},s),o),a),u===0?Y(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let o=uD(r.component);if(!o){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(n,i)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function i1(t,e,n){let r=oa(t,e._root,n?n._root:void 0);return new yl(r,e)}function oa(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=s1(t,e,n);return new bt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>oa(t,a)),o}}let r=o1(e.value),i=e.children.map(s=>oa(t,s));return new bt(r,i)}}function s1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return oa(t,r,i);return oa(t,r)})}function o1(t){return new Xr(new Be(t.url),new Be(t.params),new Be(t.queryParams),new Be(t.fragment),new Be(t.data),t.outlet,t.component,t)}var aa=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},rb="ngNavigationCancelingError";function Il(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=na(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ib(!1,Ct.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function ib(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[rb]=!0,n.cancellationCode=e,n}function a1(t){return sb(t)&&na(t.url)}function sb(t){return!!t&&t[rb]}var c1=(t,e,n,r)=>oe(i=>(new Tg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Tg=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),tg(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=gs(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=gs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=gs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=gs(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new yg(s.value.snapshot))}),e.children.length&&this.forwardEvent(new gg(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(tg(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),tg(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},wl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},vs=class{constructor(e,n){this.component=e,this.route=n}};function u1(t,e,n){let r=t._root,i=e?e._root:null;return Zo(r,i,n,[r.value])}function l1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ds(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!jw(t)?t:e.get(t):r}function Zo(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=gs(e);return t.children.forEach(o=>{d1(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ta(a,n.getContext(o),i)),i}function d1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=h1(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new wl(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Zo(t,e,a?a.children:null,r,i):Zo(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new vs(a.outlet.component,o))}else o&&ta(e,a,i),i.canActivateChecks.push(new wl(r)),s.component?Zo(t,null,a?a.children:null,r,i):Zo(t,null,n,r,i);return i}function h1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Jr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Jr(t.url,e.url)||!an(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wg(t,e)||!an(t.queryParams,e.queryParams);case"paramsChange":default:return!wg(t,e)}}function ta(t,e,n){let r=gs(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ta(o,e.children.getContext(s),n):ta(o,null,n):ta(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new vs(e.outlet.component,i)):n.canDeactivateChecks.push(new vs(null,i)):n.canDeactivateChecks.push(new vs(null,i))}function ga(t){return typeof t=="function"}function f1(t){return typeof t=="boolean"}function p1(t){return t&&ga(t.canLoad)}function g1(t){return t&&ga(t.canActivate)}function m1(t){return t&&ga(t.canActivateChild)}function y1(t){return t&&ga(t.canDeactivate)}function v1(t){return t&&ga(t.canMatch)}function ob(t){return t instanceof bn||t?.name==="EmptyError"}var al=Symbol("INITIAL_VALUE");function Ts(){return Nt(t=>Ao(t.map(e=>e.pipe(Cn(1),Gh(al)))).pipe(oe(e=>{for(let n of e)if(n!==!0){if(n===al)return al;if(n===!1||_1(n))return n}return!0}),Rt(e=>e!==al),Cn(1)))}function _1(t){return na(t)||t instanceof aa}function I1(t,e){return Le(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?Y(ve(L({},n),{guardsResult:!0})):w1(o,r,i,t).pipe(Le(a=>a&&f1(a)?E1(r,s,t,e):Y(a)),oe(a=>ve(L({},n),{guardsResult:a})))})}function w1(t,e,n,r){return xe(t).pipe(Le(i=>S1(i.component,i.route,n,e,r)),Qt(i=>i!==!0,!0))}function E1(t,e,n,r){return xe(e).pipe(Fr(i=>Bi(D1(i.route.parent,r),T1(i.route,r),C1(t,i.path,n),b1(t,i.route,n))),Qt(i=>i!==!0,!0))}function T1(t,e){return t!==null&&e&&e(new mg(t)),Y(!0)}function D1(t,e){return t!==null&&e&&e(new pg(t)),Y(!0)}function b1(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(s=>Qc(()=>{let o=fa(e)??n,a=Ds(s,o),u=g1(a)?a.canActivate(e,t):sn(o,()=>a(e,t));return mr(u).pipe(Qt())}));return Y(i).pipe(Ts())}function C1(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>l1(o)).filter(o=>o!==null).map(o=>Qc(()=>{let a=o.guards.map(u=>{let l=fa(o.node)??n,h=Ds(u,l),p=m1(h)?h.canActivateChild(r,t):sn(l,()=>h(r,t));return mr(p).pipe(Qt())});return Y(a).pipe(Ts())}));return Y(s).pipe(Ts())}function S1(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Y(!0);let o=s.map(a=>{let u=fa(e)??i,l=Ds(a,u),h=y1(l)?l.canDeactivate(t,e,n,r):sn(u,()=>l(t,e,n,r));return mr(h).pipe(Qt())});return Y(o).pipe(Ts())}function A1(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let s=i.map(o=>{let a=Ds(o,t),u=p1(a)?a.canLoad(e,n):sn(t,()=>a(e,n));return mr(u)});return Y(s).pipe(Ts(),ab(r))}function ab(t){return Oh($e(e=>{if(typeof e!="boolean")throw Il(t,e)}),oe(e=>e===!0))}function R1(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let s=i.map(o=>{let a=Ds(o,t),u=v1(a)?a.canMatch(e,n):sn(t,()=>a(e,n));return mr(u)});return Y(s).pipe(Ts(),ab(r))}var ca=class{constructor(e){this.segmentGroup=e||null}},ua=class extends Error{constructor(e){super(),this.urlTree=e}};function ps(t){return Ui(new ca(t))}function N1(t){return Ui(new H(4e3,!1))}function M1(t){return Ui(ib(!1,Ct.GuardRejected))}var Dg=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[te])return N1(`${e.redirectTo}`);i=i.children[te]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:C,title:N}=i,R=sn(s,()=>a({params:v,data:C,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:N}));if(R instanceof On)throw new ua(R);n=R}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new ua(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new On(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new ye(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},bg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function x1(t,e,n,r,i){let s=cb(t,e,n);return s.matched?(r=e1(e,r),R1(r,e,n,i).pipe(oe(o=>o===!0?s:L({},bg)))):Y(s)}function cb(t,e,n){if(e.path==="**")return P1(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},bg):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Ak)(n,t,e);if(!i)return L({},bg);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function P1(t){return{matched:!0,parameters:t.length>0?BD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function kD(t,e,n,r){return n.length>0&&L1(t,n,r)?{segmentGroup:new ye(e,k1(r,new ye(n,t.children))),slicedSegments:[]}:n.length===0&&F1(t,n,r)?{segmentGroup:new ye(t.segments,O1(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ye(t.segments,t.children),slicedSegments:n}}function O1(t,e,n,r){let i={};for(let s of n)if(Dl(t,e,s)&&!r[qt(s)]){let o=new ye([],{});i[qt(s)]=o}return L(L({},r),i)}function k1(t,e){let n={};n[te]=e;for(let r of t)if(r.path===""&&qt(r)!==te){let i=new ye([],{});n[qt(r)]=i}return n}function L1(t,e,n){return n.some(r=>Dl(t,e,r)&&qt(r)!==te)}function F1(t,e,n){return n.some(r=>Dl(t,e,r))}function Dl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function V1(t,e,n){return e.length===0&&!t.children[n]}var Cg=class{};function U1(t,e,n,r,i,s,o="emptyOnly"){return new Sg(t,e,n,r,i,o,s).recognize()}var j1=31,Sg=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Dg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=kD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(({children:n,rootSnapshot:r})=>{let i=new bt(r,n),s=new _l("",i),o=Wk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new ys([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),te,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,te,n).pipe(oe(r=>({children:r,rootSnapshot:n})),rr(r=>{if(r instanceof ua)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ca?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(oe(o=>o instanceof bt?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return xe(s).pipe(Fr(o=>{let a=r.children[o],u=t1(n,o);return this.processSegmentGroup(e,u,a,o,i)}),zh((o,a)=>(o.push(...a),o)),ir(null),qh(),Le(o=>{if(o===null)return ps(r);let a=ub(o);return B1(a),Y(a)}))}processSegment(e,n,r,i,s,o,a){return xe(n).pipe(Fr(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,s,o,a).pipe(rr(l=>{if(l instanceof ca)return Y(null);throw l}))),Qt(u=>!!u),rr(u=>{if(ob(u))return V1(r,i,s)?Y(new Cg):ps(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,u){return qt(r)!==o&&(o===te||!Dl(i,s,r))?ps(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,u):ps(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=cb(n,i,s);if(!u)return ps(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>j1&&(this.allowRedirects=!1));let v=new ys(s,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,LD(i),qt(i),i.component??i._loadedComponent??null,i,FD(i)),C=vl(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(C.params),v.data=Object.freeze(C.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(Le(R=>this.processSegment(e,r,n,R.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=x1(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Nt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Nt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=u,C=new ys(m,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,LD(r),qt(r),r.component??r._loadedComponent??null,r,FD(r)),N=vl(C,o,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:k}=kD(n,m,v,l);if(k.length===0&&R.hasChildren())return this.processChildren(h,l,R,C).pipe(oe(V=>new bt(C,V)));if(l.length===0&&k.length===0)return Y(new bt(C,[]));let j=qt(r)===s;return this.processSegment(h,l,R,k,j?te:s,!0,C).pipe(oe(V=>new bt(C,V instanceof bt?[V]:[])))}))):ps(n)))}getChildConfig(e,n,r){return n.children?Y({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Y({routes:n._loadedRoutes,injector:n._loadedInjector}):A1(e,n,r,this.urlSerializer).pipe(Le(i=>i?this.configLoader.loadChildren(e,n).pipe($e(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):M1(n))):Y({routes:[],injector:e})}};function B1(t){t.sort((e,n)=>e.value.outlet===te?-1:n.value.outlet===te?1:e.value.outlet.localeCompare(n.value.outlet))}function $1(t){let e=t.value.routeConfig;return e&&e.path===""}function ub(t){let e=[],n=new Set;for(let r of t){if(!$1(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=ub(r.children);e.push(new bt(r.value,i))}return e.filter(r=>!n.has(r))}function LD(t){return t.data||{}}function FD(t){return t.resolve||{}}function H1(t,e,n,r,i,s){return Le(o=>U1(t,e,n,r,o.extractedUrl,i,s).pipe(oe(({state:a,tree:u})=>ve(L({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function q1(t,e){return Le(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Y(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of lb(u))o.add(l);let a=0;return xe(o).pipe(Fr(u=>s.has(u)?z1(u,r,t,e):(u.data=vl(u,u.parent,t).resolve,Y(void 0))),$e(()=>a++),$i(1),Le(u=>a===o.size?Y(n):Et))})}function lb(t){let e=t.children.map(n=>lb(n)).flat();return[t,...e]}function z1(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!nb(i)&&(s[da]=i.title),G1(s,t,e,r).pipe(oe(o=>(t._resolvedData=o,t.data=vl(t,t.parent,n).resolve,null)))}function G1(t,e,n,r){let i=ig(t);if(i.length===0)return Y({});let s={};return xe(i).pipe(Le(o=>W1(t[o],e,n,r).pipe(Qt(),$e(a=>{if(a instanceof aa)throw Il(new Is,a);s[o]=a}))),$i(1),Hh(s),rr(o=>ob(o)?Et:Ui(o)))}function W1(t,e,n,r){let i=fa(e)??r,s=Ds(t,i),o=s.resolve?s.resolve(e,n):sn(i,()=>s(e,n));return mr(o)}function ng(t){return Nt(e=>{let n=t(e);return n?xe(n).pipe(oe(()=>e)):Y(e)})}var db=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===te);return r}getResolvedTitleForRoute(n){return n.data[da]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(K1),providedIn:"root"})}}return t})(),K1=(()=>{class t extends db{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(W(RD))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ma=new z("",{providedIn:"root",factory:()=>({})}),Q1=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Jw({type:t,selectors:[["ng-component"]],standalone:!0,features:[JT],decls:1,vars:0,template:function(r,i){r&1&&Pp(0,"router-outlet")},dependencies:[r1],encapsulation:2})}}return t})();function Ng(t){let e=t.children&&t.children.map(Ng),n=e?ve(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==te&&(n.component=Q1),n}var la=new z(""),Mg=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(tl)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Y(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=mr(n.loadComponent()).pipe(oe(hb),$e(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Ro(()=>{this.componentLoaders.delete(n)})),i=new ki(r,()=>new at).pipe(Oi());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Y1(r,this.compiler,n,this.onLoadEndListener).pipe(Ro(()=>{this.childrenLoaders.delete(r)})),o=new ki(s,()=>new at).pipe(Oi());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Y1(t,e,n,r){return mr(t.loadChildren()).pipe(oe(hb),Le(i=>i instanceof Lo||Array.isArray(i)?Y(i):xe(e.compileModuleAsync(i))),oe(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(la,[],{optional:!0,self:!0}).flat()),{routes:o.map(Ng),injector:s}}))}function Z1(t){return t&&typeof t=="object"&&"default"in t}function hb(t){return Z1(t)?t.default:t}var xg=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(J1),providedIn:"root"})}}return t})(),J1=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),fb=new z(""),pb=new z("");function X1(t,e,n){let r=t.get(pb),i=t.get(yt);return t.get(me).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),eL(t))),{onViewTransitionCreated:u}=r;return u&&sn(t,()=>u({transition:a,from:e,to:n})),o})}function eL(t){return new Promise(e=>{xp({read:()=>setTimeout(e)},{injector:t})})}var tL=new z(""),Pg=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new at,this.transitionAbortSubject=new at,this.configLoader=O(Mg),this.environmentInjector=O(Tt),this.urlSerializer=O(ha),this.rootContexts=O(pa),this.location=O(fs),this.inputBindingEnabled=O(Tl,{optional:!0})!==null,this.titleStrategy=O(db),this.options=O(ma,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(xg),this.createViewTransition=O(fb,{optional:!0}),this.navigationErrorHandler=O(tL,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let n=i=>this.events.next(new hg(i)),r=i=>this.events.next(new fg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ve(L(L({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new Be({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ea,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Rt(s=>s.id!==0),oe(s=>ve(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Nt(s=>{let o=!1,a=!1;return Y(s).pipe(Nt(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ct.SupersededByNewNavigation),Et;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ve(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new pr(u.id,this.urlSerializer.serialize(u.rawUrl),p,fl.IgnoredSameUrlNavigation)),u.resolve(!1),Et}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Y(u).pipe(Nt(p=>{let m=this.transitions?.getValue();return this.events.next(new ws(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Et:Promise.resolve(p)}),H1(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),$e(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ve(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new pl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:C,extras:N}=u,R=new ws(p,this.urlSerializer.serialize(m),v,C);this.events.next(R);let k=eb(this.rootComponentType).snapshot;return this.currentTransition=s=ve(L({},u),{targetSnapshot:k,urlAfterRedirects:m,extras:ve(L({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Y(s)}else{let p="";return this.events.next(new pr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,fl.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Et}}),$e(u=>{let l=new cg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),oe(u=>(this.currentTransition=s=ve(L({},u),{guards:u1(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),I1(this.environmentInjector,u=>this.events.next(u)),$e(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Il(this.urlSerializer,u.guardsResult);let l=new ug(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Rt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Ct.GuardRejected),!1)),ng(u=>{if(u.guards.canActivateChecks.length)return Y(u).pipe($e(l=>{let h=new lg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Nt(l=>{let h=!1;return Y(l).pipe(q1(this.paramsInheritanceStrategy,this.environmentInjector),$e({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Ct.NoDataFromResolver)}}))}),$e(l=>{let h=new dg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),ng(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe($e(m=>{h.component=m}),oe(()=>{})));for(let m of h.children)p.push(...l(m));return p};return Ao(l(u.targetSnapshot.root)).pipe(ir(null),Cn(1))}),ng(()=>this.afterPreactivation()),Nt(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?xe(h).pipe(oe(()=>s)):Y(s)}),oe(u=>{let l=i1(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=ve(L({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),$e(()=>{this.events.next(new sa)}),c1(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Cn(1),$e({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new kn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),Wh(this.transitionAbortSubject.pipe($e(u=>{throw u}))),Ro(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Ct.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),rr(u=>{if(a=!0,sb(u))this.events.next(new Pn(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),a1(u)?this.events.next(new Es(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let l=new ia(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let h=sn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof aa){let{message:p,cancellationCode:m}=Il(this.urlSerializer,h);this.events.next(new Pn(s.id,this.urlSerializer.serialize(s.extractedUrl),p,m)),this.events.next(new Es(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=n.errorHandler(u);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return Et}))}))}cancelNavigationTransition(n,r,i){let s=new Pn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function nL(t){return t!==ea}var rL=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(iL),providedIn:"root"})}}return t})(),Ag=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},iL=(()=>{class t extends Ag{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=fp(t)))(i||t)}})()}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),gb=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(sL),providedIn:"root"})}}return t})(),sL=(()=>{class t extends gb{constructor(){super(...arguments),this.location=O(fs),this.urlSerializer=O(ha),this.options=O(ma,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(xg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new On,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=eb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof ws)this.stateMemento=this.createStateMemento();else if(n instanceof pr)this.rawUrlTree=r.initialUrl;else if(n instanceof pl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof sa?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Pn&&(n.code===Ct.GuardRejected||n.code===Ct.NoDataFromResolver)?this.restoreHistory(r):n instanceof ia?this.restoreHistory(r,!0):n instanceof kn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof On?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=L(L({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=fp(t)))(i||t)}})()}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Jo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Jo||{});function mb(t,e){t.events.pipe(Rt(n=>n instanceof kn||n instanceof Pn||n instanceof ia||n instanceof pr),oe(n=>n instanceof kn||n instanceof pr?Jo.COMPLETE:(n instanceof Pn?n.code===Ct.Redirect||n.code===Ct.SupersededByNewNavigation:!1)?Jo.REDIRECTING:Jo.FAILED),Rt(n=>n!==Jo.REDIRECTING),Cn(1)).subscribe(()=>{e()})}function oL(t){throw t}var aL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},gr=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=O(Ju),this.stateManager=O(gb),this.options=O(ma,{optional:!0})||{},this.pendingTasks=O(us),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O(Pg),this.urlSerializer=O(ha),this.location=O(fs),this.urlHandlingStrategy=O(xg),this._events=new at,this.errorHandler=this.options.errorHandler||oL,this.navigated=!1,this.routeReuseStrategy=O(rL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O(la,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(Tl,{optional:!0}),this.eventsSubscription=new Ae,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Pn&&r.code!==Ct.Redirect&&r.code!==Ct.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof kn)this.navigated=!0;else if(r instanceof Es){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||nL(i.source)},o);this.scheduleNavigation(a,ea,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}lL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ea,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Ng),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=YD(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return ZD(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=na(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,ea,null,r)}navigate(n,r={skipLocationChange:!1}){return uL(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=L({},aL):r===!1?i=L({},cL):i=r,na(n))return ND(this.currentUrlTree,n,i);let s=this.parseUrl(n);return ND(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return mb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function uL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new H(4008,!1)}function lL(t){return!(t instanceof sa)&&!(t instanceof Es)}var El=class{};var dL=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Rt(n=>n instanceof kn),Fr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Zu(s.providers,n,`Route: ${s.path}`));let o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return xe(i).pipe(ji())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=Y(null);let s=i.pipe(Le(o=>o===null?Y(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return xe([s,o]).pipe(ji())}else return s})}static{this.\u0275fac=function(r){return new(r||t)(W(gr),W(tl),W(Tt),W(El),W(Mg))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),yb=new z(""),hL=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ws?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof kn?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof pr&&n.code===fl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof gl&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new gl(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){mT()}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function H6(t,...e){return rn([{provide:la,multi:!0,useValue:t},[],{provide:Xr,useFactory:vb,deps:[gr]},{provide:el,multi:!0,useFactory:_b},e.map(n=>n.\u0275providers)])}function vb(t){return t.routerState.root}function ya(t,e){return{\u0275kind:t,\u0275providers:e}}function _b(){let t=O(et);return e=>{let n=t.get(Qr);if(e!==n.components[0])return;let r=t.get(gr),i=t.get(Ib);t.get(Og)===1&&r.initialNavigation(),t.get(wb,null,ne.Optional)?.setUpPreloading(),t.get(yb,null,ne.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Ib=new z("",{factory:()=>new at}),Og=new z("",{providedIn:"root",factory:()=>1});function fL(){return ya(2,[{provide:Og,useValue:0},{provide:Xu,multi:!0,deps:[et],useFactory:e=>{let n=e.get(yD,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(gr),s=e.get(Ib);mb(i,()=>{r(!0)}),e.get(Pg).afterPreactivation=()=>(r(!0),s.closed?Y(void 0):s),i.initialNavigation()}))}}])}function pL(){return ya(3,[{provide:Xu,multi:!0,useFactory:()=>{let e=O(gr);return()=>{e.setUpLocationChangeListener()}}},{provide:Og,useValue:2}])}var wb=new z("");function gL(t){return ya(0,[{provide:wb,useExisting:dL},{provide:El,useExisting:t}])}function mL(){return ya(8,[OD,{provide:Tl,useExisting:OD}])}function yL(t){let e=[{provide:fb,useValue:X1},{provide:pb,useValue:L({skipNextTransition:!!t?.skipInitialTransition},t)}];return ya(9,e)}var VD=new z("ROUTER_FORROOT_GUARD"),vL=[fs,{provide:ha,useClass:Is},gr,pa,{provide:Xr,useFactory:vb,deps:[gr]},Mg,[]],q6=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[vL,[],{provide:la,multi:!0,useValue:n},{provide:VD,useFactory:EL,deps:[[gr,new tt,new ep]]},{provide:ma,useValue:r||{}},r?.useHash?IL():wL(),_L(),r?.preloadingStrategy?gL(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?TL(r):[],r?.bindToComponentInputs?mL().\u0275providers:[],r?.enableViewTransitions?yL().\u0275providers:[],DL()]}}static forChild(n){return{ngModule:t,providers:[{provide:la,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||t)(W(VD,8))}}static{this.\u0275mod=Bo({type:t})}static{this.\u0275inj=Uo({})}}return t})();function _L(){return{provide:yb,useFactory:()=>{let t=O(wD),e=O(me),n=O(ma),r=O(Pg),i=O(ha);return n.scrollOffset&&t.setOffset(n.scrollOffset),new hL(i,r,t,e,n)}}}function IL(){return{provide:Yr,useClass:_D}}function wL(){return{provide:Yr,useClass:Hp}}function EL(t){return"guarded"}function TL(t){return[t.initialNavigation==="disabled"?pL().\u0275providers:[],t.initialNavigation==="enabledBlocking"?fL().\u0275providers:[]]}var UD=new z("");function DL(){return[{provide:UD,useFactory:_b},{provide:el,multi:!0,useExisting:UD}]}var Tb=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Db={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,v=l&63;u||(v=64,o||(m=64)),r.push(n[h],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Tb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new Lg;let m=s<<2|a>>4;if(r.push(m),l!==64){let v=a<<4&240|l>>2;if(r.push(v),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Lg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},CL=function(t){let e=Tb(t);return Db.encodeByteArray(e,!0)},va=function(t){return CL(t).replace(/\./g,"")},Vg=function(t){try{return Db.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function SL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var AL=()=>SL().__FIREBASE_DEFAULTS__,RL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Vg(t[1]);return e&&JSON.parse(e)},Cl=()=>{try{return AL()||RL()||NL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ug=t=>{var e,n;return(n=(e=Cl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Sl=t=>{let e=Ug(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},jg=()=>{var t;return(t=Cl())===null||t===void 0?void 0:t.config},Bg=t=>{var e;return(e=Cl())===null||e===void 0?void 0:e[`_${t}`]};var bl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Al(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[va(JSON.stringify(n)),va(JSON.stringify(o)),""].join(".")}function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function ML(){var t;let e=(t=Cl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Cb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Sb(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ab(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Rb(){let t=ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Nb(){return!ML()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $g(){try{return typeof indexedDB=="object"}catch{return!1}}function Mb(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var xL="FirebaseError",ft=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xL,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ln.prototype.create)}},Ln=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?PL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ft(i,a,r)}};function PL(t,e){return t.replace(OL,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var OL=/\{\$([^}]+)}/g;function xb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ei(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(Eb(s)&&Eb(o)){if(!ei(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Eb(t){return t!==null&&typeof t=="object"}function _a(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function bs(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Cs(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Pb(t,e){let n=new Fg(t,e);return n.subscribe.bind(n)}var Fg=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=kg),i.error===void 0&&(i.error=kg),i.complete===void 0&&(i.complete=kg);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function kL(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function kg(){}var W6=4*60*60*1e3;function De(t){return t&&t._delegate?t._delegate:t}var vt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ti="[DEFAULT]";var Hg=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new bl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FL(e))try{this.getOrInitializeService({instanceIdentifier:ti})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ti){return this.instances.has(e)}getOptions(e=ti){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ti){return this.component?this.component.multipleInstances?e:ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function LL(t){return t===ti?void 0:t}function FL(t){return t.instantiationMode==="EAGER"}var Rl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Hg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var VL=[],ae=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ae||{}),UL={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},jL=ae.INFO,BL={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},$L=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=BL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},yr=class{constructor(e){this.name=e,this._logLevel=jL,this._logHandler=$L,this._userLogHandler=null,VL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}};var HL=(t,e)=>e.some(n=>t instanceof n),Ob,kb;function qL(){return Ob||(Ob=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zL(){return kb||(kb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Lb=new WeakMap,zg=new WeakMap,Fb=new WeakMap,qg=new WeakMap,Wg=new WeakMap;function GL(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(cn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Lb.set(n,t)}).catch(()=>{}),Wg.set(e,t),e}function WL(t){if(zg.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});zg.set(t,e)}var Gg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Fb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Vb(t){Gg=t(Gg)}function KL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Nl(this),e,...n);return Fb.set(r,e.sort?e.sort():[e]),cn(r)}:zL().includes(t)?function(...e){return t.apply(Nl(this),e),cn(Lb.get(this))}:function(...e){return cn(t.apply(Nl(this),e))}}function QL(t){return typeof t=="function"?KL(t):(t instanceof IDBTransaction&&WL(t),HL(t,qL())?new Proxy(t,Gg):t)}function cn(t){if(t instanceof IDBRequest)return GL(t);if(qg.has(t))return qg.get(t);let e=QL(t);return e!==t&&(qg.set(t,e),Wg.set(e,t)),e}var Nl=t=>Wg.get(t);function jb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=cn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(cn(o.result),u.oldVersion,u.newVersion,cn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var YL=["get","getKey","getAll","getAllKeys","count"],ZL=["put","add","delete","clear"],Kg=new Map;function Ub(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kg.get(e))return Kg.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=ZL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||YL.includes(n)))return;let s=function(o,...a){return _(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Kg.set(e,s),s}Vb(t=>ve(L({},t),{get:(e,n,r)=>Ub(e,n)||t.get(e,n,r),has:(e,n)=>!!Ub(e,n)||t.has(e,n)}));var Yg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JL(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function JL(t){let e=t.getComponent();return e?.type==="VERSION"}var Zg="@firebase/app",Bb="0.10.13";var Fn=new yr("@firebase/app"),XL="@firebase/app-compat",eF="@firebase/analytics-compat",tF="@firebase/analytics",nF="@firebase/app-check-compat",rF="@firebase/app-check",iF="@firebase/auth",sF="@firebase/auth-compat",oF="@firebase/database",aF="@firebase/data-connect",cF="@firebase/database-compat",uF="@firebase/functions",lF="@firebase/functions-compat",dF="@firebase/installations",hF="@firebase/installations-compat",fF="@firebase/messaging",pF="@firebase/messaging-compat",gF="@firebase/performance",mF="@firebase/performance-compat",yF="@firebase/remote-config",vF="@firebase/remote-config-compat",_F="@firebase/storage",IF="@firebase/storage-compat",wF="@firebase/firestore",EF="@firebase/vertexai-preview",TF="@firebase/firestore-compat",DF="firebase",bF="10.14.1";var Jg="[DEFAULT]",CF={[Zg]:"fire-core",[XL]:"fire-core-compat",[tF]:"fire-analytics",[eF]:"fire-analytics-compat",[rF]:"fire-app-check",[nF]:"fire-app-check-compat",[iF]:"fire-auth",[sF]:"fire-auth-compat",[oF]:"fire-rtdb",[aF]:"fire-data-connect",[cF]:"fire-rtdb-compat",[uF]:"fire-fn",[lF]:"fire-fn-compat",[dF]:"fire-iid",[hF]:"fire-iid-compat",[fF]:"fire-fcm",[pF]:"fire-fcm-compat",[gF]:"fire-perf",[mF]:"fire-perf-compat",[yF]:"fire-rc",[vF]:"fire-rc-compat",[_F]:"fire-gcs",[IF]:"fire-gcs-compat",[wF]:"fire-fst",[TF]:"fire-fst-compat",[EF]:"fire-vertex","fire-js":"fire-js",[DF]:"fire-js-all"};var Ia=new Map,SF=new Map,Xg=new Map;function $b(t,e){try{t.container.addComponent(e)}catch(n){Fn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function un(t){let e=t.name;if(Xg.has(e))return Fn.debug(`There were multiple attempts to register component ${e}.`),!1;Xg.set(e,t);for(let n of Ia.values())$b(n,t);for(let n of SF.values())$b(n,t);return!0}function ni(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zt(t){return t.settings!==void 0}var AF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vr=new Ln("app","Firebase",AF);var em=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}};var ln=bF;function rm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Jg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw vr.create("bad-app-name",{appName:String(i)});if(n||(n=jg()),!n)throw vr.create("no-options");let s=Ia.get(i);if(s){if(ei(n,s.options)&&ei(r,s.config))return s;throw vr.create("duplicate-app",{appName:i})}let o=new Rl(i);for(let u of Xg.values())o.addComponent(u);let a=new em(n,r,o);return Ia.set(i,a),a}function _r(t=Jg){let e=Ia.get(t);if(!e&&t===Jg&&jg())return rm();if(!e)throw vr.create("no-app",{appName:t});return e}function Ml(){return Array.from(Ia.values())}function Ce(t,e,n){var r;let i=(r=CF[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fn.warn(a.join(" "));return}un(new vt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var RF="firebase-heartbeat-database",NF=1,wa="firebase-heartbeat-store",Qg=null;function Gb(){return Qg||(Qg=jb(RF,NF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wa)}catch(n){console.warn(n)}}}}).catch(t=>{throw vr.create("idb-open",{originalErrorMessage:t.message})})),Qg}function MF(t){return _(this,null,function*(){try{let n=(yield Gb()).transaction(wa),r=yield n.objectStore(wa).get(Wb(t));return yield n.done,r}catch(e){if(e instanceof ft)Fn.warn(e.message);else{let n=vr.create("idb-get",{originalErrorMessage:e?.message});Fn.warn(n.message)}}})}function Hb(t,e){return _(this,null,function*(){try{let r=(yield Gb()).transaction(wa,"readwrite");yield r.objectStore(wa).put(e,Wb(t)),yield r.done}catch(n){if(n instanceof ft)Fn.warn(n.message);else{let r=vr.create("idb-set",{originalErrorMessage:n?.message});Fn.warn(r.message)}}})}function Wb(t){return`${t.name}!${t.options.appId}`}var xF=1024,PF=30*24*60*60*1e3,tm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new nm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=PF}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Fn.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=qb(),{heartbeatsToSend:r,unsentEntries:i}=OF(this._heartbeatsCache.heartbeats),s=va(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Fn.warn(n),""}})}};function qb(){return new Date().toISOString().substring(0,10)}function OF(t,e=xF){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),zb(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),zb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var nm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return $g()?Mb().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield MF(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Hb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Hb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function zb(t){return va(JSON.stringify({version:2,heartbeats:t})).length}function kF(t){un(new vt("platform-logger",e=>new Yg(e),"PRIVATE")),un(new vt("heartbeat",e=>new tm(e),"PRIVATE")),Ce(Zg,Bb,t),Ce(Zg,Bb,"esm2017"),Ce("fire-js","")}kF("");var LF="firebase",FF="10.14.1";Ce(LF,FF,"app");var Ir=new hr("ANGULARFIRE2_VERSION");function Ea(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var As=(t,e)=>{let n=e?[e]:Ml(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ii=class{constructor(){return As(VF)}},VF="app-check";function Ss(){}var xl=class{zone;delegate;constructor(e,n=jh){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},im=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ss,{},Ss,Ss)),n.pipe($e({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},si=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new xl(Zone.current)),this.insideAngular=n.run(()=>new xl(Zone.current,Uh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(W(me))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Pl(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function UF(t){return Pl().ngZone.runOutsideAngular(()=>t())}function ri(t){return Pl().ngZone.run(()=>t())}function jF(t){return BF(Pl())(t)}function BF(t){return function(n){return n=n.lift(new im(t.ngZone)),n.pipe(nr(t.outsideAngular),tr(t.insideAngular))}}var $F=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ri(()=>t.apply(void 0,r))},Pe=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=ri(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ss,{},Ss,Ss))),r[s]=$F(r[s],n));let i=UF(()=>t.apply(this,r));if(!e)if(i instanceof ue){let s=Pl();return i.pipe(nr(s.outsideAngular),tr(s.insideAngular))}else return ri(()=>i);return i instanceof ue?i.pipe(jF):i instanceof Promise?ri(()=>new Promise((s,o)=>i.then(a=>ri(()=>s(a)),a=>ri(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:ri(()=>i)};var Vn=class{constructor(e){return e}},oi=class{constructor(){return Ml()}};function HF(t){return t&&t.length===1?t[0]:new Vn(_r())}var sm=new z("angularfire2._apps"),qF={provide:Vn,useFactory:HF,deps:[[new tt,sm]]},zF={provide:oi,deps:[[new tt,sm]]};function GF(t){return(e,n)=>{let r=n.get(on);Ce("angularfire",Ir.full,"core"),Ce("angularfire",Ir.full,"app"),Ce("angular",tD.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Vn(i)}}function P3(t,...e){return rn([qF,zF,{provide:sm,useFactory:GF(t),multi:!0,deps:[me,et,si,...e]}])}var O3=Pe(rm,!0);function lC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var dC=lC,hC=new Ln("auth","Firebase",lC());var Ul=new yr("@firebase/auth");function WF(t,...e){Ul.logLevel<=ae.WARN&&Ul.warn(`Auth (${ln}): ${t}`,...e)}function kl(t,...e){Ul.logLevel<=ae.ERROR&&Ul.error(`Auth (${ln}): ${t}`,...e)}function hn(t,...e){throw Am(t,...e)}function ai(t,...e){return Am(t,...e)}function fC(t,e,n){let r=Object.assign(Object.assign({},dC()),{[e]:n});return new Ln("auth","Firebase",r).create(e,{appName:t.name})}function Bn(t){return fC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Am(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return hC.create(t,...e)}function q(t,e,...n){if(!t)throw Am(e,...n)}function Un(t){let e="INTERNAL ASSERTION FAILED: "+t;throw kl(e),new Error(e)}function Er(t,e){t||Un(e)}function um(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function KF(){return Kb()==="http:"||Kb()==="https:"}function Kb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function QF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KF()||Sb()||"connection"in navigator)?navigator.onLine:!0}function YF(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ci=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Er(n>e,"Short delay should be less than long delay!"),this.isMobile=bb()||Ab()}get(){return QF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Rm(t,e){Er(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var jl=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var ZF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var JF=new ci(3e4,6e4);function $n(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Hn(s,o,a,u){return _(this,arguments,function*(t,e,n,r,i={}){return pC(t,i,()=>_(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=_a(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let v=Object.assign({method:e,headers:m},l);return Cb()||(v.referrerPolicy="no-referrer"),jl.fetch()(gC(t,t.config.apiHost,n,p),v)}))})}function pC(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},ZF),e);try{let i=new lm(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ol(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ol(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ol(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ol(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw fC(t,h,l);hn(t,h)}}catch(i){if(i instanceof ft)throw i;hn(t,"network-request-failed",{message:String(i)})}})}function Na(s,o,a,u){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield Hn(t,e,n,r,i);return"mfaPendingCredential"in l&&hn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function gC(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Rm(t.config,i):`${t.config.apiScheme}://${i}`}function XF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var lm=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ai(this.auth,"network-request-failed")),JF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ol(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ai(t,e,r);return i.customData._tokenResponse=n,i}function Qb(t){return t!==void 0&&t.enterprise!==void 0}var dm=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return XF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function eV(t,e){return _(this,null,function*(){return Hn(t,"GET","/v2/recaptchaConfig",$n(t,e))})}function tV(t,e){return _(this,null,function*(){return Hn(t,"POST","/v1/accounts:delete",e)})}function mC(t,e){return _(this,null,function*(){return Hn(t,"POST","/v1/accounts:lookup",e)})}function Ta(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Nm(t,e=!1){return _(this,null,function*(){let n=De(t),r=yield n.getIdToken(e),i=Mm(r);q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ta(om(i.auth_time)),issuedAtTime:Ta(om(i.iat)),expirationTime:Ta(om(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function om(t){return Number(t)*1e3}function Mm(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return kl("JWT malformed, contained fewer than 3 sections"),null;try{let i=Vg(n);return i?JSON.parse(i):(kl("Failed to decode base64 JWT payload"),null)}catch(i){return kl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Yb(t){let e=Mm(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ba(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof ft&&nV(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function nV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var hm=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ca=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ta(this.lastLoginAt),this.creationTime=Ta(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Bl(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield ba(t,mC(n,{idToken:r}));q(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?yC(s.providerUserInfo):[],a=rV(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ca(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function xm(t){return _(this,null,function*(){let e=De(t);yield Bl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function rV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function yC(t){return t.map(e=>{var{providerId:n}=e,r=Bh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function iV(t,e){return _(this,null,function*(){let n=yield pC(t,{},()=>_(this,null,function*(){let r=_a({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=gC(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",jl.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function sV(t,e){return _(this,null,function*(){return Hn(t,"POST","/v2/accounts:revokeToken",$n(t,e))})}var Da=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){q(e.length!==0,"internal-error");let n=Yb(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield iV(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(q(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(q(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Un("not implemented")}};function wr(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Rs=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Bh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ca(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield ba(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Nm(this,e)}reload(){return xm(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Bl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(zt(this.auth.app))return Promise.reject(Bn(this.auth));let e=yield this.getIdToken();return yield ba(this,tV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,j=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:V,emailVerified:$,isAnonymous:Ie,providerData:K,stsTokenManager:E}=n;q(V&&E,e,"internal-error");let y=Da.fromJSON(this.name,E);q(typeof V=="string",e,"internal-error"),wr(p,e.name),wr(m,e.name),q(typeof $=="boolean",e,"internal-error"),q(typeof Ie=="boolean",e,"internal-error"),wr(v,e.name),wr(C,e.name),wr(N,e.name),wr(R,e.name),wr(k,e.name),wr(j,e.name);let I=new t({uid:V,auth:e,email:m,emailVerified:$,displayName:p,isAnonymous:Ie,photoURL:C,phoneNumber:v,tenantId:N,stsTokenManager:y,createdAt:k,lastLoginAt:j});return K&&Array.isArray(K)&&(I.providerData=K.map(T=>Object.assign({},T))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new Da;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Bl(s),s})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];q(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?yC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Da;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ca(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var Zb=new Map;function jn(t){Er(t instanceof Function,"Expected a class definition");let e=Zb.get(t);return e?(Er(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Zb.set(t,e),e)}var oV=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),fm=oV;function Ll(t,e,n){return`firebase:${t}:${e}:${n}`}var $l=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Ll(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ll("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Rs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(jn(fm),e,r);let i=(yield Promise.all(n.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||jn(fm),o=Ll(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=Rs._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>_(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function Jb(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TC(e))return"Blackberry";if(DC(e))return"Webos";if(_C(e))return"Safari";if((e.includes("chrome/")||IC(e))&&!e.includes("edge/"))return"Chrome";if(EC(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function vC(t=ze()){return/firefox\//i.test(t)}function _C(t=ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IC(t=ze()){return/crios\//i.test(t)}function wC(t=ze()){return/iemobile/i.test(t)}function EC(t=ze()){return/android/i.test(t)}function TC(t=ze()){return/blackberry/i.test(t)}function DC(t=ze()){return/webos/i.test(t)}function Pm(t=ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aV(t=ze()){var e;return Pm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cV(){return Rb()&&document.documentMode===10}function bC(t=ze()){return Pm(t)||EC(t)||DC(t)||TC(t)||/windows phone/i.test(t)||wC(t)}function CC(t,e=[]){let n;switch(t){case"Browser":n=Jb(ze());break;case"Worker":n=`${Jb(ze())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ln}/${r}`}var pm=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function uV(n){return _(this,arguments,function*(t,e={}){return Hn(t,"GET","/v2/passwordPolicy",$n(t,e))})}var lV=6,gm=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:lV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var mm=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hl(this),this.idTokenSubscription=new Hl(this),this.beforeStateQueue=new pm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=jn(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield $l.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield mC(this,{idToken:e}),r=yield Rs._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(zt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Bl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=YF()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(zt(this.app))return Promise.reject(Bn(this));let n=e?De(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return zt(this.app)?Promise.reject(Bn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return zt(this.app)?Promise.reject(Bn(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(jn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield uV(this),n=new gm(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ln("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield sV(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&jn(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=yield $l.create(this,[jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&WF(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function li(t){return De(t)}var Hl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Pb(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Yl={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dV(t){Yl=t}function SC(t){return Yl.loadJS(t)}function hV(){return Yl.recaptchaEnterpriseScript}function fV(){return Yl.gapiScript}function AC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var pV="recaptcha-enterprise",gV="NO_RECAPTCHA",ym=class{constructor(e){this.type=pV,this.auth=li(e)}verify(e="verify",n=!1){return _(this,null,function*(){function r(s){return _(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>_(this,null,function*(){eV(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new dm(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;Qb(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(gV)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Qb(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=hV();u.length!==0&&(u+=a),SC(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function Xb(t,e,n,r=!1){return _(this,null,function*(){let i=new ym(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function vm(t,e,n,r){return _(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield Xb(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>_(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield Xb(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function Om(t,e){let n=ni(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(ei(s,e??{}))return i;hn(i,"already-initialized")}return n.initialize({options:e})}function mV(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(jn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function km(t,e,n){let r=li(t);q(r._canInitEmulator,r,"emulator-config-failed"),q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=RC(e),{host:o,port:a}=yV(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||vV()}function RC(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yV(t){let e=RC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:eC(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:eC(o)}}}function eC(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function vV(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Sa=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Un("not implemented")}_getIdTokenResponse(e){return Un("not implemented")}_linkToIdToken(e,n){return Un("not implemented")}_getReauthenticationResolver(e){return Un("not implemented")}};function _V(t,e){return _(this,null,function*(){return Hn(t,"POST","/v1/accounts:signUp",e)})}function IV(t,e){return _(this,null,function*(){return Na(t,"POST","/v1/accounts:signInWithPassword",$n(t,e))})}function wV(t,e){return _(this,null,function*(){return Hn(t,"POST","/v1/accounts:sendOobCode",$n(t,e))})}function EV(t,e){return _(this,null,function*(){return wV(t,e)})}function TV(t,e){return _(this,null,function*(){return Na(t,"POST","/v1/accounts:signInWithEmailLink",$n(t,e))})}function DV(t,e){return _(this,null,function*(){return Na(t,"POST","/v1/accounts:signInWithEmailLink",$n(t,e))})}var Aa=class t extends Sa{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vm(e,n,"signInWithPassword",IV);case"emailLink":return TV(e,{email:this._email,oobCode:this._password});default:hn(e,"internal-error")}})}_linkToIdToken(e,n){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vm(e,r,"signUpPassword",_V);case"emailLink":return DV(e,{idToken:n,email:this._email,oobCode:this._password});default:hn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function am(t,e){return _(this,null,function*(){return Na(t,"POST","/v1/accounts:signInWithIdp",$n(t,e))})}function bV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CV(t){let e=bs(Cs(t)).link,n=e?bs(Cs(e)).deep_link_id:null,r=bs(Cs(t)).deep_link_id;return(r?bs(Cs(r)).link:null)||r||n||e||t}var ql=class t{constructor(e){var n,r,i,s,o,a;let u=bs(Cs(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=bV((i=u.mode)!==null&&i!==void 0?i:null);q(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=CV(e);try{return new t(n)}catch{return null}}};var NC=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Aa._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=ql.parseLink(r);return q(i,"argument-error"),Aa._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),zl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var _m=class extends zl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function SV(t,e){return _(this,null,function*(){return Na(t,"POST","/v1/accounts:signUp",$n(t,e))})}var Ns=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let s=yield Rs._fromIdTokenResponse(e,r,i),o=tC(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=tC(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function tC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Im=class t extends ft{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function MC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Im._fromErrorAndOperation(t,s,e,r):s})}function AV(t,e,n=!1){return _(this,null,function*(){let r=yield ba(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Ns._forOperation(t,"link",r)})}function RV(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(zt(r.app))return Promise.reject(Bn(r));let i="reauthenticate";try{let s=yield ba(t,MC(r,i,e,t),n);q(s.idToken,r,"internal-error");let o=Mm(s.idToken);q(o,r,"internal-error");let{sub:a}=o;return q(t.uid===a,r,"user-mismatch"),Ns._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&hn(r,"user-mismatch"),s}})}function xC(t,e,n=!1){return _(this,null,function*(){if(zt(t.app))return Promise.reject(Bn(t));let r="signIn",i=yield MC(t,r,e),s=yield Ns._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Lm(t,e){return _(this,null,function*(){return xC(li(t),e)})}function NV(t,e,n){var r;q(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),q(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(q(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(q(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}function PC(t){return _(this,null,function*(){let e=li(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Fm(t,e,n){return _(this,null,function*(){if(zt(t.app))return Promise.reject(Bn(t));let r=li(t),o=yield vm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SV).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&PC(t),u}),a=yield Ns._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function Vm(t,e,n){return zt(t.app)?Promise.reject(Bn(t)):Lm(De(t),NC.credential(e,n)).catch(r=>_(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&PC(t),r}))}function Um(t,e){return _(this,null,function*(){let n=De(t),i={requestType:"VERIFY_EMAIL",idToken:yield t.getIdToken()};e&&NV(n.auth,i,e);let{email:s}=yield EV(n.auth,i);s!==t.email&&(yield t.reload())})}function jm(t,e,n,r){return De(t).onIdTokenChanged(e,n,r)}function Bm(t,e,n){return De(t).beforeAuthStateChanged(e,n)}function $m(t){return De(t).signOut()}var Gl="__sak";var Wl=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gl,"1"),this.storage.removeItem(Gl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var MV=1e3,xV=10,PV=(()=>{class t extends Wl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bC(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);cV()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,xV):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},MV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield Xn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield Xn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield Xn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),OC=PV;var OV=(()=>{class t extends Wl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Hm=OV;function kV(t){return Promise.all(t.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var LV=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,o)})),l=yield kV(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function kC(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var wm=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=kC("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function dn(){return window}function FV(t){dn().location.href=t}function LC(){return typeof dn().WorkerGlobalScope<"u"&&typeof dn().importScripts=="function"}function VV(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function UV(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function jV(){return LC()?self:null}var FC="firebaseLocalStorageDb",BV=1,Kl="firebaseLocalStorage",VC="fbase_key",ui=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Zl(t,e){return t.transaction([Kl],e?"readwrite":"readonly").objectStore(Kl)}function $V(){let t=indexedDB.deleteDatabase(FC);return new ui(t).toPromise()}function Em(){let t=indexedDB.open(FC,BV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Kl,{keyPath:VC})}catch(i){n(i)}}),t.addEventListener("success",()=>_(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Kl)?e(r):(r.close(),yield $V(),e(yield Em()))}))})}function nC(t,e,n){return _(this,null,function*(){let r=Zl(t,!0).put({[VC]:e,value:n});return new ui(r).toPromise()})}function HV(t,e){return _(this,null,function*(){let n=Zl(t,!1).get(e),r=yield new ui(n).toPromise();return r===void 0?null:r.value})}function rC(t,e){let n=Zl(t,!0).delete(e);return new ui(n).toPromise()}var qV=800,zV=3,GV=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield Em(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>zV)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return LC()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=LV._getInstance(jV()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield VV(),!this.activeServiceWorker)return;this.sender=new wm(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||UV()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Em();return yield nC(n,Gl,"1"),yield rC(n,Gl),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>nC(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>HV(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>rC(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(s=>{let o=Zl(s,!1).getAll();return new ui(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),qV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),UC=GV;var $3=AC("rcb"),H3=new ci(3e4,6e4);function WV(t,e){return e?jn(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Ra=class extends Sa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return am(e,this._buildIdpRequest())}_linkToIdToken(e,n){return am(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return am(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function KV(t){return xC(t.auth,new Ra(t),t.bypassAuthState)}function QV(t){let{auth:e,user:n}=t;return q(n,e,"internal-error"),RV(n,new Ra(t),t.bypassAuthState)}function YV(t){return _(this,null,function*(){let{auth:e,user:n}=t;return q(n,e,"internal-error"),AV(n,new Ra(t),t.bypassAuthState)})}var Tm=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KV;case"linkViaPopup":case"linkViaRedirect":return YV;case"reauthViaPopup":case"reauthViaRedirect":return QV;default:hn(this.auth,"internal-error")}}resolve(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var q3=new ci(2e3,1e4);var ZV="pendingRedirect",Fl=new Map,Dm=class t extends Tm{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=Fl.get(this.auth._key());if(!e){try{let r=(yield JV(this.resolver,this.auth))?yield Xn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fl.set(this.auth._key(),e)}return this.bypassAuthState||Fl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Xn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Xn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function JV(t,e){return _(this,null,function*(){let n=tU(e),r=eU(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function XV(t,e){Fl.set(t._key(),e)}function eU(t){return jn(t._redirectPersistence)}function tU(t){return Ll(ZV,t.config.apiKey,t.name)}function nU(t,e,n=!1){return _(this,null,function*(){if(zt(t.app))return Promise.reject(Bn(t));let r=li(t),i=WV(r,e),o=yield new Dm(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var rU=10*60*1e3,bm=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!jC(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ai(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rU&&this.cachedEventUids.clear(),this.cachedEventUids.has(iC(e))}saveEventToCache(e){this.cachedEventUids.add(iC(e)),this.lastProcessedEventTime=Date.now()}};function iC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function iU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jC(t);default:return!1}}function sU(n){return _(this,arguments,function*(t,e={}){return Hn(t,"GET","/v1/projects",e)})}var oU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aU=/^https?/;function cU(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield sU(t);for(let n of e)try{if(uU(n))return}catch{}hn(t,"unauthorized-domain")})}function uU(t){let e=um(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!aU.test(n))return!1;if(oU.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var lU=new ci(3e4,6e4);function sC(){let t=dn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dU(t){return new Promise((e,n)=>{var r,i,s;function o(){sC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sC(),n(ai(t,"network-request-failed"))},timeout:lU.get()})}if(!((i=(r=dn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=dn().gapi)===null||s===void 0)&&s.load)o();else{let a=AC("iframefcb");return dn()[a]=()=>{gapi.load?o():n(ai(t,"network-request-failed"))},SC(`${fV()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Vl=null,e})}var Vl=null;function hU(t){return Vl=Vl||dU(t),Vl}var fU=new ci(5e3,15e3),pU="__/auth/iframe",gU="emulator/auth/iframe",mU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vU(t){let e=t.config;q(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Rm(e,gU):`https://${t.config.authDomain}/${pU}`,r={apiKey:e.apiKey,appName:t.name,v:ln},i=yU.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_a(r).slice(1)}`}function _U(t){return _(this,null,function*(){let e=yield hU(t),n=dn().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:vU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mU,dontclear:!0},r=>new Promise((i,s)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=ai(t,"network-request-failed"),a=dn().setTimeout(()=>{s(o)},fU.get());function u(){dn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var IU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wU=500,EU=600,TU="_blank",DU="http://localhost",Ql=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function bU(t,e,n,r=wU,i=EU){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},IU),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ze().toLowerCase();n&&(a=IC(l)?TU:n),vC(l)&&(e=e||DU,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[v,C])=>`${m}${v}=${C},`,"");if(aV(l)&&a!=="_self")return CU(e||"",a),new Ql(null);let p=window.open(e||"",a,h);q(p,t,"popup-blocked");try{p.focus()}catch{}return new Ql(p)}function CU(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var SU="__/auth/handler",AU="emulator/auth/handler",RU=encodeURIComponent("fac");function oC(t,e,n,r,i,s){return _(this,null,function*(){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ln,eventId:i};if(e instanceof zl){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",xb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof _m){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${RU}=${encodeURIComponent(u)}`:"";return`${NU(t)}?${_a(a).slice(1)}${l}`})}function NU({config:t}){return t.emulator?Rm(t,AU):`https://${t.authDomain}/${SU}`}var cm="webStorageSupport",Cm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hm,this._completeRedirectFn=nU,this._overrideRedirectResult=XV}_openPopup(e,n,r,i){return _(this,null,function*(){var s;Er((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield oC(e,n,r,um(),i);return bU(e,o,kC())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let s=yield oC(e,n,r,um(),i);return FV(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Er(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield _U(e),r=new bm(e);return n.register("authEvent",i=>(q(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cm,{type:cm},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[cm];o!==void 0&&n(!!o),hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=cU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bC()||_C()||Pm()}},BC=Cm;var aC="@firebase/auth",cC="1.7.9";var Sm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function MU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xU(t){un(new vt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CC(t)},l=new mm(r,i,s,u);return mV(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),un(new vt("auth-internal",e=>{let n=li(e.getProvider("auth").getImmediate());return(r=>new Sm(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ce(aC,cC,MU(t)),Ce(aC,cC,"esm2017")}var PU=5*60,OU=Bg("authIdTokenMaxAge")||PU,uC=null,kU=t=>e=>_(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>OU)return;let i=n?.token;uC!==i&&(uC=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function qm(t=_r()){let e=ni(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Om(t,{popupRedirectResolver:BC,persistence:[UC,OC,Hm]}),r=Bg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=kU(s.toString());Bm(n,o,()=>o(n.currentUser)),jm(n,a=>o(a))}}let i=Ug("auth");return i&&km(n,`http://${i}`),n}function LU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}dV({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=ai("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",LU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xU("Browser");var $C="auth",di=class{constructor(e){return e}},Ma=class{constructor(){return As($C)}};var zm=new z("angularfire2.auth-instances");function bj(t,e){let n=Ea($C,t,e);return n&&new di(n)}function Cj(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new di(r)}}var Sj={provide:Ma,deps:[[new tt,zm]]},Aj={provide:di,useFactory:bj,deps:[[new tt,zm],Vn]};function S8(t,...e){return Ce("angularfire",Ir.full,"auth"),rn([Aj,Sj,{provide:zm,useFactory:Cj(t),multi:!0,deps:[me,et,si,oi,[new tt,ii],...e]}])}var HC=Pe(Fm,!0);var A8=Pe(qm,!0);var qC=Pe(Um,!0);var zC=Pe(Vm,!0);var GC=Pe($m,!0);var WC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},KC={};var Tr,Gm;(function(){var t;function e(E,y){function I(){}I.prototype=y.prototype,E.D=y.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(T,D,S){for(var w=Array(arguments.length-2),wn=2;wn<arguments.length;wn++)w[wn-2]=arguments[wn];return y.prototype[D].apply(T,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,y,I){I||(I=0);var T=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)T[D]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(D=0;16>D;++D)T[D]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=E.g[0],I=E.g[1],D=E.g[2];var S=E.g[3],w=y+(S^I&(D^S))+T[0]+3614090360&4294967295;y=I+(w<<7&4294967295|w>>>25),w=S+(D^y&(I^D))+T[1]+3905402710&4294967295,S=y+(w<<12&4294967295|w>>>20),w=D+(I^S&(y^I))+T[2]+606105819&4294967295,D=S+(w<<17&4294967295|w>>>15),w=I+(y^D&(S^y))+T[3]+3250441966&4294967295,I=D+(w<<22&4294967295|w>>>10),w=y+(S^I&(D^S))+T[4]+4118548399&4294967295,y=I+(w<<7&4294967295|w>>>25),w=S+(D^y&(I^D))+T[5]+1200080426&4294967295,S=y+(w<<12&4294967295|w>>>20),w=D+(I^S&(y^I))+T[6]+2821735955&4294967295,D=S+(w<<17&4294967295|w>>>15),w=I+(y^D&(S^y))+T[7]+4249261313&4294967295,I=D+(w<<22&4294967295|w>>>10),w=y+(S^I&(D^S))+T[8]+1770035416&4294967295,y=I+(w<<7&4294967295|w>>>25),w=S+(D^y&(I^D))+T[9]+2336552879&4294967295,S=y+(w<<12&4294967295|w>>>20),w=D+(I^S&(y^I))+T[10]+4294925233&4294967295,D=S+(w<<17&4294967295|w>>>15),w=I+(y^D&(S^y))+T[11]+2304563134&4294967295,I=D+(w<<22&4294967295|w>>>10),w=y+(S^I&(D^S))+T[12]+1804603682&4294967295,y=I+(w<<7&4294967295|w>>>25),w=S+(D^y&(I^D))+T[13]+4254626195&4294967295,S=y+(w<<12&4294967295|w>>>20),w=D+(I^S&(y^I))+T[14]+2792965006&4294967295,D=S+(w<<17&4294967295|w>>>15),w=I+(y^D&(S^y))+T[15]+1236535329&4294967295,I=D+(w<<22&4294967295|w>>>10),w=y+(D^S&(I^D))+T[1]+4129170786&4294967295,y=I+(w<<5&4294967295|w>>>27),w=S+(I^D&(y^I))+T[6]+3225465664&4294967295,S=y+(w<<9&4294967295|w>>>23),w=D+(y^I&(S^y))+T[11]+643717713&4294967295,D=S+(w<<14&4294967295|w>>>18),w=I+(S^y&(D^S))+T[0]+3921069994&4294967295,I=D+(w<<20&4294967295|w>>>12),w=y+(D^S&(I^D))+T[5]+3593408605&4294967295,y=I+(w<<5&4294967295|w>>>27),w=S+(I^D&(y^I))+T[10]+38016083&4294967295,S=y+(w<<9&4294967295|w>>>23),w=D+(y^I&(S^y))+T[15]+3634488961&4294967295,D=S+(w<<14&4294967295|w>>>18),w=I+(S^y&(D^S))+T[4]+3889429448&4294967295,I=D+(w<<20&4294967295|w>>>12),w=y+(D^S&(I^D))+T[9]+568446438&4294967295,y=I+(w<<5&4294967295|w>>>27),w=S+(I^D&(y^I))+T[14]+3275163606&4294967295,S=y+(w<<9&4294967295|w>>>23),w=D+(y^I&(S^y))+T[3]+4107603335&4294967295,D=S+(w<<14&4294967295|w>>>18),w=I+(S^y&(D^S))+T[8]+1163531501&4294967295,I=D+(w<<20&4294967295|w>>>12),w=y+(D^S&(I^D))+T[13]+2850285829&4294967295,y=I+(w<<5&4294967295|w>>>27),w=S+(I^D&(y^I))+T[2]+4243563512&4294967295,S=y+(w<<9&4294967295|w>>>23),w=D+(y^I&(S^y))+T[7]+1735328473&4294967295,D=S+(w<<14&4294967295|w>>>18),w=I+(S^y&(D^S))+T[12]+2368359562&4294967295,I=D+(w<<20&4294967295|w>>>12),w=y+(I^D^S)+T[5]+4294588738&4294967295,y=I+(w<<4&4294967295|w>>>28),w=S+(y^I^D)+T[8]+2272392833&4294967295,S=y+(w<<11&4294967295|w>>>21),w=D+(S^y^I)+T[11]+1839030562&4294967295,D=S+(w<<16&4294967295|w>>>16),w=I+(D^S^y)+T[14]+4259657740&4294967295,I=D+(w<<23&4294967295|w>>>9),w=y+(I^D^S)+T[1]+2763975236&4294967295,y=I+(w<<4&4294967295|w>>>28),w=S+(y^I^D)+T[4]+1272893353&4294967295,S=y+(w<<11&4294967295|w>>>21),w=D+(S^y^I)+T[7]+4139469664&4294967295,D=S+(w<<16&4294967295|w>>>16),w=I+(D^S^y)+T[10]+3200236656&4294967295,I=D+(w<<23&4294967295|w>>>9),w=y+(I^D^S)+T[13]+681279174&4294967295,y=I+(w<<4&4294967295|w>>>28),w=S+(y^I^D)+T[0]+3936430074&4294967295,S=y+(w<<11&4294967295|w>>>21),w=D+(S^y^I)+T[3]+3572445317&4294967295,D=S+(w<<16&4294967295|w>>>16),w=I+(D^S^y)+T[6]+76029189&4294967295,I=D+(w<<23&4294967295|w>>>9),w=y+(I^D^S)+T[9]+3654602809&4294967295,y=I+(w<<4&4294967295|w>>>28),w=S+(y^I^D)+T[12]+3873151461&4294967295,S=y+(w<<11&4294967295|w>>>21),w=D+(S^y^I)+T[15]+530742520&4294967295,D=S+(w<<16&4294967295|w>>>16),w=I+(D^S^y)+T[2]+3299628645&4294967295,I=D+(w<<23&4294967295|w>>>9),w=y+(D^(I|~S))+T[0]+4096336452&4294967295,y=I+(w<<6&4294967295|w>>>26),w=S+(I^(y|~D))+T[7]+1126891415&4294967295,S=y+(w<<10&4294967295|w>>>22),w=D+(y^(S|~I))+T[14]+2878612391&4294967295,D=S+(w<<15&4294967295|w>>>17),w=I+(S^(D|~y))+T[5]+4237533241&4294967295,I=D+(w<<21&4294967295|w>>>11),w=y+(D^(I|~S))+T[12]+1700485571&4294967295,y=I+(w<<6&4294967295|w>>>26),w=S+(I^(y|~D))+T[3]+2399980690&4294967295,S=y+(w<<10&4294967295|w>>>22),w=D+(y^(S|~I))+T[10]+4293915773&4294967295,D=S+(w<<15&4294967295|w>>>17),w=I+(S^(D|~y))+T[1]+2240044497&4294967295,I=D+(w<<21&4294967295|w>>>11),w=y+(D^(I|~S))+T[8]+1873313359&4294967295,y=I+(w<<6&4294967295|w>>>26),w=S+(I^(y|~D))+T[15]+4264355552&4294967295,S=y+(w<<10&4294967295|w>>>22),w=D+(y^(S|~I))+T[6]+2734768916&4294967295,D=S+(w<<15&4294967295|w>>>17),w=I+(S^(D|~y))+T[13]+1309151649&4294967295,I=D+(w<<21&4294967295|w>>>11),w=y+(D^(I|~S))+T[4]+4149444226&4294967295,y=I+(w<<6&4294967295|w>>>26),w=S+(I^(y|~D))+T[11]+3174756917&4294967295,S=y+(w<<10&4294967295|w>>>22),w=D+(y^(S|~I))+T[2]+718787259&4294967295,D=S+(w<<15&4294967295|w>>>17),w=I+(S^(D|~y))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+S&4294967295}r.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var I=y-this.blockSize,T=this.B,D=this.h,S=0;S<y;){if(D==0)for(;S<=I;)i(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<y;)if(T[D++]=E.charCodeAt(S++),D==this.blockSize){i(this,T),D=0;break}}else for(;S<y;)if(T[D++]=E[S++],D==this.blockSize){i(this,T),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var I=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=I&255,I/=256;for(this.u(E),E=Array(16),y=I=0;4>y;++y)for(var T=0;32>T;T+=8)E[I++]=this.g[y]>>>T&255;return E};function s(E,y){var I=a;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=y(E)}function o(E,y){this.h=y;for(var I=[],T=!0,D=E.length-1;0<=D;D--){var S=E[D]|0;T&&S==y||(I[D]=S,T=!1)}this.g=I}var a={};function u(E){return-128<=E&&128>E?s(E,function(y){return new o([y|0],0>y?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return R(l(-E));for(var y=[],I=1,T=0;E>=I;T++)y[T]=E/I|0,I*=4294967296;return new o(y,0)}function h(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return R(h(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(y,8)),T=p,D=0;D<E.length;D+=8){var S=Math.min(8,E.length-D),w=parseInt(E.substring(D,D+S),y);8>S?(S=l(Math.pow(y,S)),T=T.j(S).add(l(w))):(T=T.j(I),T=T.add(l(w)))}return T}var p=u(0),m=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var E=0,y=1,I=0;I<this.g.length;I++){var T=this.i(I);E+=(0<=T?T:4294967296+T)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C(this))return"0";if(N(this))return"-"+R(this).toString(E);for(var y=l(Math.pow(E,6)),I=this,T="";;){var D=$(I,y).g;I=k(I,D.j(y));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=D,C(I))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function C(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function N(E){return E.h==-1}t.l=function(E){return E=k(this,E),N(E)?-1:C(E)?0:1};function R(E){for(var y=E.g.length,I=[],T=0;T<y;T++)I[T]=~E.g[T];return new o(I,~E.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],T=0,D=0;D<=y;D++){var S=T+(this.i(D)&65535)+(E.i(D)&65535),w=(S>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);T=w>>>16,S&=65535,w&=65535,I[D]=w<<16|S}return new o(I,I[I.length-1]&-2147483648?-1:0)};function k(E,y){return E.add(R(y))}t.j=function(E){if(C(this)||C(E))return p;if(N(this))return N(E)?R(this).j(R(E)):R(R(this).j(E));if(N(E))return R(this.j(R(E)));if(0>this.l(v)&&0>E.l(v))return l(this.m()*E.m());for(var y=this.g.length+E.g.length,I=[],T=0;T<2*y;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var D=0;D<E.g.length;D++){var S=this.i(T)>>>16,w=this.i(T)&65535,wn=E.i(D)>>>16,io=E.i(D)&65535;I[2*T+2*D]+=w*io,j(I,2*T+2*D),I[2*T+2*D+1]+=S*io,j(I,2*T+2*D+1),I[2*T+2*D+1]+=w*wn,j(I,2*T+2*D+1),I[2*T+2*D+2]+=S*wn,j(I,2*T+2*D+2)}for(T=0;T<y;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=y;T<2*y;T++)I[T]=0;return new o(I,0)};function j(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function V(E,y){this.g=E,this.h=y}function $(E,y){if(C(y))throw Error("division by zero");if(C(E))return new V(p,p);if(N(E))return y=$(R(E),y),new V(R(y.g),R(y.h));if(N(y))return y=$(E,R(y)),new V(R(y.g),y.h);if(30<E.g.length){if(N(E)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var I=m,T=y;0>=T.l(E);)I=Ie(I),T=Ie(T);var D=K(I,1),S=K(T,1);for(T=K(T,2),I=K(I,2);!C(T);){var w=S.add(T);0>=w.l(E)&&(D=D.add(I),S=w),T=K(T,1),I=K(I,1)}return y=k(E,D.j(y)),new V(D,y)}for(D=p;0<=E.l(y);){for(I=Math.max(1,Math.floor(E.m()/y.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=l(I),w=S.j(y);N(w)||0<w.l(E);)I-=T,S=l(I),w=S.j(y);C(S)&&(S=m),D=D.add(S),E=k(E,w)}return new V(D,E)}t.A=function(E){return $(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)&E.i(T);return new o(I,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)|E.i(T);return new o(I,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)^E.i(T);return new o(I,this.h^E.h)};function Ie(E){for(var y=E.g.length+1,I=[],T=0;T<y;T++)I[T]=E.i(T)<<1|E.i(T-1)>>>31;return new o(I,E.h)}function K(E,y){var I=y>>5;y%=32;for(var T=E.g.length-I,D=[],S=0;S<T;S++)D[S]=0<y?E.i(S+I)>>>y|E.i(S+I+1)<<32-y:E.i(S+I);return new o(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Gm=KC.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Tr=KC.Integer=o}).apply(typeof WC<"u"?WC:typeof self<"u"?self:typeof window<"u"?window:{});var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qn={};var Wm,Nj,Ms,Km,xa,Xl,Qm,Ym,Zm;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jl=="object"&&Jl];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,A){for(var P=Array(arguments.length-2),we=2;we<arguments.length;we++)P[we-2]=arguments[we];return d.prototype[b].apply(g,P)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,A=g.length||0;c.length=b+A;for(let P=0;P<A;P++)c[b+P]=g[P]}else c.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function j(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function $(c){return $[" "](c),c}$[" "]=function(){};var Ie=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function K(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function E(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function w(){var c=Yd;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class wn{constructor(){this.h=this.g=null}add(d,f){let g=io.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var io=new k(()=>new _0,c=>c.reset());class _0{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let so,oo=!1,Yd=new wn,u_=()=>{let c=a.Promise.resolve(void 0);so=()=>{c.then(I0)}};var I0=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){S(f)}var d=io;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}oo=!1};function Qn(){this.s=this.s,this.C=this.C}Qn.prototype.s=!1,Qn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Qn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ye(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Ye.prototype.h=function(){this.defaultPrevented=!0};var w0=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function ao(c,d){if(Ye.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ie){e:{try{$(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:E0[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ao.aa.h.call(this)}}C(ao,Ye);var E0={2:"touch",3:"pen",4:"mouse"};ao.prototype.h=function(){ao.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var co="closure_listenable_"+(1e6*Math.random()|0),T0=0;function D0(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++T0,this.da=this.fa=!1}function ic(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function sc(c){this.src=c,this.g={},this.h=0}sc.prototype.add=function(c,d,f,g,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var P=Jd(c,d,g,b);return-1<P?(d=c[P],f||(d.fa=!1)):(d=new D0(d,this.src,A,!!g,b),d.fa=f,c.push(d)),d};function Zd(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(ic(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Jd(c,d,f,g){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var Xd="closure_lm_"+(1e6*Math.random()|0),eh={};function l_(c,d,f,g,b){if(g&&g.once)return h_(c,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)l_(c,d[A],f,g,b);return null}return f=ih(f),c&&c[co]?c.K(d,f,l(g)?!!g.capture:!!g,b):d_(c,d,f,!1,g,b)}function d_(c,d,f,g,b,A){if(!d)throw Error("Invalid event type");var P=l(b)?!!b.capture:!!b,we=nh(c);if(we||(c[Xd]=we=new sc(c)),f=we.add(d,f,g,P,A),f.proxy)return f;if(g=b0(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)w0||(b=P),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(p_(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function b0(){function c(f){return d.call(c.src,c.listener,f)}let d=C0;return c}function h_(c,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)h_(c,d[A],f,g,b);return null}return f=ih(f),c&&c[co]?c.L(d,f,l(g)?!!g.capture:!!g,b):d_(c,d,f,!0,g,b)}function f_(c,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)f_(c,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=ih(f),c&&c[co]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Jd(A,f,g,b),-1<f&&(ic(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=nh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Jd(d,f,g,b)),(f=-1<c?d[c]:null)&&th(f))}function th(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[co])Zd(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(p_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=nh(d))?(Zd(f,c),f.h==0&&(f.src=null,d[Xd]=null)):ic(c)}}}function p_(c){return c in eh?eh[c]:eh[c]="on"+c}function C0(c,d){if(c.da)c=!0;else{d=new ao(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&th(c),c=f.call(g,d)}return c}function nh(c){return c=c[Xd],c instanceof sc?c:null}var rh="__closure_events_fn_"+(1e9*Math.random()>>>0);function ih(c){return typeof c=="function"?c:(c[rh]||(c[rh]=function(d){return c.handleEvent(d)}),c[rh])}function Ze(){Qn.call(this),this.i=new sc(this),this.M=this,this.F=null}C(Ze,Qn),Ze.prototype[co]=!0,Ze.prototype.removeEventListener=function(c,d,f,g){f_(this,c,d,f,g)};function st(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Ye(d,c);else if(d instanceof Ye)d.target=d.target||c;else{var b=d;d=new Ye(g,c),T(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var P=d.g=f[A];b=oc(P,g,!0,d)&&b}if(P=d.g=c,b=oc(P,g,!0,d)&&b,b=oc(P,g,!1,d)&&b,f)for(A=0;A<f.length;A++)P=d.g=f[A],b=oc(P,g,!1,d)&&b}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)ic(f[g]);delete c.g[d],c.h--}}this.F=null},Ze.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Ze.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function oc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var P=d[A];if(P&&!P.da&&P.capture==f){var we=P.listener,We=P.ha||P.src;P.fa&&Zd(c.i,P),b=we.call(We,g)!==!1&&b}}return b&&!g.defaultPrevented}function g_(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function m_(c){c.g=g_(()=>{c.g=null,c.i&&(c.i=!1,m_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class S0 extends Qn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:m_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function uo(c){Qn.call(this),this.h=c,this.g={}}C(uo,Qn);var y_=[];function v_(c){K(c.g,function(d,f){this.g.hasOwnProperty(f)&&th(d)},c),c.g={}}uo.prototype.N=function(){uo.aa.N.call(this),v_(this)},uo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sh=a.JSON.stringify,A0=a.JSON.parse,R0=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function oh(){}oh.prototype.h=null;function __(c){return c.h||(c.h=c.i())}function I_(){}var lo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ah(){Ye.call(this,"d")}C(ah,Ye);function ch(){Ye.call(this,"c")}C(ch,Ye);var Rr={},w_=null;function ac(){return w_=w_||new Ze}Rr.La="serverreachability";function E_(c){Ye.call(this,Rr.La,c)}C(E_,Ye);function ho(c){let d=ac();st(d,new E_(d))}Rr.STAT_EVENT="statevent";function T_(c,d){Ye.call(this,Rr.STAT_EVENT,c),this.stat=d}C(T_,Ye);function ot(c){let d=ac();st(d,new T_(d,c))}Rr.Ma="timingevent";function D_(c,d){Ye.call(this,Rr.Ma,c),this.size=d}C(D_,Ye);function fo(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function po(){this.g=!0}po.prototype.xa=function(){this.g=!1};function N0(c,d,f,g,b,A){c.info(function(){if(c.g)if(A)for(var P="",we=A.split("&"),We=0;We<we.length;We++){var fe=we[We].split("=");if(1<fe.length){var Je=fe[0];fe=fe[1];var Xe=Je.split("_");P=2<=Xe.length&&Xe[1]=="type"?P+(Je+"="+fe+"&"):P+(Je+"=redacted&")}}else P=null;else P=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+P})}function M0(c,d,f,g,b,A,P){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+P})}function bi(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+P0(c,f)+(g?" "+g:"")})}function x0(c,d){c.info(function(){return"TIMEOUT: "+d})}po.prototype.info=function(){};function P0(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var P=1;P<b.length;P++)b[P]=""}}}}return sh(f)}catch{return d}}var cc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},b_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},uh;function uc(){}C(uc,oh),uc.prototype.g=function(){return new XMLHttpRequest},uc.prototype.i=function(){return{}},uh=new uc;function Yn(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new uo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new C_}function C_(){this.i=null,this.g="",this.h=!1}var S_={},lh={};function dh(c,d,f){c.L=1,c.v=fc(En(d)),c.m=f,c.P=!0,A_(c,null)}function A_(c,d){c.F=Date.now(),lc(c),c.A=En(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),$_(f.i,"t",g),c.C=0,f=c.j.J,c.h=new C_,c.g=oI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new S0(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(y_[0]=b.toString()),b=y_);for(var A=0;A<b.length;A++){var P=l_(f,b[A],g||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ho(),N0(c.i,c.u,c.A,c.l,c.R,c.m)}Yn.prototype.ca=function(c){c=c.target;let d=this.M;d&&Tn(c)==3?d.j():this.Y(c)},Yn.prototype.Y=function(c){try{if(c==this.g)e:{let Xe=Tn(this.g);var d=this.g.Ba();let Ai=this.g.Z();if(!(3>Xe)&&(Xe!=3||this.g&&(this.h.h||this.g.oa()||Q_(this.g)))){this.J||Xe!=4||d==7||(d==8||0>=Ai?ho(3):ho(2)),hh(this);var f=this.g.Z();this.X=f;t:if(R_(this)){var g=Q_(this.g);c="";var b=g.length,A=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Nr(this),go(this);var P="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=f==200,M0(this.i,this.u,this.A,this.l,this.R,Xe,f),this.o){if(this.T&&!this.K){t:{if(this.g){var we,We=this.g;if((we=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(we)){var fe=we;break t}}fe=null}if(f=fe)bi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fh(this,f);else{this.o=!1,this.s=3,ot(12),Nr(this),go(this);break e}}if(this.P){f=!0;let Ft;for(;!this.J&&this.C<P.length;)if(Ft=O0(this,P),Ft==lh){Xe==4&&(this.s=4,ot(14),f=!1),bi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==S_){this.s=4,ot(15),bi(this.i,this.l,P,"[Invalid Chunk]"),f=!1;break}else bi(this.i,this.l,Ft,null),fh(this,Ft);if(R_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||P.length!=0||this.h.h||(this.s=1,ot(16),f=!1),this.o=this.o&&f,!f)bi(this.i,this.l,P,"[Invalid Chunked Response]"),Nr(this),go(this);else if(0<P.length&&!this.W){this.W=!0;var Je=this.j;Je.g==this&&Je.ba&&!Je.M&&(Je.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),_h(Je),Je.M=!0,ot(11))}}else bi(this.i,this.l,P,null),fh(this,P);Xe==4&&Nr(this),this.o&&!this.J&&(Xe==4?nI(this.j,this):(this.o=!1,lc(this)))}else Z0(this.g),f==400&&0<P.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),Nr(this),go(this)}}}catch{}finally{}};function R_(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function O0(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?lh:(f=Number(d.substring(f,g)),isNaN(f)?S_:(g+=1,g+f>d.length?lh:(d=d.slice(g,g+f),c.C=g+f,d)))}Yn.prototype.cancel=function(){this.J=!0,Nr(this)};function lc(c){c.S=Date.now()+c.I,N_(c,c.I)}function N_(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=fo(m(c.ba,c),d)}function hh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Yn.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(x0(this.i,this.A),this.L!=2&&(ho(),ot(17)),Nr(this),this.s=2,go(this)):N_(this,this.S-c)};function go(c){c.j.G==0||c.J||nI(c.j,c)}function Nr(c){hh(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,v_(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function fh(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||ph(f.h,c))){if(!c.K&&ph(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)vc(f),mc(f);else break e;vh(f),ot(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=fo(m(f.Za,f),6e3));if(1>=P_(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else xr(f,11)}else if((c.K||f.g==c)&&vc(f),!j(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let fe=b[d];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];let Je=fe[3];Je!=null&&(f.la=Je,f.j.info("VER="+f.la));let Xe=fe[4];Xe!=null&&(f.Aa=Xe,f.j.info("SVER="+f.Aa));let Ai=fe[5];Ai!=null&&typeof Ai=="number"&&0<Ai&&(g=1.5*Ai,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Ft=c.g;if(Ft){let Ic=Ft.g?Ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ic){var A=g.h;A.g||Ic.indexOf("spdy")==-1&&Ic.indexOf("quic")==-1&&Ic.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(gh(A,A.h),A.h=null))}if(g.D){let Ih=Ft.g?Ft.g.getResponseHeader("X-HTTP-Session-Id"):null;Ih&&(g.ya=Ih,Te(g.I,g.D,Ih))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var P=c;if(g.qa=sI(g,g.J?g.ia:null,g.W),P.K){O_(g.h,P);var we=P,We=g.L;We&&(we.I=We),we.B&&(hh(we),lc(we)),g.g=P}else eI(g);0<f.i.length&&yc(f)}else fe[0]!="stop"&&fe[0]!="close"||xr(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?xr(f,7):yh(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}ho(4)}catch{}}var k0=class{constructor(c,d){this.g=c,this.map=d}};function M_(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function x_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function P_(c){return c.h?1:c.g?c.g.size:0}function ph(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function gh(c,d){c.g?c.g.add(d):c.h=d}function O_(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}M_.prototype.cancel=function(){if(this.i=k_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function k_(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function L0(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function F0(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function L_(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=F0(c),g=L0(c),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],c)}var F_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function V0(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var A=c[f].substring(0,g);b=c[f].substring(g+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Mr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Mr){this.h=c.h,dc(this,c.j),this.o=c.o,this.g=c.g,hc(this,c.s),this.l=c.l;var d=c.i,f=new vo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),V_(this,f),this.m=c.m}else c&&(d=String(c).match(F_))?(this.h=!1,dc(this,d[1]||"",!0),this.o=mo(d[2]||""),this.g=mo(d[3]||"",!0),hc(this,d[4]),this.l=mo(d[5]||"",!0),V_(this,d[6]||"",!0),this.m=mo(d[7]||"")):(this.h=!1,this.i=new vo(null,this.h))}Mr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(yo(d,U_,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(yo(d,U_,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(yo(f,f.charAt(0)=="/"?B0:j0,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",yo(f,H0)),c.join("")};function En(c){return new Mr(c)}function dc(c,d,f){c.j=f?mo(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function hc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function V_(c,d,f){d instanceof vo?(c.i=d,q0(c.i,c.h)):(f||(d=yo(d,$0)),c.i=new vo(d,c.h))}function Te(c,d,f){c.i.set(d,f)}function fc(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function mo(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function yo(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,U0),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function U0(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var U_=/[#\/\?@]/g,j0=/[#\?:]/g,B0=/[#\?]/g,$0=/[#\?@]/g,H0=/#/g;function vo(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Zn(c){c.g||(c.g=new Map,c.h=0,c.i&&V0(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=vo.prototype,t.add=function(c,d){Zn(this),this.i=null,c=Ci(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function j_(c,d){Zn(c),d=Ci(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function B_(c,d){return Zn(c),d=Ci(c,d),c.g.has(d)}t.forEach=function(c,d){Zn(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},t.na=function(){Zn(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},t.V=function(c){Zn(this);let d=[];if(typeof c=="string")B_(this,c)&&(d=d.concat(this.g.get(Ci(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Zn(this),this.i=null,c=Ci(this,c),B_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function $_(c,d,f){j_(c,d),0<f.length&&(c.i=null,c.g.set(Ci(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),P=this.V(g);for(g=0;g<P.length;g++){var b=A;P[g]!==""&&(b+="="+encodeURIComponent(String(P[g]))),c.push(b)}}return this.i=c.join("&")};function Ci(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function q0(c,d){d&&!c.j&&(Zn(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(j_(this,g),$_(this,b,f))},c)),c.j=d}function z0(c,d){let f=new po;if(a.Image){let g=new Image;g.onload=v(Jn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(Jn,f,"TestLoadImage: error",!1,d,g),g.onabort=v(Jn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(Jn,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function G0(c,d){let f=new po,g=new AbortController,b=setTimeout(()=>{g.abort(),Jn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?Jn(f,"TestPingServer: ok",!0,d):Jn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Jn(f,"TestPingServer: error",!1,d)})}function Jn(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function W0(){this.g=new R0}function K0(c,d,f){let g=f||"";try{L_(c,function(b,A){let P=b;l(b)&&(P=sh(b)),d.push(g+A+"="+encodeURIComponent(P))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function _o(c){this.l=c.Ub||null,this.j=c.eb||!1}C(_o,oh),_o.prototype.g=function(){return new pc(this.l,this.j)},_o.prototype.i=function(c){return function(){return c}}({});function pc(c,d){Ze.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(pc,Ze),t=pc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,wo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Io(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,wo(this)),this.g&&(this.readyState=3,wo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;H_(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function H_(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Io(this):wo(this),this.readyState==3&&H_(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Io(this))},t.Qa=function(c){this.g&&(this.response=c,Io(this))},t.ga=function(){this.g&&Io(this)};function Io(c){c.readyState=4,c.l=null,c.j=null,c.v=null,wo(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function wo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(pc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function q_(c){let d="";return K(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function mh(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=q_(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Te(c,d,f))}function Se(c){Ze.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Se,Ze);var Q0=/^https?$/i,Y0=["POST","PUT"];t=Se.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():uh.g(),this.v=this.o?__(this.o):__(uh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){z_(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Y0,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of f)this.g.setRequestHeader(A,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{K_(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){z_(this,A)}};function z_(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,G_(c),gc(c)}function G_(c){c.A||(c.A=!0,st(c,"complete"),st(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,st(this,"complete"),st(this,"abort"),gc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gc(this,!0)),Se.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?W_(this):this.bb())},t.bb=function(){W_(this)};function W_(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Tn(c)!=4||c.Z()!=2)){if(c.u&&Tn(c)==4)g_(c.Ea,0,c);else if(st(c,"readystatechange"),Tn(c)==4){c.h=!1;try{let P=c.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=P===0){var b=String(c.D).match(F_)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!Q0.test(b?b.toLowerCase():"")}f=g}if(f)st(c,"complete"),st(c,"success");else{c.m=6;try{var A=2<Tn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",G_(c)}}finally{gc(c)}}}}function gc(c,d){if(c.g){K_(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||st(c,"ready");try{f.onreadystatechange=g}catch{}}}function K_(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Tn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),A0(d)}};function Q_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Z0(c){let d={};c=(c.g&&2<=Tn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(j(c[g]))continue;var f=D(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}E(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Eo(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Y_(c){this.Aa=0,this.i=[],this.j=new po,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Eo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Eo("baseRetryDelayMs",5e3,c),this.cb=Eo("retryDelaySeedMs",1e4,c),this.Wa=Eo("forwardChannelMaxRetries",2,c),this.wa=Eo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new M_(c&&c.concurrentRequestLimit),this.Da=new W0,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Y_.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){ot(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=sI(this,null,this.W),yc(this)};function yh(c){if(Z_(c),c.G==3){var d=c.U++,f=En(c.I);if(Te(f,"SID",c.K),Te(f,"RID",d),Te(f,"TYPE","terminate"),To(c,f),d=new Yn(c,c.j,d),d.L=2,d.v=fc(En(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=oI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),lc(d)}iI(c)}function mc(c){c.g&&(_h(c),c.g.cancel(),c.g=null)}function Z_(c){mc(c),c.u&&(a.clearTimeout(c.u),c.u=null),vc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function yc(c){if(!x_(c.h)&&!c.s){c.s=!0;var d=c.Ga;so||u_(),oo||(so(),oo=!0),Yd.add(d,c),c.B=0}}function J0(c,d){return P_(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=fo(m(c.Ga,c,d),rI(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Yn(this,this.j,c),A=this.o;if(this.S&&(A?(A=y(A),T(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=X_(this,b,d),f=En(this.I),Te(f,"RID",c),Te(f,"CVER",22),this.D&&Te(f,"X-HTTP-Session-Id",this.D),To(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(q_(A)))+"&"+d:this.m&&mh(f,this.m,A)),gh(this.h,b),this.Ua&&Te(f,"TYPE","init"),this.P?(Te(f,"$req",d),Te(f,"SID","null"),b.T=!0,dh(b,f,null)):dh(b,f,d),this.G=2}}else this.G==3&&(c?J_(this,c):this.i.length==0||x_(this.h)||J_(this))};function J_(c,d){var f;d?f=d.l:f=c.U++;let g=En(c.I);Te(g,"SID",c.K),Te(g,"RID",f),Te(g,"AID",c.T),To(c,g),c.m&&c.o&&mh(g,c.m,c.o),f=new Yn(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=X_(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),gh(c.h,f),dh(f,g,d)}function To(c,d){c.H&&K(c.H,function(f,g){Te(d,g,f)}),c.l&&L_({},function(f,g){Te(d,g,f)})}function X_(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let P=["count="+f];A==-1?0<f?(A=b[0].g,P.push("ofs="+A)):A=0:P.push("ofs="+A);let we=!0;for(let We=0;We<f;We++){let fe=b[We].g,Je=b[We].map;if(fe-=A,0>fe)A=Math.max(0,b[We].g-100),we=!1;else try{K0(Je,P,"req"+fe+"_")}catch{g&&g(Je)}}if(we){g=P.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function eI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;so||u_(),oo||(so(),oo=!0),Yd.add(d,c),c.v=0}}function vh(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=fo(m(c.Fa,c),rI(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,tI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=fo(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),mc(this),tI(this))};function _h(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function tI(c){c.g=new Yn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=En(c.qa);Te(d,"RID","rpc"),Te(d,"SID",c.K),Te(d,"AID",c.T),Te(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(d,"TO",c.ja),Te(d,"TYPE","xmlhttp"),To(c,d),c.m&&c.o&&mh(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=fc(En(d)),f.m=null,f.P=!0,A_(f,c)}t.Za=function(){this.C!=null&&(this.C=null,mc(this),vh(this),ot(19))};function vc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function nI(c,d){var f=null;if(c.g==d){vc(c),_h(c),c.g=null;var g=2}else if(ph(c.h,d))f=d.D,O_(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=ac(),st(g,new D_(g,f)),yc(c)}else eI(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&J0(c,d)||g==2&&vh(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:xr(c,5);break;case 4:xr(c,10);break;case 3:xr(c,6);break;default:xr(c,2)}}}function rI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function xr(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let b=!g;g=new Mr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||dc(g,"https"),fc(g),b?z0(g.toString(),f):G0(g.toString(),f)}else ot(2);c.G=0,c.l&&c.l.sa(d),iI(c),Z_(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function iI(c){if(c.G=0,c.ka=[],c.l){let d=k_(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function sI(c,d,f){var g=f instanceof Mr?En(f):new Mr(f);if(g.g!="")d&&(g.g=d+"."+g.g),hc(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new Mr(null);g&&dc(A,g),d&&(A.g=d),b&&hc(A,b),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Te(g,f,d),Te(g,"VER",c.la),To(c,g),g}function oI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Se(new _o({eb:f})):new Se(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function aI(){}t=aI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function _c(){}_c.prototype.g=function(c,d){return new It(c,d)};function It(c,d){Ze.call(this),this.g=new Y_(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!j(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!j(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Si(this)}C(It,Ze),It.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){yh(this.g)},It.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=sh(c),c=f);d.i.push(new k0(d.Ya++,c)),d.G==3&&yc(d)},It.prototype.N=function(){this.g.l=null,delete this.j,yh(this.g),delete this.g,It.aa.N.call(this)};function cI(c){ah.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(cI,ah);function uI(){ch.call(this),this.status=1}C(uI,ch);function Si(c){this.g=c}C(Si,aI),Si.prototype.ua=function(){st(this.g,"a")},Si.prototype.ta=function(c){st(this.g,new cI(c))},Si.prototype.sa=function(c){st(this.g,new uI)},Si.prototype.ra=function(){st(this.g,"b")},_c.prototype.createWebChannel=_c.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,Zm=qn.createWebChannelTransport=function(){return new _c},Ym=qn.getStatEventTarget=function(){return ac()},Qm=qn.Event=Rr,Xl=qn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},cc.NO_ERROR=0,cc.TIMEOUT=8,cc.HTTP_ERROR=6,xa=qn.ErrorCode=cc,b_.COMPLETE="complete",Km=qn.EventType=b_,I_.EventType=lo,lo.OPEN="a",lo.CLOSE="b",lo.ERROR="c",lo.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,Ms=qn.WebChannel=I_,Nj=qn.FetchXmlHttpFactory=_o,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,Wm=qn.XhrIo=Se}).apply(typeof Jl<"u"?Jl:typeof self<"u"?self:typeof window<"u"?window:{});var QC="@firebase/firestore";var Ge=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ge.UNAUTHENTICATED=new Ge(null),Ge.GOOGLE_CREDENTIALS=new Ge("google-credentials-uid"),Ge.FIRST_PARTY=new Ge("first-party-uid"),Ge.MOCK_USER=new Ge("mock-user");var Js="10.14.0";var gi=new yr("@firebase/firestore");function Pa(){return gi.logLevel}function F(t,...e){if(gi.logLevel<=ae.DEBUG){let n=e.map(Mv);gi.debug(`Firestore (${Js}): ${t}`,...n)}}function zn(t,...e){if(gi.logLevel<=ae.ERROR){let n=e.map(Mv);gi.error(`Firestore (${Js}): ${t}`,...n)}}function Vs(t,...e){if(gi.logLevel<=ae.WARN){let n=e.map(Mv);gi.warn(`Firestore (${Js}): ${t}`,...n)}}function Mv(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function Q(t="Unexpected state"){let e=`FIRESTORE (${Js}) INTERNAL ASSERTION FAILED: `+t;throw zn(e),new Error(e)}function _e(t,e){t||Q()}function J(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends ft{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Gt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var id=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ny=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ge.UNAUTHENTICATED))}shutdown(){}},ry=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},iy=class{constructor(e){this.t=e,this.currentUser=Ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new Gt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Gt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Gt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new id(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new Ge(e)}},sy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ge.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},oy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new sy(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ge.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ay=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},cy=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_e(this.o===void 0);let r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new ay(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Mj(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var sd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Mj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ge(t,e){return t<e?-1:t>e?1:0}function Us(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ke=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new U(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new U(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new U(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ke(0,0))}static max(){return new t(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var od=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Re=class t extends od{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new U(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},xj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,At=class t extends od{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return xj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new U(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new U(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new U(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new U(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var G=class t{constructor(e){this.path=e}static fromPath(e){return new t(Re.fromString(e))}static fromName(e){return new t(Re.fromString(e).popFirst(5))}static empty(){return new t(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Re(e.slice()))}};var uy=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};uy.UNKNOWN_ID=-1;function Pj(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new mi(i,G.empty(),e)}function Oj(t){return new mi(t.readTime,t.key,-1)}var mi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ee.min(),G.empty(),-1)}static max(){return new t(ee.max(),G.empty(),-1)}};function kj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}var Lj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ly=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ya(t){return _(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==Lj)throw t;F("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function Fj(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Za(t){return t.name==="IndexedDbTransactionError"}var CS=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Vd(t){return t==null}function Ua(t){return t===0&&1/t==-1/0}function Vj(t){return typeof t=="number"&&Number.isInteger(t)&&!Ua(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Uj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],B8=[...Uj,"documentOverlays"],jj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Bj=jj,$j=[...Bj,"indexConfiguration","indexState","indexEntries"];var $8=[...$j,"globals"];function YC(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ei(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ne=class t{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ks(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ks(this.root,e,this.comparator,!1)}getReverseIterator(){return new ks(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ks(this.root,e,this.comparator,!0)}},ks=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},pn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();let e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}};pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,i,s){return this}insert(e,n,r){return new pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var rt=class t{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ad(this.data.getIterator())}getIteratorFrom(e){return new ad(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},ad=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Lt=class t{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new t([])}unionWith(e){let n=new rt(At.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Us(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var cd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var it=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new cd("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};it.EMPTY_BYTE_STRING=new it("");var Hj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gn(t){if(_e(!!t),typeof t=="string"){let e=0,n=Hj.exec(t);if(_e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cr(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}function xv(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Pv(t){let e=t.mapValue.fields.__previous_value__;return xv(e)?Pv(e):e}function ja(t){let e=Gn(t.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}var dy=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},ud=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var ed={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function yi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xv(t)?4:RS(t)?9007199254740991:AS(t)?10:11:Q()}function yn(t,e){if(t===e)return!0;let n=yi(t);if(n!==yi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ja(t).isEqual(ja(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Gn(i.timestampValue),a=Gn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Cr(i.bytesValue).isEqual(Cr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return be(i.geoPointValue.latitude)===be(s.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return be(i.integerValue)===be(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=be(i.doubleValue),a=be(s.doubleValue);return o===a?Ua(o)===Ua(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Us(t.arrayValue.values||[],e.arrayValue.values||[],yn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(YC(o)!==YC(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!yn(o[u],a[u])))return!1;return!0}(t,e);default:return Q()}}function Ba(t,e){return(t.values||[]).find(n=>yn(n,e))!==void 0}function js(t,e){if(t===e)return 0;let n=yi(t),r=yi(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=be(s.integerValue||s.doubleValue),u=be(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return ZC(t.timestampValue,e.timestampValue);case 4:return ZC(ja(t),ja(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Cr(s),u=Cr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ge(a[l],u[l]);if(h!==0)return h}return ge(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ge(be(s.latitude),be(o.latitude));return a!==0?a:ge(be(s.longitude),be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return JC(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},m=o.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,C=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=ge(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:JC(v,C)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ed.mapValue&&o===ed.mapValue)return 0;if(s===ed.mapValue)return 1;if(o===ed.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ge(u[p],h[p]);if(m!==0)return m;let v=js(a[u[p]],l[h[p]]);if(v!==0)return v}return ge(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Q()}}function ZC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);let n=Gn(t),r=Gn(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function JC(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=js(n[i],r[i]);if(s)return s}return ge(n.length,r.length)}function Bs(t){return hy(t)}function hy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Gn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=hy(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${hy(n.fields[o])}`;return i+"}"}(t.mapValue):Q()}function fy(t){return!!t&&"integerValue"in t}function Ov(t){return!!t&&"arrayValue"in t}function XC(t){return!!t&&"nullValue"in t}function eS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nd(t){return!!t&&"mapValue"in t}function AS(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ka(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ei(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ka(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ka(t.arrayValue.values[n]);return e}return Object.assign({},t)}function RS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var St=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ka(n)}setAll(e){let n=At.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ka(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());nd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];nd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ei(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(ka(this.value))}};function NS(t){let e=[];return Ei(t.fields,(n,r)=>{let i=new At([n]);if(nd(r)){let s=NS(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Lt(e)}var Wt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ee.min(),ee.min(),ee.min(),St.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ee.min(),ee.min(),St.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ee.min(),ee.min(),St.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var $s=class{constructor(e,n){this.position=e,this.inclusive=n}};function tS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=js(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function nS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yn(t.position[n],e.position[n]))return!1;return!0}var Hs=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function qj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var ld=class{},He=class t extends ld{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gy(e,n,r):n==="array-contains"?new vy(e,r):n==="in"?new _y(e,r):n==="not-in"?new Iy(e,r):n==="array-contains-any"?new wy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new my(e,r):new yy(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(js(n,this.value)):n!==null&&yi(this.value)===yi(n)&&this.matchesComparison(js(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},vn=class t extends ld{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return MS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function MS(t){return t.op==="and"}function xS(t){return zj(t)&&MS(t)}function zj(t){for(let e of t.filters)if(e instanceof vn)return!1;return!0}function py(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+Bs(t.value);if(xS(t))return t.filters.map(e=>py(e)).join(",");{let e=t.filters.map(n=>py(n)).join(",");return`${t.op}(${e})`}}function PS(t,e){return t instanceof He?function(r,i){return i instanceof He&&r.op===i.op&&r.field.isEqual(i.field)&&yn(r.value,i.value)}(t,e):t instanceof vn?function(r,i){return i instanceof vn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&PS(o,i.filters[a]),!0):!1}(t,e):void Q()}function OS(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${Bs(n.value)}`}(t):t instanceof vn?function(n){return n.op.toString()+" {"+n.getFilters().map(OS).join(" ,")+"}"}(t):"Filter"}var gy=class extends He{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){let n=G.comparator(e.key,this.key);return this.matchesComparison(n)}},my=class extends He{constructor(e,n){super(e,"in",n),this.keys=kS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},yy=class extends He{constructor(e,n){super(e,"not-in",n),this.keys=kS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function kS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}var vy=class extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Ov(n)&&Ba(n.arrayValue,this.value)}},_y=class extends He{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ba(this.value.arrayValue,n)}},Iy=class extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ba(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Ba(this.value.arrayValue,n)}},wy=class extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Ov(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ba(this.value.arrayValue,r))}};var Ey=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function rS(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Ey(t,e,n,r,i,s,o)}function kv(t){let e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>py(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Vd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Bs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Bs(r)).join(",")),e.ue=n}return e.ue}function Lv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!qj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!PS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nS(t.startAt,e.startAt)&&nS(t.endAt,e.endAt)}function Ty(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var qs=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Gj(t,e,n,r,i,s,o,a){return new qs(t,e,n,r,i,s,o,a)}function Fv(t){return new qs(t)}function iS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Wj(t){return t.collectionGroup!==null}function La(t){let e=J(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new rt(At.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Hs(s,r))}),n.has(At.keyField().canonicalString())||e.ce.push(new Hs(At.keyField(),r))}return e.ce}function gn(t){let e=J(t);return e.le||(e.le=Kj(e,La(t))),e.le}function Kj(t,e){if(t.limitType==="F")return rS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Hs(i.field,s)});let n=t.endAt?new $s(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new $s(t.startAt.position,t.startAt.inclusive):null;return rS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Dy(t,e,n){return new qs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ud(t,e){return Lv(gn(t),gn(e))&&t.limitType===e.limitType}function LS(t){return`${kv(gn(t))}|lt:${t.limitType}`}function xs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>OS(i)).join(", ")}]`),Vd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Bs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Bs(i)).join(",")),`Target(${r})`}(gn(t))}; limitType=${t.limitType})`}function jd(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of La(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=tS(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,La(r),i)||r.endAt&&!function(o,a,u){let l=tS(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,La(r),i))}(t,e)}function Qj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function FS(t){return(e,n)=>{let r=!1;for(let i of La(t)){let s=Yj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Yj(t,e,n){let r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?js(u,l):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}var Sr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ei(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return SS(this.inner)}size(){return this.innerSize}};var Zj=new Ne(G.comparator);function Wn(){return Zj}var VS=new Ne(G.comparator);function Oa(...t){let e=VS;for(let n of t)e=e.insert(n.key,n);return e}function US(t){let e=VS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hi(){return Fa()}function jS(){return Fa()}function Fa(){return new Sr(t=>t.toString(),(t,e)=>t.isEqual(e))}var Jj=new Ne(G.comparator),Xj=new rt(G.comparator);function ce(...t){let e=Xj;for(let n of t)e=e.add(n);return e}var e2=new rt(ge);function t2(){return e2}function Vv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ua(e)?"-0":e}}function BS(t){return{integerValue:""+t}}function n2(t,e){return Vj(e)?BS(e):Vv(t,e)}var zs=class{constructor(){this._=void 0}};function r2(t,e,n){return t instanceof Gs?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&xv(s)&&(s=Pv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof vi?HS(t,e):t instanceof _i?qS(t,e):function(i,s){let o=$S(i,s),a=sS(o)+sS(i.Pe);return fy(o)&&fy(i.Pe)?BS(a):Vv(i.serializer,a)}(t,e)}function i2(t,e,n){return t instanceof vi?HS(t,e):t instanceof _i?qS(t,e):n}function $S(t,e){return t instanceof Ws?function(r){return fy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Gs=class extends zs{},vi=class extends zs{constructor(e){super(),this.elements=e}};function HS(t,e){let n=zS(e);for(let r of t.elements)n.some(i=>yn(i,r))||n.push(r);return{arrayValue:{values:n}}}var _i=class extends zs{constructor(e){super(),this.elements=e}};function qS(t,e){let n=zS(e);for(let r of t.elements)n=n.filter(i=>!yn(i,r));return{arrayValue:{values:n}}}var Ws=class extends zs{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function sS(t){return be(t.integerValue||t.doubleValue)}function zS(t){return Ov(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function s2(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof vi&&i instanceof vi||r instanceof _i&&i instanceof _i?Us(r.elements,i.elements,yn):r instanceof Ws&&i instanceof Ws?yn(r.Pe,i.Pe):r instanceof Gs&&i instanceof Gs}(t.transform,e.transform)}var by=class{constructor(e,n){this.version=e,this.transformResults=n}},Dr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function rd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ks=class{};function GS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new dd(t.key,Dr.none()):new Ii(t.key,t.data,Dr.none());{let n=t.data,r=St.empty(),i=new rt(At.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new _n(t.key,r,new Lt(i.toArray()),Dr.none())}}function o2(t,e,n){t instanceof Ii?function(i,s,o){let a=i.value.clone(),u=aS(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof _n?function(i,s,o){if(!rd(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=aS(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(WS(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Va(t,e,n,r){return t instanceof Ii?function(s,o,a,u){if(!rd(s.precondition,o))return a;let l=s.value.clone(),h=cS(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof _n?function(s,o,a,u){if(!rd(s.precondition,o))return a;let l=cS(s.fieldTransforms,u,o),h=o.data;return h.setAll(WS(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return rd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function a2(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=$S(r.transform,i||null);s!=null&&(n===null&&(n=St.empty()),n.set(r.field,s))}return n||null}function oS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Us(r,i,(s,o)=>s2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ii=class extends Ks{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},_n=class extends Ks{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function WS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function aS(t,e,n){let r=new Map;_e(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,i2(o,a,n[i]))}return r}function cS(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,r2(s,o,e))}return r}var dd=class extends Ks{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Cy=class extends Ks{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Sy=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&o2(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Va(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Va(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=jS();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=GS(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Us(this.mutations,e.mutations,(n,r)=>oS(n,r))&&Us(this.baseMutations,e.baseMutations,(n,r)=>oS(n,r))}},Ay=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){_e(e.mutations.length===r.length);let i=function(){return Jj}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Ry=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ny=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ve,de;function c2(t){switch(t){default:return Q();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function KS(t){if(t===void 0)return zn("GRPC error has no .code"),M.UNKNOWN;switch(t){case Ve.OK:return M.OK;case Ve.CANCELLED:return M.CANCELLED;case Ve.UNKNOWN:return M.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return M.INTERNAL;case Ve.UNAVAILABLE:return M.UNAVAILABLE;case Ve.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ve.NOT_FOUND:return M.NOT_FOUND;case Ve.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ve.ABORTED:return M.ABORTED;case Ve.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ve.DATA_LOSS:return M.DATA_LOSS;default:return Q()}}(de=Ve||(Ve={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var uS=null;function u2(){return new TextEncoder}var l2=new Tr([4294967295,4294967295],0);function lS(t){let e=u2().encode(t),n=new Gm;return n.update(e),new Uint8Array(n.digest())}function dS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Tr([n,r],0),new Tr([i,s],0)]}var My=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fi(`Invalid padding: ${n}`);if(r<0)throw new fi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Tr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Tr.fromNumber(r)));return i.compare(l2)===1&&(i=new Tr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=lS(e),[r,i]=dS(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=lS(e),[r,i]=dS(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},fi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var hd=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,$a.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ee.min(),i,new Ne(ge),Wn(),ce())}},$a=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ce(),ce(),ce())}};var Ls=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},fd=class{constructor(e,n){this.targetId=e,this.me=n}},pd=class{constructor(e,n,r=it.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},gd=class{constructor(){this.fe=0,this.ge=fS(),this.pe=it.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new $a(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=fS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},xy=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Wn(),this.qe=hS(),this.Qe=new Ne(ge)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Ty(s))if(r===0){let o=new G(s.path);this.Ue(n,o,Wt.newNoDocument(o,ee.min()))}else _e(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}uS?.et(function(h,p,m,v,C){var N,R,k,j,V,$;let Ie={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},K=p.unchangedNames;return K&&(Ie.bloomFilter={applied:C===0,hashCount:(N=K?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(j=(k=(R=K?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&j!==void 0?j:0,padding:($=(V=K?.bits)===null||V===void 0?void 0:V.padding)!==null&&$!==void 0?$:0,mightContain:E=>{var y;return(y=v?.mightContain(E))!==null&&y!==void 0&&y}}),Ie}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Cr(r).toUint8Array()}catch(u){if(u instanceof cd)return Vs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new My(o,i,s)}catch(u){return Vs(u instanceof fi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Ty(a.target)){let u=new G(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Wt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ce();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new hd(e,n,this.Qe,this.ke,r);return this.ke=Wn(),this.qe=hS(),this.Qe=new Ne(ge),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new gd,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new rt(ge),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new gd),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function hS(){return new Ne(G.comparator)}function fS(){return new Ne(G.comparator)}var d2={asc:"ASCENDING",desc:"DESCENDING"},h2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f2={and:"AND",or:"OR"},Py=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Oy(t,e){return t.useProto3Json||Vd(e)?e:{value:e}}function md(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function p2(t,e){return md(t,e.toTimestamp())}function mn(t){return _e(!!t),ee.fromTimestamp(function(n){let r=Gn(n);return new Ke(r.seconds,r.nanos)}(t))}function Uv(t,e){return ky(t,e).canonicalString()}function ky(t,e){let n=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function YS(t){let e=Re.fromString(t);return _e(tA(e)),e}function Ly(t,e){return Uv(t.databaseId,e.path)}function Jm(t,e){let n=YS(e);if(n.get(1)!==t.databaseId.projectId)throw new U(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new U(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(JS(n))}function ZS(t,e){return Uv(t.databaseId,e)}function g2(t){let e=YS(t);return e.length===4?Re.emptyPath():JS(e)}function Fy(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JS(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function pS(t,e,n){return{name:Ly(t,e),fields:n.value.mapValue.fields}}function m2(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(_e(h===void 0||typeof h=="string"),it.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array),it.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?M.UNKNOWN:KS(l.code);return new U(h,l.message||"")}(o);n=new pd(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Jm(t,r.document.name),s=mn(r.document.updateTime),o=r.document.createTime?mn(r.document.createTime):ee.min(),a=new St({mapValue:{fields:r.document.fields}}),u=Wt.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Ls(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Jm(t,r.document),s=r.readTime?mn(r.readTime):ee.min(),o=Wt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ls([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Jm(t,r.document),s=r.removedTargetIds||[];n=new Ls([],s,i,null)}else{if(!("filter"in e))return Q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Ny(i,s),a=r.targetId;n=new fd(a,o)}}return n}function y2(t,e){let n;if(e instanceof Ii)n={update:pS(t,e.key,e.value)};else if(e instanceof dd)n={delete:Ly(t,e.key)};else if(e instanceof _n)n={update:pS(t,e.key,e.data),updateMask:C2(e.fieldMask)};else{if(!(e instanceof Cy))return Q();n={verify:Ly(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Gs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _i)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ws)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:p2(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q()}(t,e.precondition)),n}function v2(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?mn(i.updateTime):mn(s);return o.isEqual(ee.min())&&(o=mn(s)),new by(o,i.transformResults||[])}(n,e))):[]}function _2(t,e){return{documents:[ZS(t,e.path)]}}function I2(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ZS(t,i);let s=function(l){if(l.length!==0)return eA(vn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Ps(m.field),direction:T2(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Oy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function w2(t){let e=g2(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_e(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=XS(p);return m instanceof vn&&xS(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(C){return new Hs(Os(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Vd(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,v=p.values||[];return new $s(v,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new $s(v,m)}(n.endAt)),Gj(e,i,o,s,a,"F",u,l)}function E2(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Os(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Os(n.unaryFilter.field);return He.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Os(n.unaryFilter.field);return He.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Os(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return He.create(Os(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vn.create(n.compositeFilter.filters.map(r=>XS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function T2(t){return d2[t]}function D2(t){return h2[t]}function b2(t){return f2[t]}function Ps(t){return{fieldPath:t.canonicalString()}}function Os(t){return At.fromServerFormat(t.fieldPath)}function eA(t){return t instanceof He?function(n){if(n.op==="=="){if(eS(n.value))return{unaryFilter:{field:Ps(n.field),op:"IS_NAN"}};if(XC(n.value))return{unaryFilter:{field:Ps(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(eS(n.value))return{unaryFilter:{field:Ps(n.field),op:"IS_NOT_NAN"}};if(XC(n.value))return{unaryFilter:{field:Ps(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ps(n.field),op:D2(n.op),value:n.value}}}(t):t instanceof vn?function(n){let r=n.getFilters().map(i=>eA(i));return r.length===1?r[0]:{compositeFilter:{op:b2(n.op),filters:r}}}(t):Q()}function C2(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ha=class t{constructor(e,n,r,i,s=ee.min(),o=ee.min(),a=it.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Vy=class{constructor(e){this.ct=e}};function S2(t){let e=w2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dy(e,e.limit,"L"):e}var yd=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(be(e.integerValue));else if("doubleValue"in e){let r=be(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Ua(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Gn(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Cr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?RS(e)?this.dt(n,Number.MAX_SAFE_INTEGER):AS(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Q()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(be(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),G.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};yd.vt=new yd;var Uy=class{constructor(){this.un=new jy}addToCollectionParentIndex(e,n){return this.un.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(mi.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(mi.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},jy=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new rt(Re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rt(Re.comparator)).toArray()}};var q8=new Uint8Array(0);var fn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(41943040,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);var qa=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var By=class{constructor(){this.changes=new Sr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var $y=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Hy=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Va(r.mutation,i,Lt.empty(),Ke.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){let i=hi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Oa();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=hi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Wn(),o=Fa(),a=function(){return Fa()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof _n)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Va(h.mutation,l,h.mutation.getFieldMask(),Ke.now())):o.set(l.key,Lt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new $y(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Fa(),i=new Ne((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Lt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ce()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=jS();h.forEach(m=>{if(!s.has(m)){let v=GS(n.get(m),r.get(m));v!==null&&p.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Wj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):x.resolve(hi()),a=-1,u=s;return o.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,ce())).next(h=>({batchId:a,changes:US(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=Oa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Oa();return this.indexManager.getCollectionParents(e,s).next(a=>x.forEach(a,u=>{let l=function(p,m){return new qs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Wt.newInvalidDocument(h)))});let a=Oa();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&Va(h.mutation,l,Lt.empty(),Ke.now()),jd(n,l)&&(a=a.insert(u,l))}),a})}};var qy=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return x.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:mn(i.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:S2(i.bundledQuery),readTime:mn(i.readTime)}}(n)),x.resolve()}};var zy=class{constructor(){this.overlays=new Ne(G.comparator),this.Ir=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=hi();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=hi(),s=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ne((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=hi(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=hi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ry(n,r));let s=this.Ir.get(n);s===void 0&&(s=ce(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var Gy=class{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var za=class{constructor(){this.Tr=new rt(Ue.Er),this.dr=new rt(Ue.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Ue(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ue(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new G(new Re([])),r=new Ue(n,e),i=new Ue(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new G(new Re([])),r=new Ue(n,e),i=new Ue(n,e+1),s=ce();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Ue(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ue=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||G.comparator(e.key,n.key)}};var Wy=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new rt(Ue.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Sy(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Ue(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ue(n,0),i=new Ue(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rt(ge);return n.forEach(i=>{let s=new Ue(i,0),o=new Ue(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;G.isDocumentKey(s)||(s=s.child(""));let o=new Ue(new G(s),0),a=new rt(ge);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),x.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(n.mutations,i=>{let s=new Ue(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Ue(n,0),i=this.br.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Ky=class{constructor(e){this.Mr=e,this.docs=function(){return new Ne(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let r=Wn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Wt.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Wn(),o=n.path,a=new G(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||kj(Oj(h),r)<=0||(i.has(h.key)||jd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Q()}Or(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Qy(this)}getSize(e){return x.resolve(this.size)}},Qy=class extends By{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Yy=class{constructor(e){this.persistence=e,this.Nr=new Sr(n=>kv(n),Lv),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new za,this.targetCount=0,this.kr=qa.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),x.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new qa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.Kn(n),x.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Br.containsKey(n))}};var Zy=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new CS(0),this.Kr=!1,this.Kr=!0,this.$r=new Gy,this.referenceDelegate=e(this),this.Ur=new Yy(this),this.indexManager=new Uy,this.remoteDocumentCache=function(i){return new Ky(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Vy(n),this.Gr=new qy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Wy(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new Jy(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Jy=class extends ly{constructor(e){super(),this.currentSequenceNumber=e}},Xy=class t{constructor(e){this.persistence=e,this.Jr=new za,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),x.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=G.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return x.or([()=>x.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var ev=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ce(),i=ce();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var tv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var nv=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Nb()?8:Fj(ze())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new tv;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Pa()<=ae.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",xs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(Pa()<=ae.DEBUG&&F("QueryEngine","Query:",xs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Pa()<=ae.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",xs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gn(n))):x.resolve())}Yi(e,n){if(iS(n))return x.resolve(null);let r=gn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Dy(n,null,"F"),r=gn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ce(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,o,u.readTime)?this.Yi(e,Dy(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return iS(n)||i.isEqual(ee.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?x.resolve(null):(Pa()<=ae.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xs(n)),this.rs(e,o,n,Pj(i,-1)).next(a=>a))})}ts(e,n){let r=new rt(FS(e));return n.forEach((i,s)=>{jd(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Pa()<=ae.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",xs(n)),this.Ji.getDocumentsMatchingQuery(e,n,mi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var rv=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ne(ge),this._s=new Sr(s=>kv(s),Lv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hy(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function A2(t,e,n,r){return new rv(t,e,n,r)}function nA(t,e){return _(this,null,function*(){let n=J(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=ce();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function R2(t,e){let n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),v=x.resolve();return m.forEach(C=>{v=v.next(()=>h.getEntry(u,C)).next(N=>{let R=l.docVersions.get(C);_e(R!==null),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ce();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function rA(t){let e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function N2(t,e){let n=J(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(it.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(N,R,k){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,v,h)&&a.push(n.Ur.updateTargetData(s,v))});let u=Wn(),l=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(M2(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(ee.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function M2(t,e,n){let r=ce(),i=ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Wn();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function x2(t,e){let n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function P2(t,e){let n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ha(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function iv(t,e,n){return _(this,null,function*(){let r=J(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Za(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function gS(t,e,n){let r=J(t),i=ee.min(),s=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=J(u),m=p._s.get(h);return m!==void 0?x.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,gn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ee.min(),n?s:ce())).next(a=>(O2(r,Qj(e),a),{documents:a,Ts:s})))}function O2(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var vd=class{constructor(){this.activeTargetIds=t2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var sv=class{constructor(){this.so=new vd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new vd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ov=class{_o(e){}shutdown(){}};var _d=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var td=null;function Xm(){return td===null?td=function(){return 268435456+Math.round(2147483648*Math.random())}():td++,"0x"+td.toString(16)}var k2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var av=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var nt="WebChannelConnection",cv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=Xm(),u=this.xo(n,r.toUriEncodedString());F("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(F("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Vs("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Js}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=k2[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=Xm();return new Promise((o,a)=>{let u=new Wm;u.setWithCredentials(!0),u.listenOnce(Km.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case xa.NO_ERROR:let h=u.getResponseJson();F(nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case xa.TIMEOUT:F(nt,`RPC '${e}' ${s} timed out`),a(new U(M.DEADLINE_EXCEEDED,"Request time out"));break;case xa.HTTP_ERROR:let p=u.getStatus();if(F(nt,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let C=function(R){let k=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(k)>=0?k:M.UNKNOWN}(v.status);a(new U(C,v.message))}else a(new U(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new U(M.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{F(nt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);F(nt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Xm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Zm(),a=Ym(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");F(nt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,v=!1,C=new av({Io:R=>{v?F(nt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(F(nt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),F(nt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),N=(R,k,j)=>{R.listen(k,V=>{try{j(V)}catch($){setTimeout(()=>{throw $},0)}})};return N(p,Ms.EventType.OPEN,()=>{v||(F(nt,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),N(p,Ms.EventType.CLOSE,()=>{v||(v=!0,F(nt,`RPC '${e}' stream ${i} transport closed`),C.So())}),N(p,Ms.EventType.ERROR,R=>{v||(v=!0,Vs(nt,`RPC '${e}' stream ${i} transport errored:`,R),C.So(new U(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,Ms.EventType.MESSAGE,R=>{var k;if(!v){let j=R.data[0];_e(!!j);let V=j,$=V.error||((k=V[0])===null||k===void 0?void 0:k.error);if($){F(nt,`RPC '${e}' stream ${i} received error:`,$);let Ie=$.status,K=function(I){let T=Ve[I];if(T!==void 0)return KS(T)}(Ie),E=$.message;K===void 0&&(K=M.INTERNAL,E="Unknown error status: "+Ie+" with message "+$.message),v=!0,C.So(new U(K,E)),p.close()}else F(nt,`RPC '${e}' stream ${i} received:`,j),C.bo(j)}}),N(a,Qm.STAT_EVENT,R=>{R.stat===Xl.PROXY?F(nt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Xl.NOPROXY&&F(nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}};function ey(){return typeof document<"u"?document:null}function Bd(t){return new Py(t,!0)}var Id=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var wd=class{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Id(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(zn(n.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new U(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},uv=class extends wd{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=m2(this.serializer,e),r=function(s){if(!("targetChange"in s))return ee.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?mn(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=Fy(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=Ty(u)?{documents:_2(s,u)}:{query:I2(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=QS(s,o.resumeToken);let l=Oy(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=md(s,o.snapshotVersion.toTimestamp());let l=Oy(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=E2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=Fy(this.serializer),n.removeTarget=e,this.a_(n)}},lv=class extends wd{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=v2(e.writeResults,e.commitTime),r=mn(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=Fy(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>y2(this.serializer,r))};this.a_(n)}};var dv=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new U(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,ky(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,ky(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},hv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zn(n),this.D_=!1):F("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var fv=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>_(this,null,function*(){Ti(this)&&(F("RemoteStore","Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=J(u);l.L_.add(4),yield Ja(l),l.q_.set("Unknown"),l.L_.delete(4),yield $d(l)})}(this))}))}),this.q_=new hv(r,i)}};function $d(t){return _(this,null,function*(){if(Ti(t))for(let e of t.B_)yield e(!0)})}function Ja(t){return _(this,null,function*(){for(let e of t.B_)yield e(!1)})}function iA(t,e){let n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Hv(n)?$v(n):Xs(n).r_()&&Bv(n,e))}function jv(t,e){let n=J(t),r=Xs(n);n.N_.delete(e),r.r_()&&sA(n,e),n.N_.size===0&&(r.r_()?r.o_():Ti(n)&&n.q_.set("Unknown"))}function Bv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xs(t).A_(e)}function sA(t,e){t.Q_.xe(e),Xs(t).R_(e)}function $v(t){t.Q_=new xy({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Xs(t).start(),t.q_.v_()}function Hv(t){return Ti(t)&&!Xs(t).n_()&&t.N_.size>0}function Ti(t){return J(t).L_.size===0}function oA(t){t.Q_=void 0}function L2(t){return _(this,null,function*(){t.q_.set("Online")})}function F2(t){return _(this,null,function*(){t.N_.forEach((e,n)=>{Bv(t,e)})})}function V2(t,e){return _(this,null,function*(){oA(t),Hv(t)?(t.q_.M_(e),$v(t)):t.q_.set("Unknown")})}function U2(t,e,n){return _(this,null,function*(){if(t.q_.set("Online"),e instanceof pd&&e.state===2&&e.cause)try{yield function(i,s){return _(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ed(t,r)}else if(e instanceof Ls?t.Q_.Ke(e):e instanceof fd?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{let r=yield rA(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(it.EMPTY_BYTE_STRING,h.snapshotVersion)),sA(s,u);let p=new Ha(h.target,u,l,h.sequenceNumber);Bv(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){F("RemoteStore","Failed to raise snapshot:",r),yield Ed(t,r)}})}function Ed(t,e,n){return _(this,null,function*(){if(!Za(e))throw e;t.L_.add(1),yield Ja(t),t.q_.set("Offline"),n||(n=()=>rA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){F("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield $d(t)}))})}function aA(t,e){return e().catch(n=>Ed(t,n,e))}function Hd(t){return _(this,null,function*(){let e=J(t),n=Ar(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;j2(e);)try{let i=yield x2(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,B2(e,i)}catch(i){yield Ed(e,i)}cA(e)&&uA(e)})}function j2(t){return Ti(t)&&t.O_.length<10}function B2(t,e){t.O_.push(e);let n=Ar(t);n.r_()&&n.V_&&n.m_(e.mutations)}function cA(t){return Ti(t)&&!Ar(t).n_()&&t.O_.length>0}function uA(t){Ar(t).start()}function $2(t){return _(this,null,function*(){Ar(t).p_()})}function H2(t){return _(this,null,function*(){let e=Ar(t);for(let n of t.O_)e.m_(n.mutations)})}function q2(t,e,n){return _(this,null,function*(){let r=t.O_.shift(),i=Ay.from(r,e,n);yield aA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Hd(t)})}function z2(t,e){return _(this,null,function*(){e&&Ar(t).V_&&(yield function(r,i){return _(this,null,function*(){if(function(o){return c2(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();Ar(r).s_(),yield aA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Hd(r)}})}(t,e)),cA(t)&&uA(t)})}function mS(t,e){return _(this,null,function*(){let n=J(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");let r=Ti(n);n.L_.add(3),yield Ja(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield $d(n)})}function G2(t,e){return _(this,null,function*(){let n=J(t);e?(n.L_.delete(2),yield $d(n)):e||(n.L_.add(2),yield Ja(n),n.q_.set("Unknown"))})}function Xs(t){return t.K_||(t.K_=function(n,r,i){let s=J(n);return s.w_(),new uv(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:L2.bind(null,t),Ro:F2.bind(null,t),mo:V2.bind(null,t),d_:U2.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.K_.s_(),Hv(t)?$v(t):t.q_.set("Unknown")):(yield t.K_.stop(),oA(t))}))),t.K_}function Ar(t){return t.U_||(t.U_=function(n,r,i){let s=J(n);return s.w_(),new lv(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$2.bind(null,t),mo:z2.bind(null,t),f_:H2.bind(null,t),g_:q2.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.U_.s_(),yield Hd(t)):(yield t.U_.stop(),t.O_.length>0&&(F("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var pv=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function qv(t,e){if(zn("AsyncQueue",`${e}: ${t}`),Za(t))return new U(M.UNAVAILABLE,`${e}: ${t}`);throw t}var Td=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Oa(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Dd=class{constructor(){this.W_=new Ne(G.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},Qs=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Td.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var gv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},mv=class{constructor(){this.queries=yS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=J(n),s=i.queries;i.queries=yS(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new U(M.ABORTED,"Firestore shutting down"))}};function yS(){return new Sr(t=>LS(t),Ud)}function lA(t,e){return _(this,null,function*(){let n=J(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new gv,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=qv(o,`Initialization of query '${xs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&zv(n)})}function dA(t,e){return _(this,null,function*(){let n=J(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function W2(t,e){let n=J(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&zv(n)}function K2(t,e,n){let r=J(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function zv(t){t.Y_.forEach(e=>{e.next()})}var yv,vS;(vS=yv||(yv={})).ea="default",vS.Cache="cache";var bd=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Qs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Qs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==yv.Cache}};var Cd=class{constructor(e){this.key=e}},Sd=class{constructor(e){this.key=e}},vv=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=FS(e),this.Ra=new Td(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Dd,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=jd(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),N=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),R=!1;m&&v?m.data.isEqual(v.data)?C!==N&&(r.track({type:3,doc:v}),R=!0):this.ga(m,v)||(r.track({type:2,doc:v}),R=!0,(u&&this.Aa(v,u)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),R=!0):m&&!v&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(v?(o=o.add(v),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(v,C){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return N(v)-N(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new Qs(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Dd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Sd(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Cd(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Qs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},_v=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Iv=class{constructor(e){this.key=e,this.va=!1}},wv=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Sr(a=>LS(a),Ud),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne(G.comparator),this.Na=new Map,this.La=new za,this.Ba={},this.ka=new Map,this.qa=qa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Q2(t,e,n=!0){return _(this,null,function*(){let r=yA(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield hA(r,e,n,!0),i})}function Y2(t,e){return _(this,null,function*(){let n=yA(t);yield hA(n,e,!0,!1)})}function hA(t,e,n,r){return _(this,null,function*(){let i=yield P2(t.localStore,gn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield Z2(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&iA(t.remoteStore,i),a})}function Z2(t,e,n,r,i){return _(this,null,function*(){t.Ka=(p,m,v)=>function(N,R,k,j){return _(this,null,function*(){let V=R.view.ma(k);V.ns&&(V=yield gS(N.localStore,R.query,!1).then(({documents:E})=>R.view.ma(E,V)));let $=j&&j.targetChanges.get(R.targetId),Ie=j&&j.targetMismatches.get(R.targetId)!=null,K=R.view.applyChanges(V,N.isPrimaryClient,$,Ie);return IS(N,R.targetId,K.wa),K.snapshot})}(t,p,m,v);let s=yield gS(t.localStore,e,!0),o=new vv(e,s.Ts),a=o.ma(s.documents),u=$a.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);IS(t,n,l.wa);let h=new _v(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function J2(t,e,n){return _(this,null,function*(){let r=J(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Ud(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield iv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&jv(r.remoteStore,i.targetId),Ev(r,i.targetId)}).catch(Ya))):(Ev(r,i.targetId),yield iv(r.localStore,i.targetId,!0))})}function X2(t,e){return _(this,null,function*(){let n=J(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jv(n.remoteStore,r.targetId))})}function eB(t,e,n){return _(this,null,function*(){let r=aB(t);try{let i=yield function(o,a){let u=J(o),l=Ke.now(),h=a.reduce((v,C)=>v.add(C.key),ce()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let C=Wn(),N=ce();return u.cs.getEntries(v,h).next(R=>{C=R,C.forEach((k,j)=>{j.isValidDocument()||(N=N.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,C)).next(R=>{p=R;let k=[];for(let j of a){let V=a2(j,p.get(j.key).overlayedDocument);V!=null&&k.push(new _n(j.key,V,NS(V.value.mapValue),Dr.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,k,a)}).next(R=>{m=R;let k=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(v,R.batchId,k)})}).then(()=>({batchId:m.batchId,changes:US(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Ne(ge)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Xa(r,i.changes),yield Hd(r.remoteStore)}catch(i){let s=qv(i,"Failed to persist write");n.reject(s)}})}function fA(t,e){return _(this,null,function*(){let n=J(t);try{let r=yield N2(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?_e(o.va):i.removedDocuments.size>0&&(_e(o.va),o.va=!1))}),yield Xa(n,r,e)}catch(r){yield Ya(r)}})}function _S(t,e,n){let r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=J(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&zv(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function tB(t,e,n){return _(this,null,function*(){let r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ne(G.comparator);o=o.insert(s,Wt.newNoDocument(s,ee.min()));let a=ce().add(s),u=new hd(ee.min(),new Map,new Ne(ge),o,a);yield fA(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Gv(r)}else yield iv(r.localStore,e,!1).then(()=>Ev(r,e,n)).catch(Ya)})}function nB(t,e){return _(this,null,function*(){let n=J(t),r=e.batch.batchId;try{let i=yield R2(n.localStore,e);gA(n,r,null),pA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Xa(n,i)}catch(i){yield Ya(i)}})}function rB(t,e,n){return _(this,null,function*(){let r=J(t);try{let i=yield function(o,a){let u=J(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(_e(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);gA(r,e,n),pA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Xa(r,i)}catch(i){yield Ya(i)}})}function pA(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function gA(t,e,n){let r=J(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ev(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||mA(t,r)})}function mA(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(jv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Gv(t))}function IS(t,e,n){for(let r of n)r instanceof Cd?(t.La.addReference(r.key,e),iB(t,r)):r instanceof Sd?(F("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||mA(t,r.key)):Q()}function iB(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(F("SyncEngine","New document in limbo: "+n),t.xa.add(r),Gv(t))}function Gv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new G(Re.fromString(e)),r=t.qa.next();t.Na.set(r,new Iv(n)),t.Oa=t.Oa.insert(n,r),iA(t.remoteStore,new Ha(gn(Fv(n.path)),r,"TargetPurposeLimboResolution",CS.oe))}}function Xa(t,e,n){return _(this,null,function*(){let r=J(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=ev.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return _(this,null,function*(){let h=J(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>x.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Za(p))throw p;F("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),C=v.snapshotVersion,N=v.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(m,N)}}})}(r.localStore,s))})}function sB(t,e){return _(this,null,function*(){let n=J(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());let r=yield nA(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new U(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xa(n,r.hs)}})}function oB(t,e){let n=J(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let i=ce(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function yA(t){let e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tB.bind(null,e),e.Ca.d_=W2.bind(null,e.eventManager),e.Ca.$a=K2.bind(null,e.eventManager),e}function aB(t){let e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rB.bind(null,e),e}var wS=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=Bd(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return A2(this.persistence,new nv,n.initialUser,this.serializer)}Ga(n){return new Zy(Xy.Zr,this.serializer)}Wa(n){return new sv}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var cB=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>_S(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=sB.bind(null,this.syncEngine),yield G2(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new mv}()}createDatastore(n){let r=Bd(n.databaseInfo.databaseId),i=function(o){return new cv(o)}(n.databaseInfo);return function(o,a,u,l){return new dv(o,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,u){return new fv(i,s,o,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>_S(this.syncEngine,r,0),function(){return _d.D()?new _d:new ov}())}createSyncEngine(n,r){return function(s,o,a,u,l,h,p){let m=new wv(s,o,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield function(s){return _(this,null,function*(){let o=J(s);F("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Ja(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Ad=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Tv=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ge.UNAUTHENTICATED,this.clientId=sd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>_(this,null,function*(){F("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(F("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Gt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=qv(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function ty(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield nA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function ES(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield uB(t);F("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>mS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>mS(e.remoteStore,i)),t._onlineComponents=e})}function uB(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ty(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Vs("Error using user provided cache. Falling back to memory cache: "+n),yield ty(t,new wS)}}else F("FirestoreClient","Using default OfflineComponentProvider"),yield ty(t,new wS);return t._offlineComponents})}function vA(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),yield ES(t,t._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),yield ES(t,new cB))),t._onlineComponents})}function lB(t){return vA(t).then(e=>e.syncEngine)}function _A(t){return _(this,null,function*(){let e=yield vA(t),n=e.eventManager;return n.onListen=Q2.bind(null,e.syncEngine),n.onUnlisten=J2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Y2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=X2.bind(null,e.syncEngine),n})}function dB(t,e,n={}){let r=new Gt;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,a,u,l){let h=new Ad({next:m=>{h.Za(),o.enqueueAndForget(()=>dA(s,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new U(M.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?l.reject(new U(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new bd(Fv(a.path),h,{includeMetadataChanges:!0,_a:!0});return lA(s,p)}(yield _A(t),t.asyncQueue,e,n,r)})),r.promise}function hB(t,e,n={}){let r=new Gt;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,a,u,l){let h=new Ad({next:m=>{h.Za(),o.enqueueAndForget(()=>dA(s,p)),m.fromCache&&u.source==="server"?l.reject(new U(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new bd(a,h,{includeMetadataChanges:!0,_a:!0});return lA(s,p)}(yield _A(t),t.asyncQueue,e,n,r)})),r.promise}function IA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var TS=new Map;function wA(t,e,n){if(!n)throw new U(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fB(t,e,n,r){if(e===!0&&r===!0)throw new U(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function DS(t){if(!G.isDocumentKey(t))throw new U(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bS(t){if(G.isDocumentKey(t))throw new U(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function Kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new U(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Wv(t);throw new U(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Rd=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new U(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new U(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ys=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rd(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ny;switch(r.type){case"firstParty":return new oy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=TS.get(n);r&&(F("ComponentProvider","Removing Datastore"),TS.delete(n),r.terminate())}(this),Promise.resolve()}};function EA(t,e,n,r={}){var i;let s=(t=Kn(t,Ys))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ge.MOCK_USER;else{a=Al(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new U(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ge(l)}t._authCredentials=new ry(new id(a,u))}}var Nd=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},_t=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},br=class t extends Nd{constructor(e,n,r){super(e,n,Fv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new G(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function TA(t,e,...n){if(t=De(t),wA("collection","path",e),t instanceof Ys){let r=Re.fromString(e,...n);return bS(r),new br(t,null,r)}{if(!(t instanceof _t||t instanceof br))throw new U(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Re.fromString(e,...n));return bS(r),new br(t.firestore,null,r)}}function DA(t,e,...n){if(t=De(t),arguments.length===1&&(e=sd.newId()),wA("doc","path",e),t instanceof Ys){let r=Re.fromString(e,...n);return DS(r),new _t(t,null,new G(r))}{if(!(t instanceof _t||t instanceof br))throw new U(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Re.fromString(e,...n));return DS(r),new _t(t.firestore,t instanceof br?t.converter:null,new G(r))}}var Md=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Id(this,"async_queue_retry"),this.Vu=()=>{let r=ey();r&&F("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=ey();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=ey();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new Gt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return _(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Za(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw zn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=pv.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Q()}verifyOperationInProgress(){}wu(){return _(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};var wi=class extends Ys{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Md,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Md(e),this._firestoreClient=void 0,yield e}})}};function bA(t,e){let n=typeof t=="object"?t:_r(),r=typeof t=="string"?t:e||"(default)",i=ni(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Sl("firestore");s&&EA(i,...s)}return i}function Kv(t){if(t._terminated)throw new U(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pB(t),t._firestoreClient}function pB(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new dy(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,IA(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Tv(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var Ga=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(it.fromBase64String(e))}catch(n){throw new U(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Zs=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new U(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wa=class{constructor(e){this._methodName=e}};var Ka=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new U(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new U(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}};var Qa=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var gB=/^__.*__$/,Dv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _n(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ii(e,this.data,n,this.fieldTransforms)}},xd=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new _n(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function CA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}var bv=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Od(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(CA(this.Cu)&&gB.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Cv=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bd(e)}Qu(e,n,r,i=!1){return new bv({Cu:e,methodName:n,qu:r,path:At.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function SA(t){let e=t._freezeSettings(),n=Bd(t._databaseId);return new Cv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mB(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Qv("Data must be an object, but it was:",o,r);let a=AA(r,o),u,l;if(s.merge)u=new Lt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=Sv(e,p,n);if(!o.contains(m))throw new U(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);NA(h,m)||h.push(m)}u=new Lt(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new Dv(new St(a),u,l)}var Pd=class t extends Wa{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function yB(t,e,n,r){let i=t.Qu(1,e,n);Qv("Data must be an object, but it was:",i,r);let s=[],o=St.empty();Ei(r,(u,l)=>{let h=Yv(e,u,n);l=De(l);let p=i.Nu(h);if(l instanceof Pd)s.push(h);else{let m=qd(l,p);m!=null&&(s.push(h),o.set(h,m))}});let a=new Lt(s);return new xd(o,a,i.fieldTransforms)}function vB(t,e,n,r,i,s){let o=t.Qu(1,e,n),a=[Sv(e,r,n)],u=[i];if(s.length%2!=0)throw new U(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Sv(e,s[m])),u.push(s[m+1]);let l=[],h=St.empty();for(let m=a.length-1;m>=0;--m)if(!NA(l,a[m])){let v=a[m],C=u[m];C=De(C);let N=o.Nu(v);if(C instanceof Pd)l.push(v);else{let R=qd(C,N);R!=null&&(l.push(v),h.set(v,R))}}let p=new Lt(l);return new xd(h,p,o.fieldTransforms)}function qd(t,e){if(RA(t=De(t)))return Qv("Unsupported field value:",e,t),AA(t,e);if(t instanceof Wa)return function(r,i){if(!CA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=qd(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=De(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return n2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ke.fromDate(r);return{timestampValue:md(i.serializer,s)}}if(r instanceof Ke){let s=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:md(i.serializer,s)}}if(r instanceof Ka)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ga)return{bytesValue:QS(i.serializer,r._byteString)};if(r instanceof _t){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Uv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Qa)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Vv(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Wv(r)}`)}(t,e)}function AA(t,e){let n={};return SS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ei(t,(r,i)=>{let s=qd(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function RA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof Ka||t instanceof Ga||t instanceof _t||t instanceof Wa||t instanceof Qa)}function Qv(t,e,n){if(!RA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Wv(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Sv(t,e,n){if((e=De(e))instanceof Zs)return e._internalPath;if(typeof e=="string")return Yv(t,e);throw Od("Field path arguments must be of type string or ",t,!1,void 0,n)}var _B=new RegExp("[~\\*/\\[\\]]");function Yv(t,e,n){if(e.search(_B)>=0)throw Od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zs(...e.split("."))._internalPath}catch{throw Od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Od(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new U(M.INVALID_ARGUMENT,a+t+u)}function NA(t,e){return t.some(n=>n.isEqual(e))}var kd=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Av(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(MA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Av=class extends kd{data(){return super.data()}};function MA(t,e){return typeof e=="string"?Yv(t,e):e instanceof Zs?e._internalPath:e._delegate._internalPath}function IB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new U(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Rv=class{convertValue(e,n="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ei(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>be(o.doubleValue));return new Qa(s)}convertGeoPoint(e){return new Ka(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Pv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ja(e));default:return null}}convertTimestamp(e){let n=Gn(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Re.fromString(e);_e(tA(r));let i=new ud(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||zn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function wB(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var pi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ld=class extends kd{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Fs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(MA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Fs=class extends Ld{data(e={}){return super.data(e)}},Nv=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new pi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fs(this._firestore,this._userDataWriter,r.key,r,new pi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new U(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new Fs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new Fs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:EB(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function EB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}function xA(t){t=Kn(t,_t);let e=Kn(t.firestore,wi);return dB(Kv(e),t._key).then(n=>TB(e,t,n))}var Fd=class extends Rv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ga(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}};function PA(t){t=Kn(t,Nd);let e=Kn(t.firestore,wi),n=Kv(e),r=new Fd(e);return IB(t._query),hB(n,t._query).then(i=>new Nv(e,r,t,i))}function OA(t,e,n){t=Kn(t,_t);let r=Kn(t.firestore,wi),i=wB(t.converter,e,n);return LA(r,[mB(SA(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Dr.none())])}function kA(t,e,n,...r){t=Kn(t,_t);let i=Kn(t.firestore,wi),s=SA(i),o;return o=typeof(e=De(e))=="string"||e instanceof Zs?vB(s,"updateDoc",t._key,e,n,r):yB(s,"updateDoc",t._key,e),LA(i,[o.toMutation(t._key,Dr.exists(!0))])}function LA(t,e){return function(r,i){let s=new Gt;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return eB(yield lB(r),i,s)})),s.promise}(Kv(t),e)}function TB(t,e,n){let r=n.docs.get(e._key),i=new Fd(t);return new Ld(t,i,e._key,r,new pi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Js=i})(ln),un(new vt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new wi(new iy(r.getProvider("auth-internal")),new cy(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new U(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ud(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ce(QC,"4.7.3",e),Ce(QC,"4.7.3","esm2017")})();var Di=class{constructor(e){return e}},FA="firestore",Zv=class{constructor(){return As(FA)}};var Jv=new z("angularfire2.firestore-instances");function DB(t,e){let n=Ea(FA,t,e);return n&&new Di(n)}function bB(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Di(r)}}var CB={provide:Zv,deps:[[new tt,Jv]]},SB={provide:Di,useFactory:DB,deps:[[new tt,Jv],Vn]};function lK(t,...e){return Ce("angularfire",Ir.full,"fst"),rn([SB,CB,{provide:Jv,useFactory:bB(t),multi:!0,deps:[me,et,si,oi,[new tt,Ma],[new tt,ii],...e]}])}var VA=Pe(TA,!0);var eo=Pe(DA,!0);var UA=Pe(xA,!0);var jA=Pe(PA,!0);var dK=Pe(bA,!0);var BA=Pe(OA,!0);var zd=Pe(kA,!0);var KA="firebasestorage.googleapis.com",QA="storageBucket",RB=2*60*1e3,NB=10*60*1e3;var Me=class t extends ft{constructor(e,n,r=0){super(Xv(e),`Firebase Storage: ${n} (${Xv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Oe=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Oe||{});function Xv(t){return"storage/"+t}function s_(){let t="An unknown error occurred, please check the error payload for server response.";return new Me(Oe.UNKNOWN,t)}function MB(t){return new Me(Oe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function xB(t){return new Me(Oe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function PB(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Me(Oe.UNAUTHENTICATED,t)}function OB(){return new Me(Oe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function kB(t){return new Me(Oe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function LB(){return new Me(Oe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function FB(){return new Me(Oe.CANCELED,"User canceled the upload/download.")}function VB(t){return new Me(Oe.INVALID_URL,"Invalid URL '"+t+"'.")}function UB(t){return new Me(Oe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function jB(){return new Me(Oe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+QA+"' property when initializing the app?")}function BB(){return new Me(Oe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $B(){return new Me(Oe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function HB(t){return new Me(Oe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function e_(t){return new Me(Oe.INVALID_ARGUMENT,t)}function YA(){return new Me(Oe.APP_DELETED,"The Firebase app was deleted.")}function qB(t){return new Me(Oe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function tc(t,e){return new Me(Oe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ec(t){throw new Me(Oe.INTERNAL_ERROR,"Internal error: "+t)}var Kt=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw UB(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l($){$.path_=decodeURIComponent($.path)}let h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${p}/${h}/b/${i}/o${m}`,"i"),C={bucket:1,path:3},N=n===KA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",k=new RegExp(`^https?://${N}/${i}/${R}`,"i"),V=[{regex:a,indices:u,postModify:s},{regex:v,indices:C,postModify:l},{regex:k,indices:{bucket:1,path:2},postModify:l}];for(let $=0;$<V.length;$++){let Ie=V[$],K=Ie.regex.exec(e);if(K){let E=K[Ie.indices.bucket],y=K[Ie.indices.path];y||(y=""),r=new t(E,y),Ie.postModify(r);break}}if(r==null)throw VB(e);return r}},t_=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function zB(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function h(...R){l||(l=!0,e.apply(null,R))}function p(R){i=setTimeout(()=>{i=null,t(v,u())},R)}function m(){s&&clearTimeout(s)}function v(R,...k){if(l){m();return}if(R){m(),h.call(null,R,...k);return}if(u()||o){m(),h.call(null,R,...k);return}r<64&&(r*=2);let V;a===1?(a=2,V=0):V=(r+Math.random())*1e3,p(V)}let C=!1;function N(R){C||(C=!0,m(),!l&&(i!==null?(R||(a=2),clearTimeout(i),p(0)):R||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,N(!0)},n),N}function GB(t){t(!1)}function WB(t){return t!==void 0}function KB(t){return typeof t=="object"&&!Array.isArray(t)}function o_(t){return typeof t=="string"||t instanceof String}function $A(t){return a_()&&t instanceof Blob}function a_(){return typeof Blob<"u"}function HA(t,e,n,r){if(r<e)throw e_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw e_(`Invalid value for '${t}'. Expected ${n} or less.`)}function c_(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function ZA(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var no=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(no||{});function QB(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var n_=class{constructor(e,n,r,i,s,o,a,u,l,h,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,C)=>{this.resolve_=v,this.reject_=C,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new to(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===no.NO_ERROR,u=s.getStatus();if(!a||QB(u,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===no.ABORT;r(!1,new to(!1,null,h));return}let l=this.successCodes_.indexOf(u)!==-1;r(!0,new to(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(a,a.getResponse());WB(u)?s(u):s()}catch(u){o(u)}else if(a!==null){let u=s_();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){let u=this.appDelete_?YA():FB();o(u)}else{let u=LB();o(u)}};this.canceled_?n(!1,new to(!1,null,!0)):this.backoffId_=zB(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&GB(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},to=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function YB(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function ZB(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function JB(t,e){e&&(t["X-Firebase-GMPID"]=e)}function XB(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function e$(t,e,n,r,i,s,o=!0){let a=ZA(t.urlParams),u=t.url+a,l=Object.assign({},t.headers);return JB(l,e),YB(l,n),ZB(l,s),XB(l,r),new n_(u,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function t$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function n$(...t){let e=t$();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(a_())return new Blob(t);throw new Me(Oe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function r$(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function i$(t){if(typeof atob>"u")throw HB("base-64");return atob(t)}var In={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},nc=class{constructor(e,n){this.data=e,this.contentType=n||null}};function s$(t,e){switch(t){case In.RAW:return new nc(JA(e));case In.BASE64:case In.BASE64URL:return new nc(XA(t,e));case In.DATA_URL:return new nc(a$(e),c$(e))}throw s_()}function JA(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function o$(t){let e;try{e=decodeURIComponent(t)}catch{throw tc(In.DATA_URL,"Malformed data URL.")}return JA(e)}function XA(t,e){switch(t){case In.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw tc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case In.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw tc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=i$(e)}catch(i){throw i.message.includes("polyfill")?i:tc(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var Wd=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw tc(In.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=u$(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function a$(t){let e=new Wd(t);return e.base64?XA(In.BASE64,e.rest):o$(e.rest)}function c$(t){return new Wd(t).contentType}function u$(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var Kd=class t{constructor(e,n){let r=0,i="";$A(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if($A(this.data_)){let r=this.data_,i=r$(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(a_()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(n$.apply(null,n))}else{let n=e.map(o=>o_(o)?s$(In.RAW,o).data:o.data_),r=0;n.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new t(i,!0)}}uploadData(){return this.data_}};function e0(t){let e;try{e=JSON.parse(t)}catch{return null}return KB(e)?e:null}function l$(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function d$(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function t0(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function h$(t,e){return e}var Qe=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||h$}},Gd=null;function f$(t){return!o_(t)||t.length<2?t:t0(t)}function n0(){if(Gd)return Gd;let t=[];t.push(new Qe("bucket")),t.push(new Qe("generation")),t.push(new Qe("metageneration")),t.push(new Qe("name","fullPath",!0));function e(s,o){return f$(o)}let n=new Qe("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}let i=new Qe("size");return i.xform=r,t.push(i),t.push(new Qe("timeCreated")),t.push(new Qe("updated")),t.push(new Qe("md5Hash",null,!0)),t.push(new Qe("cacheControl",null,!0)),t.push(new Qe("contentDisposition",null,!0)),t.push(new Qe("contentEncoding",null,!0)),t.push(new Qe("contentLanguage",null,!0)),t.push(new Qe("contentType",null,!0)),t.push(new Qe("metadata","customMetadata",!0)),Gd=t,Gd}function p$(t,e){function n(){let r=t.bucket,i=t.fullPath,s=new Kt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function g$(t,e,n){let r={};r.type="file";let i=n.length;for(let s=0;s<i;s++){let o=n[s];r[o.local]=o.xform(r,e[o.server])}return p$(r,t),r}function r0(t,e,n){let r=e0(e);return r===null?null:g$(t,r,n)}function m$(t,e,n,r){let i=e0(e);if(i===null||!o_(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(l=>{let h=t.bucket,p=t.fullPath,m="/b/"+o(h)+"/o/"+o(p),v=c_(m,n,r),C=ZA({alt:"media",token:l});return v+C})[0]}function y$(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}var Qd=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function i0(t){if(!t)throw s_()}function v$(t,e){function n(r,i){let s=r0(t,i,e);return i0(s!==null),s}return n}function _$(t,e){function n(r,i){let s=r0(t,i,e);return i0(s!==null),m$(s,i,t.host,t._protocol)}return n}function s0(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=OB():i=PB():n.getStatus()===402?i=xB(t.bucket):n.getStatus()===403?i=kB(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function I$(t){let e=s0(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=MB(t.path)),s.serverResponse=i.serverResponse,s}return n}function w$(t,e,n){let r=e.fullServerUrl(),i=c_(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Qd(i,s,_$(t,n),o);return a.errorHandler=I$(e),a}function E$(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function T$(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=E$(null,e)),r}function D$(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let $=0;$<2;$++)V=V+Math.random().toString().slice(2);return V}let u=a();o["Content-Type"]="multipart/related; boundary="+u;let l=T$(e,r,i),h=y$(l,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,m=`\r
--`+u+"--",v=Kd.getBlob(p,r,m);if(v===null)throw BB();let C={name:l.fullPath},N=c_(s,t.host,t._protocol),R="POST",k=t.maxUploadRetryTime,j=new Qd(N,R,v$(t,n),k);return j.urlParams=C,j.headers=o,j.body=v.uploadData(),j.errorHandler=s0(e),j}var mK=256*1024;var qA=null,r_=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=no.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=no.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=no.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw ec("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ec("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ec("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ec("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ec("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},i_=class extends r_{initXhr(){this.xhr_.responseType="text"}};function o0(){return qA?qA():new i_}var ro=class t{constructor(e,n){this._service=e,n instanceof Kt?this._location=n:this._location=Kt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Kt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return t0(this._location.path)}get storage(){return this._service}get parent(){let e=l$(this._location.path);if(e===null)return null;let n=new Kt(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw qB(e)}};function b$(t,e,n){t._throwIfRoot("uploadBytes");let r=D$(t.storage,t._location,n0(),new Kd(e,!0),n);return t.storage.makeRequestWithTokens(r,o0).then(i=>({metadata:i,ref:t}))}function C$(t){t._throwIfRoot("getDownloadURL");let e=w$(t.storage,t._location,n0());return t.storage.makeRequestWithTokens(e,o0).then(n=>{if(n===null)throw $B();return n})}function S$(t,e){let n=d$(t._location.path,e),r=new Kt(t._location.bucket,n);return new ro(t.storage,r)}function A$(t){return/^[A-Za-z]+:\/\//.test(t)}function R$(t,e){return new ro(t,e)}function a0(t,e){if(t instanceof rc){let n=t;if(n._bucket==null)throw jB();let r=new ro(n,n._bucket);return e!=null?a0(r,e):r}else return e!==void 0?S$(t,e):t}function N$(t,e){if(e&&A$(e)){if(t instanceof rc)return R$(t,e);throw e_("To use ref(service, url), the first argument must be a Storage instance.")}else return a0(t,e)}function zA(t,e){let n=e?.[QA];return n==null?null:Kt.makeFromBucketSpec(n,t)}function M$(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Al(i,t.app.options.projectId))}var rc=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=KA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=RB,this._maxUploadRetryTime=NB,this._requests=new Set,i!=null?this._bucket=Kt.makeFromBucketSpec(i,this._host):this._bucket=zA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Kt.makeFromBucketSpec(this._url,e):this._bucket=zA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){HA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){HA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return _(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return _(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ro(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new t_(YA());{let o=e$(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return _(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},GA="@firebase/storage",WA="0.13.2";var c0="storage";function u0(t,e,n){return t=De(t),b$(t,e,n)}function l0(t){return t=De(t),C$(t)}function d0(t,e){return t=De(t),N$(t,e)}function h0(t=_r(),e){t=De(t);let r=ni(t,c0).getImmediate({identifier:e}),i=Sl("storage");return i&&f0(r,...i),r}function f0(t,e,n,r={}){M$(t,e,n,r)}function x$(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new rc(n,r,i,e,ln)}function P$(){un(new vt(c0,x$,"PUBLIC").setMultipleInstances(!0)),Ce(GA,WA,""),Ce(GA,WA,"esm2017")}P$();var p0=Pe(l0,!0);var g0=Pe(h0,!0);var m0=Pe(d0,!0);var y0=Pe(u0,!0);var v0=class t{constructor(e,n){this.auth=e;this.firestore=n}userSubject=new Be(null);uploadImage(e){return _(this,null,function*(){let n=g0(),r=m0(n,`images/${e.name}`);try{return yield y0(r,e),yield p0(r)}catch(i){throw console.error("Error al subir la imagen:",i),i}})}registerUser(e,n,r,i){return _(this,null,function*(){try{let s=yield HC(this.auth,e,n);yield qC(s.user);let o=i!=="especialista",a=ve(L({uid:s.user.uid},r),{role:i,createdAt:new Date,habilitado:o,emailVerificado:!1});return yield BA(eo(this.firestore,"users",s.user.uid),a),ve(L({},s.user),{role:i})}catch(s){throw console.error(`Error al registrar el ${i}:`,s),s}})}verificarCorreo(e){return _(this,null,function*(){let n=this.auth.currentUser;if(n){yield n.reload();let r=yield this.getUserData(n.uid);n.emailVerified&&(yield zd(eo(this.firestore,`users/${n.uid}`),{emailVerificado:!0}))}})}login(e,n){return _(this,null,function*(){try{let r=yield zC(this.auth,e,n);yield this.verificarCorreo(r.user.uid);let i=yield this.getUserData(r.user.uid);if(i.role==="especialista"){if(!i.habilitado)throw new Error("Tu cuenta debe ser aprobada por un administrador antes de poder iniciar sesi\xF3n.");if(!i.emailVerificado)throw new Error("Debes verificar tu correo electr\xF3nico para ingresar.")}else if(!i.emailVerificado)throw new Error("Debes verificar tu correo electr\xF3nico para ingresar.");return this.userSubject.next(L(L({},r.user),i)),L(L({},r.user),i)}catch(r){throw console.error("Error en el login:",r),r}})}getUserData(e){return _(this,null,function*(){let n=eo(this.firestore,`users/${e}`),r=yield UA(n);if(r.exists())return r.data();throw new Error("No se encontr\xF3 el documento del usuario")})}logout(){return GC(this.auth).then(()=>{this.userSubject.next(null)})}habilitarUsuario(e){return _(this,null,function*(){let n=eo(this.firestore,"users",e);yield zd(n,{habilitado:!0})})}inhabilitarUsuario(e){return _(this,null,function*(){let n=eo(this.firestore,"users",e);yield zd(n,{habilitado:!1})})}obtenerUsuarios(){return _(this,null,function*(){let e=VA(this.firestore,"users");return(yield jA(e)).docs.map(r=>L({id:r.id},r.data()))})}getUser(){return this.userSubject.asObservable()}static \u0275fac=function(n){return new(n||t)(W(di),W(Di))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};export{L as a,ve as b,O$ as c,k$ as d,_ as e,at as f,xe as g,oe as h,PR as i,H as j,Vw as k,B as l,Uo as m,z as n,W as o,Jw as p,Bo as q,as as r,Lu as s,eW as t,tW as u,fp as v,ut as w,Ho as x,nW as y,rW as z,Dt as A,Yu as B,aW as C,CP as D,UP as E,qT as F,JP as G,XP as H,GT as I,WT as J,Pp as K,cW as L,KT as M,uW as N,mO as O,lW as P,_O as Q,YT as R,IO as S,wO as T,dW as U,EO as V,hW as W,JT as X,fW as Y,pW as Z,gW as _,mW as $,yW as aa,qo as ba,vW as ca,zo as da,cD as ea,_W as fa,QO as ga,hs as ha,zW as ia,GW as ja,WW as ka,KW as la,ik as ma,w6 as na,r1 as oa,gr as pa,H6 as qa,q6 as ra,P3 as sa,O3 as ta,S8 as ua,A8 as va,Di as wa,lK as xa,VA as ya,eo as za,UA as Aa,jA as Ba,dK as Ca,BA as Da,zd as Ea,v0 as Fa};
