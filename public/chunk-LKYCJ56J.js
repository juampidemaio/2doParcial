import{A as L,C as a,Ca as Fe,Da as D,E as be,Ea as Ie,Fa as Me,Ga as H,H as ie,I as ne,J as re,S as he,T as S,V as _e,Y as x,_ as oe,a as y,b as O,c as z,d as b,da as Ee,f as ce,fa as ae,g as G,ga as B,h as pe,ha as xe,i as E,ia as Ce,j as U,k as ue,l as q,la as ye,m as j,ma as Se,n as ge,o as fe,oa as C,pa as P,q as s,qa as d,r as f,ra as w,s as ve,sa as F,t as u,ta as Pe,u as l,ua as we,v as r,va as I,w as t,wa as k,x as c,xa as A,y as V,ya as N,z as g}from"./chunk-YGP5ZKKQ.js";var _=z(H());var M=class n{constructor(i,o){this.el=i;this.renderer=o}captchaCode="";captchaValido=new ge;ngOnInit(){this.generarCaptcha()}generarCaptcha(){this.captchaCode=Math.random().toString(36).substring(2,8);let i=this.renderer.createText(`Captcha: ${this.captchaCode}`),o=this.renderer.createElement("label");this.renderer.addClass(o,"captcha-label"),this.renderer.appendChild(o,i),this.renderer.insertBefore(this.el.nativeElement.parentNode,o,this.el.nativeElement)}onInput(i){let o=i.trim()===this.captchaCode;this.captchaValido.emit(o)}static \u0275fac=function(o){return new(o||n)(f(fe),f(ve))};static \u0275dir=ue({type:n,selectors:[["","appCaptcha",""]],hostBindings:function(o,e){o&1&&g("input",function(p){return e.onInput(p.target.value)})},outputs:{captchaValido:"captchaValido"}})};function Te(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function Oe(n,i){n&1&&(r(0,"div"),a(1,"Solo se permiten letras."),t())}function ke(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function Ae(n,i){n&1&&(r(0,"div"),a(1,"Solo se permiten letras."),t())}function Ne(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function De(n,i){n&1&&(r(0,"div"),a(1,"La edad m\xEDnima es 18 a\xF1os."),t())}function qe(n,i){n&1&&(r(0,"div"),a(1,"La edad m\xE1xima es 99 a\xF1os."),t())}function je(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function Ve(n,i){n&1&&(r(0,"div"),a(1,"El DNI debe tener 8 d\xEDgitos."),t())}function Le(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function ze(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function Ge(n,i){n&1&&(r(0,"div"),a(1,"Formato de email inv\xE1lido."),t())}function Ue(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function Be(n,i){n&1&&(r(0,"div"),a(1,"La contrase\xF1a debe tener al menos 6 caracteres."),t())}function He(n,i){n&1&&(r(0,"div"),a(1,"Debes subir exactamente 2 im\xE1genes."),t())}var W=class n{constructor(i,o,e){this.fb=i;this.authService=o;this.router=e;this.pacienteForm=this.fb.group({nombre:["",[d.required,d.pattern("^[a-zA-Z ]*$")]],apellido:["",[d.required,d.pattern("^[a-zA-Z ]*$")]],edad:["",[d.required,d.min(1),d.max(123)]],dni:["",[d.required,d.pattern("^[0-9]{8,8}$")]],obraSocial:["",d.required],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],imagenes:this.fb.array([],[d.required])})}pacienteForm;allowedFileTypes=["image/jpeg","image/png","image/gif"];maxFileSize=2*1024*1024;captchaValido=!1;agregarImagen(i){let o=i.target,e=this.pacienteForm.get("imagenes");if(o.files&&o.files.length>0){let m=Array.from(o.files);for(let p of m){if(!this.allowedFileTypes.includes(p.type)){_.default.fire("Tipo de archivo no v\xE1lido","Solo se permiten im\xE1genes en formato JPEG, PNG o GIF.","error");return}if(p.size>this.maxFileSize){_.default.fire("Tama\xF1o de archivo excedido","El tama\xF1o m\xE1ximo permitido es de 2 MB por archivo.","error");return}}if(e.length>=2){_.default.fire("Error","Solo puedes subir hasta 2 im\xE1genes.","error");return}m.forEach(p=>{e.length<2&&e.push(this.fb.control(p))})}}mostrarError(i,o){let e=this.pacienteForm.get(i);return e?e.hasError(o)&&(e.dirty||e.touched):!1}guardarPaciente(){return b(this,null,function*(){if(this.pacienteForm.valid&&this.captchaValido){let i=this.pacienteForm.get("imagenes");if(i.length!==2){_.default.fire("Error","Debes subir exactamente 2 im\xE1genes.","error");return}_.default.fire({title:"Cargando...",text:"Por favor, espera un momento.",allowOutsideClick:!1,didOpen:()=>{_.default.showLoading()}});try{let o=[];for(let m=0;m<i.length;m++){let p=i.at(m).value,T=yield this.authService.uploadImage(p);o.push(T)}let e=O(y({},this.pacienteForm.value),{role:"paciente",imagenes:o});yield this.authService.registerUser(e.email,e.password,e,"paciente"),_.default.fire("Registro exitoso","El paciente ha sido registrado correctamente","success"),this.pacienteForm.reset(),this.router.navigate(["/bienvenida"])}catch(o){_.default.fire("Error",`Ha ocurrido un error durante el registro: ${o}`,"error")}finally{_.default.close()}}else _.default.fire("Formulario inv\xE1lido","Por favor, completa todos los campos correctamente.","warning")})}static \u0275fac=function(o){return new(o||n)(f(D),f(C),f(x))};static \u0275cmp=E({type:n,selectors:[["app-registro-paciente"]],decls:52,vars:17,consts:[[3,"ngSubmit","formGroup"],["for","nombre"],["id","nombre","formControlName","nombre"],[4,"ngIf"],["for","apellido"],["id","apellido","formControlName","apellido"],["for","edad"],["id","edad","type","number","formControlName","edad"],["for","dni"],["id","dni","formControlName","dni"],["for","obraSocial"],["id","obraSocial","formControlName","obraSocial"],["for","email"],["id","email","formControlName","email"],["for","password"],["id","password","type","password","formControlName","password"],["for","imagenes"],["type","file","multiple","",3,"change"],[1,"captcha-container"],["appCaptcha","","placeholder","Ingrese el c\xF3digo",1,"form-control",3,"captchaValido"],["type","submit",3,"disabled"]],template:function(o,e){o&1&&(r(0,"form",0),g("ngSubmit",function(){return e.guardarPaciente()}),r(1,"div")(2,"label",1),a(3,"Nombre:"),t(),c(4,"input",2),u(5,Te,2,0,"div",3)(6,Oe,2,0,"div",3),t(),r(7,"div")(8,"label",4),a(9,"Apellido:"),t(),c(10,"input",5),u(11,ke,2,0,"div",3)(12,Ae,2,0,"div",3),t(),r(13,"div")(14,"label",6),a(15,"Edad:"),t(),c(16,"input",7),u(17,Ne,2,0,"div",3)(18,De,2,0,"div",3)(19,qe,2,0,"div",3),t(),r(20,"div")(21,"label",8),a(22,"DNI:"),t(),c(23,"input",9),u(24,je,2,0,"div",3)(25,Ve,2,0,"div",3),t(),r(26,"div")(27,"label",10),a(28,"Obra Social:"),t(),c(29,"input",11),u(30,Le,2,0,"div",3),t(),r(31,"div")(32,"label",12),a(33,"Email:"),t(),c(34,"input",13),u(35,ze,2,0,"div",3)(36,Ge,2,0,"div",3),t(),r(37,"div")(38,"label",14),a(39,"Contrase\xF1a:"),t(),c(40,"input",15),u(41,Ue,2,0,"div",3)(42,Be,2,0,"div",3),t(),r(43,"div")(44,"label",16),a(45,"Sube exactamente 2 im\xE1genes:"),t(),r(46,"input",17),g("change",function(p){return e.agregarImagen(p)}),t(),u(47,He,2,0,"div",3),t(),r(48,"div",18)(49,"input",19),g("captchaValido",function(p){return e.captchaValido=p}),t()(),r(50,"button",20),a(51,"Registrar Paciente "),t()()),o&2&&(l("formGroup",e.pacienteForm),s(5),l("ngIf",e.mostrarError("nombre","required")),s(),l("ngIf",e.mostrarError("nombre","pattern")),s(5),l("ngIf",e.mostrarError("apellido","required")),s(),l("ngIf",e.mostrarError("apellido","pattern")),s(5),l("ngIf",e.mostrarError("edad","required")),s(),l("ngIf",e.mostrarError("edad","min")),s(),l("ngIf",e.mostrarError("edad","max")),s(5),l("ngIf",e.mostrarError("dni","required")),s(),l("ngIf",e.mostrarError("dni","pattern")),s(5),l("ngIf",e.mostrarError("obraSocial","required")),s(5),l("ngIf",e.mostrarError("email","required")),s(),l("ngIf",e.mostrarError("email","email")),s(5),l("ngIf",e.mostrarError("password","required")),s(),l("ngIf",e.mostrarError("password","minlength")),s(5),l("ngIf",e.mostrarError("imagenes","required")),s(3),l("disabled",!e.captchaValido))},dependencies:[S,I,P,k,w,F,A,N,M],styles:['@charset "UTF-8";form[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:30px;border:1px solid #007bff;border-radius:10px;background-color:#e0f7fa;box-shadow:0 4px 20px #0003}label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:8px;display:block;color:#007bff}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #007bff;border-radius:6px;margin-bottom:15px;box-sizing:border-box;transition:border-color .3s,background-color .3s;background-color:#f1f1f1}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus, input[type=email][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus{border-color:#0056b3;outline:none;background-color:#fff}div[ngIf][_ngcontent-%COMP%]{color:#dc3545;font-size:.9em;margin-top:-10px;margin-bottom:10px}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:12px 15px;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s,transform .2s;width:100%;font-size:1em}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-2px)}input[type=text][_ngcontent-%COMP%]:hover, input[type=number][_ngcontent-%COMP%]:hover, input[type=email][_ngcontent-%COMP%]:hover, input[type=password][_ngcontent-%COMP%]:hover{border-color:#0056b3}div[_ngcontent-%COMP%]{margin-bottom:15px}']})};var v=z(H());var Y=class n{constructor(i){this.firestore=i}addEspecialidad(i){return b(this,null,function*(){let o=B(ae(this.firestore,"especialidades"));yield ye(o,{nombre:i})})}getEspecialidades(){return b(this,null,function*(){let i=ae(this.firestore,"especialidades");return(yield Ce(i)).docs.map(e=>y({id:e.id},e.data()))})}getEspecialidad(i){return b(this,null,function*(){let o=B(this.firestore,`especialidades/${i}`),e=yield xe(o);if(e.exists())return y({id:e.id},e.data());throw new Error("No se encontr\xF3 la especialidad")})}updateEspecialidad(i,o){return b(this,null,function*(){let e=B(this.firestore,`especialidades/${i}`);yield Se(e,{nombre:o})})}static \u0275fac=function(o){return new(o||n)(pe(Ee))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};function Qe(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function Ze(n,i){n&1&&(r(0,"div"),a(1,"Solo se permiten letras."),t())}function Ye(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function Je(n,i){n&1&&(r(0,"div"),a(1,"Solo se permiten letras."),t())}function Ke(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function Xe(n,i){n&1&&(r(0,"div"),a(1,"La edad m\xEDnima es 18 a\xF1os."),t())}function et(n,i){n&1&&(r(0,"div"),a(1,"La edad m\xE1xima es 99 a\xF1os."),t())}function tt(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function it(n,i){n&1&&(r(0,"div"),a(1,"El DNI debe tener 8 d\xEDgitos."),t())}function nt(n,i){if(n&1){let o=V();r(0,"div")(1,"input",23),g("change",function(m){q(o);let p=L();return j(p.onEspecialidadChange(m))}),t(),a(2),t()}if(n&2){let o=i.$implicit;s(),l("value",o),s(),be(" ",o," ")}}function rt(n,i){n&1&&(r(0,"div")(1,"p"),a(2,"No hay especialidades disponibles. Puedes agregar una nueva a continuaci\xF3n:"),t()())}function ot(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function at(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio si no hay especialidades disponibles."),t())}function st(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function lt(n,i){n&1&&(r(0,"div"),a(1,"El formato del email es inv\xE1lido."),t())}function mt(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function dt(n,i){n&1&&(r(0,"div"),a(1,"La contrase\xF1a debe tener al menos 6 caracteres."),t())}function ct(n,i){n&1&&(r(0,"div"),a(1,"Se debe cargar una imagen."),t())}var J=class n{constructor(i,o,e,m){this.fb=i;this.authService=o;this.router=e;this.especialidadService=m;this.especialistaForm=this.fb.group({nombre:["",[d.required,d.pattern("^[a-zA-Z ]*$")]],apellido:["",[d.required,d.pattern("^[a-zA-Z ]*$")]],edad:["",[d.required,d.min(18),d.max(99)]],dni:["",[d.required,d.pattern("^[0-9]{8}$")]],especialidades:this.fb.array([],d.required),nuevaEspecialidad:[""],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],imagenes:this.fb.array([],d.required)})}especialistaForm;allowedFileTypes=["image/jpeg","image/png","image/gif"];maxFileSize=2*1024*1024;especialidades=[];captchaValido=!1;ngOnInit(){this.loadEspecialidades()}loadEspecialidades(){this.especialidadService.getEspecialidades().then(i=>{this.especialidades=i.map(o=>o.nombre)})}onEspecialidadChange(i){let o=this.especialistaForm.get("especialidades");if(i.target.checked)o.push(this.fb.control(i.target.value));else{let e=o.controls.findIndex(m=>m.value===i.target.value);e>=0&&o.removeAt(e)}}agregarNuevaEspecialidad(){let i=this.especialistaForm.get("nuevaEspecialidad")?.value?.trim();if(!i){v.default.fire("Advertencia","Ingresa una nueva especialidad antes de agregarla.","warning");return}if(this.especialidades.includes(i)){v.default.fire("Advertencia","La especialidad ya existe en la lista.","warning");return}this.especialidadService.addEspecialidad(i).then(()=>{v.default.fire("\xC9xito","Nueva especialidad agregada correctamente.","success"),this.loadEspecialidades(),this.especialistaForm.get("nuevaEspecialidad")?.reset()}).catch(o=>{v.default.fire("Error","No se pudo agregar la especialidad.","error")})}agregarImagen(i){let o=i.target,e=this.especialistaForm.get("imagenes");if(o.files&&o.files.length>0){let m=o.files[0];if(!this.allowedFileTypes.includes(m.type)){v.default.fire("Tipo de archivo no v\xE1lido","Por favor, sube una imagen en formato JPEG, PNG o GIF.","error");return}if(m.size>this.maxFileSize){v.default.fire("Tama\xF1o de archivo excedido","El tama\xF1o m\xE1ximo permitido es de 2 MB.","error");return}e.clear(),e.push(this.fb.control(m))}}mostrarError(i,o){let e=this.especialistaForm.get(i);return e?e.hasError(o)&&(e.dirty||e.touched):!1}guardarEspecialista(){return b(this,null,function*(){if(this.especialistaForm.valid&&this.captchaValido){let i=this.especialistaForm.get("especialidades"),o=this.especialistaForm.get("nuevaEspecialidad")?.value;if(i.length===0&&o)i.push(this.fb.control(o));else if(i.length===0){v.default.fire("Advertencia","Debes seleccionar al menos una especialidad o agregar una nueva.","warning");return}v.default.fire({title:"Cargando...",text:"Por favor, espera un momento.",allowOutsideClick:!1}),v.default.showLoading();let m=this.especialistaForm.get("imagenes").at(0).value;try{let p=yield this.authService.uploadImage(m),T=O(y({},this.especialistaForm.value),{especialidades:i.value,role:"especialista",imageUrl:p});delete T.imagenes,yield this.authService.registerUser(T.email,T.password,T,"especialista"),v.default.fire("Registro exitoso","El especialista ha sido registrado correctamente","success"),this.router.navigate(["/bienvenida"])}catch(p){v.default.fire("Error",`Ha ocurrido un error durante la subida de la imagen: ${p}`,"error")}finally{v.default.close()}}else v.default.fire("Formulario inv\xE1lido","Por favor, completa todos los campos","warning")})}static \u0275fac=function(o){return new(o||n)(f(D),f(C),f(x),f(Y))};static \u0275cmp=E({type:n,selectors:[["app-registro-especialista"]],decls:60,vars:20,consts:[[3,"ngSubmit","formGroup"],["for","nombre"],["id","nombre","formControlName","nombre"],[4,"ngIf"],["for","apellido"],["id","apellido","formControlName","apellido"],["for","edad"],["id","edad","type","number","formControlName","edad"],["for","dni"],["id","dni","formControlName","dni"],[4,"ngFor","ngForOf"],["for","nuevaEspecialidad"],["id","nuevaEspecialidad","formControlName","nuevaEspecialidad","placeholder","Si no est\xE1 en la lista, ingr\xE9sela aqu\xED"],["type","button",3,"click"],["for","email"],["id","email","formControlName","email"],["for","password"],["id","password","type","password","formControlName","password"],["for","imagenes"],["type","file",3,"change"],[1,"captcha-container"],["appCaptcha","","placeholder","Ingrese el c\xF3digo",1,"form-control",3,"captchaValido"],["type","submit",3,"disabled"],["type","checkbox",3,"change","value"]],template:function(o,e){o&1&&(r(0,"form",0),g("ngSubmit",function(){return e.guardarEspecialista()}),r(1,"div")(2,"label",1),a(3,"Nombre:"),t(),c(4,"input",2),u(5,Qe,2,0,"div",3)(6,Ze,2,0,"div",3),t(),r(7,"div")(8,"label",4),a(9,"Apellido:"),t(),c(10,"input",5),u(11,Ye,2,0,"div",3)(12,Je,2,0,"div",3),t(),r(13,"div")(14,"label",6),a(15,"Edad:"),t(),c(16,"input",7),u(17,Ke,2,0,"div",3)(18,Xe,2,0,"div",3)(19,et,2,0,"div",3),t(),r(20,"div")(21,"label",8),a(22,"DNI:"),t(),c(23,"input",9),u(24,tt,2,0,"div",3)(25,it,2,0,"div",3),t(),r(26,"div")(27,"label"),a(28,"Especialidades:"),t(),u(29,nt,3,2,"div",10)(30,rt,3,0,"div",3)(31,ot,2,0,"div",3),t(),r(32,"div")(33,"label",11),a(34,"Nueva Especialidad:"),t(),c(35,"input",12),r(36,"button",13),g("click",function(){return e.agregarNuevaEspecialidad()}),a(37,"Agregar Nueva Especialidad"),t(),u(38,at,2,0,"div",3),t(),r(39,"div")(40,"label",14),a(41,"Email:"),t(),c(42,"input",15),u(43,st,2,0,"div",3)(44,lt,2,0,"div",3),t(),r(45,"div")(46,"label",16),a(47,"Contrase\xF1a:"),t(),c(48,"input",17),u(49,mt,2,0,"div",3)(50,dt,2,0,"div",3),t(),r(51,"div")(52,"label",18),a(53,"Im\xE1genes:"),t(),r(54,"input",19),g("change",function(p){return e.agregarImagen(p)}),t(),u(55,ct,2,0,"div",3),t(),r(56,"div",20)(57,"input",21),g("captchaValido",function(p){return e.captchaValido=p}),t()(),r(58,"button",22),a(59,"Registrar Especialista"),t()()),o&2&&(l("formGroup",e.especialistaForm),s(5),l("ngIf",e.mostrarError("nombre","required")),s(),l("ngIf",e.mostrarError("nombre","pattern")),s(5),l("ngIf",e.mostrarError("apellido","required")),s(),l("ngIf",e.mostrarError("apellido","pattern")),s(5),l("ngIf",e.mostrarError("edad","required")),s(),l("ngIf",e.mostrarError("edad","min")),s(),l("ngIf",e.mostrarError("edad","max")),s(5),l("ngIf",e.mostrarError("dni","required")),s(),l("ngIf",e.mostrarError("dni","pattern")),s(4),l("ngForOf",e.especialidades),s(),l("ngIf",e.especialidades.length===0),s(),l("ngIf",e.mostrarError("especialidades","required")),s(7),l("ngIf",e.mostrarError("nuevaEspecialidad","required")),s(5),l("ngIf",e.mostrarError("email","required")),s(),l("ngIf",e.mostrarError("email","email")),s(5),l("ngIf",e.mostrarError("password","required")),s(),l("ngIf",e.mostrarError("password","minlength")),s(5),l("ngIf",e.mostrarError("imagenes","required")),s(3),l("disabled",!e.captchaValido))},dependencies:[he,S,I,P,k,w,F,A,N,M],styles:['@charset "UTF-8";form[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:30px;border:2px solid #007bff;border-radius:15px;background-color:#e0f7fa;box-shadow:0 4px 20px #0003}label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px;display:block;color:#007bff}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #007bff;border-radius:6px;font-size:16px;margin-bottom:15px;box-sizing:border-box;transition:border-color .3s,background-color .3s;background-color:#f1f1f1}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus, input[type=email][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:#0056b3;outline:none;background-color:#fff}input[type=file][_ngcontent-%COMP%]{margin-bottom:10px}div[ngIf][_ngcontent-%COMP%]{color:#dc3545;font-size:.9em;margin-top:-10px;margin-bottom:10px}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:12px 15px;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s,transform .2s;width:100%;font-size:1em}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-2px)}div[_ngcontent-%COMP%]{margin-bottom:20px}']})};var h=z(H());function ut(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function gt(n,i){n&1&&(r(0,"div"),a(1,"Solo se permiten letras."),t())}function ft(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function vt(n,i){n&1&&(r(0,"div"),a(1,"Solo se permiten letras."),t())}function bt(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function ht(n,i){n&1&&(r(0,"div"),a(1,"La edad m\xEDnima es 18 a\xF1os."),t())}function _t(n,i){n&1&&(r(0,"div"),a(1,"La edad m\xE1xima es 99 a\xF1os."),t())}function Et(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function xt(n,i){n&1&&(r(0,"div"),a(1,"El DNI debe tener 8 d\xEDgitos."),t())}function Ct(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function yt(n,i){n&1&&(r(0,"div"),a(1,"Formato de email inv\xE1lido."),t())}function St(n,i){n&1&&(r(0,"div"),a(1,"Este campo es obligatorio."),t())}function Pt(n,i){n&1&&(r(0,"div"),a(1,"La contrase\xF1a debe tener al menos 6 caracteres."),t())}function wt(n,i){n&1&&(r(0,"div"),a(1,"Debes subir al menos 1 imagen."),t())}var K=class n{constructor(i,o,e){this.fb=i;this.authService=o;this.router=e;this.adminForm=this.fb.group({nombre:["",[d.required,d.pattern("^[a-zA-Z ]*$")]],apellido:["",[d.required,d.pattern("^[a-zA-Z ]*$")]],edad:["",[d.required,d.min(18),d.max(99)]],dni:["",[d.required,d.pattern("^[0-9]{8,8}$")]],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],imagenes:this.fb.array([],[d.required])})}adminForm;allowedFileTypes=["image/jpeg","image/png","image/gif"];maxFileSize=2*1024*1024;captchaValido=!1;agregarImagen(i){let o=i.target,e=this.adminForm.get("imagenes");if(o.files&&o.files.length>0){let m=o.files[0];if(!this.allowedFileTypes.includes(m.type)){h.default.fire("Tipo de archivo no v\xE1lido","Por favor, sube una imagen en formato JPEG, PNG o GIF.","error");return}if(m.size>this.maxFileSize){h.default.fire("Tama\xF1o de archivo excedido","El tama\xF1o m\xE1ximo permitido es de 2 MB.","error");return}e.length<1?e.push(this.fb.control(m)):h.default.fire("Error","Solo se permite subir una imagen.","error")}}uploadImage(i){return b(this,null,function*(){try{return yield this.authService.uploadImage(i)}catch(o){throw console.error("Error al subir la imagen:",o),h.default.fire("Error al subir la imagen","Hubo un problema al subir la imagen. Por favor, intenta de nuevo.","error"),o}})}mostrarError(i,o){let e=this.adminForm.get(i);return e?e.hasError(o)&&(e.dirty||e.touched):!1}guardarAdmin(){return b(this,null,function*(){if(this.adminForm.valid&&this.captchaValido){let i=this.adminForm.get("imagenes");if(i.length!==1){h.default.fire("Error","Debes subir exactamente 1 imagen.","error");return}let o=i.at(0).value;h.default.fire({title:"Cargando...",text:"Por favor, espera un momento.",allowOutsideClick:!1,didOpen:()=>{h.default.showLoading()}});try{let e=yield this.uploadImage(o),m=O(y({},this.adminForm.value),{role:"administrador",imageUrl:e});delete m.imagenes,yield this.authService.registerUser(m.email,m.password,m,"administrador"),h.default.fire("Registro exitoso","El administrador ha sido registrado correctamente","success"),this.adminForm.reset(),this.router.navigate(["/bienvenida"])}catch{h.default.fire("Error","Ha ocurrido un error durante el registro","error")}finally{h.default.close()}}else h.default.fire("Formulario inv\xE1lido","Por favor, completa todos los campos","warning")})}static \u0275fac=function(o){return new(o||n)(f(D),f(C),f(x))};static \u0275cmp=E({type:n,selectors:[["app-registro-admin"]],decls:47,vars:16,consts:[[3,"ngSubmit","formGroup"],["for","nombre"],["id","nombre","formControlName","nombre"],[4,"ngIf"],["for","apellido"],["id","apellido","formControlName","apellido"],["for","edad"],["id","edad","type","number","formControlName","edad"],["for","dni"],["id","dni","formControlName","dni"],["for","email"],["id","email","formControlName","email"],["for","password"],["id","password","type","password","formControlName","password"],["for","imagen"],["type","file",3,"change"],[1,"captcha-container"],["appCaptcha","","placeholder","Ingrese el c\xF3digo",1,"form-control",3,"captchaValido"],["type","submit",3,"disabled"]],template:function(o,e){o&1&&(r(0,"form",0),g("ngSubmit",function(){return e.guardarAdmin()}),r(1,"div")(2,"label",1),a(3,"Nombre:"),t(),c(4,"input",2),u(5,ut,2,0,"div",3)(6,gt,2,0,"div",3),t(),r(7,"div")(8,"label",4),a(9,"Apellido:"),t(),c(10,"input",5),u(11,ft,2,0,"div",3)(12,vt,2,0,"div",3),t(),r(13,"div")(14,"label",6),a(15,"Edad:"),t(),c(16,"input",7),u(17,bt,2,0,"div",3)(18,ht,2,0,"div",3)(19,_t,2,0,"div",3),t(),r(20,"div")(21,"label",8),a(22,"DNI:"),t(),c(23,"input",9),u(24,Et,2,0,"div",3)(25,xt,2,0,"div",3),t(),r(26,"div")(27,"label",10),a(28,"Email:"),t(),c(29,"input",11),u(30,Ct,2,0,"div",3)(31,yt,2,0,"div",3),t(),r(32,"div")(33,"label",12),a(34,"Contrase\xF1a:"),t(),c(35,"input",13),u(36,St,2,0,"div",3)(37,Pt,2,0,"div",3),t(),r(38,"div")(39,"label",14),a(40,"Sube 1 imagen:"),t(),r(41,"input",15),g("change",function(p){return e.agregarImagen(p)}),t(),u(42,wt,2,0,"div",3),t(),r(43,"div",16)(44,"input",17),g("captchaValido",function(p){return e.captchaValido=p}),t()(),r(45,"button",18),a(46,"Registrar Administrador"),t()()),o&2&&(l("formGroup",e.adminForm),s(5),l("ngIf",e.mostrarError("nombre","required")),s(),l("ngIf",e.mostrarError("nombre","pattern")),s(5),l("ngIf",e.mostrarError("apellido","required")),s(),l("ngIf",e.mostrarError("apellido","pattern")),s(5),l("ngIf",e.mostrarError("edad","required")),s(),l("ngIf",e.mostrarError("edad","min")),s(),l("ngIf",e.mostrarError("edad","max")),s(5),l("ngIf",e.mostrarError("dni","required")),s(),l("ngIf",e.mostrarError("dni","pattern")),s(5),l("ngIf",e.mostrarError("email","required")),s(),l("ngIf",e.mostrarError("email","email")),s(5),l("ngIf",e.mostrarError("password","required")),s(),l("ngIf",e.mostrarError("password","minlength")),s(5),l("ngIf",e.mostrarError("imagenes","required")),s(3),l("disabled",!e.captchaValido))},dependencies:[S,I,P,k,w,F,A,N,M],styles:['@charset "UTF-8";form[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:30px;border:1px solid #007bff;border-radius:10px;background-color:#e0f7fa;box-shadow:0 4px 20px #0003}label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:8px;display:block;color:#007bff}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #007bff;border-radius:6px;margin-bottom:15px;box-sizing:border-box;transition:border-color .3s,background-color .3s;background-color:#f1f1f1}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus, input[type=email][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus{border-color:#0056b3;outline:none;background-color:#fff}div[ngIf][_ngcontent-%COMP%]{color:#dc3545;font-size:.9em;margin-top:-10px;margin-bottom:10px}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:12px 15px;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s,transform .2s;width:100%;font-size:1em}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-2px)}input[type=text][_ngcontent-%COMP%]:hover, input[type=number][_ngcontent-%COMP%]:hover, input[type=email][_ngcontent-%COMP%]:hover, input[type=password][_ngcontent-%COMP%]:hover{border-color:#0056b3}']})};function It(n,i){if(n&1){let o=V();r(0,"button",2),g("click",function(){q(o);let m=L();return j(m.cambiarTipoUsuario("administrador"))}),c(1,"img",8),r(2,"span"),a(3,"Administrador"),t()()}}function Mt(n,i){n&1&&(r(0,"div")(1,"h2",9),a(2,"Registro del Especialista"),t(),c(3,"app-registro-especialista"),t())}function Rt(n,i){n&1&&(r(0,"div")(1,"h2",9),a(2,"Registro del Paciente"),t(),c(3,"app-registro-paciente"),t())}function Tt(n,i){n&1&&(r(0,"div")(1,"h2",9),a(2,"Registro del Administrador"),t(),c(3,"app-registro-admin"),t())}function Ot(n,i){if(n&1){let o=V();r(0,"div",10)(1,"span"),a(2,"\xBFYa tienes una cuenta?"),t(),r(3,"a",11),g("click",function(){q(o);let m=L();return j(m.goTo("/authentication/login"))}),a(4,"Iniciar sesi\xF3n"),t()()}}var X=class n{constructor(i,o){this.authService=i;this.router=o}tipoUsuario="paciente";esAdmin=!1;ngOnInit(){this.authService.getUser().subscribe(i=>{i&&i.role==="administrador"&&(this.esAdmin=!0)})}cambiarTipoUsuario(i){this.tipoUsuario=i}goTo(i){this.router.navigate([i])}static \u0275fac=function(o){return new(o||n)(f(C),f(x))};static \u0275cmp=E({type:n,selectors:[["app-registro"]],decls:16,vars:5,consts:[[1,"registro-titulo"],[1,"user-type-selection"],[1,"user-type-button",3,"click"],["src","logoPaciente.png","alt","Paciente"],["src","logoEspecialista.png","alt","Especialista"],["class","user-type-button",3,"click",4,"ngIf"],[4,"ngIf"],["class","text-center mt-3 cuenta-texto",4,"ngIf"],["src","logoAdministrador.png","alt","Administrador"],[1,"registro-subtitulo"],[1,"text-center","mt-3","cuenta-texto"],["id","iniciar-sesion",1,"text-decoration-none","iniciar-sesion-link",3,"click"]],template:function(o,e){o&1&&(r(0,"h2",0),a(1,"Bienvenido al Registro"),t(),r(2,"div",1)(3,"button",2),g("click",function(){return e.cambiarTipoUsuario("paciente")}),c(4,"img",3),r(5,"span"),a(6,"Paciente"),t()(),r(7,"button",2),g("click",function(){return e.cambiarTipoUsuario("especialista")}),c(8,"img",4),r(9,"span"),a(10,"Especialista"),t()(),u(11,It,4,0,"button",5),t(),u(12,Mt,4,0,"div",6)(13,Rt,4,0,"div",6)(14,Tt,4,0,"div",6)(15,Ot,5,0,"div",7)),o&2&&(s(11),l("ngIf",e.esAdmin),s(),l("ngIf",e.tipoUsuario==="especialista"),s(),l("ngIf",e.tipoUsuario==="paciente"),s(),l("ngIf",e.tipoUsuario==="administrador"),s(),l("ngIf",e.tipoUsuario!="administrador"))},dependencies:[S,W,J,K],styles:[".registro-titulo[_ngcontent-%COMP%]{text-align:center;color:#154360;font-size:1.8rem;font-weight:700}.registro-subtitulo[_ngcontent-%COMP%]{text-align:center;color:#1e8449;font-size:1.5rem;font-weight:700;margin-top:1.5rem}.user-type-selection[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1.5rem;margin-top:2rem}.user-type-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1rem;width:150px;height:200px;border:none;background-color:#f2f3f4;border-radius:8px;box-shadow:0 4px 8px #0000001a;cursor:pointer;transition:transform .2s ease,background-color .2s ease}.user-type-button[_ngcontent-%COMP%]:hover{background-color:#60db94;transform:scale(1.05)}img[_ngcontent-%COMP%]{width:80px;height:80px;margin-bottom:.5rem}span[_ngcontent-%COMP%]{font-weight:700;color:#071721;margin-top:.5rem}.cuenta-texto[_ngcontent-%COMP%]{font-size:.9rem;color:#154360;text-align:center;margin-top:1rem}.iniciar-sesion-link[_ngcontent-%COMP%]{color:#0b311b;font-weight:700;text-decoration:none;margin-left:.3rem}.iniciar-sesion-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.captcha-container[_ngcontent-%COMP%]{margin-top:15px}.captcha-label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-control[_ngcontent-%COMP%]{padding:10px;width:100%;border-radius:5px;border:1px solid #ddd}"]})};var de=z(H());var ee=class n{constructor(i,o){this.authService=i;this.router=o}userMail="";userPWD="";msjError="";Login(){this.authService.login(this.userMail,this.userPWD).then(()=>{de.default.fire({icon:"success",title:"\xA1Bienvenido!",text:"Has iniciado sesi\xF3n con \xE9xito.",timer:2e3,showConfirmButton:!1}),this.router.navigate(["/bienvenida"])}).catch(i=>{this.manejarErrores(i)})}manejarErrores(i){switch(i.code){case"auth/invalid-email":this.msjError="Email inv\xE1lido. Por favor, verifica el formato del correo.";break;case"auth/user-not-found":this.msjError="Usuario no encontrado. Por favor, revisa tus credenciales.";break;case"auth/wrong-password":this.msjError="Contrase\xF1a incorrecta. Vuelve a intentarlo.";break;case"auth/missing-password":this.msjError="Se necesita la contrase\xF1a.";break;case"auth/invalid-credential":this.msjError="Las credenciales no son v\xE1lidas.";break;default:this.msjError="Error: "+i.message;break}de.default.fire({icon:"error",title:"Error en el inicio de sesi\xF3n",text:this.msjError,showConfirmButton:!0})}goTo(i){this.router.navigate([i])}setQuickAccess(i,o){this.userMail=i,this.userPWD=o}static \u0275fac=function(o){return new(o||n)(f(C),f(x))};static \u0275cmp=E({type:n,selectors:[["app-login"]],decls:37,vars:2,consts:[[1,"overlay","d-flex","justify-content-center","align-items-center","vh-100"],[1,"card","p-4","shadow-lg",2,"width","600px","border-radius","20px"],[1,"text-center","mb-4"],[1,"quick-access-container","text-center","mb-3"],["type","button",1,"btn","quick-access-btn",3,"click"],["src","https://firebasestorage.googleapis.com/v0/b/prog2-c4fdc.appspot.com/o/images%2Fadmin1.jpeg?alt=media&token=a57cbd55-f2e1-4757-af16-eff8bdafa8bb","alt","Admin",1,"profile-image"],["src","https://firebasestorage.googleapis.com/v0/b/prog2-c4fdc.appspot.com/o/images%2FprimerPaciente2.jpeg?alt=media&token=99602e1f-cbf5-4875-9578-4abed68d326e","alt","Paciente 1",1,"profile-image"],["src","https://firebasestorage.googleapis.com/v0/b/prog2-c4fdc.appspot.com/o/images%2FsegundoPaciente2.jpeg?alt=media&token=5810d4e8-b42d-4700-92f7-9c2b0555f6e5","alt","Paciente 2",1,"profile-image"],["src","https://firebasestorage.googleapis.com/v0/b/prog2-c4fdc.appspot.com/o/images%2FtercerPaciente2.jpeg?alt=media&token=2db42b31-2a1c-4089-9cbb-83e135bde901","alt","Paciente 3",1,"profile-image"],["src","https://firebasestorage.googleapis.com/v0/b/prog2-c4fdc.appspot.com/o/images%2Fespecialista1.jpeg?alt=media&token=bf238ea3-3895-4bce-8c26-f4d0230180ec","alt","Especialista 1",1,"profile-image"],["src","https://firebasestorage.googleapis.com/v0/b/prog2-c4fdc.appspot.com/o/images%2Fespecialista2.jpeg?alt=media&token=6f0acb41-2667-4bf3-b506-c2a4da7a2e21","alt","Especialista 2",1,"profile-image"],[3,"ngSubmit"],[1,"form-group"],["for","nombre"],["type","email","id","nombre","name","email","placeholder","Ingrese su email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","clave"],["type","password","id","clave","name","password","placeholder","Ingrese su contrase\xF1a","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-center","mb-3"],["id","olvido-contrasena",1,"text-decoration-none"],["type","submit",1,"btn","btn-warning","btn-block","rounded-pill","font-weight-bold"],[1,"text-center","mt-3"],["id","registrarse",1,"text-decoration-none",3,"click"]],template:function(o,e){o&1&&(r(0,"div",0)(1,"div",1)(2,"h1",2),a(3,"Inicio Sesi\xF3n"),t(),r(4,"div",3)(5,"button",4),g("click",function(){return e.setQuickAccess("celusal704@gmail.com","123456")}),c(6,"img",5),t(),r(7,"button",4),g("click",function(){return e.setQuickAccess("demaiojuanpablo05@gmail.com","123456")}),c(8,"img",6),t(),r(9,"button",4),g("click",function(){return e.setQuickAccess("whole.bovid.bmlb@flashpost.net","123456")}),c(10,"img",7),t(),r(11,"button",4),g("click",function(){return e.setQuickAccess("surprising.amphibian.jhgc@flashpost.net","123456")}),c(12,"img",8),t(),r(13,"button",4),g("click",function(){return e.setQuickAccess("demaiojuanpablo2005@gmail.com","123456")}),c(14,"img",9),t(),r(15,"button",4),g("click",function(){return e.setQuickAccess("integral.pig.qzgk@flashpost.net","123456")}),c(16,"img",10),t()(),r(17,"form",11),g("ngSubmit",function(){return e.Login()}),r(18,"div",12)(19,"label",13),a(20,"Email"),t(),r(21,"input",14),re("ngModelChange",function(p){return ne(e.userMail,p)||(e.userMail=p),p}),t()(),r(22,"div",12)(23,"label",15),a(24,"Contrase\xF1a"),t(),r(25,"input",16),re("ngModelChange",function(p){return ne(e.userPWD,p)||(e.userPWD=p),p}),t()(),r(26,"div",17)(27,"a",18),a(28,"\xBFOlvid\xF3 su contrase\xF1a?"),t()(),r(29,"button",19),a(30,"Ingresar"),t(),r(31,"div",20)(32,"div")(33,"span"),a(34,"\xBFNo tienes una cuenta?"),t(),r(35,"a",21),g("click",function(){return e.goTo("/authentication/registro")}),a(36,"Registrarse"),t()()()()()()),o&2&&(s(21),ie("ngModel",e.userMail),s(4),ie("ngModel",e.userPWD))},dependencies:[I,P,w,F,Fe,we,Pe],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Oswald,sans-serif;background-color:#2a2a2a}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(#000000b3,#000000b3);display:flex;justify-content:center;align-items:center;z-index:-1}.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#b7f4f9e6;border:none;box-shadow:0 4px 8px #0003;border-radius:20px;padding:40px;width:600px;height:auto;max-width:90%;min-height:600px;margin:20px auto;text-align:center}h1[_ngcontent-%COMP%]{color:#333;text-align:center;margin-bottom:25px}.form-control[_ngcontent-%COMP%]{padding:15px;background-color:#fff;border-radius:10px;border:2px solid #ddd;transition:all .3s ease;text-align:center;width:250px}.form-control[_ngcontent-%COMP%]:focus{border-color:#fc0;box-shadow:0 0 8px #ffcc0080}label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700;display:block}#registrarse[_ngcontent-%COMP%], #olvido-contrasena[_ngcontent-%COMP%]{margin:5px 0;font-weight:700;color:#000;text-decoration:none}#registrarse[_ngcontent-%COMP%]:hover, #olvido-contrasena[_ngcontent-%COMP%]:hover{color:#fc0;cursor:pointer}span[_ngcontent-%COMP%]{font-weight:700}button[_ngcontent-%COMP%]{background-color:#fc0;border-radius:50px;padding:10px 20px;font-weight:700;border:none;transition:all .3s ease;box-shadow:0 4px 6px #0003;margin:10px}button[_ngcontent-%COMP%]:hover{background-color:#ffcc0083;transform:scale(1.05);box-shadow:0 6px 8px #0000004d}button[_ngcontent-%COMP%]:focus{outline:none}.quick-access-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:20px;width:100%;flex-wrap:wrap}.quick-access-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#fff;color:#333;border:2px solid #ddd;border-radius:10px;padding:8px;text-decoration:none;margin:5px;width:80px;transition:all .3s ease;font-size:.9em}.quick-access-btn[_ngcontent-%COMP%]:hover{background-color:#fc0;color:#fff}.quick-access-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:33px;border-radius:50%}']})};var kt=[{path:"registro",component:X},{path:"login",component:ee}],te=class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=U({type:n});static \u0275inj=G({imports:[oe.forChild(kt),oe]})};var Re=class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=U({type:n});static \u0275inj=G({imports:[_e,Me,Ie,te]})};export{Y as a,X as b,Re as c};
