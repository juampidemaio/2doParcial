import{a as y,b as d,c as S,d as P,e as fe,f as ve,g as w,h as k,i as A,j as N,n as be,o as q,p as _e,q as he,r as B,s as Ee}from"./chunk-ID6MRWOA.js";import{A as f,Aa as x,B as ce,E as u,G as l,I as r,J as e,K as c,L,M as g,N as j,O as o,Q as pe,S as ee,T as te,U as ie,a as T,b as O,d as z,e as F,fa as ue,ga as C,ha as ge,ka as E,m as G,ma as ne,p as h,q as U,r as le,t as D,u as V,w as me,x as de,z as s}from"./chunk-VE5QODOT.js";var _=z(B());var M=class i{constructor(n,a){this.el=n;this.renderer=a}captchaCode="";captchaValido=new me;ngOnInit(){this.generarCaptcha()}generarCaptcha(){this.captchaCode=Math.random().toString(36).substring(2,8);let n=this.renderer.createText(`Captcha: ${this.captchaCode}`),a=this.renderer.createElement("label");this.renderer.addClass(a,"captcha-label"),this.renderer.appendChild(a,n),this.renderer.insertBefore(this.el.nativeElement.parentNode,a,this.el.nativeElement)}onInput(n){let a=n.trim()===this.captchaCode;this.captchaValido.emit(a)}static \u0275fac=function(a){return new(a||i)(f(de),f(ce))};static \u0275dir=le({type:i,selectors:[["","appCaptcha",""]],hostBindings:function(a,t){a&1&&g("input",function(p){return t.onInput(p.target.value)})},outputs:{captchaValido:"captchaValido"}})};function Ce(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function ye(i,n){i&1&&(r(0,"div"),o(1,"Solo se permiten letras."),e())}function Se(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function Pe(i,n){i&1&&(r(0,"div"),o(1,"Solo se permiten letras."),e())}function we(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function Me(i,n){i&1&&(r(0,"div"),o(1,"La edad m\xEDnima es 18 a\xF1os."),e())}function Fe(i,n){i&1&&(r(0,"div"),o(1,"La edad m\xE1xima es 99 a\xF1os."),e())}function Ie(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function Re(i,n){i&1&&(r(0,"div"),o(1,"El DNI debe tener 8 d\xEDgitos."),e())}function Te(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function Oe(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function ke(i,n){i&1&&(r(0,"div"),o(1,"Formato de email inv\xE1lido."),e())}function Ae(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function Ne(i,n){i&1&&(r(0,"div"),o(1,"La contrase\xF1a debe tener al menos 6 caracteres."),e())}function qe(i,n){i&1&&(r(0,"div"),o(1,"Debes subir exactamente 2 im\xE1genes."),e())}var H=class i{constructor(n,a,t){this.fb=n;this.authService=a;this.router=t;this.pacienteForm=this.fb.group({nombre:["",[d.required,d.pattern("^[a-zA-Z ]*$")]],apellido:["",[d.required,d.pattern("^[a-zA-Z ]*$")]],edad:["",[d.required,d.min(1),d.max(123)]],dni:["",[d.required,d.pattern("^[0-9]{8,8}$")]],obraSocial:["",d.required],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],imagenes:this.fb.array([],[d.required])})}pacienteForm;allowedFileTypes=["image/jpeg","image/png","image/gif"];maxFileSize=2*1024*1024;captchaValido=!1;agregarImagen(n){let a=n.target,t=this.pacienteForm.get("imagenes");if(a.files&&a.files.length>0){let m=Array.from(a.files);for(let p of m){if(!this.allowedFileTypes.includes(p.type)){_.default.fire("Tipo de archivo no v\xE1lido","Solo se permiten im\xE1genes en formato JPEG, PNG o GIF.","error");return}if(p.size>this.maxFileSize){_.default.fire("Tama\xF1o de archivo excedido","El tama\xF1o m\xE1ximo permitido es de 2 MB por archivo.","error");return}}if(t.length>=2){_.default.fire("Error","Solo puedes subir hasta 2 im\xE1genes.","error");return}m.forEach(p=>{t.length<2&&t.push(this.fb.control(p))})}}mostrarError(n,a){let t=this.pacienteForm.get(n);return t?t.hasError(a)&&(t.dirty||t.touched):!1}guardarPaciente(){return F(this,null,function*(){if(this.pacienteForm.valid&&this.captchaValido){let n=this.pacienteForm.get("imagenes");if(n.length!==2){_.default.fire("Error","Debes subir exactamente 2 im\xE1genes.","error");return}_.default.fire({title:"Cargando...",text:"Por favor, espera un momento.",allowOutsideClick:!1,didOpen:()=>{_.default.showLoading()}});try{let a=[];for(let m=0;m<n.length;m++){let p=n.at(m).value,R=yield this.authService.uploadImage(p);a.push(R)}let t=O(T({},this.pacienteForm.value),{role:"paciente",imagenes:a});yield this.authService.registerUser(t.email,t.password,t,"paciente"),_.default.fire("Registro exitoso","El paciente ha sido registrado correctamente","success"),this.pacienteForm.reset(),this.router.navigate(["/bienvenida"])}catch(a){_.default.fire("Error",`Ha ocurrido un error durante el registro: ${a}`,"error")}finally{_.default.close()}}else _.default.fire("Formulario inv\xE1lido","Por favor, completa todos los campos correctamente.","warning")})}static \u0275fac=function(a){return new(a||i)(f(q),f(x),f(E))};static \u0275cmp=h({type:i,selectors:[["app-registro-paciente"]],decls:52,vars:17,consts:[[3,"ngSubmit","formGroup"],["for","nombre"],["id","nombre","formControlName","nombre"],[4,"ngIf"],["for","apellido"],["id","apellido","formControlName","apellido"],["for","edad"],["id","edad","type","number","formControlName","edad"],["for","dni"],["id","dni","formControlName","dni"],["for","obraSocial"],["id","obraSocial","formControlName","obraSocial"],["for","email"],["id","email","formControlName","email"],["for","password"],["id","password","type","password","formControlName","password"],["for","imagenes"],["type","file","multiple","",3,"change"],[1,"captcha-container"],["appCaptcha","","placeholder","Ingrese el c\xF3digo",1,"form-control",3,"captchaValido"],["type","submit",3,"disabled"]],template:function(a,t){a&1&&(r(0,"form",0),g("ngSubmit",function(){return t.guardarPaciente()}),r(1,"div")(2,"label",1),o(3,"Nombre:"),e(),c(4,"input",2),u(5,Ce,2,0,"div",3)(6,ye,2,0,"div",3),e(),r(7,"div")(8,"label",4),o(9,"Apellido:"),e(),c(10,"input",5),u(11,Se,2,0,"div",3)(12,Pe,2,0,"div",3),e(),r(13,"div")(14,"label",6),o(15,"Edad:"),e(),c(16,"input",7),u(17,we,2,0,"div",3)(18,Me,2,0,"div",3)(19,Fe,2,0,"div",3),e(),r(20,"div")(21,"label",8),o(22,"DNI:"),e(),c(23,"input",9),u(24,Ie,2,0,"div",3)(25,Re,2,0,"div",3),e(),r(26,"div")(27,"label",10),o(28,"Obra Social:"),e(),c(29,"input",11),u(30,Te,2,0,"div",3),e(),r(31,"div")(32,"label",12),o(33,"Email:"),e(),c(34,"input",13),u(35,Oe,2,0,"div",3)(36,ke,2,0,"div",3),e(),r(37,"div")(38,"label",14),o(39,"Contrase\xF1a:"),e(),c(40,"input",15),u(41,Ae,2,0,"div",3)(42,Ne,2,0,"div",3),e(),r(43,"div")(44,"label",16),o(45,"Sube exactamente 2 im\xE1genes:"),e(),r(46,"input",17),g("change",function(p){return t.agregarImagen(p)}),e(),u(47,qe,2,0,"div",3),e(),r(48,"div",18)(49,"input",19),g("captchaValido",function(p){return t.captchaValido=p}),e()(),r(50,"button",20),o(51,"Registrar Paciente "),e()()),a&2&&(l("formGroup",t.pacienteForm),s(5),l("ngIf",t.mostrarError("nombre","required")),s(),l("ngIf",t.mostrarError("nombre","pattern")),s(5),l("ngIf",t.mostrarError("apellido","required")),s(),l("ngIf",t.mostrarError("apellido","pattern")),s(5),l("ngIf",t.mostrarError("edad","required")),s(),l("ngIf",t.mostrarError("edad","min")),s(),l("ngIf",t.mostrarError("edad","max")),s(5),l("ngIf",t.mostrarError("dni","required")),s(),l("ngIf",t.mostrarError("dni","pattern")),s(5),l("ngIf",t.mostrarError("obraSocial","required")),s(5),l("ngIf",t.mostrarError("email","required")),s(),l("ngIf",t.mostrarError("email","email")),s(5),l("ngIf",t.mostrarError("password","required")),s(),l("ngIf",t.mostrarError("password","minlength")),s(5),l("ngIf",t.mostrarError("imagenes","required")),s(3),l("disabled",!t.captchaValido))},dependencies:[C,w,y,k,S,P,A,N,M],styles:['@charset "UTF-8";form[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:30px;border:1px solid #007bff;border-radius:10px;background-color:#e0f7fa;box-shadow:0 4px 20px #0003}label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:8px;display:block;color:#007bff}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #007bff;border-radius:6px;margin-bottom:15px;box-sizing:border-box;transition:border-color .3s,background-color .3s;background-color:#f1f1f1}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus, input[type=email][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus{border-color:#0056b3;outline:none;background-color:#fff}div[ngIf][_ngcontent-%COMP%]{color:#dc3545;font-size:.9em;margin-top:-10px;margin-bottom:10px}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:12px 15px;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s,transform .2s;width:100%;font-size:1em}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-2px)}input[type=text][_ngcontent-%COMP%]:hover, input[type=number][_ngcontent-%COMP%]:hover, input[type=email][_ngcontent-%COMP%]:hover, input[type=password][_ngcontent-%COMP%]:hover{border-color:#0056b3}div[_ngcontent-%COMP%]{margin-bottom:15px}']})};var v=z(B());function Ve(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function Le(i,n){i&1&&(r(0,"div"),o(1,"Solo se permiten letras."),e())}function je(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function ze(i,n){i&1&&(r(0,"div"),o(1,"Solo se permiten letras."),e())}function Ge(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function Ue(i,n){i&1&&(r(0,"div"),o(1,"La edad m\xEDnima es 18 a\xF1os."),e())}function Be(i,n){i&1&&(r(0,"div"),o(1,"La edad m\xE1xima es 99 a\xF1os."),e())}function He(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function We(i,n){i&1&&(r(0,"div"),o(1,"El DNI debe tener 8 d\xEDgitos."),e())}function $e(i,n){if(i&1){let a=L();r(0,"div")(1,"input",23),g("change",function(m){D(a);let p=j();return V(p.onEspecialidadChange(m))}),e(),o(2),e()}if(i&2){let a=n.$implicit;s(),l("value",a),s(),pe(" ",a," ")}}function Qe(i,n){i&1&&(r(0,"div")(1,"p"),o(2,"No hay especialidades disponibles. Puedes agregar una nueva a continuaci\xF3n:"),e()())}function Ze(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function Ye(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio si no hay especialidades disponibles."),e())}function Je(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function Ke(i,n){i&1&&(r(0,"div"),o(1,"El formato del email es inv\xE1lido."),e())}function Xe(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function et(i,n){i&1&&(r(0,"div"),o(1,"La contrase\xF1a debe tener al menos 6 caracteres."),e())}function tt(i,n){i&1&&(r(0,"div"),o(1,"Se debe cargar una imagen."),e())}var Z=class i{constructor(n,a,t,m){this.fb=n;this.authService=a;this.router=t;this.especialidadService=m;this.especialistaForm=this.fb.group({nombre:["",[d.required,d.pattern("^[a-zA-Z ]*$")]],apellido:["",[d.required,d.pattern("^[a-zA-Z ]*$")]],edad:["",[d.required,d.min(18),d.max(99)]],dni:["",[d.required,d.pattern("^[0-9]{8}$")]],especialidades:this.fb.array([],d.required),nuevaEspecialidad:[""],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],imagenes:this.fb.array([],d.required)})}especialistaForm;allowedFileTypes=["image/jpeg","image/png","image/gif"];maxFileSize=2*1024*1024;especialidades=[];captchaValido=!1;ngOnInit(){this.loadEspecialidades()}loadEspecialidades(){this.especialidadService.getEspecialidades().then(n=>{this.especialidades=n.map(a=>a.nombre)})}onEspecialidadChange(n){let a=this.especialistaForm.get("especialidades");if(n.target.checked)a.push(this.fb.control(n.target.value));else{let t=a.controls.findIndex(m=>m.value===n.target.value);t>=0&&a.removeAt(t)}}agregarNuevaEspecialidad(){let n=this.especialistaForm.get("nuevaEspecialidad")?.value?.trim();if(!n){v.default.fire("Advertencia","Ingresa una nueva especialidad antes de agregarla.","warning");return}if(this.especialidades.includes(n)){v.default.fire("Advertencia","La especialidad ya existe en la lista.","warning");return}this.especialidadService.addEspecialidad(n).then(()=>{v.default.fire("\xC9xito","Nueva especialidad agregada correctamente.","success"),this.loadEspecialidades(),this.especialistaForm.get("nuevaEspecialidad")?.reset()}).catch(a=>{v.default.fire("Error","No se pudo agregar la especialidad.","error")})}agregarImagen(n){let a=n.target,t=this.especialistaForm.get("imagenes");if(a.files&&a.files.length>0){let m=a.files[0];if(!this.allowedFileTypes.includes(m.type)){v.default.fire("Tipo de archivo no v\xE1lido","Por favor, sube una imagen en formato JPEG, PNG o GIF.","error");return}if(m.size>this.maxFileSize){v.default.fire("Tama\xF1o de archivo excedido","El tama\xF1o m\xE1ximo permitido es de 2 MB.","error");return}t.clear(),t.push(this.fb.control(m))}}mostrarError(n,a){let t=this.especialistaForm.get(n);return t?t.hasError(a)&&(t.dirty||t.touched):!1}guardarEspecialista(){return F(this,null,function*(){if(this.especialistaForm.valid&&this.captchaValido){let n=this.especialistaForm.get("especialidades"),a=this.especialistaForm.get("nuevaEspecialidad")?.value;if(n.length===0&&a)n.push(this.fb.control(a));else if(n.length===0){v.default.fire("Advertencia","Debes seleccionar al menos una especialidad o agregar una nueva.","warning");return}v.default.fire({title:"Cargando...",text:"Por favor, espera un momento.",allowOutsideClick:!1}),v.default.showLoading();let m=this.especialistaForm.get("imagenes").at(0).value;try{let p=yield this.authService.uploadImage(m),R=O(T({},this.especialistaForm.value),{especialidades:n.value,role:"especialista",imageUrl:p});delete R.imagenes,yield this.authService.registerUser(R.email,R.password,R,"especialista"),v.default.fire("Registro exitoso","El especialista ha sido registrado correctamente","success"),this.router.navigate(["/bienvenida"])}catch(p){v.default.fire("Error",`Ha ocurrido un error durante la subida de la imagen: ${p}`,"error")}finally{v.default.close()}}else v.default.fire("Formulario inv\xE1lido","Por favor, completa todos los campos","warning")})}static \u0275fac=function(a){return new(a||i)(f(q),f(x),f(E),f(Ee))};static \u0275cmp=h({type:i,selectors:[["app-registro-especialista"]],decls:60,vars:20,consts:[[3,"ngSubmit","formGroup"],["for","nombre"],["id","nombre","formControlName","nombre"],[4,"ngIf"],["for","apellido"],["id","apellido","formControlName","apellido"],["for","edad"],["id","edad","type","number","formControlName","edad"],["for","dni"],["id","dni","formControlName","dni"],[4,"ngFor","ngForOf"],["for","nuevaEspecialidad"],["id","nuevaEspecialidad","formControlName","nuevaEspecialidad","placeholder","Si no est\xE1 en la lista, ingr\xE9sela aqu\xED"],["type","button",3,"click"],["for","email"],["id","email","formControlName","email"],["for","password"],["id","password","type","password","formControlName","password"],["for","imagenes"],["type","file",3,"change"],[1,"captcha-container"],["appCaptcha","","placeholder","Ingrese el c\xF3digo",1,"form-control",3,"captchaValido"],["type","submit",3,"disabled"],["type","checkbox",3,"change","value"]],template:function(a,t){a&1&&(r(0,"form",0),g("ngSubmit",function(){return t.guardarEspecialista()}),r(1,"div")(2,"label",1),o(3,"Nombre:"),e(),c(4,"input",2),u(5,Ve,2,0,"div",3)(6,Le,2,0,"div",3),e(),r(7,"div")(8,"label",4),o(9,"Apellido:"),e(),c(10,"input",5),u(11,je,2,0,"div",3)(12,ze,2,0,"div",3),e(),r(13,"div")(14,"label",6),o(15,"Edad:"),e(),c(16,"input",7),u(17,Ge,2,0,"div",3)(18,Ue,2,0,"div",3)(19,Be,2,0,"div",3),e(),r(20,"div")(21,"label",8),o(22,"DNI:"),e(),c(23,"input",9),u(24,He,2,0,"div",3)(25,We,2,0,"div",3),e(),r(26,"div")(27,"label"),o(28,"Especialidades:"),e(),u(29,$e,3,2,"div",10)(30,Qe,3,0,"div",3)(31,Ze,2,0,"div",3),e(),r(32,"div")(33,"label",11),o(34,"Nueva Especialidad:"),e(),c(35,"input",12),r(36,"button",13),g("click",function(){return t.agregarNuevaEspecialidad()}),o(37,"Agregar Nueva Especialidad"),e(),u(38,Ye,2,0,"div",3),e(),r(39,"div")(40,"label",14),o(41,"Email:"),e(),c(42,"input",15),u(43,Je,2,0,"div",3)(44,Ke,2,0,"div",3),e(),r(45,"div")(46,"label",16),o(47,"Contrase\xF1a:"),e(),c(48,"input",17),u(49,Xe,2,0,"div",3)(50,et,2,0,"div",3),e(),r(51,"div")(52,"label",18),o(53,"Im\xE1genes:"),e(),r(54,"input",19),g("change",function(p){return t.agregarImagen(p)}),e(),u(55,tt,2,0,"div",3),e(),r(56,"div",20)(57,"input",21),g("captchaValido",function(p){return t.captchaValido=p}),e()(),r(58,"button",22),o(59,"Registrar Especialista"),e()()),a&2&&(l("formGroup",t.especialistaForm),s(5),l("ngIf",t.mostrarError("nombre","required")),s(),l("ngIf",t.mostrarError("nombre","pattern")),s(5),l("ngIf",t.mostrarError("apellido","required")),s(),l("ngIf",t.mostrarError("apellido","pattern")),s(5),l("ngIf",t.mostrarError("edad","required")),s(),l("ngIf",t.mostrarError("edad","min")),s(),l("ngIf",t.mostrarError("edad","max")),s(5),l("ngIf",t.mostrarError("dni","required")),s(),l("ngIf",t.mostrarError("dni","pattern")),s(4),l("ngForOf",t.especialidades),s(),l("ngIf",t.especialidades.length===0),s(),l("ngIf",t.mostrarError("especialidades","required")),s(7),l("ngIf",t.mostrarError("nuevaEspecialidad","required")),s(5),l("ngIf",t.mostrarError("email","required")),s(),l("ngIf",t.mostrarError("email","email")),s(5),l("ngIf",t.mostrarError("password","required")),s(),l("ngIf",t.mostrarError("password","minlength")),s(5),l("ngIf",t.mostrarError("imagenes","required")),s(3),l("disabled",!t.captchaValido))},dependencies:[ue,C,w,y,k,S,P,A,N,M],styles:['@charset "UTF-8";form[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:30px;border:2px solid #007bff;border-radius:15px;background-color:#e0f7fa;box-shadow:0 4px 20px #0003}label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px;display:block;color:#007bff}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #007bff;border-radius:6px;font-size:16px;margin-bottom:15px;box-sizing:border-box;transition:border-color .3s,background-color .3s;background-color:#f1f1f1}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus, input[type=email][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:#0056b3;outline:none;background-color:#fff}input[type=file][_ngcontent-%COMP%]{margin-bottom:10px}div[ngIf][_ngcontent-%COMP%]{color:#dc3545;font-size:.9em;margin-top:-10px;margin-bottom:10px}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:12px 15px;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s,transform .2s;width:100%;font-size:1em}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-2px)}div[_ngcontent-%COMP%]{margin-bottom:20px}']})};var b=z(B());function nt(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function rt(i,n){i&1&&(r(0,"div"),o(1,"Solo se permiten letras."),e())}function ot(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function at(i,n){i&1&&(r(0,"div"),o(1,"Solo se permiten letras."),e())}function st(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function lt(i,n){i&1&&(r(0,"div"),o(1,"La edad m\xEDnima es 18 a\xF1os."),e())}function mt(i,n){i&1&&(r(0,"div"),o(1,"La edad m\xE1xima es 99 a\xF1os."),e())}function dt(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function ct(i,n){i&1&&(r(0,"div"),o(1,"El DNI debe tener 8 d\xEDgitos."),e())}function pt(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function ut(i,n){i&1&&(r(0,"div"),o(1,"Formato de email inv\xE1lido."),e())}function gt(i,n){i&1&&(r(0,"div"),o(1,"Este campo es obligatorio."),e())}function ft(i,n){i&1&&(r(0,"div"),o(1,"La contrase\xF1a debe tener al menos 6 caracteres."),e())}function vt(i,n){i&1&&(r(0,"div"),o(1,"Debes subir al menos 1 imagen."),e())}var Y=class i{constructor(n,a,t){this.fb=n;this.authService=a;this.router=t;this.adminForm=this.fb.group({nombre:["",[d.required,d.pattern("^[a-zA-Z ]*$")]],apellido:["",[d.required,d.pattern("^[a-zA-Z ]*$")]],edad:["",[d.required,d.min(18),d.max(99)]],dni:["",[d.required,d.pattern("^[0-9]{8,8}$")]],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],imagenes:this.fb.array([],[d.required])})}adminForm;allowedFileTypes=["image/jpeg","image/png","image/gif"];maxFileSize=2*1024*1024;captchaValido=!1;agregarImagen(n){let a=n.target,t=this.adminForm.get("imagenes");if(a.files&&a.files.length>0){let m=a.files[0];if(!this.allowedFileTypes.includes(m.type)){b.default.fire("Tipo de archivo no v\xE1lido","Por favor, sube una imagen en formato JPEG, PNG o GIF.","error");return}if(m.size>this.maxFileSize){b.default.fire("Tama\xF1o de archivo excedido","El tama\xF1o m\xE1ximo permitido es de 2 MB.","error");return}t.length<1?t.push(this.fb.control(m)):b.default.fire("Error","Solo se permite subir una imagen.","error")}}uploadImage(n){return F(this,null,function*(){try{return yield this.authService.uploadImage(n)}catch(a){throw console.error("Error al subir la imagen:",a),b.default.fire("Error al subir la imagen","Hubo un problema al subir la imagen. Por favor, intenta de nuevo.","error"),a}})}mostrarError(n,a){let t=this.adminForm.get(n);return t?t.hasError(a)&&(t.dirty||t.touched):!1}guardarAdmin(){return F(this,null,function*(){if(this.adminForm.valid&&this.captchaValido){let n=this.adminForm.get("imagenes");if(n.length!==1){b.default.fire("Error","Debes subir exactamente 1 imagen.","error");return}let a=n.at(0).value;b.default.fire({title:"Cargando...",text:"Por favor, espera un momento.",allowOutsideClick:!1,didOpen:()=>{b.default.showLoading()}});try{let t=yield this.uploadImage(a),m=O(T({},this.adminForm.value),{role:"administrador",imageUrl:t});delete m.imagenes,yield this.authService.registerUser(m.email,m.password,m,"administrador"),b.default.fire("Registro exitoso","El administrador ha sido registrado correctamente","success"),this.adminForm.reset(),this.router.navigate(["/bienvenida"])}catch{b.default.fire("Error","Ha ocurrido un error durante el registro","error")}finally{b.default.close()}}else b.default.fire("Formulario inv\xE1lido","Por favor, completa todos los campos","warning")})}static \u0275fac=function(a){return new(a||i)(f(q),f(x),f(E))};static \u0275cmp=h({type:i,selectors:[["app-registro-admin"]],decls:47,vars:16,consts:[[3,"ngSubmit","formGroup"],["for","nombre"],["id","nombre","formControlName","nombre"],[4,"ngIf"],["for","apellido"],["id","apellido","formControlName","apellido"],["for","edad"],["id","edad","type","number","formControlName","edad"],["for","dni"],["id","dni","formControlName","dni"],["for","email"],["id","email","formControlName","email"],["for","password"],["id","password","type","password","formControlName","password"],["for","imagen"],["type","file",3,"change"],[1,"captcha-container"],["appCaptcha","","placeholder","Ingrese el c\xF3digo",1,"form-control",3,"captchaValido"],["type","submit",3,"disabled"]],template:function(a,t){a&1&&(r(0,"form",0),g("ngSubmit",function(){return t.guardarAdmin()}),r(1,"div")(2,"label",1),o(3,"Nombre:"),e(),c(4,"input",2),u(5,nt,2,0,"div",3)(6,rt,2,0,"div",3),e(),r(7,"div")(8,"label",4),o(9,"Apellido:"),e(),c(10,"input",5),u(11,ot,2,0,"div",3)(12,at,2,0,"div",3),e(),r(13,"div")(14,"label",6),o(15,"Edad:"),e(),c(16,"input",7),u(17,st,2,0,"div",3)(18,lt,2,0,"div",3)(19,mt,2,0,"div",3),e(),r(20,"div")(21,"label",8),o(22,"DNI:"),e(),c(23,"input",9),u(24,dt,2,0,"div",3)(25,ct,2,0,"div",3),e(),r(26,"div")(27,"label",10),o(28,"Email:"),e(),c(29,"input",11),u(30,pt,2,0,"div",3)(31,ut,2,0,"div",3),e(),r(32,"div")(33,"label",12),o(34,"Contrase\xF1a:"),e(),c(35,"input",13),u(36,gt,2,0,"div",3)(37,ft,2,0,"div",3),e(),r(38,"div")(39,"label",14),o(40,"Sube 1 imagen:"),e(),r(41,"input",15),g("change",function(p){return t.agregarImagen(p)}),e(),u(42,vt,2,0,"div",3),e(),r(43,"div",16)(44,"input",17),g("captchaValido",function(p){return t.captchaValido=p}),e()(),r(45,"button",18),o(46,"Registrar Administrador"),e()()),a&2&&(l("formGroup",t.adminForm),s(5),l("ngIf",t.mostrarError("nombre","required")),s(),l("ngIf",t.mostrarError("nombre","pattern")),s(5),l("ngIf",t.mostrarError("apellido","required")),s(),l("ngIf",t.mostrarError("apellido","pattern")),s(5),l("ngIf",t.mostrarError("edad","required")),s(),l("ngIf",t.mostrarError("edad","min")),s(),l("ngIf",t.mostrarError("edad","max")),s(5),l("ngIf",t.mostrarError("dni","required")),s(),l("ngIf",t.mostrarError("dni","pattern")),s(5),l("ngIf",t.mostrarError("email","required")),s(),l("ngIf",t.mostrarError("email","email")),s(5),l("ngIf",t.mostrarError("password","required")),s(),l("ngIf",t.mostrarError("password","minlength")),s(5),l("ngIf",t.mostrarError("imagenes","required")),s(3),l("disabled",!t.captchaValido))},dependencies:[C,w,y,k,S,P,A,N,M],styles:['@charset "UTF-8";form[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:30px;border:1px solid #007bff;border-radius:10px;background-color:#e0f7fa;box-shadow:0 4px 20px #0003}label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:8px;display:block;color:#007bff}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #007bff;border-radius:6px;margin-bottom:15px;box-sizing:border-box;transition:border-color .3s,background-color .3s;background-color:#f1f1f1}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus, input[type=email][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus{border-color:#0056b3;outline:none;background-color:#fff}div[ngIf][_ngcontent-%COMP%]{color:#dc3545;font-size:.9em;margin-top:-10px;margin-bottom:10px}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:12px 15px;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s,transform .2s;width:100%;font-size:1em}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-2px)}input[type=text][_ngcontent-%COMP%]:hover, input[type=number][_ngcontent-%COMP%]:hover, input[type=email][_ngcontent-%COMP%]:hover, input[type=password][_ngcontent-%COMP%]:hover{border-color:#0056b3}']})};function _t(i,n){if(i&1){let a=L();r(0,"button",2),g("click",function(){D(a);let m=j();return V(m.cambiarTipoUsuario("administrador"))}),c(1,"img",8),r(2,"span"),o(3,"Administrador"),e()()}}function ht(i,n){i&1&&(r(0,"div")(1,"h2",9),o(2,"Registro del Especialista"),e(),c(3,"app-registro-especialista"),e())}function Et(i,n){i&1&&(r(0,"div")(1,"h2",9),o(2,"Registro del Paciente"),e(),c(3,"app-registro-paciente"),e())}function xt(i,n){i&1&&(r(0,"div")(1,"h2",9),o(2,"Registro del Administrador"),e(),c(3,"app-registro-admin"),e())}function Ct(i,n){if(i&1){let a=L();r(0,"div",10)(1,"span"),o(2,"\xBFYa tienes una cuenta?"),e(),r(3,"a",11),g("click",function(){D(a);let m=j();return V(m.goTo("/authentication/login"))}),o(4,"Iniciar sesi\xF3n"),e()()}}var J=class i{constructor(n,a){this.authService=n;this.router=a}tipoUsuario="paciente";esAdmin=!1;ngOnInit(){this.authService.getUser().subscribe(n=>{n&&n.role==="administrador"&&(this.esAdmin=!0)})}cambiarTipoUsuario(n){this.tipoUsuario=n}goTo(n){this.router.navigate([n])}static \u0275fac=function(a){return new(a||i)(f(x),f(E))};static \u0275cmp=h({type:i,selectors:[["app-registro"]],decls:16,vars:5,consts:[[1,"registro-titulo"],[1,"user-type-selection"],[1,"user-type-button",3,"click"],["src","logoPaciente.png","alt","Paciente"],["src","logoEspecialista.png","alt","Especialista"],["class","user-type-button",3,"click",4,"ngIf"],[4,"ngIf"],["class","text-center mt-3 cuenta-texto",4,"ngIf"],["src","logoAdministrador.png","alt","Administrador"],[1,"registro-subtitulo"],[1,"text-center","mt-3","cuenta-texto"],["id","iniciar-sesion",1,"text-decoration-none","iniciar-sesion-link",3,"click"]],template:function(a,t){a&1&&(r(0,"h2",0),o(1,"Bienvenido al Registro"),e(),r(2,"div",1)(3,"button",2),g("click",function(){return t.cambiarTipoUsuario("paciente")}),c(4,"img",3),r(5,"span"),o(6,"Paciente"),e()(),r(7,"button",2),g("click",function(){return t.cambiarTipoUsuario("especialista")}),c(8,"img",4),r(9,"span"),o(10,"Especialista"),e()(),u(11,_t,4,0,"button",5),e(),u(12,ht,4,0,"div",6)(13,Et,4,0,"div",6)(14,xt,4,0,"div",6)(15,Ct,5,0,"div",7)),a&2&&(s(11),l("ngIf",t.esAdmin),s(),l("ngIf",t.tipoUsuario==="especialista"),s(),l("ngIf",t.tipoUsuario==="paciente"),s(),l("ngIf",t.tipoUsuario==="administrador"),s(),l("ngIf",t.tipoUsuario!="administrador"))},dependencies:[C,H,Z,Y],styles:[".registro-titulo[_ngcontent-%COMP%]{text-align:center;color:#154360;font-size:1.8rem;font-weight:700}.registro-subtitulo[_ngcontent-%COMP%]{text-align:center;color:#1e8449;font-size:1.5rem;font-weight:700;margin-top:1.5rem}.user-type-selection[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1.5rem;margin-top:2rem}.user-type-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1rem;width:150px;height:200px;border:none;background-color:#f2f3f4;border-radius:8px;box-shadow:0 4px 8px #0000001a;cursor:pointer;transition:transform .2s ease,background-color .2s ease}.user-type-button[_ngcontent-%COMP%]:hover{background-color:#60db94;transform:scale(1.05)}img[_ngcontent-%COMP%]{width:80px;height:80px;margin-bottom:.5rem}span[_ngcontent-%COMP%]{font-weight:700;color:#071721;margin-top:.5rem}.cuenta-texto[_ngcontent-%COMP%]{font-size:.9rem;color:#154360;text-align:center;margin-top:1rem}.iniciar-sesion-link[_ngcontent-%COMP%]{color:#0b311b;font-weight:700;text-decoration:none;margin-left:.3rem}.iniciar-sesion-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.captcha-container[_ngcontent-%COMP%]{margin-top:15px}.captcha-label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-control[_ngcontent-%COMP%]{padding:10px;width:100%;border-radius:5px;border:1px solid #ddd}"]})};var se=z(B());var K=class i{constructor(n,a){this.authService=n;this.router=a}userMail="";userPWD="";msjError="";Login(){this.authService.login(this.userMail,this.userPWD).then(()=>{se.default.fire({icon:"success",title:"\xA1Bienvenido!",text:"Has iniciado sesi\xF3n con \xE9xito.",timer:2e3,showConfirmButton:!1}),this.router.navigate(["/bienvenida"])}).catch(n=>{this.manejarErrores(n)})}manejarErrores(n){switch(n.code){case"auth/invalid-email":this.msjError="Email inv\xE1lido. Por favor, verifica el formato del correo.";break;case"auth/user-not-found":this.msjError="Usuario no encontrado. Por favor, revisa tus credenciales.";break;case"auth/wrong-password":this.msjError="Contrase\xF1a incorrecta. Vuelve a intentarlo.";break;case"auth/missing-password":this.msjError="Se necesita la contrase\xF1a.";break;case"auth/invalid-credential":this.msjError="Las credenciales no son v\xE1lidas.";break;default:this.msjError="Error: "+n.message;break}se.default.fire({icon:"error",title:"Error en el inicio de sesi\xF3n",text:this.msjError,showConfirmButton:!0})}goTo(n){this.router.navigate([n])}setQuickAccess(n,a){this.userMail=n,this.userPWD=a}static \u0275fac=function(a){return new(a||i)(f(x),f(E))};static \u0275cmp=h({type:i,selectors:[["app-login"]],decls:37,vars:2,consts:[[1,"overlay","d-flex","justify-content-center","align-items-center","vh-100"],[1,"card","p-4","shadow-lg",2,"width","600px","border-radius","20px"],[1,"text-center","mb-4"],[1,"quick-access-container","text-center","mb-3"],["type","button",1,"btn","quick-access-btn",3,"click"],["src","https://firebasestorage.googleapis.com/v0/b/prog2-c4fdc.appspot.com/o/images%2Fimage_geahe9vdrr.png?alt=media&token=c6328029-51ed-40e4-ae36-12d2cab4c3b2","alt","Admin",1,"profile-image"],["src","ruta/a/imagen/paciente1.png","alt","Paciente 1",1,"profile-image"],["src","ruta/a/imagen/paciente2.png","alt","Paciente 2",1,"profile-image"],["src","ruta/a/imagen/paciente3.png","alt","Paciente 3",1,"profile-image"],["src","ruta/a/imagen/especialista1.png","alt","Especialista 1",1,"profile-image"],["src","https://firebasestorage.googleapis.com/v0/b/prog2-c4fdc.appspot.com/o/images%2Fespecialista2.jpeg?alt=media&token=551f6856-05df-4f9f-983b-044b32fedb80","alt","Especialista 2",1,"profile-image"],[3,"ngSubmit"],[1,"form-group"],["for","nombre"],["type","email","id","nombre","name","email","placeholder","Ingrese su email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","clave"],["type","password","id","clave","name","password","placeholder","Ingrese su contrase\xF1a","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-center","mb-3"],["id","olvido-contrasena",1,"text-decoration-none"],["type","submit",1,"btn","btn-warning","btn-block","rounded-pill","font-weight-bold"],[1,"text-center","mt-3"],["id","registrarse",1,"text-decoration-none",3,"click"]],template:function(a,t){a&1&&(r(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Inicio Sesi\xF3n"),e(),r(4,"div",3)(5,"button",4),g("click",function(){return t.setQuickAccess("celusal704@gmail.com","123456")}),c(6,"img",5),e(),r(7,"button",4),g("click",function(){return t.setQuickAccess("demaiojuanpablo05@gmail.com","123456")}),c(8,"img",6),e(),r(9,"button",4),g("click",function(){return t.setQuickAccess("paciente2@gmail.com","123456")}),c(10,"img",7),e(),r(11,"button",4),g("click",function(){return t.setQuickAccess("paciente3@gmail.com","123456")}),c(12,"img",8),e(),r(13,"button",4),g("click",function(){return t.setQuickAccess("especialista1@gmail.com","123456")}),c(14,"img",9),e(),r(15,"button",4),g("click",function(){return t.setQuickAccess("especialista2@gmail.com","123456")}),c(16,"img",10),e()(),r(17,"form",11),g("ngSubmit",function(){return t.Login()}),r(18,"div",12)(19,"label",13),o(20,"Email"),e(),r(21,"input",14),ie("ngModelChange",function(p){return te(t.userMail,p)||(t.userMail=p),p}),e()(),r(22,"div",12)(23,"label",15),o(24,"Contrase\xF1a"),e(),r(25,"input",16),ie("ngModelChange",function(p){return te(t.userPWD,p)||(t.userPWD=p),p}),e()(),r(26,"div",17)(27,"a",18),o(28,"\xBFOlvid\xF3 su contrase\xF1a?"),e()(),r(29,"button",19),o(30,"Ingresar"),e(),r(31,"div",20)(32,"div")(33,"span"),o(34,"\xBFNo tienes una cuenta?"),e(),r(35,"a",21),g("click",function(){return t.goTo("/authentication/registro")}),o(36,"Registrarse"),e()()()()()()),a&2&&(s(21),ee("ngModel",t.userMail),s(4),ee("ngModel",t.userPWD))},dependencies:[w,y,S,P,be,ve,fe],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Oswald,sans-serif;background-color:#2a2a2a}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(#000000b3,#000000b3);display:flex;justify-content:center;align-items:center;z-index:-1}.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#b7f4f9e6;border:none;box-shadow:0 4px 8px #0003;border-radius:20px;padding:40px;width:600px;height:auto;max-width:90%;min-height:600px;margin:20px auto;text-align:center}h1[_ngcontent-%COMP%]{color:#333;text-align:center;margin-bottom:25px}.form-control[_ngcontent-%COMP%]{padding:15px;background-color:#fff;border-radius:10px;border:2px solid #ddd;transition:all .3s ease;text-align:center;width:250px}.form-control[_ngcontent-%COMP%]:focus{border-color:#fc0;box-shadow:0 0 8px #ffcc0080}label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700;display:block}#registrarse[_ngcontent-%COMP%], #olvido-contrasena[_ngcontent-%COMP%]{margin:5px 0;font-weight:700;color:#000;text-decoration:none}#registrarse[_ngcontent-%COMP%]:hover, #olvido-contrasena[_ngcontent-%COMP%]:hover{color:#fc0;cursor:pointer}span[_ngcontent-%COMP%]{font-weight:700}button[_ngcontent-%COMP%]{background-color:#fc0;border-radius:50px;padding:10px 20px;font-weight:700;border:none;transition:all .3s ease;box-shadow:0 4px 6px #0003;margin:10px}button[_ngcontent-%COMP%]:hover{background-color:#ffcc0083;transform:scale(1.05);box-shadow:0 6px 8px #0000004d}button[_ngcontent-%COMP%]:focus{outline:none}.quick-access-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:20px;width:100%;flex-wrap:wrap}.quick-access-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#fff;color:#333;border:2px solid #ddd;border-radius:10px;padding:8px;text-decoration:none;margin:5px;width:80px;transition:all .3s ease;font-size:.9em}.quick-access-btn[_ngcontent-%COMP%]:hover{background-color:#fc0;color:#fff}.quick-access-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:33px;border-radius:50%}']})};var yt=[{path:"registro",component:J},{path:"login",component:K}],X=class i{static \u0275fac=function(a){return new(a||i)};static \u0275mod=U({type:i});static \u0275inj=G({imports:[ne.forChild(yt),ne]})};var xe=class i{static \u0275fac=function(a){return new(a||i)};static \u0275mod=U({type:i});static \u0275inj=G({imports:[ge,he,_e,X]})};export{J as a,xe as b};
