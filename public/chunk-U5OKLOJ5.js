import{a as j,b as le,c as ZN,d as Ud,e as Ui,f as I}from"./chunk-YYD2Q6U2.js";var Gl=ZN((Ur,yb)=>{"use strict";(function(t,e){typeof Ur=="object"&&typeof yb<"u"?yb.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.Sweetalert2=e())})(Ur,function(){"use strict";function t(l,h,y){if(typeof l=="function"?l===h:l.has(h))return arguments.length<3?h:y;throw new TypeError("Private element is not present on this object")}function e(l,h){if(h.has(l))throw new TypeError("Cannot initialize the same private elements twice on an object")}function n(l,h){return l.get(t(l,h))}function r(l,h,y){e(l,h),h.set(l,y)}function i(l,h,y){return l.set(t(l,h),y),y}let o=100,s={},a=()=>{s.previousActiveElement instanceof HTMLElement?(s.previousActiveElement.focus(),s.previousActiveElement=null):document.body&&document.body.focus()},u=l=>new Promise(h=>{if(!l)return h();let y=window.scrollX,_=window.scrollY;s.restoreFocusTimeout=setTimeout(()=>{a(),h()},o),window.scrollTo(y,_)}),d="swal2-",m=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((l,h)=>(l[h]=d+h,l),{}),b=["success","warning","info","question","error"].reduce((l,h)=>(l[h]=d+h,l),{}),M="SweetAlert2:",L=l=>l.charAt(0).toUpperCase()+l.slice(1),O=l=>{console.warn(`${M} ${typeof l=="object"?l.join(" "):l}`)},H=l=>{console.error(`${M} ${l}`)},X=[],Z=l=>{X.includes(l)||(X.push(l),O(l))},ne=function(l){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Z(`"${l}" is deprecated and will be removed in the next major release.${h?` Use "${h}" instead.`:""}`)},Oe=l=>typeof l=="function"?l():l,oe=l=>l&&typeof l.toPromise=="function",T=l=>oe(l)?l.toPromise():Promise.resolve(l),E=l=>l&&Promise.resolve(l)===l,C=()=>document.body.querySelector(`.${m.container}`),S=l=>{let h=C();return h?h.querySelector(l):null},A=l=>S(`.${l}`),R=()=>A(m.popup),D=()=>A(m.icon),Pn=()=>A(m["icon-content"]),Ei=()=>A(m.title),Rc=()=>A(m["html-container"]),Ii=()=>A(m.image),jr=()=>A(m["progress-steps"]),bi=()=>A(m["validation-message"]),an=()=>S(`.${m.actions} .${m.confirm}`),Ci=()=>S(`.${m.actions} .${m.cancel}`),Vt=()=>S(`.${m.actions} .${m.deny}`),Dt=()=>A(m["input-label"]),Di=()=>S(`.${m.loader}`),kn=()=>A(m.actions),Wl=()=>A(m.footer),er=()=>A(m["timer-progress-bar"]),xc=()=>A(m.close),zm=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Ti=()=>{let l=R();if(!l)return[];let h=l.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),y=Array.from(h).sort((z,ge)=>{let Ue=parseInt(z.getAttribute("tabindex")||"0"),Qe=parseInt(ge.getAttribute("tabindex")||"0");return Ue>Qe?1:Ue<Qe?-1:0}),_=l.querySelectorAll(zm),P=Array.from(_).filter(z=>z.getAttribute("tabindex")!=="-1");return[...new Set(y.concat(P))].filter(z=>Pt(z))},Si=()=>cn(document.body,m.shown)&&!cn(document.body,m["toast-shown"])&&!cn(document.body,m["no-backdrop"]),Ai=()=>{let l=R();return l?cn(l,m.toast):!1},Mc=()=>{let l=R();return l?l.hasAttribute("data-loading"):!1},Nt=(l,h)=>{if(l.textContent="",h){let _=new DOMParser().parseFromString(h,"text/html"),P=_.querySelector("head");P&&Array.from(P.childNodes).forEach(ge=>{l.appendChild(ge)});let z=_.querySelector("body");z&&Array.from(z.childNodes).forEach(ge=>{ge instanceof HTMLVideoElement||ge instanceof HTMLAudioElement?l.appendChild(ge.cloneNode(!0)):l.appendChild(ge)})}},cn=(l,h)=>{if(!h)return!1;let y=h.split(/\s+/);for(let _=0;_<y.length;_++)if(!l.classList.contains(y[_]))return!1;return!0},Kl=(l,h)=>{Array.from(l.classList).forEach(y=>{!Object.values(m).includes(y)&&!Object.values(b).includes(y)&&!Object.values(h.showClass||{}).includes(y)&&l.classList.remove(y)})},Ut=(l,h,y)=>{if(Kl(l,h),!h.customClass)return;let _=h.customClass[y];if(_){if(typeof _!="string"&&!_.forEach){O(`Invalid type of customClass.${y}! Expected string or iterable object, got "${typeof _}"`);return}be(l,_)}},Ps=(l,h)=>{if(!h)return null;switch(h){case"select":case"textarea":case"file":return l.querySelector(`.${m.popup} > .${m[h]}`);case"checkbox":return l.querySelector(`.${m.popup} > .${m.checkbox} input`);case"radio":return l.querySelector(`.${m.popup} > .${m.radio} input:checked`)||l.querySelector(`.${m.popup} > .${m.radio} input:first-child`);case"range":return l.querySelector(`.${m.popup} > .${m.range} input`);default:return l.querySelector(`.${m.popup} > .${m.input}`)}},Nc=l=>{if(l.focus(),l.type!=="file"){let h=l.value;l.value="",l.value=h}},Pc=(l,h,y)=>{!l||!h||(typeof h=="string"&&(h=h.split(/\s+/).filter(Boolean)),h.forEach(_=>{Array.isArray(l)?l.forEach(P=>{y?P.classList.add(_):P.classList.remove(_)}):y?l.classList.add(_):l.classList.remove(_)}))},be=(l,h)=>{Pc(l,h,!0)},un=(l,h)=>{Pc(l,h,!1)},tr=(l,h)=>{let y=Array.from(l.children);for(let _=0;_<y.length;_++){let P=y[_];if(P instanceof HTMLElement&&cn(P,h))return P}},On=(l,h,y)=>{y===`${parseInt(y)}`&&(y=parseInt(y)),y||parseInt(y)===0?l.style.setProperty(h,typeof y=="number"?`${y}px`:y):l.style.removeProperty(h)},tt=function(l){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";l&&(l.style.display=h)},ut=l=>{l&&(l.style.display="none")},lt=function(l){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";l&&new MutationObserver(()=>{nr(l,l.innerHTML,h)}).observe(l,{childList:!0,subtree:!0})},Tt=(l,h,y,_)=>{let P=l.querySelector(h);P&&P.style.setProperty(y,_)},nr=function(l,h){let y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";h?tt(l,y):ut(l)},Pt=l=>!!(l&&(l.offsetWidth||l.offsetHeight||l.getClientRects().length)),Ql=()=>!Pt(an())&&!Pt(Vt())&&!Pt(Ci()),Yl=l=>l.scrollHeight>l.clientHeight,Ri=l=>{let h=window.getComputedStyle(l),y=parseFloat(h.getPropertyValue("animation-duration")||"0"),_=parseFloat(h.getPropertyValue("transition-duration")||"0");return y>0||_>0},ks=function(l){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=er();y&&Pt(y)&&(h&&(y.style.transition="none",y.style.width="100%"),setTimeout(()=>{y.style.transition=`width ${l/1e3}s linear`,y.style.width="0%"},10))},Zl=()=>{let l=er();if(!l)return;let h=parseInt(window.getComputedStyle(l).width);l.style.removeProperty("transition"),l.style.width="100%";let y=parseInt(window.getComputedStyle(l).width),_=h/y*100;l.style.width=`${_}%`},kc=()=>typeof window>"u"||typeof document>"u",Gm=`
 <div aria-labelledby="${m.title}" aria-describedby="${m["html-container"]}" class="${m.popup}" tabindex="-1">
   <button type="button" class="${m.close}"></button>
   <ul class="${m["progress-steps"]}"></ul>
   <div class="${m.icon}"></div>
   <img class="${m.image}" />
   <h2 class="${m.title}" id="${m.title}"></h2>
   <div class="${m["html-container"]}" id="${m["html-container"]}"></div>
   <input class="${m.input}" id="${m.input}" />
   <input type="file" class="${m.file}" />
   <div class="${m.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${m.select}" id="${m.select}"></select>
   <div class="${m.radio}"></div>
   <label class="${m.checkbox}">
     <input type="checkbox" id="${m.checkbox}" />
     <span class="${m.label}"></span>
   </label>
   <textarea class="${m.textarea}" id="${m.textarea}"></textarea>
   <div class="${m["validation-message"]}" id="${m["validation-message"]}"></div>
   <div class="${m.actions}">
     <div class="${m.loader}"></div>
     <button type="button" class="${m.confirm}"></button>
     <button type="button" class="${m.deny}"></button>
     <button type="button" class="${m.cancel}"></button>
   </div>
   <div class="${m.footer}"></div>
   <div class="${m["timer-progress-bar-container"]}">
     <div class="${m["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),Wm=()=>{let l=C();return l?(l.remove(),un([document.documentElement,document.body],[m["no-backdrop"],m["toast-shown"],m["has-column"]]),!0):!1},Fn=()=>{s.currentInstance.resetValidationMessage()},Jl=()=>{let l=R(),h=tr(l,m.input),y=tr(l,m.file),_=l.querySelector(`.${m.range} input`),P=l.querySelector(`.${m.range} output`),z=tr(l,m.select),ge=l.querySelector(`.${m.checkbox} input`),Ue=tr(l,m.textarea);h.oninput=Fn,y.onchange=Fn,z.onchange=Fn,ge.onchange=Fn,Ue.oninput=Fn,_.oninput=()=>{Fn(),P.value=_.value},_.onchange=()=>{Fn(),P.value=_.value}},Xl=l=>typeof l=="string"?document.querySelector(l):l,Eo=l=>{let h=R();h.setAttribute("role",l.toast?"alert":"dialog"),h.setAttribute("aria-live",l.toast?"polite":"assertive"),l.toast||h.setAttribute("aria-modal","true")},Oc=l=>{window.getComputedStyle(l).direction==="rtl"&&be(C(),m.rtl)},Fc=l=>{let h=Wm();if(kc()){H("SweetAlert2 requires document to initialize");return}let y=document.createElement("div");y.className=m.container,h&&be(y,m["no-transition"]),Nt(y,Gm);let _=Xl(l.target);_.appendChild(y),Eo(l),Oc(_),Jl()},Ln=(l,h)=>{l instanceof HTMLElement?h.appendChild(l):typeof l=="object"?ed(l,h):l&&Nt(h,l)},ed=(l,h)=>{l.jquery?Os(h,l):Nt(h,l.toString())},Os=(l,h)=>{if(l.textContent="",0 in h)for(let y=0;y in h;y++)l.appendChild(h[y].cloneNode(!0));else l.appendChild(h.cloneNode(!0))},td=(l,h)=>{let y=kn(),_=Di();!y||!_||(!h.showConfirmButton&&!h.showDenyButton&&!h.showCancelButton?ut(y):tt(y),Ut(y,h,"actions"),Io(y,_,h),Nt(_,h.loaderHtml||""),Ut(_,h,"loader"))};function Io(l,h,y){let _=an(),P=Vt(),z=Ci();!_||!P||!z||(vt(_,"confirm",y),vt(P,"deny",y),vt(z,"cancel",y),nd(_,P,z,y),y.reverseButtons&&(y.toast?(l.insertBefore(z,_),l.insertBefore(P,_)):(l.insertBefore(z,h),l.insertBefore(P,h),l.insertBefore(_,h))))}function nd(l,h,y,_){if(!_.buttonsStyling){un([l,h,y],m.styled);return}be([l,h,y],m.styled),_.confirmButtonColor&&(l.style.backgroundColor=_.confirmButtonColor,be(l,m["default-outline"])),_.denyButtonColor&&(h.style.backgroundColor=_.denyButtonColor,be(h,m["default-outline"])),_.cancelButtonColor&&(y.style.backgroundColor=_.cancelButtonColor,be(y,m["default-outline"]))}function vt(l,h,y){let _=L(h);nr(l,y[`show${_}Button`],"inline-block"),Nt(l,y[`${h}ButtonText`]||""),l.setAttribute("aria-label",y[`${h}ButtonAriaLabel`]||""),l.className=m[h],Ut(l,y,`${h}Button`)}let rd=(l,h)=>{let y=xc();y&&(Nt(y,h.closeButtonHtml||""),Ut(y,h,"closeButton"),nr(y,h.showCloseButton),y.setAttribute("aria-label",h.closeButtonAriaLabel||""))},bo=(l,h)=>{let y=C();y&&(Co(y,h.backdrop),Km(y,h.position),Qm(y,h.grow),Ut(y,h,"container"))};function Co(l,h){typeof h=="string"?l.style.background=h:h||be([document.documentElement,document.body],m["no-backdrop"])}function Km(l,h){h&&(h in m?be(l,m[h]):(O('The "position" parameter is not valid, defaulting to "center"'),be(l,m.center)))}function Qm(l,h){h&&be(l,m[`grow-${h}`])}var Ne={innerParams:new WeakMap,domCache:new WeakMap};let Ym=["input","file","range","select","radio","checkbox","textarea"],Zm=(l,h)=>{let y=R();if(!y)return;let _=Ne.innerParams.get(l),P=!_||h.input!==_.input;Ym.forEach(z=>{let ge=tr(y,m[z]);ge&&(Lc(z,h.inputAttributes),ge.className=m[z],P&&ut(ge))}),h.input&&(P&&Fs(h),Ls(h))},Fs=l=>{if(!l.input)return;if(!qe[l.input]){H(`Unexpected type of input! Expected ${Object.keys(qe).join(" | ")}, got "${l.input}"`);return}let h=Vc(l.input);if(!h)return;let y=qe[l.input](h,l);tt(h),l.inputAutoFocus&&setTimeout(()=>{Nc(y)})},id=l=>{for(let h=0;h<l.attributes.length;h++){let y=l.attributes[h].name;["id","type","value","style"].includes(y)||l.removeAttribute(y)}},Lc=(l,h)=>{let y=R();if(!y)return;let _=Ps(y,l);if(_){id(_);for(let P in h)_.setAttribute(P,h[P])}},Ls=l=>{if(!l.input)return;let h=Vc(l.input);h&&Ut(h,l,"input")},En=(l,h)=>{!l.placeholder&&h.inputPlaceholder&&(l.placeholder=h.inputPlaceholder)},xi=(l,h,y)=>{if(y.inputLabel){let _=document.createElement("label"),P=m["input-label"];_.setAttribute("for",l.id),_.className=P,typeof y.customClass=="object"&&be(_,y.customClass.inputLabel),_.innerText=y.inputLabel,h.insertAdjacentElement("beforebegin",_)}},Vc=l=>{let h=R();if(h)return tr(h,m[l]||m.input)},Mi=(l,h)=>{["string","number"].includes(typeof h)?l.value=`${h}`:E(h)||O(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof h}"`)},qe={};qe.text=qe.email=qe.password=qe.number=qe.tel=qe.url=qe.search=qe.date=qe["datetime-local"]=qe.time=qe.week=qe.month=(l,h)=>(Mi(l,h.inputValue),xi(l,l,h),En(l,h),l.type=h.input,l),qe.file=(l,h)=>(xi(l,l,h),En(l,h),l),qe.range=(l,h)=>{let y=l.querySelector("input"),_=l.querySelector("output");return Mi(y,h.inputValue),y.type=h.input,Mi(_,h.inputValue),xi(y,l,h),l},qe.select=(l,h)=>{if(l.textContent="",h.inputPlaceholder){let y=document.createElement("option");Nt(y,h.inputPlaceholder),y.value="",y.disabled=!0,y.selected=!0,l.appendChild(y)}return xi(l,l,h),l},qe.radio=l=>(l.textContent="",l),qe.checkbox=(l,h)=>{let y=Ps(R(),"checkbox");y.value="1",y.checked=!!h.inputValue;let _=l.querySelector("span");return Nt(_,h.inputPlaceholder||h.inputLabel),y},qe.textarea=(l,h)=>{Mi(l,h.inputValue),En(l,h),xi(l,l,h);let y=_=>parseInt(window.getComputedStyle(_).marginLeft)+parseInt(window.getComputedStyle(_).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let _=parseInt(window.getComputedStyle(R()).width),P=()=>{if(!document.body.contains(l))return;let z=l.offsetWidth+y(l);z>_?R().style.width=`${z}px`:On(R(),"width",h.width)};new MutationObserver(P).observe(l,{attributes:!0,attributeFilter:["style"]})}}),l};let od=(l,h)=>{let y=Rc();y&&(lt(y),Ut(y,h,"htmlContainer"),h.html?(Ln(h.html,y),tt(y,"block")):h.text?(y.textContent=h.text,tt(y,"block")):ut(y),Zm(l,h))},sd=(l,h)=>{let y=Wl();y&&(lt(y),nr(y,h.footer,"block"),h.footer&&Ln(h.footer,y),Ut(y,h,"footer"))},Jm=(l,h)=>{let y=Ne.innerParams.get(l),_=D();if(_){if(y&&h.icon===y.icon){rr(_,h),Do(_,h);return}if(!h.icon&&!h.iconHtml){ut(_);return}if(h.icon&&Object.keys(b).indexOf(h.icon)===-1){H(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${h.icon}"`),ut(_);return}tt(_),rr(_,h),Do(_,h),be(_,h.showClass&&h.showClass.icon)}},Do=(l,h)=>{for(let[y,_]of Object.entries(b))h.icon!==y&&un(l,_);be(l,h.icon&&b[h.icon]),jc(l,h),ad(),Ut(l,h,"icon")},ad=()=>{let l=R();if(!l)return;let h=window.getComputedStyle(l).getPropertyValue("background-color"),y=l.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let _=0;_<y.length;_++)y[_].style.backgroundColor=h},Uc=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,To=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,rr=(l,h)=>{if(!h.icon&&!h.iconHtml)return;let y=l.innerHTML,_="";h.iconHtml?_=cd(h.iconHtml):h.icon==="success"?(_=Uc,y=y.replace(/ style=".*?"/g,"")):h.icon==="error"?_=To:h.icon&&(_=cd({question:"?",warning:"!",info:"i"}[h.icon])),y.trim()!==_.trim()&&Nt(l,_)},jc=(l,h)=>{if(h.iconColor){l.style.color=h.iconColor,l.style.borderColor=h.iconColor;for(let y of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Tt(l,y,"background-color",h.iconColor);Tt(l,".swal2-success-ring","border-color",h.iconColor)}},cd=l=>`<div class="${m["icon-content"]}">${l}</div>`,ud=(l,h)=>{let y=Ii();if(y){if(!h.imageUrl){ut(y);return}tt(y,""),y.setAttribute("src",h.imageUrl),y.setAttribute("alt",h.imageAlt||""),On(y,"width",h.imageWidth),On(y,"height",h.imageHeight),y.className=m.image,Ut(y,h,"image")}},ld=(l,h)=>{let y=C(),_=R();if(!(!y||!_)){if(h.toast){On(y,"width",h.width),_.style.width="100%";let P=Di();P&&_.insertBefore(P,D())}else On(_,"width",h.width);On(_,"padding",h.padding),h.color&&(_.style.color=h.color),h.background&&(_.style.background=h.background),ut(bi()),dd(_,h)}},dd=(l,h)=>{let y=h.showClass||{};l.className=`${m.popup} ${Pt(l)?y.popup:""}`,h.toast?(be([document.documentElement,document.body],m["toast-shown"]),be(l,m.toast)):be(l,m.modal),Ut(l,h,"popup"),typeof h.customClass=="string"&&be(l,h.customClass),h.icon&&be(l,m[`icon-${h.icon}`])},Bc=(l,h)=>{let y=jr();if(!y)return;let{progressSteps:_,currentProgressStep:P}=h;if(!_||_.length===0||P===void 0){ut(y);return}tt(y),y.textContent="",P>=_.length&&O("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),_.forEach((z,ge)=>{let Ue=$c(z);if(y.appendChild(Ue),ge===P&&be(Ue,m["active-progress-step"]),ge!==_.length-1){let Qe=hd(h);y.appendChild(Qe)}})},$c=l=>{let h=document.createElement("li");return be(h,m["progress-step"]),Nt(h,l),h},hd=l=>{let h=document.createElement("li");return be(h,m["progress-step-line"]),l.progressStepsDistance&&On(h,"width",l.progressStepsDistance),h},fd=(l,h)=>{let y=Ei();y&&(lt(y),nr(y,h.title||h.titleText,"block"),h.title&&Ln(h.title,y),h.titleText&&(y.innerText=h.titleText),Ut(y,h,"title"))},pd=(l,h)=>{ld(l,h),bo(l,h),Bc(l,h),Jm(l,h),ud(l,h),fd(l,h),rd(l,h),od(l,h),td(l,h),sd(l,h);let y=R();typeof h.didRender=="function"&&y&&h.didRender(y),s.eventEmitter.emit("didRender",y)},Xm=()=>Pt(R()),Hc=()=>{var l;return(l=an())===null||l===void 0?void 0:l.click()},md=()=>{var l;return(l=Vt())===null||l===void 0?void 0:l.click()},eg=()=>{var l;return(l=Ci())===null||l===void 0?void 0:l.click()},Yt=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),In=l=>{l.keydownTarget&&l.keydownHandlerAdded&&(l.keydownTarget.removeEventListener("keydown",l.keydownHandler,{capture:l.keydownListenerCapture}),l.keydownHandlerAdded=!1)},Vs=(l,h,y)=>{In(l),h.toast||(l.keydownHandler=_=>Us(h,_,y),l.keydownTarget=h.keydownListenerCapture?window:R(),l.keydownListenerCapture=h.keydownListenerCapture,l.keydownTarget.addEventListener("keydown",l.keydownHandler,{capture:l.keydownListenerCapture}),l.keydownHandlerAdded=!0)},Ni=(l,h)=>{var y;let _=Ti();if(_.length){l=l+h,l===_.length?l=0:l===-1&&(l=_.length-1),_[l].focus();return}(y=R())===null||y===void 0||y.focus()},qc=["ArrowRight","ArrowDown"],$e=["ArrowLeft","ArrowUp"],Us=(l,h,y)=>{l&&(h.isComposing||h.keyCode===229||(l.stopKeydownPropagation&&h.stopPropagation(),h.key==="Enter"?So(h,l):h.key==="Tab"?Ao(h):[...qc,...$e].includes(h.key)?tg(h.key):h.key==="Escape"&&gd(h,l,y)))},So=(l,h)=>{if(!Oe(h.allowEnterKey))return;let y=Ps(R(),h.input);if(l.target&&y&&l.target instanceof HTMLElement&&l.target.outerHTML===y.outerHTML){if(["textarea","file"].includes(h.input))return;Hc(),l.preventDefault()}},Ao=l=>{let h=l.target,y=Ti(),_=-1;for(let P=0;P<y.length;P++)if(h===y[P]){_=P;break}l.shiftKey?Ni(_,-1):Ni(_,1),l.stopPropagation(),l.preventDefault()},tg=l=>{let h=kn(),y=an(),_=Vt(),P=Ci();if(!h||!y||!_||!P)return;let z=[y,_,P];if(document.activeElement instanceof HTMLElement&&!z.includes(document.activeElement))return;let ge=qc.includes(l)?"nextElementSibling":"previousElementSibling",Ue=document.activeElement;if(Ue){for(let Qe=0;Qe<h.children.length;Qe++){if(Ue=Ue[ge],!Ue)return;if(Ue instanceof HTMLButtonElement&&Pt(Ue))break}Ue instanceof HTMLButtonElement&&Ue.focus()}},gd=(l,h,y)=>{Oe(h.allowEscapeKey)&&(l.preventDefault(),y(Yt.esc))};var Pi={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};let ng=()=>{let l=C();Array.from(document.body.children).forEach(y=>{y.contains(l)||(y.hasAttribute("aria-hidden")&&y.setAttribute("data-previous-aria-hidden",y.getAttribute("aria-hidden")||""),y.setAttribute("aria-hidden","true"))})},yd=()=>{Array.from(document.body.children).forEach(h=>{h.hasAttribute("data-previous-aria-hidden")?(h.setAttribute("aria-hidden",h.getAttribute("data-previous-aria-hidden")||""),h.removeAttribute("data-previous-aria-hidden")):h.removeAttribute("aria-hidden")})},vd=typeof window<"u"&&!!window.GestureEvent,Ro=()=>{if(vd&&!cn(document.body,m.iosfix)){let l=document.body.scrollTop;document.body.style.top=`${l*-1}px`,be(document.body,m.iosfix),ir()}},ir=()=>{let l=C();if(!l)return;let h;l.ontouchstart=y=>{h=_d(y)},l.ontouchmove=y=>{h&&(y.preventDefault(),y.stopPropagation())}},_d=l=>{let h=l.target,y=C(),_=Rc();return!y||!_||wd(l)||Ed(l)?!1:h===y||!Yl(y)&&h instanceof HTMLElement&&h.tagName!=="INPUT"&&h.tagName!=="TEXTAREA"&&!(Yl(_)&&_.contains(h))},wd=l=>l.touches&&l.touches.length&&l.touches[0].touchType==="stylus",Ed=l=>l.touches&&l.touches.length>1,ki=()=>{if(cn(document.body,m.iosfix)){let l=parseInt(document.body.style.top,10);un(document.body,m.iosfix),document.body.style.top="",document.body.scrollTop=l*-1}},rg=()=>{let l=document.createElement("div");l.className=m["scrollbar-measure"],document.body.appendChild(l);let h=l.getBoundingClientRect().width-l.clientWidth;return document.body.removeChild(l),h},Oi=null,ig=l=>{Oi===null&&(document.body.scrollHeight>window.innerHeight||l==="scroll")&&(Oi=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Oi+rg()}px`)},or=()=>{Oi!==null&&(document.body.style.paddingRight=`${Oi}px`,Oi=null)};function Id(l,h,y,_){Ai()?ze(l,_):(u(y).then(()=>ze(l,_)),In(s)),vd?(h.setAttribute("style","display:none !important"),h.removeAttribute("class"),h.innerHTML=""):h.remove(),Si()&&(or(),ki(),yd()),og()}function og(){un([document.documentElement,document.body],[m.shown,m["height-auto"],m["no-backdrop"],m["toast-shown"]])}function Zt(l){l=xo(l);let h=Pi.swalPromiseResolve.get(this),y=js(this);this.isAwaitingPromise?l.isDismissed||(Vn(this),h(l)):y&&h(l)}let js=l=>{let h=R();if(!h)return!1;let y=Ne.innerParams.get(l);if(!y||cn(h,y.hideClass.popup))return!1;un(h,y.showClass.popup),be(h,y.hideClass.popup);let _=C();return un(_,y.showClass.backdrop),be(_,y.hideClass.backdrop),bd(l,h,y),!0};function zc(l){let h=Pi.swalPromiseReject.get(this);Vn(this),h&&h(l)}let Vn=l=>{l.isAwaitingPromise&&(delete l.isAwaitingPromise,Ne.innerParams.get(l)||l._destroy())},xo=l=>typeof l>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},l),bd=(l,h,y)=>{let _=C(),P=Ri(h);typeof y.willClose=="function"&&y.willClose(h),s.eventEmitter.emit("willClose",h),P?Gc(l,h,_,y.returnFocus,y.didClose):Id(l,_,y.returnFocus,y.didClose)},Gc=(l,h,y,_,P)=>{s.swalCloseEventFinishedCallback=Id.bind(null,l,y,_,P);let z=function(ge){ge.target===h&&(s.swalCloseEventFinishedCallback(),delete s.swalCloseEventFinishedCallback,h.removeEventListener("animationend",z),h.removeEventListener("transitionend",z))};h.addEventListener("animationend",z),h.addEventListener("transitionend",z)},ze=(l,h)=>{setTimeout(()=>{typeof h=="function"&&h.bind(l.params)(),s.eventEmitter.emit("didClose"),l._destroy&&l._destroy()})},Fi=l=>{let h=R();if(h||new Vd,h=R(),!h)return;let y=Di();Ai()?ut(D()):sg(h,l),tt(y),h.setAttribute("data-loading","true"),h.setAttribute("aria-busy","true"),h.focus()},sg=(l,h)=>{let y=kn(),_=Di();!y||!_||(!h&&Pt(an())&&(h=an()),tt(y),h&&(ut(h),_.setAttribute("data-button-to-replace",h.className),y.insertBefore(_,h)),be([l,y],m.loading))},Cd=(l,h)=>{h.input==="select"||h.input==="radio"?Un(l,h):["text","email","number","tel","textarea"].some(y=>y===h.input)&&(oe(h.inputValue)||E(h.inputValue))&&(Fi(an()),Ad(l,h))},Dd=(l,h)=>{let y=l.getInput();if(!y)return null;switch(h.input){case"checkbox":return Td(y);case"radio":return Bs(y);case"file":return Sd(y);default:return h.inputAutoTrim?y.value.trim():y.value}},Td=l=>l.checked?1:0,Bs=l=>l.checked?l.value:null,Sd=l=>l.files&&l.files.length?l.getAttribute("multiple")!==null?l.files:l.files[0]:null,Un=(l,h)=>{let y=R();if(!y)return;let _=P=>{h.input==="select"?ag(y,No(P),h):h.input==="radio"&&Mo(y,No(P),h)};oe(h.inputOptions)||E(h.inputOptions)?(Fi(an()),T(h.inputOptions).then(P=>{l.hideLoading(),_(P)})):typeof h.inputOptions=="object"?_(h.inputOptions):H(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof h.inputOptions}`)},Ad=(l,h)=>{let y=l.getInput();y&&(ut(y),T(h.inputValue).then(_=>{y.value=h.input==="number"?`${parseFloat(_)||0}`:`${_}`,tt(y),y.focus(),l.hideLoading()}).catch(_=>{H(`Error in inputValue promise: ${_}`),y.value="",tt(y),y.focus(),l.hideLoading()}))};function ag(l,h,y){let _=tr(l,m.select);if(!_)return;let P=(z,ge,Ue)=>{let Qe=document.createElement("option");Qe.value=Ue,Nt(Qe,ge),Qe.selected=$s(Ue,y.inputValue),z.appendChild(Qe)};h.forEach(z=>{let ge=z[0],Ue=z[1];if(Array.isArray(Ue)){let Qe=document.createElement("optgroup");Qe.label=ge,Qe.disabled=!1,_.appendChild(Qe),Ue.forEach(Gs=>P(Qe,Gs[1],Gs[0]))}else P(_,Ue,ge)}),_.focus()}function Mo(l,h,y){let _=tr(l,m.radio);if(!_)return;h.forEach(z=>{let ge=z[0],Ue=z[1],Qe=document.createElement("input"),Gs=document.createElement("label");Qe.type="radio",Qe.name=m.radio,Qe.value=ge,$s(ge,y.inputValue)&&(Qe.checked=!0);let ug=document.createElement("span");Nt(ug,Ue),ug.className=m.label,Gs.appendChild(Qe),Gs.appendChild(ug),_.appendChild(Gs)});let P=_.querySelectorAll("input");P.length&&P[0].focus()}let No=l=>{let h=[];return l instanceof Map?l.forEach((y,_)=>{let P=y;typeof P=="object"&&(P=No(P)),h.push([_,P])}):Object.keys(l).forEach(y=>{let _=l[y];typeof _=="object"&&(_=No(_)),h.push([y,_])}),h},$s=(l,h)=>!!h&&h.toString()===l.toString(),Hs=l=>{let h=Ne.innerParams.get(l);l.disableButtons(),h.input?xd(l,"confirm"):Po(l,!0)},Rd=l=>{let h=Ne.innerParams.get(l);l.disableButtons(),h.returnInputValueOnDeny?xd(l,"deny"):Br(l,!1)},qs=(l,h)=>{l.disableButtons(),h(Yt.cancel)},xd=(l,h)=>{let y=Ne.innerParams.get(l);if(!y.input){H(`The "input" parameter is needed to be set when using returnInputValueOn${L(h)}`);return}let _=l.getInput(),P=Dd(l,y);y.inputValidator?Md(l,P,h):_&&!_.checkValidity()?(l.enableButtons(),l.showValidationMessage(y.validationMessage||_.validationMessage)):h==="deny"?Br(l,P):Po(l,P)},Md=(l,h,y)=>{let _=Ne.innerParams.get(l);l.disableInput(),Promise.resolve().then(()=>T(_.inputValidator(h,_.validationMessage))).then(z=>{l.enableButtons(),l.enableInput(),z?l.showValidationMessage(z):y==="deny"?Br(l,h):Po(l,h)})},Br=(l,h)=>{let y=Ne.innerParams.get(l||void 0);y.showLoaderOnDeny&&Fi(Vt()),y.preDeny?(l.isAwaitingPromise=!0,Promise.resolve().then(()=>T(y.preDeny(h,y.validationMessage))).then(P=>{P===!1?(l.hideLoading(),Vn(l)):l.close({isDenied:!0,value:typeof P>"u"?h:P})}).catch(P=>Kc(l||void 0,P))):l.close({isDenied:!0,value:h})},Wc=(l,h)=>{l.close({isConfirmed:!0,value:h})},Kc=(l,h)=>{l.rejectPromise(h)},Po=(l,h)=>{let y=Ne.innerParams.get(l||void 0);y.showLoaderOnConfirm&&Fi(),y.preConfirm?(l.resetValidationMessage(),l.isAwaitingPromise=!0,Promise.resolve().then(()=>T(y.preConfirm(h,y.validationMessage))).then(P=>{Pt(bi())||P===!1?(l.hideLoading(),Vn(l)):Wc(l,typeof P>"u"?h:P)}).catch(P=>Kc(l||void 0,P))):Wc(l,h)};function Li(){let l=Ne.innerParams.get(this);if(!l)return;let h=Ne.domCache.get(this);ut(h.loader),Ai()?l.icon&&tt(D()):Nd(h),un([h.popup,h.actions],m.loading),h.popup.removeAttribute("aria-busy"),h.popup.removeAttribute("data-loading"),h.confirmButton.disabled=!1,h.denyButton.disabled=!1,h.cancelButton.disabled=!1}let Nd=l=>{let h=l.popup.getElementsByClassName(l.loader.getAttribute("data-button-to-replace"));h.length?tt(h[0],"inline-block"):Ql()&&ut(l.actions)};function ko(){let l=Ne.innerParams.get(this),h=Ne.domCache.get(this);return h?Ps(h.popup,l.input):null}function Qc(l,h,y){let _=Ne.domCache.get(l);h.forEach(P=>{_[P].disabled=y})}function Yc(l,h){let y=R();if(!(!y||!l))if(l.type==="radio"){let _=y.querySelectorAll(`[name="${m.radio}"]`);for(let P=0;P<_.length;P++)_[P].disabled=h}else l.disabled=h}function sr(){Qc(this,["confirmButton","denyButton","cancelButton"],!1)}function Zc(){Qc(this,["confirmButton","denyButton","cancelButton"],!0)}function Jc(){Yc(this.getInput(),!1)}function Xc(){Yc(this.getInput(),!0)}function eu(l){let h=Ne.domCache.get(this),y=Ne.innerParams.get(this);Nt(h.validationMessage,l),h.validationMessage.className=m["validation-message"],y.customClass&&y.customClass.validationMessage&&be(h.validationMessage,y.customClass.validationMessage),tt(h.validationMessage);let _=this.getInput();_&&(_.setAttribute("aria-invalid","true"),_.setAttribute("aria-describedby",m["validation-message"]),Nc(_),be(_,m.inputerror))}function Oo(){let l=Ne.domCache.get(this);l.validationMessage&&ut(l.validationMessage);let h=this.getInput();h&&(h.removeAttribute("aria-invalid"),h.removeAttribute("aria-describedby"),un(h,m.inputerror))}let dt={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Pd=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],kd={allowEnterKey:void 0},Vi=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],c=l=>Object.prototype.hasOwnProperty.call(dt,l),f=l=>Pd.indexOf(l)!==-1,g=l=>kd[l],v=l=>{c(l)||O(`Unknown parameter "${l}"`)},x=l=>{Vi.includes(l)&&O(`The parameter "${l}" is incompatible with toasts`)},k=l=>{let h=g(l);h&&ne(l,h)},$=l=>{l.backdrop===!1&&l.allowOutsideClick&&O('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(let h in l)v(h),l.toast&&x(h),k(h)};function Ve(l){let h=R(),y=Ne.innerParams.get(this);if(!h||cn(h,y.hideClass.popup)){O("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let _=_t(l),P=Object.assign({},y,_);pd(this,P),Ne.innerParams.set(this,P),Object.defineProperties(this,{params:{value:Object.assign({},this.params,l),writable:!1,enumerable:!0}})}let _t=l=>{let h={};return Object.keys(l).forEach(y=>{f(y)?h[y]=l[y]:O(`Invalid parameter to update: ${y}`)}),h};function Se(){let l=Ne.domCache.get(this),h=Ne.innerParams.get(this);if(!h){wt(this);return}l.popup&&s.swalCloseEventFinishedCallback&&(s.swalCloseEventFinishedCallback(),delete s.swalCloseEventFinishedCallback),typeof h.didDestroy=="function"&&h.didDestroy(),s.eventEmitter.emit("didDestroy"),St(this)}let St=l=>{wt(l),delete l.params,delete s.keydownHandler,delete s.keydownTarget,delete s.currentInstance},wt=l=>{l.isAwaitingPromise?(ar(Ne,l),l.isAwaitingPromise=!0):(ar(Pi,l),ar(Ne,l),delete l.isAwaitingPromise,delete l.disableButtons,delete l.enableButtons,delete l.getInput,delete l.disableInput,delete l.enableInput,delete l.hideLoading,delete l.disableLoading,delete l.showValidationMessage,delete l.resetValidationMessage,delete l.close,delete l.closePopup,delete l.closeModal,delete l.closeToast,delete l.rejectPromise,delete l.update,delete l._destroy)},ar=(l,h)=>{for(let y in l)l[y].delete(h)};var ln=Object.freeze({__proto__:null,_destroy:Se,close:Zt,closeModal:Zt,closePopup:Zt,closeToast:Zt,disableButtons:Zc,disableInput:Xc,disableLoading:Li,enableButtons:sr,enableInput:Jc,getInput:ko,handleAwaitingPromise:Vn,hideLoading:Li,rejectPromise:zc,resetValidationMessage:Oo,showValidationMessage:eu,update:Ve});let zs=(l,h,y)=>{l.toast?tu(l,h,y):(dN(h),hN(h),fN(l,h,y))},tu=(l,h,y)=>{h.popup.onclick=()=>{l&&(lN(l)||l.timer||l.input)||y(Yt.close)}},lN=l=>!!(l.showConfirmButton||l.showDenyButton||l.showCancelButton||l.showCloseButton),Od=!1,dN=l=>{l.popup.onmousedown=()=>{l.container.onmouseup=function(h){l.container.onmouseup=()=>{},h.target===l.container&&(Od=!0)}}},hN=l=>{l.container.onmousedown=h=>{h.target===l.container&&h.preventDefault(),l.popup.onmouseup=function(y){l.popup.onmouseup=()=>{},(y.target===l.popup||y.target instanceof HTMLElement&&l.popup.contains(y.target))&&(Od=!0)}}},fN=(l,h,y)=>{h.container.onclick=_=>{if(Od){Od=!1;return}_.target===h.container&&Oe(l.allowOutsideClick)&&y(Yt.backdrop)}},pN=l=>typeof l=="object"&&l.jquery,_b=l=>l instanceof Element||pN(l),mN=l=>{let h={};return typeof l[0]=="object"&&!_b(l[0])?Object.assign(h,l[0]):["title","html","icon"].forEach((y,_)=>{let P=l[_];typeof P=="string"||_b(P)?h[y]=P:P!==void 0&&H(`Unexpected type of ${y}! Expected "string" or "Element", got ${typeof P}`)}),h};function gN(){for(var l=arguments.length,h=new Array(l),y=0;y<l;y++)h[y]=arguments[y];return new this(...h)}function yN(l){class h extends this{_main(_,P){return super._main(_,Object.assign({},l,P))}}return h}let vN=()=>s.timeout&&s.timeout.getTimerLeft(),wb=()=>{if(s.timeout)return Zl(),s.timeout.stop()},Eb=()=>{if(s.timeout){let l=s.timeout.start();return ks(l),l}},_N=()=>{let l=s.timeout;return l&&(l.running?wb():Eb())},wN=l=>{if(s.timeout){let h=s.timeout.increase(l);return ks(h,!0),h}},EN=()=>!!(s.timeout&&s.timeout.isRunning()),Ib=!1,cg={};function IN(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";cg[l]=this,Ib||(document.body.addEventListener("click",bN),Ib=!0)}let bN=l=>{for(let h=l.target;h&&h!==document;h=h.parentNode)for(let y in cg){let _=h.getAttribute(y);if(_){cg[y].fire({template:_});return}}};class CN{constructor(){this.events={}}_getHandlersByEventName(h){return typeof this.events[h]>"u"&&(this.events[h]=[]),this.events[h]}on(h,y){let _=this._getHandlersByEventName(h);_.includes(y)||_.push(y)}once(h,y){var _=this;let P=function(){_.removeListener(h,P);for(var z=arguments.length,ge=new Array(z),Ue=0;Ue<z;Ue++)ge[Ue]=arguments[Ue];y.apply(_,ge)};this.on(h,P)}emit(h){for(var y=arguments.length,_=new Array(y>1?y-1:0),P=1;P<y;P++)_[P-1]=arguments[P];this._getHandlersByEventName(h).forEach(z=>{try{z.apply(this,_)}catch(ge){console.error(ge)}})}removeListener(h,y){let _=this._getHandlersByEventName(h),P=_.indexOf(y);P>-1&&_.splice(P,1)}removeAllListeners(h){this.events[h]!==void 0&&(this.events[h].length=0)}reset(){this.events={}}}s.eventEmitter=new CN;var DN=Object.freeze({__proto__:null,argsToParams:mN,bindClickHandler:IN,clickCancel:eg,clickConfirm:Hc,clickDeny:md,enableLoading:Fi,fire:gN,getActions:kn,getCancelButton:Ci,getCloseButton:xc,getConfirmButton:an,getContainer:C,getDenyButton:Vt,getFocusableElements:Ti,getFooter:Wl,getHtmlContainer:Rc,getIcon:D,getIconContent:Pn,getImage:Ii,getInputLabel:Dt,getLoader:Di,getPopup:R,getProgressSteps:jr,getTimerLeft:vN,getTimerProgressBar:er,getTitle:Ei,getValidationMessage:bi,increaseTimer:wN,isDeprecatedParameter:g,isLoading:Mc,isTimerRunning:EN,isUpdatableParameter:f,isValidParameter:c,isVisible:Xm,mixin:yN,off:(l,h)=>{if(!l){s.eventEmitter.reset();return}h?s.eventEmitter.removeListener(l,h):s.eventEmitter.removeAllListeners(l)},on:(l,h)=>{s.eventEmitter.on(l,h)},once:(l,h)=>{s.eventEmitter.once(l,h)},resumeTimer:Eb,showLoading:Fi,stopTimer:wb,toggleTimer:_N});class TN{constructor(h,y){this.callback=h,this.remaining=y,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(h){let y=this.running;return y&&this.stop(),this.remaining+=h,y&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}let bb=["swal-title","swal-html","swal-footer"],SN=l=>{let h=typeof l.template=="string"?document.querySelector(l.template):l.template;if(!h)return{};let y=h.content;return ON(y),Object.assign(AN(y),RN(y),xN(y),MN(y),NN(y),PN(y),kN(y,bb))},AN=l=>{let h={};return Array.from(l.querySelectorAll("swal-param")).forEach(_=>{Fo(_,["name","value"]);let P=_.getAttribute("name"),z=_.getAttribute("value");!P||!z||(typeof dt[P]=="boolean"?h[P]=z!=="false":typeof dt[P]=="object"?h[P]=JSON.parse(z):h[P]=z)}),h},RN=l=>{let h={};return Array.from(l.querySelectorAll("swal-function-param")).forEach(_=>{let P=_.getAttribute("name"),z=_.getAttribute("value");!P||!z||(h[P]=new Function(`return ${z}`)())}),h},xN=l=>{let h={};return Array.from(l.querySelectorAll("swal-button")).forEach(_=>{Fo(_,["type","color","aria-label"]);let P=_.getAttribute("type");!P||!["confirm","cancel","deny"].includes(P)||(h[`${P}ButtonText`]=_.innerHTML,h[`show${L(P)}Button`]=!0,_.hasAttribute("color")&&(h[`${P}ButtonColor`]=_.getAttribute("color")),_.hasAttribute("aria-label")&&(h[`${P}ButtonAriaLabel`]=_.getAttribute("aria-label")))}),h},MN=l=>{let h={},y=l.querySelector("swal-image");return y&&(Fo(y,["src","width","height","alt"]),y.hasAttribute("src")&&(h.imageUrl=y.getAttribute("src")||void 0),y.hasAttribute("width")&&(h.imageWidth=y.getAttribute("width")||void 0),y.hasAttribute("height")&&(h.imageHeight=y.getAttribute("height")||void 0),y.hasAttribute("alt")&&(h.imageAlt=y.getAttribute("alt")||void 0)),h},NN=l=>{let h={},y=l.querySelector("swal-icon");return y&&(Fo(y,["type","color"]),y.hasAttribute("type")&&(h.icon=y.getAttribute("type")),y.hasAttribute("color")&&(h.iconColor=y.getAttribute("color")),h.iconHtml=y.innerHTML),h},PN=l=>{let h={},y=l.querySelector("swal-input");y&&(Fo(y,["type","label","placeholder","value"]),h.input=y.getAttribute("type")||"text",y.hasAttribute("label")&&(h.inputLabel=y.getAttribute("label")),y.hasAttribute("placeholder")&&(h.inputPlaceholder=y.getAttribute("placeholder")),y.hasAttribute("value")&&(h.inputValue=y.getAttribute("value")));let _=Array.from(l.querySelectorAll("swal-input-option"));return _.length&&(h.inputOptions={},_.forEach(P=>{Fo(P,["value"]);let z=P.getAttribute("value");if(!z)return;let ge=P.innerHTML;h.inputOptions[z]=ge})),h},kN=(l,h)=>{let y={};for(let _ in h){let P=h[_],z=l.querySelector(P);z&&(Fo(z,[]),y[P.replace(/^swal-/,"")]=z.innerHTML.trim())}return y},ON=l=>{let h=bb.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(l.children).forEach(y=>{let _=y.tagName.toLowerCase();h.includes(_)||O(`Unrecognized element <${_}>`)})},Fo=(l,h)=>{Array.from(l.attributes).forEach(y=>{h.indexOf(y.name)===-1&&O([`Unrecognized attribute "${y.name}" on <${l.tagName.toLowerCase()}>.`,`${h.length?`Allowed attributes are: ${h.join(", ")}`:"To set the value, use HTML within the element."}`])})},Cb=10,FN=l=>{let h=C(),y=R();typeof l.willOpen=="function"&&l.willOpen(y),s.eventEmitter.emit("willOpen",y);let P=window.getComputedStyle(document.body).overflowY;UN(h,y,l),setTimeout(()=>{LN(h,y)},Cb),Si()&&(VN(h,l.scrollbarPadding,P),ng()),!Ai()&&!s.previousActiveElement&&(s.previousActiveElement=document.activeElement),typeof l.didOpen=="function"&&setTimeout(()=>l.didOpen(y)),s.eventEmitter.emit("didOpen",y),un(h,m["no-transition"])},Fd=l=>{let h=R();if(l.target!==h)return;let y=C();h.removeEventListener("animationend",Fd),h.removeEventListener("transitionend",Fd),y.style.overflowY="auto"},LN=(l,h)=>{Ri(h)?(l.style.overflowY="hidden",h.addEventListener("animationend",Fd),h.addEventListener("transitionend",Fd)):l.style.overflowY="auto"},VN=(l,h,y)=>{Ro(),h&&y!=="hidden"&&ig(y),setTimeout(()=>{l.scrollTop=0})},UN=(l,h,y)=>{be(l,y.showClass.backdrop),y.animation?(h.style.setProperty("opacity","0","important"),tt(h,"grid"),setTimeout(()=>{be(h,y.showClass.popup),h.style.removeProperty("opacity")},Cb)):tt(h,"grid"),be([document.documentElement,document.body],m.shown),y.heightAuto&&y.backdrop&&!y.toast&&be([document.documentElement,document.body],m["height-auto"])};var Db={email:(l,h)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(l)?Promise.resolve():Promise.resolve(h||"Invalid email address"),url:(l,h)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(l)?Promise.resolve():Promise.resolve(h||"Invalid URL")};function jN(l){l.inputValidator||(l.input==="email"&&(l.inputValidator=Db.email),l.input==="url"&&(l.inputValidator=Db.url))}function BN(l){(!l.target||typeof l.target=="string"&&!document.querySelector(l.target)||typeof l.target!="string"&&!l.target.appendChild)&&(O('Target parameter is not valid, defaulting to "body"'),l.target="body")}function $N(l){jN(l),l.showLoaderOnConfirm&&!l.preConfirm&&O(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),BN(l),typeof l.title=="string"&&(l.title=l.title.split(`
`).join("<br />")),Fc(l)}let cr;var Ld=new WeakMap;class ot{constructor(){if(r(this,Ld,void 0),typeof window>"u")return;cr=this;for(var h=arguments.length,y=new Array(h),_=0;_<h;_++)y[_]=arguments[_];let P=Object.freeze(this.constructor.argsToParams(y));this.params=P,this.isAwaitingPromise=!1,i(Ld,this,this._main(cr.params))}_main(h){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if($(Object.assign({},y,h)),s.currentInstance){let z=Pi.swalPromiseResolve.get(s.currentInstance),{isAwaitingPromise:ge}=s.currentInstance;s.currentInstance._destroy(),ge||z({isDismissed:!0}),Si()&&yd()}s.currentInstance=cr;let _=qN(h,y);$N(_),Object.freeze(_),s.timeout&&(s.timeout.stop(),delete s.timeout),clearTimeout(s.restoreFocusTimeout);let P=zN(cr);return pd(cr,_),Ne.innerParams.set(cr,_),HN(cr,P,_)}then(h){return n(Ld,this).then(h)}finally(h){return n(Ld,this).finally(h)}}let HN=(l,h,y)=>new Promise((_,P)=>{let z=ge=>{l.close({isDismissed:!0,dismiss:ge})};Pi.swalPromiseResolve.set(l,_),Pi.swalPromiseReject.set(l,P),h.confirmButton.onclick=()=>{Hs(l)},h.denyButton.onclick=()=>{Rd(l)},h.cancelButton.onclick=()=>{qs(l,z)},h.closeButton.onclick=()=>{z(Yt.close)},zs(y,h,z),Vs(s,y,z),Cd(l,y),FN(y),GN(s,y,z),WN(h,y),setTimeout(()=>{h.container.scrollTop=0})}),qN=(l,h)=>{let y=SN(l),_=Object.assign({},dt,h,y,l);return _.showClass=Object.assign({},dt.showClass,_.showClass),_.hideClass=Object.assign({},dt.hideClass,_.hideClass),_.animation===!1&&(_.showClass={backdrop:"swal2-noanimation"},_.hideClass={}),_},zN=l=>{let h={popup:R(),container:C(),actions:kn(),confirmButton:an(),denyButton:Vt(),cancelButton:Ci(),loader:Di(),closeButton:xc(),validationMessage:bi(),progressSteps:jr()};return Ne.domCache.set(l,h),h},GN=(l,h,y)=>{let _=er();ut(_),h.timer&&(l.timeout=new TN(()=>{y("timer"),delete l.timeout},h.timer),h.timerProgressBar&&(tt(_),Ut(_,h,"timerProgressBar"),setTimeout(()=>{l.timeout&&l.timeout.running&&ks(h.timer)})))},WN=(l,h)=>{if(!h.toast){if(!Oe(h.allowEnterKey)){ne("allowEnterKey"),YN();return}KN(l)||QN(l,h)||Ni(-1,1)}},KN=l=>{let h=l.popup.querySelectorAll("[autofocus]");for(let y of h)if(y instanceof HTMLElement&&Pt(y))return y.focus(),!0;return!1},QN=(l,h)=>h.focusDeny&&Pt(l.denyButton)?(l.denyButton.focus(),!0):h.focusCancel&&Pt(l.cancelButton)?(l.cancelButton.focus(),!0):h.focusConfirm&&Pt(l.confirmButton)?(l.confirmButton.focus(),!0):!1,YN=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){let l=new Date,h=localStorage.getItem("swal-initiation");h?(l.getTime()-Date.parse(h))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";let y=document.createElement("audio");y.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",y.loop=!0,document.body.appendChild(y),setTimeout(()=>{y.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${l}`)}ot.prototype.disableButtons=Zc,ot.prototype.enableButtons=sr,ot.prototype.getInput=ko,ot.prototype.disableInput=Xc,ot.prototype.enableInput=Jc,ot.prototype.hideLoading=Li,ot.prototype.disableLoading=Li,ot.prototype.showValidationMessage=eu,ot.prototype.resetValidationMessage=Oo,ot.prototype.close=Zt,ot.prototype.closePopup=Zt,ot.prototype.closeModal=Zt,ot.prototype.closeToast=Zt,ot.prototype.rejectPromise=zc,ot.prototype.update=Ve,ot.prototype._destroy=Se,Object.assign(ot,DN),Object.keys(ln).forEach(l=>{ot[l]=function(){return cr&&cr[l]?cr[l](...arguments):null}}),ot.DismissReason=Yt,ot.version="11.14.4";let Vd=ot;return Vd.default=Vd,Vd});typeof Ur<"u"&&Ur.Sweetalert2&&(Ur.swal=Ur.sweetAlert=Ur.Swal=Ur.SweetAlert=Ur.Sweetalert2);typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});function Tb(t,e){return Object.is(t,e)}var Et=null,jd=!1,Bd=1,$r=Symbol("SIGNAL");function Pe(t){let e=Et;return Et=t,e}function Sb(){return Et}var ru={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function hg(t){if(jd)throw new Error("");if(Et===null)return;Et.consumerOnSignalRead(t);let e=Et.nextProducerIndex++;if(zd(Et),e<Et.producerNode.length&&Et.producerNode[e]!==t&&nu(Et)){let n=Et.producerNode[e];qd(n,Et.producerIndexOfThis[e])}Et.producerNode[e]!==t&&(Et.producerNode[e]=t,Et.producerIndexOfThis[e]=nu(Et)?Mb(t,Et,e):0),Et.producerLastReadVersion[e]=t.version}function JN(){Bd++}function Ab(t){if(!(nu(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Bd)){if(!t.producerMustRecompute(t)&&!pg(t)){t.dirty=!1,t.lastCleanEpoch=Bd;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Bd}}function Rb(t){if(t.liveConsumerNode===void 0)return;let e=jd;jd=!0;try{for(let n of t.liveConsumerNode)n.dirty||XN(n)}finally{jd=e}}function xb(){return Et?.consumerAllowSignalWrites!==!1}function XN(t){t.dirty=!0,Rb(t),t.consumerMarkedDirty?.(t)}function Hd(t){return t&&(t.nextProducerIndex=0),Pe(t)}function fg(t,e){if(Pe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(nu(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)qd(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function pg(t){zd(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Ab(n),r!==n.version))return!0}return!1}function mg(t){if(zd(t),nu(t))for(let e=0;e<t.producerNode.length;e++)qd(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Mb(t,e,n){if(Nb(t),t.liveConsumerNode.length===0&&Pb(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=Mb(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function qd(t,e){if(Nb(t),t.liveConsumerNode.length===1&&Pb(t))for(let r=0;r<t.producerNode.length;r++)qd(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];zd(i),i.producerIndexOfThis[r]=e}}function nu(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function zd(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Nb(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Pb(t){return t.producerNode!==void 0}function kb(t){let e=Object.create(eP);e.computation=t;let n=()=>{if(Ab(e),hg(e),e.value===$d)throw e.error;return e.value};return n[$r]=e,n}var lg=Symbol("UNSET"),dg=Symbol("COMPUTING"),$d=Symbol("ERRORED"),eP=le(j({},ru),{value:lg,dirty:!0,error:null,equal:Tb,producerMustRecompute(t){return t.value===lg||t.value===dg},producerRecomputeValue(t){if(t.value===dg)throw new Error("Detected cycle in computations.");let e=t.value;t.value=dg;let n=Hd(t),r;try{r=t.computation()}catch(i){r=$d,t.error=i}finally{fg(t,n)}if(e!==lg&&e!==$d&&r!==$d&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function tP(){throw new Error}var Ob=tP;function Fb(){Ob()}function Lb(t){Ob=t}var nP=null;function Vb(t){let e=Object.create(jb);e.value=t;let n=()=>(hg(e),e.value);return n[$r]=e,n}function gg(t,e){xb()||Fb(),t.equal(t.value,e)||(t.value=e,rP(t))}function Ub(t,e){xb()||Fb(),gg(t,e(t.value))}var jb=le(j({},ru),{equal:Tb,value:void 0});function rP(t){t.version++,JN(),Rb(t),nP?.()}function fe(t){return typeof t=="function"}function Ws(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Gd=Ws(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Lo(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var nt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(fe(r))try{r()}catch(o){e=o instanceof Gd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Bb(o)}catch(s){e=e??[],s instanceof Gd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Gd(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Bb(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Lo(n,e)}remove(e){let{_finalizers:n}=this;n&&Lo(n,e),e instanceof t&&e._removeParent(this)}};nt.EMPTY=(()=>{let t=new nt;return t.closed=!0,t})();var yg=nt.EMPTY;function Wd(t){return t instanceof nt||t&&"closed"in t&&fe(t.remove)&&fe(t.add)&&fe(t.unsubscribe)}function Bb(t){fe(t)?t():t.unsubscribe()}var jn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ks={setTimeout(t,e,...n){let{delegate:r}=Ks;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ks;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Kd(t){Ks.setTimeout(()=>{let{onUnhandledError:e}=jn;if(e)e(t);else throw t})}function iu(){}var $b=vg("C",void 0,void 0);function Hb(t){return vg("E",void 0,t)}function qb(t){return vg("N",t,void 0)}function vg(t,e,n){return{kind:t,value:e,error:n}}var Vo=null;function Qs(t){if(jn.useDeprecatedSynchronousErrorHandling){let e=!Vo;if(e&&(Vo={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Vo;if(Vo=null,n)throw r}}else t()}function zb(t){jn.useDeprecatedSynchronousErrorHandling&&Vo&&(Vo.errorThrown=!0,Vo.error=t)}var Uo=class extends nt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Wd(e)&&e.add(this)):this.destination=sP}static create(e,n,r){return new Ys(e,n,r)}next(e){this.isStopped?wg(qb(e),this):this._next(e)}error(e){this.isStopped?wg(Hb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?wg($b,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},iP=Function.prototype.bind;function _g(t,e){return iP.call(t,e)}var Eg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Qd(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Qd(r)}else Qd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Qd(n)}}},Ys=class extends Uo{constructor(e,n,r){super();let i;if(fe(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&jn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&_g(e.next,o),error:e.error&&_g(e.error,o),complete:e.complete&&_g(e.complete,o)}):i=e}this.destination=new Eg(i)}};function Qd(t){jn.useDeprecatedSynchronousErrorHandling?zb(t):Kd(t)}function oP(t){throw t}function wg(t,e){let{onStoppedNotification:n}=jn;n&&Ks.setTimeout(()=>n(t,e))}var sP={closed:!0,next:iu,error:oP,complete:iu};var Zs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function dn(t){return t}function Ig(...t){return bg(t)}function bg(t){return t.length===0?dn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Ae=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=cP(n)?n:new Ys(n,r,i);return Qs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Gb(r),new r((i,o)=>{let s=new Ys({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Zs](){return this}pipe(...n){return bg(n)(this)}toPromise(n){return n=Gb(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Gb(t){var e;return(e=t??jn.Promise)!==null&&e!==void 0?e:Promise}function aP(t){return t&&fe(t.next)&&fe(t.error)&&fe(t.complete)}function cP(t){return t&&t instanceof Uo||aP(t)&&Wd(t)}function Cg(t){return fe(t?.lift)}function Re(t){return e=>{if(Cg(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ce(t,e,n,r,i){return new Dg(t,e,n,r,i)}var Dg=class extends Uo{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Js(){return Re((t,e)=>{let n=null;t._refCount++;let r=Ce(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Xs=class extends Ae{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Cg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new nt;let n=this.getSubject();e.add(this.source.subscribe(Ce(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=nt.EMPTY)}return e}refCount(){return Js()(this)}};var Wb=Ws(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var st=(()=>{class t extends Ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Yd(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Wb}next(n){Qs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Qs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Qs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?yg:(this.currentObservers=null,o.push(n),new nt(()=>{this.currentObservers=null,Lo(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Ae;return n.source=this,n}}return t.create=(e,n)=>new Yd(e,n),t})(),Yd=class extends st{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:yg}};var at=class extends st{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Tg={now(){return(Tg.delegate||Date).now()},delegate:void 0};var Zd=class extends nt{constructor(e,n){super()}schedule(e,n=0){return this}};var ou={setInterval(t,e,...n){let{delegate:r}=ou;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ou;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ea=class extends Zd{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return ou.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ou.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Lo(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ta=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ta.now=Tg.now;var na=class extends ta{constructor(e,n=ta.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Sg=new na(ea);var Jd=class extends ea{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Xd=class extends na{};var Ag=new Xd(Jd);var hn=new Ae(t=>t.complete());function Kb(t){return t&&fe(t.schedule)}function Qb(t){return t[t.length-1]}function eh(t){return fe(Qb(t))?t.pop():void 0}function ji(t){return Kb(Qb(t))?t.pop():void 0}function Rg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Zb(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(m){s(m)}}function u(p){try{d(r.throw(p))}catch(m){s(m)}}function d(p){p.done?o(p.value):i(p.value).then(a,u)}d((r=r.apply(t,e||[])).next())})}function Yb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function jo(t){return this instanceof jo?(this.v=t,this):new jo(t)}function Jb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(b){return function(M){return Promise.resolve(M).then(b,m)}}function a(b,M){r[b]&&(i[b]=function(L){return new Promise(function(O,H){o.push([b,L,O,H])>1||u(b,L)})},M&&(i[b]=M(i[b])))}function u(b,M){try{d(r[b](M))}catch(L){w(o[0][3],L)}}function d(b){b.value instanceof jo?Promise.resolve(b.value.v).then(p,m):w(o[0][2],b)}function p(b){u("next",b)}function m(b){u("throw",b)}function w(b,M){b(M),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Xb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Yb=="function"?Yb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(d){o({value:d,done:a})},s)}}var th=t=>t&&typeof t.length=="number"&&typeof t!="function";function nh(t){return fe(t?.then)}function rh(t){return fe(t[Zs])}function ih(t){return Symbol.asyncIterator&&fe(t?.[Symbol.asyncIterator])}function oh(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function uP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var sh=uP();function ah(t){return fe(t?.[sh])}function ch(t){return Jb(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield jo(n.read());if(i)return yield jo(void 0);yield yield jo(r)}}finally{n.releaseLock()}})}function uh(t){return fe(t?.getReader)}function ht(t){if(t instanceof Ae)return t;if(t!=null){if(rh(t))return lP(t);if(th(t))return dP(t);if(nh(t))return hP(t);if(ih(t))return e0(t);if(ah(t))return fP(t);if(uh(t))return pP(t)}throw oh(t)}function lP(t){return new Ae(e=>{let n=t[Zs]();if(fe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function dP(t){return new Ae(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function hP(t){return new Ae(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Kd)})}function fP(t){return new Ae(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function e0(t){return new Ae(e=>{mP(t,e).catch(n=>e.error(n))})}function pP(t){return e0(ch(t))}function mP(t,e){var n,r,i,o;return Zb(this,void 0,void 0,function*(){try{for(n=Xb(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Jt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Bi(t,e=0){return Re((n,r)=>{n.subscribe(Ce(r,i=>Jt(r,t,()=>r.next(i),e),()=>Jt(r,t,()=>r.complete(),e),i=>Jt(r,t,()=>r.error(i),e)))})}function $i(t,e=0){return Re((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function t0(t,e){return ht(t).pipe($i(e),Bi(e))}function n0(t,e){return ht(t).pipe($i(e),Bi(e))}function r0(t,e){return new Ae(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function i0(t,e){return new Ae(n=>{let r;return Jt(n,e,()=>{r=t[sh](),Jt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>fe(r?.return)&&r.return()})}function lh(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ae(n=>{Jt(n,e,()=>{let r=t[Symbol.asyncIterator]();Jt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function o0(t,e){return lh(ch(t),e)}function s0(t,e){if(t!=null){if(rh(t))return t0(t,e);if(th(t))return r0(t,e);if(nh(t))return n0(t,e);if(ih(t))return lh(t,e);if(ah(t))return i0(t,e);if(uh(t))return o0(t,e)}throw oh(t)}function Ye(t,e){return e?s0(t,e):ht(t)}function ce(...t){let e=ji(t);return Ye(t,e)}function ra(t,e){let n=fe(t)?t:()=>t,r=i=>i.error(n());return new Ae(e?i=>e.schedule(r,0,i):r)}function xg(t){return!!t&&(t instanceof Ae||fe(t.lift)&&fe(t.subscribe))}var Hr=Ws(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function _e(t,e){return Re((n,r)=>{let i=0;n.subscribe(Ce(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:gP}=Array;function yP(t,e){return gP(e)?t(...e):t(e)}function dh(t){return _e(e=>yP(t,e))}var{isArray:vP}=Array,{getPrototypeOf:_P,prototype:wP,keys:EP}=Object;function hh(t){if(t.length===1){let e=t[0];if(vP(e))return{args:e,keys:null};if(IP(e)){let n=EP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function IP(t){return t&&typeof t=="object"&&_P(t)===wP}function fh(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function su(...t){let e=ji(t),n=eh(t),{args:r,keys:i}=hh(t);if(r.length===0)return Ye([],e);let o=new Ae(bP(r,e,i?s=>fh(i,s):dn));return n?o.pipe(dh(n)):o}function bP(t,e,n=dn){return r=>{a0(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)a0(e,()=>{let d=Ye(t[u],e),p=!1;d.subscribe(Ce(r,m=>{o[u]=m,p||(p=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function a0(t,e,n){t?Jt(n,t,e):e()}function c0(t,e,n,r,i,o,s,a){let u=[],d=0,p=0,m=!1,w=()=>{m&&!u.length&&!d&&e.complete()},b=L=>d<r?M(L):u.push(L),M=L=>{o&&e.next(L),d++;let O=!1;ht(n(L,p++)).subscribe(Ce(e,H=>{i?.(H),o?b(H):e.next(H)},()=>{O=!0},void 0,()=>{if(O)try{for(d--;u.length&&d<r;){let H=u.shift();s?Jt(e,s,()=>M(H)):M(H)}w()}catch(H){e.error(H)}}))};return t.subscribe(Ce(e,b,()=>{m=!0,w()})),()=>{a?.()}}function ft(t,e,n=1/0){return fe(e)?ft((r,i)=>_e((o,s)=>e(r,o,i,s))(ht(t(r,i))),n):(typeof e=="number"&&(n=e),Re((r,i)=>c0(r,i,t,n)))}function ia(t=1/0){return ft(dn,t)}function u0(){return ia(1)}function oa(...t){return u0()(Ye(t,ji(t)))}function ph(t){return new Ae(e=>{ht(t()).subscribe(e)})}function Mg(...t){let e=eh(t),{args:n,keys:r}=hh(t),i=new Ae(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,d=s;for(let p=0;p<s;p++){let m=!1;ht(n[p]).subscribe(Ce(o,w=>{m||(m=!0,d--),a[p]=w},()=>u--,void 0,()=>{(!u||!m)&&(d||o.next(r?fh(r,a):a),o.complete())}))}});return e?i.pipe(dh(e)):i}function Xt(t,e){return Re((n,r)=>{let i=0;n.subscribe(Ce(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Hi(t){return Re((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Ce(n,void 0,void 0,s=>{o=ht(t(s,Hi(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function l0(t,e,n,r,i){return(o,s)=>{let a=n,u=e,d=0;o.subscribe(Ce(s,p=>{let m=d++;u=a?t(u,p,m):(a=!0,p),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Bo(t,e){return fe(e)?ft(t,e,1):ft(t,1)}function qi(t){return Re((e,n)=>{let r=!1;e.subscribe(Ce(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function qr(t){return t<=0?()=>hn:Re((e,n)=>{let r=0;e.subscribe(Ce(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ng(t){return _e(()=>t)}function mh(t=CP){return Re((e,n)=>{let r=!1;e.subscribe(Ce(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function CP(){return new Hr}function au(t){return Re((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function ur(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Xt((i,o)=>t(i,o,r)):dn,qr(1),n?qi(e):mh(()=>new Hr))}function sa(t){return t<=0?()=>hn:Re((e,n)=>{let r=[];e.subscribe(Ce(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Pg(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Xt((i,o)=>t(i,o,r)):dn,sa(1),n?qi(e):mh(()=>new Hr))}function kg(t,e){return Re(l0(t,e,arguments.length>=2,!0))}function Og(...t){let e=ji(t);return Re((n,r)=>{(e?oa(t,n,e):oa(t,n)).subscribe(r)})}function bn(t,e){return Re((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Ce(r,u=>{i?.unsubscribe();let d=0,p=o++;ht(t(u,p)).subscribe(i=Ce(r,m=>r.next(e?e(u,m,p,d++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Fg(t){return Re((e,n)=>{ht(t).subscribe(Ce(n,()=>n.complete(),iu)),!n.closed&&e.subscribe(n)})}function It(t,e,n){let r=fe(t)||e||n?{next:t,error:e,complete:n}:t;return r?Re((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ce(o,u=>{var d;(d=r.next)===null||d===void 0||d.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,u),o.error(u)},()=>{var u,d;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):dn}var K0="https://g.co/ng/security#xss",re=class extends Error{constructor(e,n){super(jy(e,n)),this.code=e}};function jy(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function gu(t){return{toString:t}.toString()}var gh="__parameters__";function DP(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Q0(t,e,n){return gu(()=>{let r=DP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,d,p){let m=u.hasOwnProperty(gh)?u[gh]:Object.defineProperty(u,gh,{value:[]})[gh];for(;m.length<=p;)m.push(null);return(m[p]=m[p]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function He(t){for(let e in t)if(t[e]===He)return e;throw Error("Could not find renamed property on target object.")}function TP(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function zt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(zt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function d0(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var SP=He({__forward_ref__:He});function pn(t){return t.__forward_ref__=pn,t.toString=function(){return zt(this())},t}function qt(t){return Y0(t)?t():t}function Y0(t){return typeof t=="function"&&t.hasOwnProperty(SP)&&t.__forward_ref__===pn}function te(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function bt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Yh(t){return h0(t,J0)||h0(t,X0)}function Z0(t){return Yh(t)!==null}function h0(t,e){return t.hasOwnProperty(e)?t[e]:null}function AP(t){let e=t&&(t[J0]||t[X0]);return e||null}function f0(t){return t&&(t.hasOwnProperty(p0)||t.hasOwnProperty(RP))?t[p0]:null}var J0=He({\u0275prov:He}),p0=He({\u0275inj:He}),X0=He({ngInjectableDef:He}),RP=He({ngInjectorDef:He}),Q=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=te({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function eC(t){return t&&!!t.\u0275providers}var xP=He({\u0275cmp:He}),MP=He({\u0275dir:He}),NP=He({\u0275pipe:He}),PP=He({\u0275mod:He}),Dh=He({\u0275fac:He}),uu=He({__NG_ELEMENT_ID__:He}),m0=He({__NG_ENV_ID__:He});function zr(t){return typeof t=="string"?t:t==null?"":String(t)}function kP(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():zr(t)}function OP(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new re(-200,t)}function By(t,e){throw new re(-201,!1)}var ve=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ve||{}),Yg;function tC(){return Yg}function en(t){let e=Yg;return Yg=t,e}function nC(t,e,n){let r=Yh(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ve.Optional)return null;if(e!==void 0)return e;By(t,"Injector")}var FP={},lu=FP,Zg="__NG_DI_FLAG__",Th="ngTempTokenPath",LP="ngTokenPath",VP=/\n/gm,UP="\u0275",g0="__source",da;function jP(){return da}function zi(t){let e=da;return da=t,e}function BP(t,e=ve.Default){if(da===void 0)throw new re(-203,!1);return da===null?nC(t,void 0,e):da.get(t,e&ve.Optional?null:void 0,e)}function ee(t,e=ve.Default){return(tC()||BP)(qt(t),e)}function q(t,e=ve.Default){return ee(t,Zh(e))}function Zh(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Jg(t){let e=[];for(let n=0;n<t.length;n++){let r=qt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new re(900,!1);let i,o=ve.Default;for(let s=0;s<r.length;s++){let a=r[s],u=$P(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(ee(i,o))}else e.push(ee(r))}return e}function rC(t,e){return t[Zg]=e,t.prototype[Zg]=e,t}function $P(t){return t[Zg]}function HP(t,e,n,r){let i=t[Th];throw e[g0]&&i.unshift(e[g0]),t.message=qP(`
`+t.message,i,n,r),t[LP]=i,t[Th]=null,t}function qP(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==UP?t.slice(2):t;let i=zt(e);if(Array.isArray(e))i=e.map(zt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):zt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(VP,`
  `)}`}var jt=rC(Q0("Optional"),8);var $y=rC(Q0("SkipSelf"),4);function Ho(t,e){let n=t.hasOwnProperty(Dh);return n?t[Dh]:null}function Hy(t,e){t.forEach(n=>Array.isArray(n)?Hy(n,e):e(n))}function iC(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Sh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function zP(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function GP(t,e,n){let r=yu(t,e);return r>=0?t[r|1]=n:(r=~r,zP(t,r,e,n)),r}function Lg(t,e){let n=yu(t,e);if(n>=0)return t[n|1]}function yu(t,e){return WP(t,e,1)}function WP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var fa={},Cn=[],pa=new Q(""),oC=new Q("",-1),sC=new Q(""),Ah=class{get(e,n=lu){if(n===lu){let r=new Error(`NullInjectorError: No provider for ${zt(e)}!`);throw r.name="NullInjectorError",r}return n}},aC=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(aC||{}),hr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(hr||{}),Ki=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ki||{});function KP(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Xg(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];YP(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function QP(t){return t===3||t===4||t===6}function YP(t){return t.charCodeAt(0)===64}function du(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?y0(t,n,i,null,e[++r]):y0(t,n,i,null,null))}}return t}function y0(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var cC="ng-template";function ZP(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&KP(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(qy(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function qy(t){return t.type===4&&t.value!==cC}function JP(t,e,n){let r=t.type===4&&!n?cC:t.value;return e===r}function XP(t,e,n){let r=4,i=t.attrs,o=i!==null?nk(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Bn(r)&&!Bn(u))return!1;if(s&&Bn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!JP(t,u,n)||u===""&&e.length===1){if(Bn(r))return!1;s=!0}}else if(r&8){if(i===null||!ZP(t,i,u,n)){if(Bn(r))return!1;s=!0}}else{let d=e[++a],p=ek(u,i,qy(t),n);if(p===-1){if(Bn(r))return!1;s=!0;continue}if(d!==""){let m;if(p>o?m="":m=i[p+1].toLowerCase(),r&2&&d!==m){if(Bn(r))return!1;s=!0}}}}return Bn(r)||s}function Bn(t){return(t&1)===0}function ek(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return rk(e,t)}function tk(t,e,n=!1){for(let r=0;r<e.length;r++)if(XP(t,e[r],n))return!0;return!1}function nk(t){for(let e=0;e<t.length;e++){let n=t[e];if(QP(n))return e}return t.length}function rk(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function v0(t,e){return t?":not("+e.trim()+")":e}function ik(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Bn(s)&&(e+=v0(o,i),i=""),r=s,o=o||!Bn(r);n++}return i!==""&&(e+=v0(o,i)),e}function ok(t){return t.map(ik).join(",")}function sk(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Bn(i))break;i=o}r++}return{attrs:e,classes:n}}function mn(t){return gu(()=>{let e=pC(t),n=le(j({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===aC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||hr.Emulated,styles:t.styles||Cn,_:null,schemas:t.schemas||null,tView:null,id:""});mC(n);let r=t.dependencies;return n.directiveDefs=w0(r,!1),n.pipeDefs=w0(r,!0),n.id=uk(n),n})}function ak(t){return Qi(t)||lC(t)}function ck(t){return t!==null}function Ct(t){return gu(()=>({type:t.type,bootstrap:t.bootstrap||Cn,declarations:t.declarations||Cn,imports:t.imports||Cn,exports:t.exports||Cn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function _0(t,e){if(t==null)return fa;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Ki.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Ki.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Ge(t){return gu(()=>{let e=pC(t);return mC(e),e})}function uC(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Qi(t){return t[xP]||null}function lC(t){return t[MP]||null}function dC(t){return t[NP]||null}function hC(t){let e=Qi(t)||lC(t)||dC(t);return e!==null?e.standalone:!1}function fC(t,e){let n=t[PP]||null;if(!n&&e===!0)throw new Error(`Type ${zt(t)} does not have '\u0275mod' property.`);return n}function pC(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||fa,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Cn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_0(t.inputs,e),outputs:_0(t.outputs),debugInfo:null}}function mC(t){t.features?.forEach(e=>e(t))}function w0(t,e){if(!t)return null;let n=e?dC:ak;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(ck)}function uk(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function yr(t){return{\u0275providers:t}}function lk(...t){return{\u0275providers:gC(!0,t),\u0275fromNgModule:!0}}function gC(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Hy(e,s=>{let a=s;ey(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&yC(i,o),n}function yC(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];zy(i,o=>{e(o,r)})}}function ey(t,e,n,r){if(t=qt(t),!t)return!1;let i=null,o=f0(t),s=!o&&Qi(t);if(!o&&!s){let u=t.ngModule;if(o=f0(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of u)ey(d,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let d;try{Hy(o.imports,p=>{ey(p,e,n,r)&&(d||=[],d.push(p))})}finally{}d!==void 0&&yC(d,e)}if(!a){let d=Ho(i)||(()=>new i);e({provide:i,useFactory:d,deps:Cn},i),e({provide:sC,useValue:i,multi:!0},i),e({provide:pa,useValue:()=>ee(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let d=t;zy(u,p=>{e(p,d)})}}else return!1;return i!==t&&t.providers!==void 0}function zy(t,e){for(let n of t)eC(n)&&(n=n.\u0275providers),Array.isArray(n)?zy(n,e):e(n)}var dk=He({provide:String,useValue:He});function vC(t){return t!==null&&typeof t=="object"&&dk in t}function hk(t){return!!(t&&t.useExisting)}function fk(t){return!!(t&&t.useFactory)}function ma(t){return typeof t=="function"}function pk(t){return!!t.useClass}var Jh=new Q(""),wh={},mk={},Vg;function Gy(){return Vg===void 0&&(Vg=new Ah),Vg}var fn=class{},hu=class extends fn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ny(e,s=>this.processProvider(s)),this.records.set(oC,aa(void 0,this)),i.has("environment")&&this.records.set(fn,aa(void 0,this));let o=this.records.get(Jh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(sC,Cn,ve.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Pe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Pe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=zi(this),r=en(void 0),i;try{return e()}finally{zi(n),en(r)}}get(e,n=lu,r=ve.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(m0))return e[m0](this);r=Zh(r);let i,o=zi(this),s=en(void 0);try{if(!(r&ve.SkipSelf)){let u=this.records.get(e);if(u===void 0){let d=wk(e)&&Yh(e);d&&this.injectableDefInScope(d)?u=aa(ty(e),wh):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ve.Self?Gy():this.parent;return n=r&ve.Optional&&n===lu?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Th]=a[Th]||[]).unshift(zt(e)),o)throw a;return HP(a,e,"R3InjectorError",this.source)}else throw a}finally{en(s),zi(o)}}resolveInjectorInitializers(){let e=Pe(null),n=zi(this),r=en(void 0),i;try{let o=this.get(pa,Cn,ve.Self);for(let s of o)s()}finally{zi(n),en(r),Pe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(zt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(e){e=qt(e);let n=ma(e)?e:qt(e&&e.provide),r=yk(e);if(!ma(e)&&e.multi===!0){let i=this.records.get(n);i||(i=aa(void 0,wh,!0),i.factory=()=>Jg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Pe(null);try{return n.value===wh&&(n.value=mk,n.value=n.factory()),typeof n.value=="object"&&n.value&&_k(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Pe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=qt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ty(t){let e=Yh(t),n=e!==null?e.factory:Ho(t);if(n!==null)return n;if(t instanceof Q)throw new re(204,!1);if(t instanceof Function)return gk(t);throw new re(204,!1)}function gk(t){if(t.length>0)throw new re(204,!1);let n=AP(t);return n!==null?()=>n.factory(t):()=>new t}function yk(t){if(vC(t))return aa(void 0,t.useValue);{let e=_C(t);return aa(e,wh)}}function _C(t,e,n){let r;if(ma(t)){let i=qt(t);return Ho(i)||ty(i)}else if(vC(t))r=()=>qt(t.useValue);else if(fk(t))r=()=>t.useFactory(...Jg(t.deps||[]));else if(hk(t))r=()=>ee(qt(t.useExisting));else{let i=qt(t&&(t.useClass||t.provide));if(vk(t))r=()=>new i(...Jg(t.deps));else return Ho(i)||ty(i)}return r}function aa(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function vk(t){return!!t.deps}function _k(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function wk(t){return typeof t=="function"||typeof t=="object"&&t instanceof Q}function ny(t,e){for(let n of t)Array.isArray(n)?ny(n,e):n&&eC(n)?ny(n.\u0275providers,e):e(n)}function vr(t,e){t instanceof hu&&t.assertNotDestroyed();let n,r=zi(t),i=en(void 0);try{return e()}finally{zi(r),en(i)}}function wC(){return tC()!==void 0||jP()!=null}function Ek(t){if(!wC())throw new re(-203,!1)}function Ik(t){return typeof t=="function"}var Yr=0,Ie=1,de=2,Gt=3,$n=4,qn=5,Rh=6,xh=7,Hn=8,ga=9,fr=10,pt=11,fu=12,E0=13,Da=14,pr=15,ya=16,ca=17,va=18,Xh=19,EC=20,Gi=21,Ug=22,Dn=23,mr=25,IC=1;var qo=7,Mh=8,Nh=9,Tn=10,Ph=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ph||{});function Wi(t){return Array.isArray(t)&&typeof t[IC]=="object"}function Zr(t){return Array.isArray(t)&&t[IC]===!0}function bC(t){return(t.flags&4)!==0}function ef(t){return t.componentOffset>-1}function Wy(t){return(t.flags&1)===1}function Yi(t){return!!t.template}function ry(t){return(t[de]&512)!==0}var iy=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function CC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Jr(){return DC}function DC(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ck),bk}Jr.ngInherit=!0;function bk(){let t=SC(this),e=t?.current;if(e){let n=t.previous;if(n===fa)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Ck(t,e,n,r,i){let o=this.declaredInputs[r],s=SC(t)||Dk(t,{previous:fa,current:null}),a=s.current||(s.current={}),u=s.previous,d=u[o];a[o]=new iy(d&&d.currentValue,n,u===fa),CC(t,e,i,n)}var TC="__ngSimpleChanges__";function SC(t){return t[TC]||null}function Dk(t,e){return t[TC]=e}var I0=null;var lr=function(t,e,n){I0?.(t,e,n)},Tk="svg",Sk="math";function gr(t){for(;Array.isArray(t);)t=t[Yr];return t}function AC(t,e){return gr(e[t])}function Sn(t,e){return gr(e[t.index])}function RC(t,e){return t.data[e]}function Ak(t,e){return t[e]}function Ji(t,e){let n=e[t];return Wi(n)?n:n[Yr]}function Ky(t){return(t[de]&128)===128}function Rk(t){return Zr(t[Gt])}function kh(t,e){return e==null?null:t[e]}function xC(t){t[ca]=0}function MC(t){t[de]&1024||(t[de]|=1024,Ky(t)&&nf(t))}function xk(t,e){for(;t>0;)e=e[Da],t--;return e}function tf(t){return!!(t[de]&9216||t[Dn]?.dirty)}function oy(t){t[fr].changeDetectionScheduler?.notify(8),t[de]&64&&(t[de]|=1024),tf(t)&&nf(t)}function nf(t){t[fr].changeDetectionScheduler?.notify(0);let e=zo(t);for(;e!==null&&!(e[de]&8192||(e[de]|=8192,!Ky(e)));)e=zo(e)}function NC(t,e){if((t[de]&256)===256)throw new re(911,!1);t[Gi]===null&&(t[Gi]=[]),t[Gi].push(e)}function Mk(t,e){if(t[Gi]===null)return;let n=t[Gi].indexOf(e);n!==-1&&t[Gi].splice(n,1)}function zo(t){let e=t[Gt];return Zr(e)?e[Gt]:e}var we={lFrame:$C(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var PC=!1;function Nk(){return we.lFrame.elementDepthCount}function Pk(){we.lFrame.elementDepthCount++}function kk(){we.lFrame.elementDepthCount--}function kC(){return we.bindingsEnabled}function Ok(){return we.skipHydrationRootTNode!==null}function Fk(t){return we.skipHydrationRootTNode===t}function Lk(){we.skipHydrationRootTNode=null}function ke(){return we.lFrame.lView}function Wt(){return we.lFrame.tView}function _r(t){return we.lFrame.contextLView=t,t[Hn]}function wr(t){return we.lFrame.contextLView=null,t}function tn(){let t=OC();for(;t!==null&&t.type===64;)t=t.parent;return t}function OC(){return we.lFrame.currentTNode}function Vk(){let t=we.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function vu(t,e){let n=we.lFrame;n.currentTNode=t,n.isParent=e}function FC(){return we.lFrame.isParent}function Uk(){we.lFrame.isParent=!1}function LC(){return PC}function b0(t){PC=t}function rf(){let t=we.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function VC(){return we.lFrame.bindingIndex}function jk(t){return we.lFrame.bindingIndex=t}function of(){return we.lFrame.bindingIndex++}function Qy(t){let e=we.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Bk(){return we.lFrame.inI18n}function $k(t,e){let n=we.lFrame;n.bindingIndex=n.bindingRootIndex=t,sy(e)}function Hk(){return we.lFrame.currentDirectiveIndex}function sy(t){we.lFrame.currentDirectiveIndex=t}function qk(t){let e=we.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function UC(t){we.lFrame.currentQueryIndex=t}function zk(t){let e=t[Ie];return e.type===2?e.declTNode:e.type===1?t[qn]:null}function jC(t,e,n){if(n&ve.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&ve.Host);)if(i=zk(o),i===null||(o=o[Da],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=we.lFrame=BC();return r.currentTNode=e,r.lView=t,!0}function Yy(t){let e=BC(),n=t[Ie];we.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function BC(){let t=we.lFrame,e=t===null?null:t.child;return e===null?$C(t):e}function $C(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function HC(){let t=we.lFrame;return we.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var qC=HC;function Zy(){let t=HC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Gk(t){return(we.lFrame.contextLView=xk(t,we.lFrame.contextLView))[Hn]}function Xi(){return we.lFrame.selectedIndex}function Go(t){we.lFrame.selectedIndex=t}function sf(){let t=we.lFrame;return RC(t.tView,t.selectedIndex)}function Wk(){return we.lFrame.currentNamespace}var zC=!0;function Jy(){return zC}function Xy(t){zC=t}function Kk(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=DC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function ev(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:p}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),p!=null&&(t.destroyHooks??=[]).push(n,p)}}function Eh(t,e,n){GC(t,e,3,n)}function Ih(t,e,n,r){(t[de]&3)===n&&GC(t,e,n,r)}function jg(t,e){let n=t[de];(n&3)===e&&(n&=16383,n+=1,t[de]=n)}function GC(t,e,n,r){let i=r!==void 0?t[ca]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[ca]+=65536),(a<o||o==-1)&&(Qk(t,n,e,u),t[ca]=(t[ca]&4294901760)+u+2),u++}function C0(t,e){lr(4,t,e);let n=Pe(null);try{e.call(t)}finally{Pe(n),lr(5,t,e)}}function Qk(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[de]>>14<t[ca]>>16&&(t[de]&3)===e&&(t[de]+=16384,C0(a,o)):C0(a,o)}var ha=-1,Wo=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Yk(t){return t instanceof Wo}function Zk(t){return(t.flags&8)!==0}function Jk(t){return(t.flags&16)!==0}var Bg={},ay=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Zh(r);let i=this.injector.get(e,Bg,r);return i!==Bg||n===Bg?i:this.parentInjector.get(e,n,r)}};function WC(t){return t!==ha}function Oh(t){return t&32767}function Xk(t){return t>>16}function Fh(t,e){let n=Xk(t),r=e;for(;n>0;)r=r[Da],n--;return r}var cy=!0;function Lh(t){let e=cy;return cy=t,e}var e1=256,KC=e1-1,QC=5,t1=0,dr={};function n1(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(uu)&&(r=n[uu]),r==null&&(r=n[uu]=t1++);let i=r&KC,o=1<<i;e.data[t+(i>>QC)]|=o}function Vh(t,e){let n=YC(t,e);if(n!==-1)return n;let r=e[Ie];r.firstCreatePass&&(t.injectorIndex=e.length,$g(r.data,t),$g(e,null),$g(r.blueprint,null));let i=tv(t,e),o=t.injectorIndex;if(WC(i)){let s=Oh(i),a=Fh(i,e),u=a[Ie].data;for(let d=0;d<8;d++)e[o+d]=a[s+d]|u[s+d]}return e[o+8]=i,o}function $g(t,e){t.push(0,0,0,0,0,0,0,0,e)}function YC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function tv(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=tD(i),r===null)return ha;if(n++,i=i[Da],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ha}function uy(t,e,n){n1(t,e,n)}function ZC(t,e,n){if(n&ve.Optional||t!==void 0)return t;By(e,"NodeInjector")}function JC(t,e,n,r){if(n&ve.Optional&&r===void 0&&(r=null),!(n&(ve.Self|ve.Host))){let i=t[ga],o=en(void 0);try{return i?i.get(e,r,n&ve.Optional):nC(e,r,n&ve.Optional)}finally{en(o)}}return ZC(r,e,n)}function XC(t,e,n,r=ve.Default,i){if(t!==null){if(e[de]&2048&&!(r&ve.Self)){let s=a1(t,e,n,r,dr);if(s!==dr)return s}let o=eD(t,e,n,r,dr);if(o!==dr)return o}return JC(e,n,r,i)}function eD(t,e,n,r,i){let o=o1(n);if(typeof o=="function"){if(!jC(e,t,r))return r&ve.Host?ZC(i,n,r):JC(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&ve.Optional))By(n);else return s}finally{qC()}}else if(typeof o=="number"){let s=null,a=YC(t,e),u=ha,d=r&ve.Host?e[pr][qn]:null;for((a===-1||r&ve.SkipSelf)&&(u=a===-1?tv(t,e):e[a+8],u===ha||!T0(r,!1)?a=-1:(s=e[Ie],a=Oh(u),e=Fh(u,e)));a!==-1;){let p=e[Ie];if(D0(o,a,p.data)){let m=r1(a,e,n,s,r,d);if(m!==dr)return m}u=e[a+8],u!==ha&&T0(r,e[Ie].data[a+8]===d)&&D0(o,a,e)?(s=p,a=Oh(u),e=Fh(u,e)):a=-1}}return i}function r1(t,e,n,r,i,o){let s=e[Ie],a=s.data[t+8],u=r==null?ef(a)&&cy:r!=s&&(a.type&3)!==0,d=i&ve.Host&&o===a,p=i1(a,s,n,u,d);return p!==null?_a(e,s,p,a):dr}function i1(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,d=t.directiveEnd,p=o>>20,m=r?a:a+p,w=i?a+p:d;for(let b=m;b<w;b++){let M=s[b];if(b<u&&n===M||b>=u&&M.type===n)return b}if(i){let b=s[u];if(b&&Yi(b)&&b.type===n)return u}return null}function _a(t,e,n,r){let i=t[n],o=e.data;if(Yk(i)){let s=i;s.resolving&&OP(kP(o[n]));let a=Lh(s.canSeeViewProviders);s.resolving=!0;let u,d=s.injectImpl?en(s.injectImpl):null,p=jC(t,r,ve.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&Kk(n,o[n],e)}finally{d!==null&&en(d),Lh(a),s.resolving=!1,qC()}}return i}function o1(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(uu)?t[uu]:void 0;return typeof e=="number"?e>=0?e&KC:s1:e}function D0(t,e,n){let r=1<<t;return!!(n[e+(t>>QC)]&r)}function T0(t,e){return!(t&ve.Self)&&!(t&ve.Host&&e)}var $o=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return XC(this._tNode,this._lView,e,Zh(r),n)}};function s1(){return new $o(tn(),ke())}function Xr(t){return gu(()=>{let e=t.prototype.constructor,n=e[Dh]||ly(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Dh]||ly(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ly(t){return Y0(t)?()=>{let e=ly(qt(t));return e&&e()}:Ho(t)}function a1(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[de]&2048&&!(s[de]&512);){let a=eD(o,s,n,r|ve.Self,dr);if(a!==dr)return a;let u=o.parent;if(!u){let d=s[EC];if(d){let p=d.get(n,dr,r);if(p!==dr)return p}u=tD(s),s=s[Da]}o=u}return i}function tD(t){let e=t[Ie],n=e.type;return n===2?e.declTNode:n===1?t[qn]:null}function S0(t,e=null,n=null,r){let i=nD(t,e,n,r);return i.resolveInjectorInitializers(),i}function nD(t,e=null,n=null,r,i=new Set){let o=[n||Cn,lk(t)];return r=r||(typeof t=="object"?void 0:zt(t)),new hu(o,e||Gy(),r||null,i)}var kt=class t{static{this.THROW_IF_NOT_FOUND=lu}static{this.NULL=new Ah}static create(e,n){if(Array.isArray(e))return S0({name:""},n,e,"");{let r=e.name??"";return S0({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=te({token:t,providedIn:"any",factory:()=>ee(oC)})}static{this.__NG_ELEMENT_ID__=-1}};var c1=new Q("");c1.__NG_ELEMENT_ID__=t=>{let e=tn();if(e===null)throw new re(204,!1);if(e.type&2)return e.value;if(t&ve.Optional)return null;throw new re(204,!1)};var u1="ngOriginalError";function Hg(t){return t[u1]}var rD=!0,nv=(()=>{class t{static{this.__NG_ELEMENT_ID__=l1}static{this.__NG_ENV_ID__=n=>n}}return t})(),dy=class extends nv{constructor(e){super(),this._lView=e}onDestroy(e){return NC(this._lView,e),()=>Mk(this._lView,e)}};function l1(){return new dy(ke())}var Ta=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new at(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=te({token:t,providedIn:"root",factory:()=>new t})}}return t})();var hy=class extends st{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,wC()&&(this.destroyRef=q(nv,{optional:!0})??void 0,this.pendingTasks=q(Ta,{optional:!0})??void 0)}emit(e){let n=Pe(null);try{super.next(e)}finally{Pe(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof nt&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ze=hy;function Uh(...t){}function iD(t){let e,n;function r(){t=Uh;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function A0(t){return queueMicrotask(()=>t()),()=>{t=Uh}}var rv="isAngularZone",jh=rv+"_ID",d1=0,Fe=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ze(!1),this.onMicrotaskEmpty=new Ze(!1),this.onStable=new Ze(!1),this.onError=new Ze(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=rD}=e;if(typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,p1(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(rv)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new re(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,h1,Uh,Uh);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},h1={};function iv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function f1(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){iD(()=>{t.callbackScheduled=!1,fy(t),t.isCheckStableRunning=!0,iv(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),fy(t)}function p1(t){let e=()=>{f1(t)},n=d1++;t._inner=t._inner.fork({name:"angular",properties:{[rv]:!0,[jh]:n,[jh+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(m1(u))return r.invokeTask(o,s,a,u);try{return R0(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),x0(t)}},onInvoke:(r,i,o,s,a,u,d)=>{try{return R0(t),r.invoke(o,s,a,u,d)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!g1(u)&&e(),x0(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,fy(t),iv(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function fy(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function R0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function x0(t){t._nesting--,iv(t)}var py=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ze,this.onMicrotaskEmpty=new Ze,this.onStable=new Ze,this.onError=new Ze}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function m1(t){return oD(t,"__ignore_ng_zone__")}function g1(t){return oD(t,"__scheduler_tick__")}function oD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Gr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Hg(e);for(;n&&Hg(n);)n=Hg(n);return n||null}},y1=new Q("",{providedIn:"root",factory:()=>{let t=q(Fe),e=q(Gr);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function v1(){return af(tn(),ke())}function af(t,e){return new zn(Sn(t,e))}var zn=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=v1}}return t})();function sD(t){return(t.flags&128)===128}var aD=new Map,_1=0;function w1(){return _1++}function E1(t){aD.set(t[Xh],t)}function my(t){aD.delete(t[Xh])}var M0="__ngContext__";function Ko(t,e){Wi(e)?(t[M0]=e[Xh],E1(e)):t[M0]=e}function cD(t){return lD(t[fu])}function uD(t){return lD(t[$n])}function lD(t){for(;t!==null&&!Zr(t);)t=t[$n];return t}var gy;function dD(t){gy=t}function I1(){if(gy!==void 0)return gy;if(typeof document<"u")return document;throw new re(210,!1)}var ov=new Q("",{providedIn:"root",factory:()=>b1}),b1="ng",sv=new Q(""),An=new Q("",{providedIn:"platform",factory:()=>"unknown"});var av=new Q("",{providedIn:"root",factory:()=>I1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var C1="h",D1="b";var T1=()=>null;function cv(t,e,n=!1){return T1(t,e,n)}var hD=!1,S1=new Q("",{providedIn:"root",factory:()=>hD});var Bh=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${K0})`}};function cf(t){return t instanceof Bh?t.changingThisBreaksApplicationSecurity:t}function fD(t,e){let n=A1(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${K0})`)}return n===e}function A1(t){return t instanceof Bh&&t.getTypeName()||null}var R1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function pD(t){return t=String(t),t.match(R1)?t:"unsafe:"+t}var uv=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(uv||{});function P7(t){let e=x1();return e?e.sanitize(uv.URL,t)||"":fD(t,"URL")?cf(t):pD(zr(t))}function x1(){let t=ke();return t&&t[fr].sanitizer}function mD(t){return t instanceof Function?t():t}function M1(t){return(t??q(kt)).get(An)==="browser"}var Wr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Wr||{}),N1;function lv(t,e){return N1(t,e)}function ua(t,e,n,r,i){if(r!=null){let o,s=!1;Zr(r)?o=r:Wi(r)&&(s=!0,r=r[Yr]);let a=gr(r);t===0&&n!==null?i==null?wD(e,n,a):$h(e,n,a,i||null,!0):t===1&&n!==null?$h(e,n,a,i||null,!0):t===2?W1(e,a,s):t===3&&e.destroyNode(a),o!=null&&Q1(e,t,o,n,i)}}function P1(t,e){return t.createText(e)}function k1(t,e,n){t.setValue(e,n)}function gD(t,e,n){return t.createElement(e,n)}function O1(t,e){yD(t,e),e[Yr]=null,e[qn]=null}function F1(t,e,n,r,i,o){r[Yr]=i,r[qn]=e,uf(t,r,n,1,i,o)}function yD(t,e){e[fr].changeDetectionScheduler?.notify(9),uf(t,e,e[pt],2,null,null)}function L1(t){let e=t[fu];if(!e)return qg(t[Ie],t);for(;e;){let n=null;if(Wi(e))n=e[fu];else{let r=e[Tn];r&&(n=r)}if(!n){for(;e&&!e[$n]&&e!==t;)Wi(e)&&qg(e[Ie],e),e=e[Gt];e===null&&(e=t),Wi(e)&&qg(e[Ie],e),n=e&&e[$n]}e=n}}function V1(t,e,n,r){let i=Tn+r,o=n.length;r>0&&(n[i-1][$n]=e),r<o-Tn?(e[$n]=n[i],iC(n,Tn+r,e)):(n.push(e),e[$n]=null),e[Gt]=n;let s=e[ya];s!==null&&n!==s&&vD(s,e);let a=e[va];a!==null&&a.insertView(t),oy(e),e[de]|=128}function vD(t,e){let n=t[Nh],r=e[Gt];if(Wi(r))t[de]|=Ph.HasTransplantedViews;else{let i=r[Gt][pr];e[pr]!==i&&(t[de]|=Ph.HasTransplantedViews)}n===null?t[Nh]=[e]:n.push(e)}function dv(t,e){let n=t[Nh],r=n.indexOf(e);n.splice(r,1)}function yy(t,e){if(t.length<=Tn)return;let n=Tn+e,r=t[n];if(r){let i=r[ya];i!==null&&i!==t&&dv(i,r),e>0&&(t[n-1][$n]=r[$n]);let o=Sh(t,Tn+e);O1(r[Ie],r);let s=o[va];s!==null&&s.detachView(o[Ie]),r[Gt]=null,r[$n]=null,r[de]&=-129}return r}function _D(t,e){if(!(e[de]&256)){let n=e[pt];n.destroyNode&&uf(t,e,n,3,null,null),L1(e)}}function qg(t,e){if(e[de]&256)return;let n=Pe(null);try{e[de]&=-129,e[de]|=256,e[Dn]&&mg(e[Dn]),j1(t,e),U1(t,e),e[Ie].type===1&&e[pt].destroy();let r=e[ya];if(r!==null&&Zr(e[Gt])){r!==e[Gt]&&dv(r,e);let i=e[va];i!==null&&i.detachView(t)}my(e)}finally{Pe(n)}}function U1(t,e){let n=t.cleanup,r=e[xh];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[xh]=null);let i=e[Gi];if(i!==null){e[Gi]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function j1(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Wo)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];lr(4,a,u);try{u.call(a)}finally{lr(5,a,u)}}else{lr(4,i,o);try{o.call(i)}finally{lr(5,i,o)}}}}}function B1(t,e,n){return $1(t,e.parent,n)}function $1(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Yr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===hr.None||o===hr.Emulated)return null}return Sn(r,n)}}function $h(t,e,n,r,i){t.insertBefore(e,n,r,i)}function wD(t,e,n){t.appendChild(e,n)}function N0(t,e,n,r,i){r!==null?$h(t,e,n,r,i):wD(t,e,n)}function ED(t,e){return t.parentNode(e)}function H1(t,e){return t.nextSibling(e)}function q1(t,e,n){return G1(t,e,n)}function z1(t,e,n){return t.type&40?Sn(t,n):null}var G1=z1,P0;function hv(t,e,n,r){let i=B1(t,r,e),o=e[pt],s=r.parent||e[qn],a=q1(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)N0(o,i,n[u],a,!1);else N0(o,i,n,a,!1);P0!==void 0&&P0(o,r,e,n,i)}function cu(t,e){if(e!==null){let n=e.type;if(n&3)return Sn(e,t);if(n&4)return vy(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return cu(t,r);{let i=t[e.index];return Zr(i)?vy(-1,i):gr(i)}}else{if(n&128)return cu(t,e.next);if(n&32)return lv(e,t)()||gr(t[e.index]);{let r=ID(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=zo(t[pr]);return cu(i,r)}else return cu(t,e.next)}}}return null}function ID(t,e){if(e!==null){let r=t[pr][qn],i=e.projection;return r.projection[i]}return null}function vy(t,e){let n=Tn+t+1;if(n<e.length){let r=e[n],i=r[Ie].firstChild;if(i!==null)return cu(r,i)}return e[qo]}function W1(t,e,n){t.removeChild(null,e,n)}function fv(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Ko(gr(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)fv(t,e,n.child,r,i,o,!1),ua(e,t,i,a,o);else if(u&32){let d=lv(n,r),p;for(;p=d();)ua(e,t,i,p,o);ua(e,t,i,a,o)}else u&16?K1(t,e,r,n,i,o):ua(e,t,i,a,o);n=s?n.projectionNext:n.next}}function uf(t,e,n,r,i,o){fv(n,r,t.firstChild,e,i,o,!1)}function K1(t,e,n,r,i,o){let s=n[pr],u=s[qn].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++){let p=u[d];ua(e,t,i,p,o)}else{let d=u,p=s[Gt];sD(r)&&(d.flags|=128),fv(t,e,d,p,i,o,!0)}}function Q1(t,e,n,r,i){let o=n[qo],s=gr(n);o!==s&&ua(e,t,r,o,i);for(let a=Tn;a<n.length;a++){let u=n[a];uf(u[Ie],u,t,e,r,o)}}function Y1(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Wr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Wr.Important),t.setStyle(n,r,i,o))}}function Z1(t,e,n){t.setAttribute(e,"style",n)}function bD(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function CD(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Xg(t,e,r),i!==null&&bD(t,e,i),o!==null&&Z1(t,e,o)}var gn={};function G(t=1){DD(Wt(),ke(),Xi()+t,!1)}function DD(t,e,n,r){if(!r)if((e[de]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Eh(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Ih(e,o,0,n)}Go(n)}function Y(t,e=ve.Default){let n=ke();if(n===null)return ee(t,e);let r=tn();return XC(r,n,qt(t),e)}function TD(){let t="invalid";throw new Error(t)}function SD(t,e,n,r,i,o){let s=Pe(null);try{let a=null;i&Ki.SignalBased&&(a=e[r][$r]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Ki.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):CC(e,a,r,o)}finally{Pe(s)}}function J1(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Go(~i);else{let o=i,s=n[++r],a=n[++r];$k(s,o);let u=e[o];a(2,u)}}}finally{Go(-1)}}function lf(t,e,n,r,i,o,s,a,u,d,p){let m=e.blueprint.slice();return m[Yr]=i,m[de]=r|4|128|8|64,(d!==null||t&&t[de]&2048)&&(m[de]|=2048),xC(m),m[Gt]=m[Da]=t,m[Hn]=n,m[fr]=s||t&&t[fr],m[pt]=a||t&&t[pt],m[ga]=u||t&&t[ga]||null,m[qn]=o,m[Xh]=w1(),m[Rh]=p,m[EC]=d,m[pr]=e.type==2?t[pr]:m,m}function df(t,e,n,r,i){let o=t.data[e];if(o===null)o=X1(t,e,n,r,i),Bk()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Vk();o.injectorIndex=s===null?-1:s.injectorIndex}return vu(o,!0),o}function X1(t,e,n,r,i){let o=OC(),s=FC(),a=s?o:o&&o.parent,u=t.data[e]=iO(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function AD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function RD(t,e,n,r,i){let o=Xi(),s=r&2;try{Go(-1),s&&e.length>mr&&DD(t,e,mr,!1),lr(s?2:0,i),n(r,i)}finally{Go(o),lr(s?3:1,i)}}function xD(t,e,n){if(bC(e)){let r=Pe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{Pe(r)}}}function MD(t,e,n){kC()&&(lO(t,e,n,Sn(n,e)),(n.flags&64)===64&&FD(t,e,n))}function ND(t,e,n=Sn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function PD(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=pv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function pv(t,e,n,r,i,o,s,a,u,d,p){let m=mr+r,w=m+i,b=eO(m,w),M=typeof d=="function"?d():d;return b[Ie]={type:t,blueprint:b,template:n,queries:null,viewQuery:a,declTNode:e,data:b.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:M,incompleteFirstPass:!1,ssrId:p}}function eO(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:gn);return n}function tO(t,e,n,r){let o=r.get(S1,hD)||n===hr.ShadowDom,s=t.selectRootElement(e,o);return nO(s),s}function nO(t){rO(t)}var rO=()=>null;function iO(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Ok()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function k0(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Ki.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let d=o;if(i!==null){if(!i.hasOwnProperty(o))continue;d=i[o]}t===0?O0(r,n,d,a,u):O0(r,n,d,a)}return r}function O0(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function oO(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,d=null;for(let p=r;p<i;p++){let m=o[p],w=n?n.get(m):null,b=w?w.inputs:null,M=w?w.outputs:null;u=k0(0,m.inputs,p,u,b),d=k0(1,m.outputs,p,d,M);let L=u!==null&&s!==null&&!qy(e)?EO(u,p,s):null;a.push(L)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}function sO(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function mv(t,e,n,r,i,o,s,a){let u=Sn(e,n),d=e.inputs,p;!a&&d!=null&&(p=d[r])?(gv(t,n,p,r,i),ef(e)&&aO(n,e.index)):e.type&3?(r=sO(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function aO(t,e){let n=Ji(e,t);n[de]&16||(n[de]|=64)}function kD(t,e,n,r){if(kC()){let i=r===null?null:{"":-1},o=hO(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&OD(t,e,n,s,i,a),i&&fO(n,r,i)}n.mergedAttrs=du(n.mergedAttrs,n.attrs)}function OD(t,e,n,r,i,o){for(let d=0;d<r.length;d++)uy(Vh(n,e),t,r[d].type);mO(n,t.data.length,r.length);for(let d=0;d<r.length;d++){let p=r[d];p.providersResolver&&p.providersResolver(p)}let s=!1,a=!1,u=AD(t,e,r.length,null);for(let d=0;d<r.length;d++){let p=r[d];n.mergedAttrs=du(n.mergedAttrs,p.hostAttrs),gO(t,n,e,u,p),pO(u,p,i),p.contentQueries!==null&&(n.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(n.flags|=64);let m=p.type.prototype;!s&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}oO(t,n,o)}function cO(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;uO(s)!=a&&s.push(a),s.push(n,r,o)}}function uO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function lO(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;ef(n)&&yO(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Vh(n,e),Ko(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],d=_a(e,t,a,n);if(Ko(d,e),s!==null&&wO(e,a-i,d,u,n,s),Yi(u)){let p=Ji(n.index,e);p[Hn]=_a(e,t,a,n)}}}function FD(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Hk();try{Go(o);for(let a=r;a<i;a++){let u=t.data[a],d=e[a];sy(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&dO(u,d)}}finally{Go(-1),sy(s)}}function dO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function hO(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(tk(e,s.selectors,!1))if(r||(r=[]),Yi(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;_y(t,e,u)}else r.unshift(s),_y(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function _y(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function fO(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new re(-301,!1);r.push(e[i],o)}}}function pO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Yi(e)&&(n[""]=t)}}function mO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function gO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ho(i.type,!0)),s=new Wo(o,Yi(i),Y);t.blueprint[r]=s,n[r]=s,cO(t,e,r,AD(t,n,i.hostVars,gn),i)}function yO(t,e,n){let r=Sn(e,t),i=PD(n),o=t[fr].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=hf(t,lf(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function vO(t,e,n,r,i,o){let s=Sn(t,e);_O(e[pt],s,o,t.value,n,r,i)}function _O(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?zr(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function wO(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],d=s[a++],p=s[a++],m=s[a++];SD(r,n,u,d,p,m)}}function EO(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function LD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function VD(t,e){let n=t.contentQueries;if(n!==null){let r=Pe(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];UC(o),a.contentQueries(2,e[s],s)}}}finally{Pe(r)}}}function hf(t,e){return t[fu]?t[E0][$n]=e:t[fu]=e,t[E0]=e,e}function wy(t,e,n){UC(0);let r=Pe(null);try{e(t,n)}finally{Pe(r)}}function IO(t){return t[xh]??=[]}function bO(t){return t.cleanup??=[]}function UD(t,e){let n=t[ga],r=n?n.get(Gr,null):null;r&&r.handleError(e)}function gv(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],d=e[s],p=t.data[s];SD(p,d,r,a,u,i)}}function yv(t,e,n){let r=AC(e,t);k1(t[pt],r,n)}function CO(t,e){let n=Ji(e,t),r=n[Ie];DO(r,n);let i=n[Yr];i!==null&&n[Rh]===null&&(n[Rh]=cv(i,n[ga])),vv(r,n,n[Hn])}function DO(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function vv(t,e,n){Yy(e);try{let r=t.viewQuery;r!==null&&wy(1,r,n);let i=t.template;i!==null&&RD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[va]?.finishViewCreation(t),t.staticContentQueries&&VD(t,e),t.staticViewQueries&&wy(2,t.viewQuery,n);let o=t.components;o!==null&&TO(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[de]&=-5,Zy()}}function TO(t,e){for(let n=0;n<e.length;n++)CO(t,e[n])}function SO(t,e,n,r){let i=Pe(null);try{let o=e.tView,a=t[de]&4096?4096:16,u=lf(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=t[e.index];u[ya]=d;let p=t[va];return p!==null&&(u[va]=p.createEmbeddedView(o)),vv(o,u,n),u}finally{Pe(i)}}function F0(t,e){return!e||e.firstChild===null||sD(t)}function AO(t,e,n,r=!0){let i=e[Ie];if(V1(i,e,t,n),r){let s=vy(n,t),a=e[pt],u=ED(a,t[qo]);u!==null&&F1(i,t[qn],a,e,u,s)}let o=e[Rh];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Hh(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(gr(o)),Zr(o)&&RO(o,r);let s=n.type;if(s&8)Hh(t,e,n.child,r);else if(s&32){let a=lv(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=ID(e,n);if(Array.isArray(a))r.push(...a);else{let u=zo(e[pr]);Hh(u[Ie],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function RO(t,e){for(let n=Tn;n<t.length;n++){let r=t[n],i=r[Ie].firstChild;i!==null&&Hh(r[Ie],r,i,e)}t[qo]!==t[Yr]&&e.push(t[qo])}var jD=[];function xO(t){return t[Dn]??MO(t)}function MO(t){let e=jD.pop()??Object.create(PO);return e.lView=t,e}function NO(t){t.lView[Dn]!==t&&(t.lView=null,jD.push(t))}var PO=le(j({},ru),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{nf(t.lView)},consumerOnSignalRead(){this.lView[Dn]=this}});function kO(t){let e=t[Dn]??Object.create(OO);return e.lView=t,e}var OO=le(j({},ru),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=zo(t.lView);for(;e&&!BD(e[Ie]);)e=zo(e);e&&MC(e)},consumerOnSignalRead(){this.lView[Dn]=this}});function BD(t){return t.type!==2}var FO=100;function $D(t,e=!0,n=0){let r=t[fr],i=r.rendererFactory,o=!1;o||i.begin?.();try{LO(t,n)}catch(s){throw e&&UD(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function LO(t,e){let n=LC();try{b0(!0),Ey(t,e);let r=0;for(;tf(t);){if(r===FO)throw new re(103,!1);r++,Ey(t,1)}}finally{b0(n)}}function VO(t,e,n,r){let i=e[de];if((i&256)===256)return;let o=!1,s=!1;!o&&e[fr].inlineEffectRunner?.flush(),Yy(e);let a=!0,u=null,d=null;o||(BD(t)?(d=xO(e),u=Hd(d)):Sb()===null?(a=!1,d=kO(e),u=Hd(d)):e[Dn]&&(mg(e[Dn]),e[Dn]=null));try{xC(e),jk(t.bindingStartIndex),n!==null&&RD(t,e,n,2,r);let p=(i&3)===3;if(!o)if(p){let b=t.preOrderCheckHooks;b!==null&&Eh(e,b,null)}else{let b=t.preOrderHooks;b!==null&&Ih(e,b,0,null),jg(e,0)}if(s||UO(e),HD(e,0),t.contentQueries!==null&&VD(t,e),!o)if(p){let b=t.contentCheckHooks;b!==null&&Eh(e,b)}else{let b=t.contentHooks;b!==null&&Ih(e,b,1),jg(e,1)}J1(t,e);let m=t.components;m!==null&&zD(e,m,0);let w=t.viewQuery;if(w!==null&&wy(2,w,r),!o)if(p){let b=t.viewCheckHooks;b!==null&&Eh(e,b)}else{let b=t.viewHooks;b!==null&&Ih(e,b,2),jg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ug]){for(let b of e[Ug])b();e[Ug]=null}o||(e[de]&=-73)}catch(p){throw o||nf(e),p}finally{d!==null&&(fg(d,u),a&&NO(d)),Zy()}}function HD(t,e){for(let n=cD(t);n!==null;n=uD(n))for(let r=Tn;r<n.length;r++){let i=n[r];qD(i,e)}}function UO(t){for(let e=cD(t);e!==null;e=uD(e)){if(!(e[de]&Ph.HasTransplantedViews))continue;let n=e[Nh];for(let r=0;r<n.length;r++){let i=n[r];MC(i)}}}function jO(t,e,n){let r=Ji(e,t);qD(r,n)}function qD(t,e){Ky(t)&&Ey(t,e)}function Ey(t,e){let r=t[Ie],i=t[de],o=t[Dn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&pg(o)),s||=!1,o&&(o.dirty=!1),t[de]&=-9217,s)VO(r,t,r.template,t[Hn]);else if(i&8192){HD(t,1);let a=r.components;a!==null&&zD(t,a,1)}}function zD(t,e,n){for(let r=0;r<e.length;r++)jO(t,e[r],n)}function _v(t,e){let n=LC()?64:1088;for(t[fr].changeDetectionScheduler?.notify(e);t;){t[de]|=n;let r=zo(t);if(ry(t)&&!r)return t;t=r}return null}var Qo=class{get rootNodes(){let e=this._lView,n=e[Ie];return Hh(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Hn]}set context(e){this._lView[Hn]=e}get destroyed(){return(this._lView[de]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Gt];if(Zr(e)){let n=e[Mh],r=n?n.indexOf(this):-1;r>-1&&(yy(e,r),Sh(n,r))}this._attachedToViewContainer=!1}_D(this._lView[Ie],this._lView)}onDestroy(e){NC(this._lView,e)}markForCheck(){_v(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[de]&=-129}reattach(){oy(this._lView),this._lView[de]|=128}detectChanges(){this._lView[de]|=1024,$D(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ry(this._lView),n=this._lView[ya];n!==null&&!e&&dv(n,this._lView),yD(this._lView[Ie],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=e;let n=ry(this._lView),r=this._lView[ya];r!==null&&!n&&vD(r,this._lView),oy(this._lView)}},ff=(()=>{class t{static{this.__NG_ELEMENT_ID__=HO}}return t})(),BO=ff,$O=class extends BO{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=SO(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Qo(i)}};function HO(){return qO(tn(),ke())}function qO(t,e){return t.type&4?new $O(e,t,af(t,e)):null}var O7=new RegExp(`^(\\d+)*(${D1}|${C1})*(.*)`);var zO=()=>null;function L0(t,e){return zO(t,e)}var wa=class{},pf=new Q("",{providedIn:"root",factory:()=>!1});var GD=new Q(""),WD=new Q(""),Iy=class{},qh=class{};function GO(t){let e=Error(`No component factory found for ${zt(t)}.`);return e[WO]=t,e}var WO="ngComponent";var by=class{resolveComponentFactory(e){throw GO(e)}},Ea=class{static{this.NULL=new by}},Ia=class{},ei=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>KO()}}return t})();function KO(){let t=ke(),e=tn(),n=Ji(e.index,t);return(Wi(n)?n:t)[pt]}var QO=(()=>{class t{static{this.\u0275prov=te({token:t,providedIn:"root",factory:()=>null})}}return t})();function Cy(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=d0(i,a);else if(o==2){let u=a,d=e[++s];r=d0(r,u+": "+d+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var zh=class extends Ea{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Qi(e);return new ba(n,this.ngModule)}};function V0(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Ki.None;e?n.push({propName:s,templateName:r,isSignal:(a&Ki.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function YO(t){let e=t.toLowerCase();return e==="svg"?Tk:e==="math"?Sk:null}var ba=class extends qh{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=V0(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return V0(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=ok(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=Pe(null);try{i=i||this.ngModule;let s=i instanceof fn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new ay(e,s):e,u=a.get(Ia,null);if(u===null)throw new re(407,!1);let d=a.get(QO,null),p=a.get(wa,null),m={rendererFactory:u,sanitizer:d,inlineEffectRunner:null,changeDetectionScheduler:p},w=u.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",M=r?tO(w,r,this.componentDef.encapsulation,a):gD(w,b,YO(b)),L=512;this.componentDef.signals?L|=4096:this.componentDef.onPush||(L|=16);let O=null;M!==null&&(O=cv(M,a,!0));let H=pv(0,null,null,1,0,null,null,null,null,null,null),X=lf(null,H,null,L,null,null,m,w,a,null,O);Yy(X);let Z,ne,Oe=null;try{let oe=this.componentDef,T,E=null;oe.findHostDirectiveDefs?(T=[],E=new Map,oe.findHostDirectiveDefs(oe,T,E),T.push(oe)):T=[oe];let C=ZO(X,M);Oe=JO(C,M,oe,T,X,m,w),ne=RC(H,mr),M&&tF(w,oe,M,r),n!==void 0&&nF(ne,this.ngContentSelectors,n),Z=eF(Oe,oe,T,E,X,[rF]),vv(H,X,null)}catch(oe){throw Oe!==null&&my(Oe),my(X),oe}finally{Zy()}return new Dy(this.componentType,Z,af(ne,X),X,ne)}finally{Pe(o)}}},Dy=class extends Iy{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Qo(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;gv(o[Ie],o,i,e,n),this.previousInputValues.set(e,n);let s=Ji(this._tNode.index,o);_v(s,1)}}get injector(){return new $o(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ZO(t,e){let n=t[Ie],r=mr;return t[r]=e,df(n,r,2,"#host",null)}function JO(t,e,n,r,i,o,s){let a=i[Ie];XO(r,t,e,s);let u=null;e!==null&&(u=cv(e,i[ga]));let d=o.rendererFactory.createRenderer(e,n),p=16;n.signals?p=4096:n.onPush&&(p=64);let m=lf(i,PD(n),null,p,i[t.index],t,o,d,null,null,u);return a.firstCreatePass&&_y(a,t,r.length-1),hf(i,m),i[t.index]=m}function XO(t,e,n,r){for(let i of t)e.mergedAttrs=du(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Cy(e,e.mergedAttrs,!0),n!==null&&CD(r,n,e))}function eF(t,e,n,r,i,o){let s=tn(),a=i[Ie],u=Sn(s,i);OD(a,i,s,n,null,r);for(let p=0;p<n.length;p++){let m=s.directiveStart+p,w=_a(i,a,m,s);Ko(w,i)}FD(a,i,s),u&&Ko(u,i);let d=_a(i,a,s.directiveStart+s.componentOffset,s);if(t[Hn]=i[Hn]=d,o!==null)for(let p of o)p(d,e);return xD(a,s,i),d}function tF(t,e,n,r){if(r)Xg(t,n,["ng-version","18.2.9"]);else{let{attrs:i,classes:o}=sk(e.selectors[0]);i&&Xg(t,n,i),o&&o.length>0&&bD(t,n,o.join(" "))}}function nF(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function rF(){let t=tn();ev(ke()[Ie],t)}var Sa=(()=>{class t{static{this.__NG_ELEMENT_ID__=iF}}return t})();function iF(){let t=tn();return sF(t,ke())}var oF=Sa,KD=class extends oF{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return af(this._hostTNode,this._hostLView)}get injector(){return new $o(this._hostTNode,this._hostLView)}get parentInjector(){let e=tv(this._hostTNode,this._hostLView);if(WC(e)){let n=Fh(e,this._hostLView),r=Oh(e),i=n[Ie].data[r+8];return new $o(i,n)}else return new $o(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=U0(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Tn}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=L0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,F0(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!Ik(e),a;if(s)a=n;else{let M=n||{};a=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef}let u=s?e:new ba(Qi(e)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let L=(s?d:this.parentInjector).get(fn,null);L&&(o=L)}let p=Qi(u.componentType??{}),m=L0(this._lContainer,p?.id??null),w=m?.firstChild??null,b=u.create(d,i,w,o);return this.insertImpl(b.hostView,a,F0(this._hostTNode,m)),b}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Rk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Gt],d=new KD(u,u[qn],u[Gt]);d.detach(d.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return AO(s,i,o,r),e.attachToViewContainerRef(),iC(zg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=U0(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=yy(this._lContainer,n);r&&(Sh(zg(this._lContainer),n),_D(r[Ie],r))}detach(e){let n=this._adjustIndex(e,-1),r=yy(this._lContainer,n);return r&&Sh(zg(this._lContainer),n)!=null?new Qo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function U0(t){return t[Mh]}function zg(t){return t[Mh]||(t[Mh]=[])}function sF(t,e){let n,r=e[t.index];return Zr(r)?n=r:(n=LD(r,e,null,t),e[t.index]=n,hf(e,n)),cF(n,e,t,r),new KD(n,t,e)}function aF(t,e){let n=t[pt],r=n.createComment(""),i=Sn(e,t),o=ED(n,i);return $h(n,o,r,H1(n,i),!1),r}var cF=dF,uF=()=>!1;function lF(t,e,n){return uF(t,e,n)}function dF(t,e,n,r){if(t[qo])return;let i;n.type&8?i=gr(r):i=aF(e,n),t[qo]=i}var j0=new Set;function Aa(t){j0.has(t)||(j0.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function hF(t){return typeof t=="function"&&t[$r]!==void 0}function Ra(t,e){Aa("NgSignals");let n=Vb(t),r=n[$r];return e?.equal&&(r.equal=e.equal),n.set=i=>gg(r,i),n.update=i=>Ub(r,i),n.asReadonly=fF.bind(n),n}function fF(){let t=this[$r];if(t.readonlyFn===void 0){let e=()=>this();e[$r]=t,t.readonlyFn=e}return t.readonlyFn}function QD(t){return hF(t)&&typeof t.set=="function"}function pF(t){return Object.getPrototypeOf(t.prototype).constructor}function nn(t){let e=pF(t.type),n=!0,r=[t];for(;e;){let i;if(Yi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new re(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=yh(t.inputs),s.inputTransforms=yh(t.inputTransforms),s.declaredInputs=yh(t.declaredInputs),s.outputs=yh(t.outputs);let a=i.hostBindings;a&&_F(t,a);let u=i.viewQuery,d=i.contentQueries;if(u&&yF(t,u),d&&vF(t,d),mF(t,i),TP(t.outputs,i.outputs),Yi(i)&&i.data.animation){let p=t.data;p.animation=(p.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===nn&&(n=!1)}}e=Object.getPrototypeOf(e)}gF(r)}function mF(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function gF(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=du(i.hostAttrs,n=du(n,i.hostAttrs))}}function yh(t){return t===fa?{}:t===Cn?[]:t}function yF(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function vF(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function _F(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Zi=class{},pu=class{};var Ty=class extends Zi{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new zh(this);let o=fC(e);this._bootstrapComponents=mD(o.bootstrap),this._r3Injector=nD(e,n,[{provide:Zi,useValue:this},{provide:Ea,useValue:this.componentFactoryResolver},...r],zt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Sy=class extends pu{constructor(e){super(),this.moduleType=e}create(e){return new Ty(this.moduleType,e,[])}};var Gh=class extends Zi{constructor(e){super(),this.componentFactoryResolver=new zh(this),this.instance=null;let n=new hu([...e.providers,{provide:Zi,useValue:this},{provide:Ea,useValue:this.componentFactoryResolver}],e.parent||Gy(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function mf(t,e,n=null){return new Gh({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function YD(t){return EF(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function wF(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function EF(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function wv(t,e,n){return t[e]=n}function IF(t,e){return t[e]}function Kr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Ev(t,e,n,r){let i=Kr(t,e,n);return Kr(t,e+1,r)||i}function bF(t,e,n,r,i){let o=Ev(t,e,n,r);return Kr(t,e+2,i)||o}function CF(t){return(t.flags&32)===32}function DF(t,e,n,r,i,o,s,a,u){let d=e.consts,p=df(e,t,4,s||null,a||null);kD(e,n,p,kh(d,u)),ev(e,p);let m=p.tView=pv(2,p,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,p),m.queries=e.queries.embeddedTView(p)),p}function TF(t,e,n,r,i,o,s,a,u,d){let p=n+mr,m=e.firstCreatePass?DF(p,e,t,r,i,o,s,a,u):e.data[p];vu(m,!1);let w=SF(e,t,m,n);Jy()&&hv(e,t,w,m),Ko(w,t);let b=LD(w,t,w,m);return t[p]=b,hf(t,b),lF(b,m,t),Wy(m)&&MD(e,t,m),u!=null&&ND(t,m,d),m}function xe(t,e,n,r,i,o,s,a){let u=ke(),d=Wt(),p=kh(d.consts,o);return TF(u,d,t,e,n,r,i,p,s,a),xe}var SF=AF;function AF(t,e,n,r){return Xy(!0),e[pt].createComment("")}var la=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(la||{}),ZD=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=te({token:t,providedIn:"root",factory:()=>new t})}}return t})(),Ay=class t{constructor(){this.ngZone=q(Fe),this.scheduler=q(wa),this.errorHandler=q(Gr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[la.EarlyRead,la.Write,la.MixedReadWrite,la.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=te({token:t,providedIn:"root",factory:()=>new t})}},Ry=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Iv(t,e){!e?.injector&&Ek(Iv);let n=e?.injector??q(kt);return M1(n)?(Aa("NgAfterNextRender"),xF(t,n,e,!0)):MF}function RF(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function xF(t,e,n,r){let i=e.get(ZD);i.impl??=e.get(Ay);let o=n?.phase??la.MixedReadWrite,s=n?.manualCleanup!==!0?e.get(nv):null,a=new Ry(i.impl,RF(t,o),r,s);return i.impl.register(a),a}var MF={destroy(){}};function _u(t,e,n,r){let i=ke(),o=of();if(Kr(i,o,e)){let s=Wt(),a=sf();vO(a,i,t,e,n,r)}return _u}function JD(t,e,n,r){return Kr(t,of(),n)?e+zr(n)+r:gn}function NF(t,e,n,r,i,o){let s=VC(),a=Ev(t,s,n,i);return Qy(2),a?e+zr(n)+r+zr(i)+o:gn}function PF(t,e,n,r,i,o,s,a){let u=VC(),d=bF(t,u,n,i,s);return Qy(3),d?e+zr(n)+r+zr(i)+o+zr(s)+a:gn}function vh(t,e){return t<<17|e<<2}function Yo(t){return t>>17&32767}function kF(t){return(t&2)==2}function OF(t,e){return t&131071|e<<17}function xy(t){return t|2}function Ca(t){return(t&131068)>>2}function Gg(t,e){return t&-131069|e<<2}function FF(t){return(t&1)===1}function My(t){return t|1}function LF(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Yo(s),u=Ca(s);t[r]=n;let d=!1,p;if(Array.isArray(n)){let m=n;p=m[1],(p===null||yu(m,p)>0)&&(d=!0)}else p=n;if(i)if(u!==0){let w=Yo(t[a+1]);t[r+1]=vh(w,a),w!==0&&(t[w+1]=Gg(t[w+1],r)),t[a+1]=OF(t[a+1],r)}else t[r+1]=vh(a,0),a!==0&&(t[a+1]=Gg(t[a+1],r)),a=r;else t[r+1]=vh(u,0),a===0?a=r:t[u+1]=Gg(t[u+1],r),u=r;d&&(t[r+1]=xy(t[r+1])),B0(t,p,r,!0),B0(t,p,r,!1),VF(e,p,t,r,o),s=vh(a,u),o?e.classBindings=s:e.styleBindings=s}function VF(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&yu(o,e)>=0&&(n[r+1]=My(n[r+1]))}function B0(t,e,n,r){let i=t[n+1],o=e===null,s=r?Yo(i):Ca(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],d=t[s+1];UF(u,e)&&(a=!0,t[s+1]=r?My(d):xy(d)),s=r?Yo(d):Ca(d)}a&&(t[n+1]=r?xy(i):My(i))}function UF(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?yu(t,e)>=0:!1}function W(t,e,n){let r=ke(),i=of();if(Kr(r,i,e)){let o=Wt(),s=sf();mv(o,s,r,t,e,r[pt],n,!1)}return W}function $0(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";gv(t,n,o[s],s,r)}function gf(t,e){return jF(t,e,null,!0),gf}function jF(t,e,n,r){let i=ke(),o=Wt(),s=Qy(2);if(o.firstUpdatePass&&$F(o,t,s,r),e!==gn&&Kr(i,s,e)){let a=o.data[Xi()];WF(o,a,i,i[pt],t,i[s+1]=KF(e,n),r,s)}}function BF(t,e){return e>=t.expandoStartIndex}function $F(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Xi()],s=BF(t,n);QF(o,r)&&e===null&&!s&&(e=!1),e=HF(i,o,e,r),LF(i,o,e,n,s,r)}}function HF(t,e,n,r){let i=qk(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Wg(null,t,e,n,r),n=mu(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Wg(i,t,e,n,r),o===null){let u=qF(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Wg(null,t,e,u[1],r),u=mu(u,e.attrs,r),zF(t,e,r,u))}else o=GF(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function qF(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ca(r)!==0)return t[Yo(r)]}function zF(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Yo(i)]=r}function GF(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=mu(r,s,n)}return mu(r,e.attrs,n)}function Wg(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=mu(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function mu(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),GP(t,s,n?!0:e[++o]))}return t===void 0?null:t}function WF(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,d=u[a+1],p=FF(d)?H0(u,e,n,i,Ca(d),s):void 0;if(!Wh(p)){Wh(o)||kF(d)&&(o=H0(u,null,n,i,a,s));let m=AC(Xi(),n);Y1(r,s,m,i,o)}}function H0(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],d=Array.isArray(u),p=d?u[1]:u,m=p===null,w=n[i+1];w===gn&&(w=m?Cn:void 0);let b=m?Lg(w,r):p===r?w:void 0;if(d&&!Wh(b)&&(b=Lg(u,r)),Wh(b)&&(a=b,s))return a;let M=t[i+1];i=s?Yo(M):Ca(M)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Lg(u,r))}return a}function Wh(t){return t!==void 0}function KF(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=zt(cf(t)))),t}function QF(t,e){return(t.flags&(e?8:16))!==0}function YF(t,e,n,r,i,o){let s=e.consts,a=kh(s,i),u=df(e,t,2,r,a);return kD(e,n,u,kh(s,o)),u.attrs!==null&&Cy(u,u.attrs,!1),u.mergedAttrs!==null&&Cy(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function F(t,e,n,r){let i=ke(),o=Wt(),s=mr+t,a=i[pt],u=o.firstCreatePass?YF(s,o,i,e,n,r):o.data[s],d=ZF(o,i,u,a,e,t);i[s]=d;let p=Wy(u);return vu(u,!0),CD(a,d,u),!CF(u)&&Jy()&&hv(o,i,d,u),Nk()===0&&Ko(d,i),Pk(),p&&(MD(o,i,u),xD(o,u,i)),r!==null&&ND(i,u),F}function N(){let t=tn();FC()?Uk():(t=t.parent,vu(t,!1));let e=t;Fk(e)&&Lk(),kk();let n=Wt();return n.firstCreatePass&&(ev(n,t),bC(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Zk(e)&&$0(n,e,ke(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Jk(e)&&$0(n,e,ke(),e.stylesWithoutHost,!1),N}function ye(t,e,n,r){return F(t,e,n,r),N(),ye}var ZF=(t,e,n,r,i,o)=>(Xy(!0),gD(r,i,Wk()));function Er(){return ke()}var Kh="en-US";var JF=Kh;function XF(t){typeof t=="string"&&(JF=t.toLowerCase().replace(/_/g,"-"))}var eL=(t,e,n)=>{};function Ee(t,e,n,r){let i=ke(),o=Wt(),s=tn();return XD(o,i,i[pt],s,t,e,r),Ee}function tL(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[xh],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function XD(t,e,n,r,i,o,s){let a=Wy(r),d=t.firstCreatePass&&bO(t),p=e[Hn],m=IO(e),w=!0;if(r.type&3||s){let L=Sn(r,e),O=s?s(L):L,H=m.length,X=s?ne=>s(gr(ne[r.index])):r.index,Z=null;if(!s&&a&&(Z=tL(t,e,i,r.index)),Z!==null){let ne=Z.__ngLastListenerFn__||Z;ne.__ngNextListenerFn__=o,Z.__ngLastListenerFn__=o,w=!1}else{o=z0(r,e,p,o),eL(L,i,o);let ne=n.listen(O,i,o);m.push(o,ne),d&&d.push(i,X,H,H+1)}}else o=z0(r,e,p,o);let b=r.outputs,M;if(w&&b!==null&&(M=b[i])){let L=M.length;if(L)for(let O=0;O<L;O+=2){let H=M[O],X=M[O+1],Oe=e[H][X].subscribe(o),oe=m.length;m.push(o,Oe),d&&d.push(i,r.index,oe,-(oe+1))}}}function q0(t,e,n,r){let i=Pe(null);try{return lr(6,e,n),n(r)!==!1}catch(o){return UD(t,o),!1}finally{lr(7,e,n),Pe(i)}}function z0(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?Ji(t.index,e):e;_v(s,5);let a=q0(e,n,r,o),u=i.__ngNextListenerFn__;for(;u;)a=q0(e,n,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function Ir(t=1){return Gk(t)}function nL(t,e,n,r,i){let o=ke(),s=JD(o,e,n,r);if(s!==gn){let a=Wt(),u=sf();mv(a,u,o,t,s,o[pt],i,!1)}return nL}function rL(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function U(t,e=""){let n=ke(),r=Wt(),i=t+mr,o=r.firstCreatePass?df(r,i,1,e,null):r.data[i],s=iL(r,n,o,e,t);n[i]=s,Jy()&&hv(r,n,s,o),vu(o,!1)}var iL=(t,e,n,r,i)=>(Xy(!0),P1(e[pt],r));function oL(t){return yf("",t,""),oL}function yf(t,e,n){let r=ke(),i=JD(r,t,e,n);return i!==gn&&yv(r,Xi(),i),yf}function sL(t,e,n,r,i){let o=ke(),s=NF(o,t,e,n,r,i);return s!==gn&&yv(o,Xi(),s),sL}function aL(t,e,n,r,i,o,s){let a=ke(),u=PF(a,t,e,n,r,i,o,s);return u!==gn&&yv(a,Xi(),u),aL}function vf(t,e,n){QD(e)&&(e=e());let r=ke(),i=of();if(Kr(r,i,e)){let o=Wt(),s=sf();mv(o,s,r,t,e,r[pt],n,!1)}return vf}function bv(t,e){let n=QD(t);return n&&t.set(e),n}function _f(t,e){let n=ke(),r=Wt(),i=tn();return XD(r,n,n[pt],i,t,e),_f}function cL(t,e,n){let r=Wt();if(r.firstCreatePass){let i=Yi(t);Ny(n,r.data,r.blueprint,i,!0),Ny(e,r.data,r.blueprint,i,!1)}}function Ny(t,e,n,r,i){if(t=qt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ny(t[o],e,n,r,i);else{let o=Wt(),s=ke(),a=tn(),u=ma(t)?t:qt(t.provide),d=_C(t),p=a.providerIndexes&1048575,m=a.directiveStart,w=a.providerIndexes>>20;if(ma(t)||!t.multi){let b=new Wo(d,i,Y),M=Qg(u,e,i?p:p+w,m);M===-1?(uy(Vh(a,s),o,u),Kg(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(b),s.push(b)):(n[M]=b,s[M]=b)}else{let b=Qg(u,e,p+w,m),M=Qg(u,e,p,p+w),L=b>=0&&n[b],O=M>=0&&n[M];if(i&&!O||!i&&!L){uy(Vh(a,s),o,u);let H=dL(i?lL:uL,n.length,i,r,d);!i&&O&&(n[M].providerFactory=H),Kg(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(H),s.push(H)}else{let H=eT(n[i?M:b],d,!i&&r);Kg(o,t,b>-1?b:M,H)}!i&&r&&O&&n[M].componentProviders++}}}function Kg(t,e,n,r){let i=ma(e),o=pk(e);if(i||o){let u=(o?qt(e.useClass):e).prototype.ngOnDestroy;if(u){let d=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let p=d.indexOf(n);p===-1?d.push(n,[r,u]):d[p+1].push(r,u)}else d.push(n,u)}}}function eT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Qg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function uL(t,e,n,r){return Py(this.multi,[])}function lL(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=_a(n,n[Ie],this.providerFactory.index,r);o=a.slice(0,s),Py(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Py(i,o);return o}function Py(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function dL(t,e,n,r,i){let o=new Wo(t,n,Y);return o.multi=[],o.index=e,o.componentProviders=0,eT(o,i,r&&!n),o}function Gn(t,e=[]){return n=>{n.providersResolver=(r,i)=>cL(r,i?i(t):t,e)}}var hL=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=gC(!1,n.type),i=r.length>0?mf([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=te({token:t,providedIn:"environment",factory:()=>new t(ee(fn))})}}return t})();function tT(t){Aa("NgStandalone"),t.getStandaloneInjector=e=>e.get(hL).getOrCreateStandaloneInjector(t)}function L7(t,e,n){let r=rf()+t,i=ke();return i[r]===gn?wv(i,r,n?e.call(n):e()):IF(i,r)}function V7(t,e,n,r){return rT(ke(),rf(),t,e,n,r)}function U7(t,e,n,r,i){return fL(ke(),rf(),t,e,n,r,i)}function nT(t,e){let n=t[e];return n===gn?void 0:n}function rT(t,e,n,r,i,o){let s=e+n;return Kr(t,s,i)?wv(t,s+1,o?r.call(o,i):r(i)):nT(t,s+1)}function fL(t,e,n,r,i,o,s){let a=e+n;return Ev(t,a,i,o)?wv(t,a+2,s?r.call(s,i,o):r(i,o)):nT(t,a+2)}function j7(t,e){let n=Wt(),r,i=t+mr;n.firstCreatePass?(r=pL(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Ho(r.type,!0)),s,a=en(Y);try{let u=Lh(!1),d=o();return Lh(u),rL(n,ke(),i,d),d}finally{en(a)}}function pL(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function B7(t,e,n){let r=t+mr,i=ke(),o=Ak(i,r);return mL(i,r)?rT(i,rf(),e,o.transform,n,o):o.transform(n)}function mL(t,e){return t[Ie].data[e].pure}var Qr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},iT=new Qr("18.2.9");var wf=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var oT=new Q("");function Zo(t){return!!t&&typeof t.then=="function"}function sT(t){return!!t&&typeof t.subscribe=="function"}var Ef=new Q(""),aT=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=q(Ef,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=i();if(Zo(o))n.push(o);else if(sT(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),If=new Q("");function gL(){Lb(()=>{throw new re(600,!1)})}function yL(t){return t.isBoundToModule}var vL=10;function _L(t,e,n){try{let r=n();return Zo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Jo=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=q(y1),this.afterRenderManager=q(ZD),this.zonelessEnabled=q(pf),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new st,this.afterTick=new st,this.componentTypes=[],this.components=[],this.isStable=q(Ta).hasPendingTasks.pipe(_e(n=>!n)),this._injector=q(fn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof qh;if(!this._injector.get(aT).done){let w=!i&&hC(n),b=!1;throw new re(405,b)}let s;i?s=n:s=this._injector.get(Ea).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=yL(s)?void 0:this._injector.get(Zi),u=r||s.selector,d=s.create(kt.NULL,[],u,a),p=d.location.nativeElement,m=d.injector.get(oT,null);return m?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),bh(this.components,d),m?.unregisterApplication(p)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new re(101,!1);let n=Pe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Pe(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(Ia,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<vL;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)wL(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>tf(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;bh(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(If,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>bh(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new re(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function bh(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function wL(t,e,n,r){if(!n&&!tf(t))return;$D(t,e,n&&!r?0:1)}var ky=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},bf=(()=>{class t{compileModuleSync(n){return new Sy(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=fC(n),o=mD(i.declarations).reduce((s,a)=>{let u=Qi(a);return u&&s.push(new ba(u)),s},[]);return new ky(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var EL=(()=>{class t{constructor(){this.zone=q(Fe),this.changeDetectionScheduler=q(wa),this.applicationRef=q(Jo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),IL=new Q("",{factory:()=>!1});function cT({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Fe(le(j({},uT()),{scheduleInRootZone:n})),[{provide:Fe,useFactory:t},{provide:pa,multi:!0,useFactory:()=>{let r=q(EL,{optional:!0});return()=>r.initialize()}},{provide:pa,multi:!0,useFactory:()=>{let r=q(bL);return()=>{r.initialize()}}},e===!0?{provide:GD,useValue:!0}:[],{provide:WD,useValue:n??rD}]}function $7(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=cT({ngZoneFactory:()=>{let i=uT(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Aa("NgZone_CoalesceEvent"),new Fe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return yr([{provide:IL,useValue:!0},{provide:pf,useValue:!1},r])}function uT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var bL=(()=>{class t{constructor(){this.subscription=new nt,this.initialized=!1,this.zone=q(Fe),this.pendingTasks=q(Ta)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Fe.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var CL=(()=>{class t{constructor(){this.appRef=q(Jo),this.taskService=q(Ta),this.ngZone=q(Fe),this.zonelessEnabled=q(pf),this.disableScheduling=q(GD,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new nt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(jh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(q(WD,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof py||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?A0:iD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(jh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,A0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function DL(){return typeof $localize<"u"&&$localize.locale||Kh}var Cv=new Q("",{providedIn:"root",factory:()=>q(Cv,ve.Optional|ve.SkipSelf)||DL()});var Oy=new Q("");function _h(t){return!t.moduleRef}function TL(t){let e=_h(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Fe);return n.run(()=>{_h(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Gr,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),_h(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Oy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Oy);s.add(o),t.moduleRef.onDestroy(()=>{bh(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return _L(r,n,()=>{let o=e.get(aT);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Cv,Kh);if(XF(s||Kh),_h(t)){let a=e.get(Jo);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return SL(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function SL(t,e){let n=t.injector.get(Jo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new re(-403,!1);e.push(t)}var Ch=null;function AL(t=[],e){return kt.create({name:e,providers:[{provide:Jh,useValue:"platform"},{provide:Oy,useValue:new Set([()=>Ch=null])},...t]})}function RL(t=[]){if(Ch)return Ch;let e=AL(t);return Ch=e,gL(),xL(e),e}function xL(t){t.get(sv,null)?.forEach(n=>n())}var Xo=(()=>{class t{static{this.__NG_ELEMENT_ID__=ML}}return t})();function ML(t){return NL(tn(),ke(),(t&16)===16)}function NL(t,e,n){if(ef(t)&&!n){let r=Ji(t.index,e);return new Qo(r,r)}else if(t.type&175){let r=e[pr];return new Qo(r,e)}return null}var Fy=class{constructor(){}supports(e){return YD(e)}create(e){return new Ly(e)}},PL=(t,e)=>e,Ly=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||PL}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<G0(r,i,o)?n:r,a=G0(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let d=a-i,p=u-i;if(d!=p){for(let w=0;w<d;w++){let b=w<o.length?o[w]:o[w]=0,M=b+w;p<=M&&M<d&&(o[w]=b+1)}let m=s.previousIndex;o[m]=p-d}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!YD(e))throw new re(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,wF(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Vy(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Qh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Qh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Vy=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Uy=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Qh=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Uy,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function G0(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function W0(){return new Dv([new Fy])}var Dv=(()=>{class t{static{this.\u0275prov=te({token:t,providedIn:"root",factory:W0})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||W0()),deps:[[t,new $y,new jt]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new re(901,!1)}}return t})();function lT(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=RL(r),o=[cT({}),{provide:wa,useExisting:CL},...n||[]],s=new Gh({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return TL({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function wu(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function xa(t,e){Aa("NgSignals");let n=kb(t);return e?.equal&&(n[$r].equal=e.equal),n}function br(t){let e=Pe(null);try{return t()}finally{Pe(e)}}function dT(t){let e=Qi(t);if(!e)return null;let n=new ba(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var yT=null;function ni(){return yT}function vT(t){yT??=t}var Cf=class{};var rn=new Q(""),Mv=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:()=>q(FL),providedIn:"platform"})}}return t})(),_T=new Q(""),FL=(()=>{class t extends Mv{constructor(){super(),this._doc=q(rn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ni().getBaseHref(this._doc)}onPopState(n){let r=ni().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=ni().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function Nv(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function hT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function ti(t){return t&&t[0]!=="?"?"?"+t:t}var es=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:()=>q(Pv),providedIn:"root"})}}return t})(),wT=new Q(""),Pv=(()=>{class t extends es{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??q(rn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Nv(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ti(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+ti(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+ti(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(ee(Mv),ee(wT,8))}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ET=(()=>{class t extends es{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Nv(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+ti(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+ti(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(ee(Mv),ee(wT,8))}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac})}}return t})(),Ma=(()=>{class t{constructor(n){this._subject=new Ze,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=UL(hT(fT(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ti(r))}normalize(n){return t.stripTrailingSlash(VL(this._basePath,fT(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ti(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ti(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=ti}static{this.joinWithSlash=Nv}static{this.stripTrailingSlash=hT}static{this.\u0275fac=function(r){return new(r||t)(ee(es))}}static{this.\u0275prov=te({token:t,factory:()=>LL(),providedIn:"root"})}}return t})();function LL(){return new Ma(ee(es))}function VL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function fT(t){return t.replace(/\/index.html$/,"")}function UL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function IT(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Tv=/\s+/,pT=[],pK=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=pT,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(Tv):pT}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Tv):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Tv).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(Y(zn),Y(ei))}}static{this.\u0275dir=Ge({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();var Sv=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},bT=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Sv(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),mT(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);mT(o,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Y(Sa),Y(ff),Y(Dv))}}static{this.\u0275dir=Ge({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function mT(t,e){t.context.$implicit=e.item}var eo=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new Av,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){gT("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){gT("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Y(Sa),Y(ff))}}static{this.\u0275dir=Ge({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),Av=class{constructor(){this.$implicit=null,this.ngIf=null}};function gT(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${zt(e)}'.`)}function jL(t,e){return new re(2100,!1)}var BL=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,mK=(()=>{class t{transform(n){if(n==null)return null;if(typeof n!="string")throw jL(t,n);return n.replace(BL,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275pipe=uC({name:"titlecase",type:t,pure:!0,standalone:!0})}}return t})();var Eu=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ct({type:t})}static{this.\u0275inj=bt({})}}return t})(),kv="browser",$L="server";function Ov(t){return t===kv}function Fv(t){return t===$L}var CT=(()=>{class t{static{this.\u0275prov=te({token:t,providedIn:"root",factory:()=>Ov(q(An))?new Rv(q(rn),window):new xv})}}return t})(),Rv=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=HL(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function HL(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var xv=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Df=class{};var Uv=class extends Cf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},jv=class t extends Uv{static makeCurrent(){vT(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=qL();return n==null?null:zL(n)}resetBaseElement(){Iu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return IT(document.cookie,e)}},Iu=null;function qL(){return Iu=Iu||document.querySelector("base"),Iu?Iu.getAttribute("href"):null}function zL(t){return new URL(t,document.baseURI).pathname}var GL=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac})}}return t})(),Bv=new Q(""),AT=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new re(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(ee(Bv),ee(Fe))}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac})}}return t})(),Sf=class{constructor(e){this._doc=e}},Lv="ng-app-id",RT=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Fv(o),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Lv}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(Lv),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Lv,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(ee(rn),ee(ov),ee(av,8),ee(An))}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac})}}return t})(),Vv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Hv=/%COMP%/g,xT="%COMP%",WL=`_nghost-${xT}`,KL=`_ngcontent-${xT}`,QL=!0,YL=new Q("",{providedIn:"root",factory:()=>QL});function ZL(t){return KL.replace(Hv,t)}function JL(t){return WL.replace(Hv,t)}function MT(t,e){return e.map(n=>n.replace(Hv,t))}var DT=(()=>{class t{constructor(n,r,i,o,s,a,u,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Fv(a),this.defaultRenderer=new bu(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===hr.ShadowDom&&(r=le(j({},r),{encapsulation:hr.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Af?i.applyToHost(n):i instanceof Cu&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case hr.Emulated:o=new Af(u,d,r,this.appId,p,s,a,m);break;case hr.ShadowDom:return new $v(u,d,n,r,s,a,this.nonce,m);default:o=new Cu(u,d,r,p,s,a,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(ee(AT),ee(RT),ee(ov),ee(YL),ee(rn),ee(An),ee(Fe),ee(av))}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac})}}return t})(),bu=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Vv[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(TT(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(TT(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new re(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Vv[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Vv[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Wr.DashCase|Wr.Important)?e.style.setProperty(n,r,i&Wr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Wr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ni().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function TT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var $v=class extends bu{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=MT(i.id,i.styles);for(let p of d){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=p,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Cu=class extends bu{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?MT(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Af=class extends Cu{constructor(e,n,r,i,o,s,a,u){let d=i+"-"+r.id;super(e,n,r,o,s,a,u,d),this.contentAttr=ZL(d),this.hostAttr=JL(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},XL=(()=>{class t extends Sf{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(ee(rn))}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac})}}return t})(),ST=["alt","control","meta","shift"],eV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},nV=(()=>{class t extends Sf{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ni().onAndCancel(n,o.domEventName,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),ST.forEach(d=>{let p=r.indexOf(d);p>-1&&(r.splice(p,1),s+=d+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=eV[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),ST.forEach(s=>{if(s!==i){let a=tV[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(ee(rn))}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac})}}return t})();function BK(t,e){return lT(j({rootComponent:t},rV(e)))}function rV(t){return{appProviders:[...cV,...t?.providers??[]],platformProviders:aV}}function iV(){jv.makeCurrent()}function oV(){return new Gr}function sV(){return dD(document),document}var aV=[{provide:An,useValue:kv},{provide:sv,useValue:iV,multi:!0},{provide:rn,useFactory:sV,deps:[]}];var cV=[{provide:Jh,useValue:"root"},{provide:Gr,useFactory:oV,deps:[]},{provide:Bv,useClass:XL,multi:!0,deps:[rn,Fe,An]},{provide:Bv,useClass:nV,multi:!0,deps:[rn]},DT,RT,AT,{provide:Ia,useExisting:DT},{provide:Df,useClass:GL,deps:[]},[]];var NT=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(ee(rn))}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var me="primary",ju=Symbol("RouteTitle"),Kv=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function La(t){return new Kv(t)}function lV(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function dV(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Cr(t[n],e[n]))return!1;return!0}function Cr(t,e){let n=t?Qv(t):void 0,r=e?Qv(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!HT(t[i],e[i]))return!1;return!0}function Qv(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function HT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function qT(t){return t.length>0?t[t.length-1]:null}function no(t){return xg(t)?t:Zo(t)?Ye(Promise.resolve(t)):ce(t)}var hV={exact:GT,subset:WT},zT={exact:fV,subset:pV,ignored:()=>!0};function PT(t,e,n){return hV[n.paths](t.root,e.root,n.matrixParams)&&zT[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function fV(t,e){return Cr(t,e)}function GT(t,e,n){if(!ns(t.segments,e.segments)||!Mf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!GT(t.children[r],e.children[r],n))return!1;return!0}function pV(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>HT(t[n],e[n]))}function WT(t,e,n){return KT(t,e,e.segments,n)}function KT(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ns(i,n)||e.hasChildren()||!Mf(i,n,r))}else if(t.segments.length===n.length){if(!ns(t.segments,n)||!Mf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!WT(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ns(t.segments,i)||!Mf(t.segments,i,r)||!t.children[me]?!1:KT(t.children[me],e,o,r)}}function Mf(t,e,n){return e.every((r,i)=>zT[n](t[i].parameters,r.parameters))}var ii=class{constructor(e=new je([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=La(this.queryParams),this._queryParamMap}toString(){return yV.serialize(this)}},je=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nf(this)}},ts=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=La(this.parameters),this._parameterMap}toString(){return YT(this)}};function mV(t,e){return ns(t,e)&&t.every((n,r)=>Cr(n.parameters,e[r].parameters))}function ns(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function gV(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===me&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==me&&(n=n.concat(e(i,r)))}),n}var Bu=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:()=>new Va,providedIn:"root"})}}return t})(),Va=class{parse(e){let n=new Zv(e);return new ii(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Du(e.root,!0)}`,r=wV(e.queryParams),i=typeof e.fragment=="string"?`#${vV(e.fragment)}`:"";return`${n}${r}${i}`}},yV=new Va;function Nf(t){return t.segments.map(e=>YT(e)).join("/")}function Du(t,e){if(!t.hasChildren())return Nf(t);if(e){let n=t.children[me]?Du(t.children[me],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==me&&r.push(`${i}:${Du(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=gV(t,(r,i)=>i===me?[Du(t.children[me],!1)]:[`${i}:${Du(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[me]!=null?`${Nf(t)}/${n[0]}`:`${Nf(t)}/(${n.join("//")})`}}function QT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rf(t){return QT(t).replace(/%3B/gi,";")}function vV(t){return encodeURI(t)}function Yv(t){return QT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pf(t){return decodeURIComponent(t)}function kT(t){return Pf(t.replace(/\+/g,"%20"))}function YT(t){return`${Yv(t.path)}${_V(t.parameters)}`}function _V(t){return Object.entries(t).map(([e,n])=>`;${Yv(e)}=${Yv(n)}`).join("")}function wV(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Rf(n)}=${Rf(i)}`).join("&"):`${Rf(n)}=${Rf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var EV=/^[^\/()?;#]+/;function qv(t){let e=t.match(EV);return e?e[0]:""}var IV=/^[^\/()?;=#]+/;function bV(t){let e=t.match(IV);return e?e[0]:""}var CV=/^[^=?&#]+/;function DV(t){let e=t.match(CV);return e?e[0]:""}var TV=/^[^&#]+/;function SV(t){let e=t.match(TV);return e?e[0]:""}var Zv=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new je([],{}):new je([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[me]=new je(e,n)),r}parseSegment(){let e=qv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new re(4009,!1);return this.capture(e),new ts(Pf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=bV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=qv(this.remaining);i&&(r=i,this.capture(r))}e[Pf(n)]=Pf(r)}parseQueryParam(e){let n=DV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=SV(this.remaining);s&&(r=s,this.capture(r))}let i=kT(n),o=kT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=qv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new re(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=me);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[me]:new je([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new re(4011,!1)}};function ZT(t){return t.segments.length>0?new je([],{[me]:t}):t}function JT(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=JT(i);if(r===me&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new je(t.segments,e);return AV(n)}function AV(t){if(t.numberOfChildren===1&&t.children[me]){let e=t.children[me];return new je(t.segments.concat(e.segments),e.children)}return t}function Mu(t){return t instanceof ii}function RV(t,e,n=null,r=null){let i=XT(t);return eS(i,e,n,r)}function XT(t){let e;function n(o){let s={};for(let u of o.children){let d=n(u);s[u.outlet]=d}let a=new je(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=ZT(r);return e??i}function eS(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return zv(i,i,i,n,r);let o=xV(e);if(o.toRoot())return zv(i,i,new je([],{}),n,r);let s=MV(o,i,t),a=s.processChildren?Au(s.segmentGroup,s.index,o.commands):nS(s.segmentGroup,s.index,o.commands);return zv(i,s.segmentGroup,a,n,r)}function kf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Nu(t){return typeof t=="object"&&t!=null&&t.outlets}function zv(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,d])=>{o[u]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`});let s;t===e?s=n:s=tS(t,e,n);let a=ZT(JT(s));return new ii(a,o,i)}function tS(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=tS(o,e,n)}),new je(t.segments,r)}var Of=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&kf(r[0]))throw new re(4003,!1);let i=r.find(Nu);if(i&&i!==qT(r))throw new re(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function xV(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Of(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,d])=>{a[u]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Of(n,e,r)}var ka=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function MV(t,e,n){if(t.isAbsolute)return new ka(e,!0,0);if(!n)return new ka(e,!1,NaN);if(n.parent===null)return new ka(n,!0,0);let r=kf(t.commands[0])?0:1,i=n.segments.length-1+r;return NV(n,i,t.numberOfDoubleDots)}function NV(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new re(4005,!1);i=r.segments.length}return new ka(r,!1,i-o)}function PV(t){return Nu(t[0])?t[0].outlets:{[me]:t}}function nS(t,e,n){if(t??=new je([],{}),t.segments.length===0&&t.hasChildren())return Au(t,e,n);let r=kV(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new je(t.segments.slice(0,r.pathIndex),{});return o.children[me]=new je(t.segments.slice(r.pathIndex),t.children),Au(o,0,i)}else return r.match&&i.length===0?new je(t.segments,{}):r.match&&!t.hasChildren()?Jv(t,e,n):r.match?Au(t,0,i):Jv(t,e,n)}function Au(t,e,n){if(n.length===0)return new je(t.segments,{});{let r=PV(n),i={};if(Object.keys(r).some(o=>o!==me)&&t.children[me]&&t.numberOfChildren===1&&t.children[me].segments.length===0){let o=Au(t.children[me],e,n);return new je(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=nS(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new je(t.segments,i)}}function kV(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Nu(a))break;let u=`${a}`,d=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&d&&typeof d=="object"&&d.outlets===void 0){if(!FT(u,d,s))return o;r+=2}else{if(!FT(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Jv(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Nu(o)){let u=OV(o.outlets);return new je(r,u)}if(i===0&&kf(n[0])){let u=t.segments[e];r.push(new ts(u.path,OT(n[0]))),i++;continue}let s=Nu(o)?o.outlets[me]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&kf(a)?(r.push(new ts(s,OT(a))),i+=2):(r.push(new ts(s,{})),i++)}return new je(r,{})}function OV(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Jv(new je([],{}),0,r))}),e}function OT(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function FT(t,e,n){return t==n.path&&Cr(e,n.parameters)}var Ru="imperative",Rt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Rt||{}),Rn=class{constructor(e,n){this.id=e,this.url=n}},Ua=class extends Rn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Rt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},oi=class extends Rn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Rt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(vn||{}),Ff=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ff||{}),ri=class extends Rn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Rt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},to=class extends Rn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Rt.NavigationSkipped}},Pu=class extends Rn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Rt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Lf=class extends Rn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Rt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xv=class extends Rn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Rt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},e_=class extends Rn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Rt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},t_=class extends Rn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Rt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},n_=class extends Rn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Rt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},r_=class{constructor(e){this.route=e,this.type=Rt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},i_=class{constructor(e){this.route=e,this.type=Rt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},o_=class{constructor(e){this.snapshot=e,this.type=Rt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},s_=class{constructor(e){this.snapshot=e,this.type=Rt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},a_=class{constructor(e){this.snapshot=e,this.type=Rt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},c_=class{constructor(e){this.snapshot=e,this.type=Rt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vf=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Rt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ku=class{},ja=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function FV(t,e){return t.providers&&!t._injector&&(t._injector=mf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Wn(t){return t.outlet||me}function LV(t,e){let n=t.filter(r=>Wn(r)===e);return n.push(...t.filter(r=>Wn(r)!==e)),n}function $u(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var u_=class{get injector(){return $u(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Hu(this.rootInjector),this.attachRef=null}},Hu=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new u_(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(ee(fn))}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Uf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=l_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=l_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=d_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return d_(e,this._root).map(n=>n.value)}};function l_(t,e){if(t===e.value)return e;for(let n of e.children){let r=l_(t,n);if(r)return r}return null}function d_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=d_(t,n);if(r.length)return r.unshift(e),r}return[]}var yn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Pa(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var jf=class extends Uf{constructor(e,n){super(e),this.snapshot=n,w_(this,e)}toString(){return this.snapshot.toString()}};function rS(t){let e=VV(t),n=new at([new ts("",{})]),r=new at({}),i=new at({}),o=new at({}),s=new at(""),a=new rs(n,r,o,s,i,me,t,e.root);return a.snapshot=e.root,new jf(new yn(a,[]),e)}function VV(t){let e={},n={},r={},i="",o=new Oa([],e,r,i,n,me,t,null,{});return new $f("",new yn(o,[]))}var rs=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(_e(d=>d[ju]))??ce(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(_e(e=>La(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(_e(e=>La(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Bf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),t.params),data:j(j({},e.data),t.data),resolve:j(j(j(j({},t.data),e.data),i?.data),t._resolvedData)}:r={params:j({},t.params),data:j({},t.data),resolve:j(j({},t.data),t._resolvedData??{})},i&&oS(i)&&(r.resolve[ju]=i.title),r}var Oa=class{get title(){return this.data?.[ju]}constructor(e,n,r,i,o,s,a,u,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=La(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=La(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},$f=class extends Uf{constructor(e,n){super(n),this.url=e,w_(this,n)}toString(){return iS(this._root)}};function w_(t,e){e.value._routerState=t,e.children.forEach(n=>w_(t,n))}function iS(t){let e=t.children.length>0?` { ${t.children.map(iS).join(", ")} } `:"";return`${t.value}${e}`}function Gv(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Cr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Cr(e.params,n.params)||t.paramsSubject.next(n.params),dV(e.url,n.url)||t.urlSubject.next(n.url),Cr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function h_(t,e){let n=Cr(t.params,e.params)&&mV(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||h_(t.parent,e.parent))}function oS(t){return typeof t.title=="string"||t.title===null}var UV=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=me,this.activateEvents=new Ze,this.deactivateEvents=new Ze,this.attachEvents=new Ze,this.detachEvents=new Ze,this.parentContexts=q(Hu),this.location=q(Sa),this.changeDetector=q(Xo),this.inputBinder=q(Gf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new re(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new re(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new re(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new re(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new f_(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Ge({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Jr]})}}return t})(),f_=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===rs?this.route:e===Hu?this.childContexts:this.parent.get(e,n)}},Gf=new Q(""),LT=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=su([r.queryParams,r.params,r.data]).pipe(bn(([o,s,a],u)=>(a=j(j(j({},o),s),a),u===0?ce(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let s=dT(r.component);if(!s){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(n,i)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac})}}return t})();function jV(t,e,n){let r=Ou(t,e._root,n?n._root:void 0);return new jf(r,e)}function Ou(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=BV(t,e,n);return new yn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ou(t,a)),s}}let r=$V(e.value),i=e.children.map(o=>Ou(t,o));return new yn(r,i)}}function BV(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ou(t,r,i);return Ou(t,r)})}function $V(t){return new rs(new at(t.url),new at(t.params),new at(t.queryParams),new at(t.fragment),new at(t.data),t.outlet,t.component,t)}var Fu=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},sS="ngNavigationCancelingError";function Hf(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Mu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=aS(!1,vn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function aS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[sS]=!0,n.cancellationCode=e,n}function HV(t){return cS(t)&&Mu(t.url)}function cS(t){return!!t&&t[sS]}var qV=(t,e,n,r)=>_e(i=>(new p_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),p_=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Gv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Pa(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Pa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Pa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Pa(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new c_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new s_(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Gv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Gv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},qf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Fa=class{constructor(e,n){this.component=e,this.route=n}};function zV(t,e,n){let r=t._root,i=e?e._root:null;return Tu(r,i,n,[r.value])}function GV(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function $a(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Z0(t)?t:e.get(t):r}function Tu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Pa(e);return t.children.forEach(s=>{WV(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>xu(a,n.getContext(s),i)),i}function WV(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=KV(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new qf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Tu(t,e,a?a.children:null,r,i):Tu(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Fa(a.outlet.component,s))}else s&&xu(e,a,i),i.canActivateChecks.push(new qf(r)),o.component?Tu(t,null,a?a.children:null,r,i):Tu(t,null,n,r,i);return i}function KV(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ns(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ns(t.url,e.url)||!Cr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!h_(t,e)||!Cr(t.queryParams,e.queryParams);case"paramsChange":default:return!h_(t,e)}}function xu(t,e,n){let r=Pa(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?xu(s,e.children.getContext(o),n):xu(s,null,n):xu(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Fa(e.outlet.component,i)):n.canDeactivateChecks.push(new Fa(null,i)):n.canDeactivateChecks.push(new Fa(null,i))}function qu(t){return typeof t=="function"}function QV(t){return typeof t=="boolean"}function YV(t){return t&&qu(t.canLoad)}function ZV(t){return t&&qu(t.canActivate)}function JV(t){return t&&qu(t.canActivateChild)}function XV(t){return t&&qu(t.canDeactivate)}function e2(t){return t&&qu(t.canMatch)}function uS(t){return t instanceof Hr||t?.name==="EmptyError"}var xf=Symbol("INITIAL_VALUE");function Ba(){return bn(t=>su(t.map(e=>e.pipe(qr(1),Og(xf)))).pipe(_e(e=>{for(let n of e)if(n!==!0){if(n===xf)return xf;if(n===!1||t2(n))return n}return!0}),Xt(e=>e!==xf),qr(1)))}function t2(t){return Mu(t)||t instanceof Fu}function n2(t,e){return ft(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?ce(le(j({},n),{guardsResult:!0})):r2(s,r,i,t).pipe(ft(a=>a&&QV(a)?i2(r,o,t,e):ce(a)),_e(a=>le(j({},n),{guardsResult:a})))})}function r2(t,e,n,r){return Ye(t).pipe(ft(i=>u2(i.component,i.route,n,e,r)),ur(i=>i!==!0,!0))}function i2(t,e,n,r){return Ye(e).pipe(Bo(i=>oa(s2(i.route.parent,r),o2(i.route,r),c2(t,i.path,n),a2(t,i.route,n))),ur(i=>i!==!0,!0))}function o2(t,e){return t!==null&&e&&e(new a_(t)),ce(!0)}function s2(t,e){return t!==null&&e&&e(new o_(t)),ce(!0)}function a2(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ce(!0);let i=r.map(o=>ph(()=>{let s=$u(e)??n,a=$a(o,s),u=ZV(a)?a.canActivate(e,t):vr(s,()=>a(e,t));return no(u).pipe(ur())}));return ce(i).pipe(Ba())}function c2(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>GV(s)).filter(s=>s!==null).map(s=>ph(()=>{let a=s.guards.map(u=>{let d=$u(s.node)??n,p=$a(u,d),m=JV(p)?p.canActivateChild(r,t):vr(d,()=>p(r,t));return no(m).pipe(ur())});return ce(a).pipe(Ba())}));return ce(o).pipe(Ba())}function u2(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ce(!0);let s=o.map(a=>{let u=$u(e)??i,d=$a(a,u),p=XV(d)?d.canDeactivate(t,e,n,r):vr(u,()=>d(t,e,n,r));return no(p).pipe(ur())});return ce(s).pipe(Ba())}function l2(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return ce(!0);let o=i.map(s=>{let a=$a(s,t),u=YV(a)?a.canLoad(e,n):vr(t,()=>a(e,n));return no(u)});return ce(o).pipe(Ba(),lS(r))}function lS(t){return Ig(It(e=>{if(typeof e!="boolean")throw Hf(t,e)}),_e(e=>e===!0))}function d2(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return ce(!0);let o=i.map(s=>{let a=$a(s,t),u=e2(a)?a.canMatch(e,n):vr(t,()=>a(e,n));return no(u)});return ce(o).pipe(Ba(),lS(r))}var Lu=class{constructor(e){this.segmentGroup=e||null}},Vu=class extends Error{constructor(e){super(),this.urlTree=e}};function Na(t){return ra(new Lu(t))}function h2(t){return ra(new re(4e3,!1))}function f2(t){return ra(aS(!1,vn.GuardRejected))}var m_=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ce(r);if(i.numberOfChildren>1||!i.children[me])return h2(`${e.redirectTo}`);i=i.children[me]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:u,fragment:d,routeConfig:p,url:m,outlet:w,params:b,data:M,title:L}=i,O=vr(o,()=>a({params:b,data:M,queryParams:u,fragment:d,routeConfig:p,url:m,outlet:w,title:L}));if(O instanceof ii)throw new Vu(O);n=O}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Vu(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new ii(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new je(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new re(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},g_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function p2(t,e,n,r,i){let o=dS(t,e,n);return o.matched?(r=FV(e,r),d2(r,e,n,i).pipe(_e(s=>s===!0?o:j({},g_)))):ce(o)}function dS(t,e,n){if(e.path==="**")return m2(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?j({},g_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||lV)(n,t,e);if(!i)return j({},g_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function m2(t){return{matched:!0,parameters:t.length>0?qT(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function VT(t,e,n,r){return n.length>0&&v2(t,n,r)?{segmentGroup:new je(e,y2(r,new je(n,t.children))),slicedSegments:[]}:n.length===0&&_2(t,n,r)?{segmentGroup:new je(t.segments,g2(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new je(t.segments,t.children),slicedSegments:n}}function g2(t,e,n,r){let i={};for(let o of n)if(Wf(t,e,o)&&!r[Wn(o)]){let s=new je([],{});i[Wn(o)]=s}return j(j({},r),i)}function y2(t,e){let n={};n[me]=e;for(let r of t)if(r.path===""&&Wn(r)!==me){let i=new je([],{});n[Wn(r)]=i}return n}function v2(t,e,n){return n.some(r=>Wf(t,e,r)&&Wn(r)!==me)}function _2(t,e,n){return n.some(r=>Wf(t,e,r))}function Wf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function w2(t,e,n){return e.length===0&&!t.children[n]}var y_=class{};function E2(t,e,n,r,i,o,s="emptyOnly"){return new v_(t,e,n,r,i,s,o).recognize()}var I2=31,v_=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new m_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new re(4002,`'${e.segmentGroup}'`)}recognize(){let e=VT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(_e(({children:n,rootSnapshot:r})=>{let i=new yn(r,n),o=new $f("",i),s=RV(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Oa([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),me,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,me,n).pipe(_e(r=>({children:r,rootSnapshot:n})),Hi(r=>{if(r instanceof Vu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Lu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(_e(s=>s instanceof yn?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ye(o).pipe(Bo(s=>{let a=r.children[s],u=LV(n,s);return this.processSegmentGroup(e,u,a,s,i)}),kg((s,a)=>(s.push(...a),s)),qi(null),Pg(),ft(s=>{if(s===null)return Na(r);let a=hS(s);return b2(a),ce(a)}))}processSegment(e,n,r,i,o,s,a){return Ye(n).pipe(Bo(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Hi(d=>{if(d instanceof Lu)return ce(null);throw d}))),ur(u=>!!u),Hi(u=>{if(uS(u))return w2(r,i,o)?ce(new y_):Na(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return Wn(r)!==s&&(s===me||!Wf(i,o,r))?Na(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Na(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:d,consumedSegments:p,positionalParamSegments:m,remainingSegments:w}=dS(n,i,o);if(!u)return Na(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>I2&&(this.allowRedirects=!1));let b=new Oa(o,d,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,UT(i),Wn(i),i.component??i._loadedComponent??null,i,jT(i)),M=Bf(b,a,this.paramsInheritanceStrategy);b.params=Object.freeze(M.params),b.data=Object.freeze(M.data);let L=this.applyRedirects.applyRedirectCommands(p,i.redirectTo,m,b,e);return this.applyRedirects.lineralizeSegments(i,L).pipe(ft(O=>this.processSegment(e,r,n,O.concat(w),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=p2(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(bn(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(bn(({routes:d})=>{let p=r._loadedInjector??e,{parameters:m,consumedSegments:w,remainingSegments:b}=u,M=new Oa(w,m,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,UT(r),Wn(r),r.component??r._loadedComponent??null,r,jT(r)),L=Bf(M,s,this.paramsInheritanceStrategy);M.params=Object.freeze(L.params),M.data=Object.freeze(L.data);let{segmentGroup:O,slicedSegments:H}=VT(n,w,b,d);if(H.length===0&&O.hasChildren())return this.processChildren(p,d,O,M).pipe(_e(Z=>new yn(M,Z)));if(d.length===0&&H.length===0)return ce(new yn(M,[]));let X=Wn(r)===o;return this.processSegment(p,d,O,H,X?me:o,!0,M).pipe(_e(Z=>new yn(M,Z instanceof yn?[Z]:[])))}))):Na(n)))}getChildConfig(e,n,r){return n.children?ce({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ce({routes:n._loadedRoutes,injector:n._loadedInjector}):l2(e,n,r,this.urlSerializer).pipe(ft(i=>i?this.configLoader.loadChildren(e,n).pipe(It(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):f2(n))):ce({routes:[],injector:e})}};function b2(t){t.sort((e,n)=>e.value.outlet===me?-1:n.value.outlet===me?1:e.value.outlet.localeCompare(n.value.outlet))}function C2(t){let e=t.value.routeConfig;return e&&e.path===""}function hS(t){let e=[],n=new Set;for(let r of t){if(!C2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=hS(r.children);e.push(new yn(r.value,i))}return e.filter(r=>!n.has(r))}function UT(t){return t.data||{}}function jT(t){return t.resolve||{}}function D2(t,e,n,r,i,o){return ft(s=>E2(t,e,n,r,s.extractedUrl,i,o).pipe(_e(({state:a,tree:u})=>le(j({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function T2(t,e){return ft(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ce(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let d of fS(u))s.add(d);let a=0;return Ye(s).pipe(Bo(u=>o.has(u)?S2(u,r,t,e):(u.data=Bf(u,u.parent,t).resolve,ce(void 0))),It(()=>a++),sa(1),ft(u=>a===s.size?ce(n):hn))})}function fS(t){let e=t.children.map(n=>fS(n)).flat();return[t,...e]}function S2(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!oS(i)&&(o[ju]=i.title),A2(o,t,e,r).pipe(_e(s=>(t._resolvedData=s,t.data=Bf(t,t.parent,n).resolve,null)))}function A2(t,e,n,r){let i=Qv(t);if(i.length===0)return ce({});let o={};return Ye(i).pipe(ft(s=>R2(t[s],e,n,r).pipe(ur(),It(a=>{if(a instanceof Fu)throw Hf(new Va,a);o[s]=a}))),sa(1),Ng(o),Hi(s=>uS(s)?hn:ra(s)))}function R2(t,e,n,r){let i=$u(e)??r,o=$a(t,i),s=o.resolve?o.resolve(e,n):vr(i,()=>o(e,n));return no(s)}function Wv(t){return bn(e=>{let n=t(e);return n?Ye(n).pipe(_e(()=>e)):ce(e)})}var pS=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===me);return r}getResolvedTitleForRoute(n){return n.data[ju]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:()=>q(x2),providedIn:"root"})}}return t})(),x2=(()=>{class t extends pS{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(ee(NT))}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),zu=new Q("",{providedIn:"root",factory:()=>({})}),M2=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=mn({type:t,selectors:[["ng-component"]],standalone:!0,features:[tT],decls:1,vars:0,template:function(r,i){r&1&&ye(0,"router-outlet")},dependencies:[UV],encapsulation:2})}}return t})();function E_(t){let e=t.children&&t.children.map(E_),n=e?le(j({},t),{children:e}):j({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==me&&(n.component=M2),n}var Uu=new Q(""),I_=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=q(bf)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return ce(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=no(n.loadComponent()).pipe(_e(mS),It(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),au(()=>{this.componentLoaders.delete(n)})),i=new Xs(r,()=>new st).pipe(Js());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ce({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=N2(r,this.compiler,n,this.onLoadEndListener).pipe(au(()=>{this.childrenLoaders.delete(r)})),s=new Xs(o,()=>new st).pipe(Js());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function N2(t,e,n,r){return no(t.loadChildren()).pipe(_e(mS),ft(i=>i instanceof pu||Array.isArray(i)?ce(i):Ye(e.compileModuleAsync(i))),_e(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Uu,[],{optional:!0,self:!0}).flat()),{routes:s.map(E_),injector:o}}))}function P2(t){return t&&typeof t=="object"&&"default"in t}function mS(t){return P2(t)?t.default:t}var b_=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:()=>q(k2),providedIn:"root"})}}return t})(),k2=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),gS=new Q(""),yS=new Q("");function O2(t,e,n){let r=t.get(yS),i=t.get(rn);return t.get(Fe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let o,s=new Promise(d=>{o=d}),a=i.startViewTransition(()=>(o(),F2(t))),{onViewTransitionCreated:u}=r;return u&&vr(t,()=>u({transition:a,from:e,to:n})),s})}function F2(t){return new Promise(e=>{Iv({read:()=>setTimeout(e)},{injector:t})})}var L2=new Q(""),C_=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new st,this.transitionAbortSubject=new st,this.configLoader=q(I_),this.environmentInjector=q(fn),this.urlSerializer=q(Bu),this.rootContexts=q(Hu),this.location=q(Ma),this.inputBindingEnabled=q(Gf,{optional:!0})!==null,this.titleStrategy=q(pS),this.options=q(zu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=q(b_),this.createViewTransition=q(gS,{optional:!0}),this.navigationErrorHandler=q(L2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ce(void 0),this.rootComponentType=null;let n=i=>this.events.next(new r_(i)),r=i=>this.events.next(new i_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(le(j(j({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new at({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ru,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xt(o=>o.id!==0),_e(o=>le(j({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),bn(o=>{let s=!1,a=!1;return ce(o).pipe(bn(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",vn.SupersededByNewNavigation),hn;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?le(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!d&&p!=="reload"){let m="";return this.events.next(new to(u.id,this.urlSerializer.serialize(u.rawUrl),m,Ff.IgnoredSameUrlNavigation)),u.resolve(!1),hn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ce(u).pipe(bn(m=>{let w=this.transitions?.getValue();return this.events.next(new Ua(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),w!==this.transitions?.getValue()?hn:Promise.resolve(m)}),D2(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),It(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=le(j({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let w=new Lf(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:m,extractedUrl:w,source:b,restoredState:M,extras:L}=u,O=new Ua(m,this.urlSerializer.serialize(w),b,M);this.events.next(O);let H=rS(this.rootComponentType).snapshot;return this.currentTransition=o=le(j({},u),{targetSnapshot:H,urlAfterRedirects:w,extras:le(j({},L),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=w,ce(o)}else{let m="";return this.events.next(new to(u.id,this.urlSerializer.serialize(u.extractedUrl),m,Ff.IgnoredByUrlHandlingStrategy)),u.resolve(!1),hn}}),It(u=>{let d=new Xv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),_e(u=>(this.currentTransition=o=le(j({},u),{guards:zV(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),n2(this.environmentInjector,u=>this.events.next(u)),It(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Hf(this.urlSerializer,u.guardsResult);let d=new e_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),Xt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",vn.GuardRejected),!1)),Wv(u=>{if(u.guards.canActivateChecks.length)return ce(u).pipe(It(d=>{let p=new t_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),bn(d=>{let p=!1;return ce(d).pipe(T2(this.paramsInheritanceStrategy,this.environmentInjector),It({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(d,"",vn.NoDataFromResolver)}}))}),It(d=>{let p=new n_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}))}),Wv(u=>{let d=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(It(w=>{p.component=w}),_e(()=>{})));for(let w of p.children)m.push(...d(w));return m};return su(d(u.targetSnapshot.root)).pipe(qi(null),qr(1))}),Wv(()=>this.afterPreactivation()),bn(()=>{let{currentSnapshot:u,targetSnapshot:d}=o,p=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return p?Ye(p).pipe(_e(()=>o)):ce(o)}),_e(u=>{let d=jV(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=le(j({},u),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),It(()=>{this.events.next(new ku)}),qV(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),qr(1),It({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new oi(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),Fg(this.transitionAbortSubject.pipe(It(u=>{throw u}))),au(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",vn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Hi(u=>{if(a=!0,cS(u))this.events.next(new ri(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),HV(u)?this.events.next(new ja(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let d=new Pu(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let p=vr(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(p instanceof Fu){let{message:m,cancellationCode:w}=Hf(this.urlSerializer,p);this.events.next(new ri(o.id,this.urlSerializer.serialize(o.extractedUrl),m,w)),this.events.next(new ja(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(d);let m=n.errorHandler(u);o.resolve(!!m)}}catch(p){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(p)}}return hn}))}))}cancelNavigationTransition(n,r,i){let o=new ri(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function V2(t){return t!==Ru}var U2=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:()=>q(j2),providedIn:"root"})}}return t})(),__=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},j2=(()=>{class t extends __{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Xr(t)))(i||t)}})()}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),vS=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:()=>q(B2),providedIn:"root"})}}return t})(),B2=(()=>{class t extends vS{constructor(){super(...arguments),this.location=q(Ma),this.urlSerializer=q(Bu),this.options=q(zu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=q(b_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ii,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=rS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Ua)this.stateMemento=this.createStateMemento();else if(n instanceof to)this.rawUrlTree=r.initialUrl;else if(n instanceof Lf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof ku?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof ri&&(n.code===vn.GuardRejected||n.code===vn.NoDataFromResolver)?this.restoreHistory(r):n instanceof Pu?this.restoreHistory(r,!0):n instanceof oi&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof ii?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=j(j({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=j(j({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Xr(t)))(i||t)}})()}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Su=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Su||{});function _S(t,e){t.events.pipe(Xt(n=>n instanceof oi||n instanceof ri||n instanceof Pu||n instanceof to),_e(n=>n instanceof oi||n instanceof to?Su.COMPLETE:(n instanceof ri?n.code===vn.Redirect||n.code===vn.SupersededByNewNavigation:!1)?Su.REDIRECTING:Su.FAILED),Xt(n=>n!==Su.REDIRECTING),qr(1)).subscribe(()=>{e()})}function $2(t){throw t}var H2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},q2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},At=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=q(wf),this.stateManager=q(vS),this.options=q(zu,{optional:!0})||{},this.pendingTasks=q(Ta),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=q(C_),this.urlSerializer=q(Bu),this.location=q(Ma),this.urlHandlingStrategy=q(b_),this._events=new st,this.errorHandler=this.options.errorHandler||$2,this.navigated=!1,this.routeReuseStrategy=q(U2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=q(Uu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!q(Gf,{optional:!0}),this.eventsSubscription=new nt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ri&&r.code!==vn.Redirect&&r.code!==vn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof oi)this.navigated=!0;else if(r instanceof ja){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||V2(i.source)},s);this.scheduleNavigation(a,Ru,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}G2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ru,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=j({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(E_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:s,p=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":p=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let w=i?i.snapshot:this.routerState.snapshot.root;m=XT(w)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),m=this.currentUrlTree.root}return eS(m,n,p,d??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Mu(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ru,null,r)}navigate(n,r={skipLocationChange:!1}){return z2(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=j({},H2):r===!1?i=j({},q2):i=r,Mu(n))return PT(this.currentUrlTree,n,i);let o=this.parseUrl(n);return PT(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,d;s?(a=s.resolve,u=s.reject,d=s.promise):d=new Promise((m,w)=>{a=m,u=w});let p=this.pendingTasks.add();return _S(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function z2(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new re(4008,!1)}function G2(t){return!(t instanceof ku)&&!(t instanceof ja)}var zf=class{};var W2=(()=>{class t{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Xt(n=>n instanceof oi),Bo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=mf(o.providers,n,`Route: ${o.path}`));let s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ye(i).pipe(ia())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=ce(null);let o=i.pipe(ft(s=>s===null?ce(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ye([o,s]).pipe(ia())}else return o})}static{this.\u0275fac=function(r){return new(r||t)(ee(At),ee(bf),ee(fn),ee(zf),ee(I_))}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),wS=new Q(""),K2=(()=>{class t{constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Ua?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof oi?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof to&&n.code===Ff.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Vf&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Vf(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){TD()}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac})}}return t})();function uQ(t,...e){return yr([{provide:Uu,multi:!0,useValue:t},[],{provide:rs,useFactory:ES,deps:[At]},{provide:If,multi:!0,useFactory:IS},e.map(n=>n.\u0275providers)])}function ES(t){return t.routerState.root}function Gu(t,e){return{\u0275kind:t,\u0275providers:e}}function IS(){let t=q(kt);return e=>{let n=t.get(Jo);if(e!==n.components[0])return;let r=t.get(At),i=t.get(bS);t.get(D_)===1&&r.initialNavigation(),t.get(CS,null,ve.Optional)?.setUpPreloading(),t.get(wS,null,ve.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var bS=new Q("",{factory:()=>new st}),D_=new Q("",{providedIn:"root",factory:()=>1});function Q2(){return Gu(2,[{provide:D_,useValue:0},{provide:Ef,multi:!0,deps:[kt],useFactory:e=>{let n=e.get(_T,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(At),o=e.get(bS);_S(i,()=>{r(!0)}),e.get(C_).afterPreactivation=()=>(r(!0),o.closed?ce(void 0):o),i.initialNavigation()}))}}])}function Y2(){return Gu(3,[{provide:Ef,multi:!0,useFactory:()=>{let e=q(At);return()=>{e.setUpLocationChangeListener()}}},{provide:D_,useValue:2}])}var CS=new Q("");function Z2(t){return Gu(0,[{provide:CS,useExisting:W2},{provide:zf,useExisting:t}])}function J2(){return Gu(8,[LT,{provide:Gf,useExisting:LT}])}function X2(t){let e=[{provide:gS,useValue:O2},{provide:yS,useValue:j({skipNextTransition:!!t?.skipInitialTransition},t)}];return Gu(9,e)}var BT=new Q("ROUTER_FORROOT_GUARD"),eU=[Ma,{provide:Bu,useClass:Va},At,Hu,{provide:rs,useFactory:ES,deps:[At]},I_,[]],Ha=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[eU,[],{provide:Uu,multi:!0,useValue:n},{provide:BT,useFactory:iU,deps:[[At,new jt,new $y]]},{provide:zu,useValue:r||{}},r?.useHash?nU():rU(),tU(),r?.preloadingStrategy?Z2(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?oU(r):[],r?.bindToComponentInputs?J2().\u0275providers:[],r?.enableViewTransitions?X2().\u0275providers:[],sU()]}}static forChild(n){return{ngModule:t,providers:[{provide:Uu,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||t)(ee(BT,8))}}static{this.\u0275mod=Ct({type:t})}static{this.\u0275inj=bt({})}}return t})();function tU(){return{provide:wS,useFactory:()=>{let t=q(CT),e=q(Fe),n=q(zu),r=q(C_),i=q(Bu);return n.scrollOffset&&t.setOffset(n.scrollOffset),new K2(i,r,t,e,n)}}}function nU(){return{provide:es,useClass:ET}}function rU(){return{provide:es,useClass:Pv}}function iU(t){return"guarded"}function oU(t){return[t.initialNavigation==="disabled"?Y2().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Q2().\u0275providers:[]]}var $T=new Q("");function sU(){return[{provide:$T,useFactory:IS},{provide:If,multi:!0,useExisting:$T}]}var TS=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},aU=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},SS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,p=o>>2,m=(o&3)<<4|a>>4,w=(a&15)<<2|d>>6,b=d&63;u||(b=64,s||(w=64)),r.push(n[p],n[m],n[w],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let d=i<t.length?n[t.charAt(i)]:64;++i;let m=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||d==null||m==null)throw new S_;let w=o<<2|a>>4;if(r.push(w),d!==64){let b=a<<4&240|d>>2;if(r.push(b),m!==64){let M=d<<6&192|m;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},S_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},cU=function(t){let e=TS(t);return SS.encodeByteArray(e,!0)},Ku=function(t){return cU(t).replace(/\./g,"")},R_=function(t){try{return SS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function uU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var lU=()=>uU().__FIREBASE_DEFAULTS__,dU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&R_(t[1]);return e&&JSON.parse(e)},Qf=()=>{try{return lU()||dU()||hU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},x_=t=>{var e,n;return(n=(e=Qf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Yf=t=>{let e=x_(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},M_=()=>{var t;return(t=Qf())===null||t===void 0?void 0:t.config},N_=t=>{var e;return(e=Qf())===null||e===void 0?void 0:e[`_${t}`]};var Kf=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Zf(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ku(JSON.stringify(n)),Ku(JSON.stringify(s)),""].join(".")}function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function fU(){var t;let e=(t=Qf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xS(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function MS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NS(){let t=xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PS(){return!fU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function P_(){try{return typeof indexedDB=="object"}catch{return!1}}function kS(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var pU="FirebaseError",Kt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pU,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,si.prototype.create)}},si=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?mU(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Kt(i,a,r)}};function mU(t,e){return t.replace(gU,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var gU=/\{\$([^}]+)}/g;function OS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function is(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(DS(o)&&DS(s)){if(!is(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function DS(t){return t!==null&&typeof t=="object"}function Qu(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qa(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function za(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FS(t,e){let n=new A_(t,e);return n.subscribe.bind(n)}var A_=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yU(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=T_),i.error===void 0&&(i.error=T_),i.complete===void 0&&(i.complete=T_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function yU(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function T_(){}var dQ=4*60*60*1e3;function We(t){return t&&t._delegate?t._delegate:t}var on=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var os="[DEFAULT]";var k_=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Kf;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_U(e))try{this.getOrInitializeService({instanceIdentifier:os})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return I(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=os){return this.instances.has(e)}getOptions(e=os){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=os){return this.component?this.component.multipleInstances?e:os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function vU(t){return t===os?void 0:t}function _U(t){return t.instantiationMode==="EAGER"}var Jf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new k_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var wU=[],De=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(De||{}),EU={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},IU=De.INFO,bU={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},CU=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=bU[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ro=class{constructor(e){this.name=e,this._logLevel=IU,this._logHandler=CU,this._userLogHandler=null,wU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}};var DU=(t,e)=>e.some(n=>t instanceof n),LS,VS;function TU(){return LS||(LS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SU(){return VS||(VS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var US=new WeakMap,F_=new WeakMap,jS=new WeakMap,O_=new WeakMap,V_=new WeakMap;function AU(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Dr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&US.set(n,t)}).catch(()=>{}),V_.set(e,t),e}function RU(t){if(F_.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});F_.set(t,e)}var L_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return F_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BS(t){L_=t(L_)}function xU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Xf(this),e,...n);return jS.set(r,e.sort?e.sort():[e]),Dr(r)}:SU().includes(t)?function(...e){return t.apply(Xf(this),e),Dr(US.get(this))}:function(...e){return Dr(t.apply(Xf(this),e))}}function MU(t){return typeof t=="function"?xU(t):(t instanceof IDBTransaction&&RU(t),DU(t,TU())?new Proxy(t,L_):t)}function Dr(t){if(t instanceof IDBRequest)return AU(t);if(O_.has(t))return O_.get(t);let e=MU(t);return e!==t&&(O_.set(t,e),V_.set(e,t)),e}var Xf=t=>V_.get(t);function HS(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Dr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Dr(s.result),u.oldVersion,u.newVersion,Dr(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var NU=["get","getKey","getAll","getAllKeys","count"],PU=["put","add","delete","clear"],U_=new Map;function $S(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(U_.get(e))return U_.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=PU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||NU.includes(n)))return;let o=function(s,...a){return I(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),d=u.store;return r&&(d=d.index(a.shift())),(yield Promise.all([d[n](...a),i&&u.done]))[0]})};return U_.set(e,o),o}BS(t=>le(j({},t),{get:(e,n,r)=>$S(e,n)||t.get(e,n,r),has:(e,n)=>!!$S(e,n)||t.has(e,n)}));var B_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kU(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function kU(t){let e=t.getComponent();return e?.type==="VERSION"}var $_="@firebase/app",qS="0.10.13";var ai=new ro("@firebase/app"),OU="@firebase/app-compat",FU="@firebase/analytics-compat",LU="@firebase/analytics",VU="@firebase/app-check-compat",UU="@firebase/app-check",jU="@firebase/auth",BU="@firebase/auth-compat",$U="@firebase/database",HU="@firebase/data-connect",qU="@firebase/database-compat",zU="@firebase/functions",GU="@firebase/functions-compat",WU="@firebase/installations",KU="@firebase/installations-compat",QU="@firebase/messaging",YU="@firebase/messaging-compat",ZU="@firebase/performance",JU="@firebase/performance-compat",XU="@firebase/remote-config",ej="@firebase/remote-config-compat",tj="@firebase/storage",nj="@firebase/storage-compat",rj="@firebase/firestore",ij="@firebase/vertexai-preview",oj="@firebase/firestore-compat",sj="firebase",aj="10.14.1";var H_="[DEFAULT]",cj={[$_]:"fire-core",[OU]:"fire-core-compat",[LU]:"fire-analytics",[FU]:"fire-analytics-compat",[UU]:"fire-app-check",[VU]:"fire-app-check-compat",[jU]:"fire-auth",[BU]:"fire-auth-compat",[$U]:"fire-rtdb",[HU]:"fire-data-connect",[qU]:"fire-rtdb-compat",[zU]:"fire-fn",[GU]:"fire-fn-compat",[WU]:"fire-iid",[KU]:"fire-iid-compat",[QU]:"fire-fcm",[YU]:"fire-fcm-compat",[ZU]:"fire-perf",[JU]:"fire-perf-compat",[XU]:"fire-rc",[ej]:"fire-rc-compat",[tj]:"fire-gcs",[nj]:"fire-gcs-compat",[rj]:"fire-fst",[oj]:"fire-fst-compat",[ij]:"fire-vertex","fire-js":"fire-js",[sj]:"fire-js-all"};var Yu=new Map,uj=new Map,q_=new Map;function zS(t,e){try{t.container.addComponent(e)}catch(n){ai.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Tr(t){let e=t.name;if(q_.has(e))return ai.debug(`There were multiple attempts to register component ${e}.`),!1;q_.set(e,t);for(let n of Yu.values())zS(n,t);for(let n of uj.values())zS(n,t);return!0}function ss(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Kn(t){return t.settings!==void 0}var lj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},io=new si("app","Firebase",lj);var z_=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new on("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw io.create("app-deleted",{appName:this._name})}};var Sr=aj;function K_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:H_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw io.create("bad-app-name",{appName:String(i)});if(n||(n=M_()),!n)throw io.create("no-options");let o=Yu.get(i);if(o){if(is(n,o.options)&&is(r,o.config))return o;throw io.create("duplicate-app",{appName:i})}let s=new Jf(i);for(let u of q_.values())s.addComponent(u);let a=new z_(n,r,s);return Yu.set(i,a),a}function oo(t=H_){let e=Yu.get(t);if(!e&&t===H_&&M_())return K_();if(!e)throw io.create("no-app",{appName:t});return e}function ep(){return Array.from(Yu.values())}function Je(t,e,n){var r;let i=(r=cj[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ai.warn(a.join(" "));return}Tr(new on(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var dj="firebase-heartbeat-database",hj=1,Zu="firebase-heartbeat-store",j_=null;function QS(){return j_||(j_=HS(dj,hj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zu)}catch(n){console.warn(n)}}}}).catch(t=>{throw io.create("idb-open",{originalErrorMessage:t.message})})),j_}function fj(t){return I(this,null,function*(){try{let n=(yield QS()).transaction(Zu),r=yield n.objectStore(Zu).get(YS(t));return yield n.done,r}catch(e){if(e instanceof Kt)ai.warn(e.message);else{let n=io.create("idb-get",{originalErrorMessage:e?.message});ai.warn(n.message)}}})}function GS(t,e){return I(this,null,function*(){try{let r=(yield QS()).transaction(Zu,"readwrite");yield r.objectStore(Zu).put(e,YS(t)),yield r.done}catch(n){if(n instanceof Kt)ai.warn(n.message);else{let r=io.create("idb-set",{originalErrorMessage:n?.message});ai.warn(r.message)}}})}function YS(t){return`${t.name}!${t.options.appId}`}var pj=1024,mj=30*24*60*60*1e3,G_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new W_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return I(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=WS();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=mj}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ai.warn(r)}})}getHeartbeatsHeader(){return I(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=WS(),{heartbeatsToSend:r,unsentEntries:i}=gj(this._heartbeatsCache.heartbeats),o=Ku(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ai.warn(n),""}})}};function WS(){return new Date().toISOString().substring(0,10)}function gj(t,e=pj){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),KS(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),KS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var W_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(this,null,function*(){return P_()?kS().then(()=>!0).catch(()=>!1):!1})}read(){return I(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield fj(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return I(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return GS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return I(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return GS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function KS(t){return Ku(JSON.stringify({version:2,heartbeats:t})).length}function yj(t){Tr(new on("platform-logger",e=>new B_(e),"PRIVATE")),Tr(new on("heartbeat",e=>new G_(e),"PRIVATE")),Je($_,qS,t),Je($_,qS,"esm2017"),Je("fire-js","")}yj("");var vj="firebase",_j="10.14.1";Je(vj,_j,"app");var so=new Qr("ANGULARFIRE2_VERSION");function Ju(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Wa=(t,e)=>{let n=e?[e]:ep(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},cs=class{constructor(){return Wa(wj)}},wj="app-check";function Ga(){}var tp=class{zone;delegate;constructor(e,n=Ag){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Q_=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ga,{},Ga,Ga)),n.pipe(It({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},us=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new tp(Zone.current)),this.insideAngular=n.run(()=>new tp(Zone.current,Sg)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(ee(Fe))};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function np(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Ej(t){return np().ngZone.runOutsideAngular(()=>t())}function as(t){return np().ngZone.run(()=>t())}function Ij(t){return bj(np())(t)}function bj(t){return function(n){return n=n.lift(new Q_(t.ngZone)),n.pipe($i(t.outsideAngular),Bi(t.insideAngular))}}var Cj=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),as(()=>t.apply(void 0,r))},Xe=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=as(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ga,{},Ga,Ga))),r[o]=Cj(r[o],n));let i=Ej(()=>t.apply(this,r));if(!e)if(i instanceof Ae){let o=np();return i.pipe($i(o.outsideAngular),Bi(o.insideAngular))}else return as(()=>i);return i instanceof Ae?i.pipe(Ij):i instanceof Promise?as(()=>new Promise((o,s)=>i.then(a=>as(()=>o(a)),a=>as(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:as(()=>i)};var ci=class{constructor(e){return e}},ls=class{constructor(){return ep()}};function Dj(t){return t&&t.length===1?t[0]:new ci(oo())}var Y_=new Q("angularfire2._apps"),Tj={provide:ci,useFactory:Dj,deps:[[new jt,Y_]]},Sj={provide:ls,deps:[[new jt,Y_]]};function Aj(t){return(e,n)=>{let r=n.get(An);Je("angularfire",so.full,"core"),Je("angularfire",so.full,"app"),Je("angular",iT.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new ci(i)}}function ZQ(t,...e){return yr([Tj,Sj,{provide:Y_,useFactory:Aj(t),multi:!0,deps:[Fe,kt,us,...e]}])}var JQ=Xe(K_,!0);function fA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var pA=fA,mA=new si("auth","Firebase",fA());var cp=new ro("@firebase/auth");function Rj(t,...e){cp.logLevel<=De.WARN&&cp.warn(`Auth (${Sr}): ${t}`,...e)}function ip(t,...e){cp.logLevel<=De.ERROR&&cp.error(`Auth (${Sr}): ${t}`,...e)}function Rr(t,...e){throw _w(t,...e)}function ds(t,...e){return _w(t,...e)}function gA(t,e,n){let r=Object.assign(Object.assign({},pA()),{[e]:n});return new si("auth","Firebase",r).create(e,{appName:t.name})}function di(t){return gA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _w(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return mA.create(t,...e)}function se(t,e,...n){if(!t)throw _w(e,...n)}function ui(t){let e="INTERNAL ASSERTION FAILED: "+t;throw ip(e),new Error(e)}function co(t,e){t||ui(e)}function ew(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function xj(){return ZS()==="http:"||ZS()==="https:"}function ZS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function Mj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xj()||xS()||"connection"in navigator)?navigator.onLine:!0}function Nj(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var hs=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,co(n>e,"Short delay should be less than long delay!"),this.isMobile=AS()||MS()}get(){return Mj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ww(t,e){co(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var up=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Pj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var kj=new hs(3e4,6e4);function hi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function fi(o,s,a,u){return I(this,arguments,function*(t,e,n,r,i={}){return yA(t,i,()=>I(this,null,function*(){let d={},p={};r&&(e==="GET"?p=r:d={body:JSON.stringify(r)});let m=Qu(Object.assign({key:t.config.apiKey},p)).slice(1),w=yield t._getAdditionalHeaders();w["Content-Type"]="application/json",t.languageCode&&(w["X-Firebase-Locale"]=t.languageCode);let b=Object.assign({method:e,headers:w},d);return RS()||(b.referrerPolicy="no-referrer"),up.fetch()(vA(t,t.config.apiHost,n,m),b)}))})}function yA(t,e,n){return I(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},Pj),e);try{let i=new tw(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw rp(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,d]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw rp(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw rp(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw rp(t,"user-disabled",s);let p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw gA(t,p,d);Rr(t,p)}}catch(i){if(i instanceof Kt)throw i;Rr(t,"network-request-failed",{message:String(i)})}})}function sl(o,s,a,u){return I(this,arguments,function*(t,e,n,r,i={}){let d=yield fi(t,e,n,r,i);return"mfaPendingCredential"in d&&Rr(t,"multi-factor-auth-required",{_serverResponse:d}),d})}function vA(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?ww(t.config,i):`${t.config.apiScheme}://${i}`}function Oj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var tw=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ds(this.auth,"network-request-failed")),kj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function rp(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ds(t,e,r);return i.customData._tokenResponse=n,i}function JS(t){return t!==void 0&&t.enterprise!==void 0}var nw=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Oj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function Fj(t,e){return I(this,null,function*(){return fi(t,"GET","/v2/recaptchaConfig",hi(t,e))})}function Lj(t,e){return I(this,null,function*(){return fi(t,"POST","/v1/accounts:delete",e)})}function _A(t,e){return I(this,null,function*(){return fi(t,"POST","/v1/accounts:lookup",e)})}function Xu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Ew(t,e=!1){return I(this,null,function*(){let n=We(t),r=yield n.getIdToken(e),i=Iw(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Xu(Z_(i.auth_time)),issuedAtTime:Xu(Z_(i.iat)),expirationTime:Xu(Z_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Z_(t){return Number(t)*1e3}function Iw(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ip("JWT malformed, contained fewer than 3 sections"),null;try{let i=R_(n);return i?JSON.parse(i):(ip("Failed to decode base64 JWT payload"),null)}catch(i){return ip("Caught error parsing JWT payload as JSON",i?.toString()),null}}function XS(t){let e=Iw(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function tl(t,e,n=!1){return I(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Kt&&Vj(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Vj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var rw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>I(this,null,function*(){yield this.iteration()}),n)}iteration(){return I(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var nl=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xu(this.lastLoginAt),this.creationTime=Xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function lp(t){return I(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield tl(t,_A(n,{idToken:r}));se(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?wA(o.providerUserInfo):[],a=Uj(t.providerData,s),u=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!a?.length,p=u?d:!1,m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new nl(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,m)})}function bw(t){return I(this,null,function*(){let e=We(t);yield lp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Uj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function wA(t){return t.map(e=>{var{providerId:n}=e,r=Rg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function jj(t,e){return I(this,null,function*(){let n=yield yA(t,{},()=>I(this,null,function*(){let r=Qu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=vA(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",up.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Bj(t,e){return I(this,null,function*(){return fi(t,"POST","/v2/accounts:revokeToken",hi(t,e))})}var el=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):XS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");let n=XS(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return I(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return I(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield jj(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(se(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(se(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return ui("not implemented")}};function ao(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ka=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Rg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new nl(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return I(this,null,function*(){let n=yield tl(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Ew(this,e)}reload(){return bw(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return I(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield lp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return I(this,null,function*(){if(Kn(this.auth.app))return Promise.reject(di(this.auth));let e=yield this.getIdToken();return yield tl(this,Lj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,d,p;let m=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(i=n.email)!==null&&i!==void 0?i:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,M=(s=n.photoURL)!==null&&s!==void 0?s:void 0,L=(a=n.tenantId)!==null&&a!==void 0?a:void 0,O=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,H=(d=n.createdAt)!==null&&d!==void 0?d:void 0,X=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:Z,emailVerified:ne,isAnonymous:Oe,providerData:oe,stsTokenManager:T}=n;se(Z&&T,e,"internal-error");let E=el.fromJSON(this.name,T);se(typeof Z=="string",e,"internal-error"),ao(m,e.name),ao(w,e.name),se(typeof ne=="boolean",e,"internal-error"),se(typeof Oe=="boolean",e,"internal-error"),ao(b,e.name),ao(M,e.name),ao(L,e.name),ao(O,e.name),ao(H,e.name),ao(X,e.name);let C=new t({uid:Z,auth:e,email:w,emailVerified:ne,displayName:m,isAnonymous:Oe,photoURL:M,phoneNumber:b,tenantId:L,stsTokenManager:E,createdAt:H,lastLoginAt:X});return oe&&Array.isArray(oe)&&(C.providerData=oe.map(S=>Object.assign({},S))),O&&(C._redirectEventId=O),C}static _fromIdTokenResponse(e,n,r=!1){return I(this,null,function*(){let i=new el;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield lp(o),o})}static _fromGetAccountInfoResponse(e,n,r){return I(this,null,function*(){let i=n.users[0];se(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?wA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new el;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new nl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,d),u})}};var eA=new Map;function li(t){co(t instanceof Function,"Expected a class definition");let e=eA.get(t);return e?(co(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,eA.set(t,e),e)}var $j=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(this,null,function*(){return!0})}_set(n,r){return I(this,null,function*(){this.storage[n]=r})}_get(n){return I(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return I(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),iw=$j;function op(t,e,n){return`firebase:${t}:${e}:${n}`}var dp=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=op(this.userKey,i.apiKey,o),this.fullPersistenceKey=op("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return I(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ka._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return I(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return I(this,null,function*(){if(!n.length)return new t(li(iw),e,r);let i=(yield Promise.all(n.map(d=>I(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),o=i[0]||li(iw),s=op(r,e.config.apiKey,e.name),a=null;for(let d of n)try{let p=yield d._get(s);if(p){let m=Ka._fromJSON(e,p);d!==o&&(a=m),o=d;break}}catch{}let u=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(d=>I(this,null,function*(){if(d!==o)try{yield d._remove(s)}catch{}}))),new t(o,e,r))})}};function tA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TA(e))return"Blackberry";if(SA(e))return"Webos";if(IA(e))return"Safari";if((e.includes("chrome/")||bA(e))&&!e.includes("edge/"))return"Chrome";if(DA(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function EA(t=xt()){return/firefox\//i.test(t)}function IA(t=xt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bA(t=xt()){return/crios\//i.test(t)}function CA(t=xt()){return/iemobile/i.test(t)}function DA(t=xt()){return/android/i.test(t)}function TA(t=xt()){return/blackberry/i.test(t)}function SA(t=xt()){return/webos/i.test(t)}function Cw(t=xt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Hj(t=xt()){var e;return Cw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qj(){return NS()&&document.documentMode===10}function AA(t=xt()){return Cw(t)||DA(t)||SA(t)||TA(t)||/windows phone/i.test(t)||CA(t)}function RA(t,e=[]){let n;switch(t){case"Browser":n=tA(xt());break;case"Worker":n=`${tA(xt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sr}/${r}`}var ow=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return I(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function zj(n){return I(this,arguments,function*(t,e={}){return fi(t,"GET","/v2/passwordPolicy",hi(t,e))})}var Gj=6,sw=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:Gj,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var aw=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hp(this),this.idTokenSubscription=new hp(this),this.beforeStateQueue=new ow(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=li(n)),this._initializationPromise=this.queue(()=>I(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield dp.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return I(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return I(this,null,function*(){try{let n=yield _A(this,{idToken:e}),r=yield Ka._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return I(this,null,function*(){var n;if(Kn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return I(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return I(this,null,function*(){try{yield lp(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Nj()}_delete(){return I(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return I(this,null,function*(){if(Kn(this.app))return Promise.reject(di(this));let n=e?We(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return I(this,null,function*(){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>I(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return I(this,null,function*(){return Kn(this.app)?Promise.reject(di(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Kn(this.app)?Promise.reject(di(this)):this.queue(()=>I(this,null,function*(){yield this.assertedPersistence.setPersistence(li(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return I(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return I(this,null,function*(){let e=yield zj(this),n=new sw(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new si("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return I(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Bj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return I(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return I(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&li(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=yield dp.create(this,[li(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return I(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>I(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return I(this,null,function*(){if(e===this.currentUser)return this.queue(()=>I(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return I(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return I(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return I(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Rj(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function ps(t){return We(t)}var hp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=FS(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var _p={loadJS(){return I(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Wj(t){_p=t}function xA(t){return _p.loadJS(t)}function Kj(){return _p.recaptchaEnterpriseScript}function Qj(){return _p.gapiScript}function MA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Yj="recaptcha-enterprise",Zj="NO_RECAPTCHA",cw=class{constructor(e){this.type=Yj,this.auth=ps(e)}verify(e="verify",n=!1){return I(this,null,function*(){function r(o){return I(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>I(this,null,function*(){Fj(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let d=new nw(u);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,s(d.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;JS(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(d=>{s(d)}).catch(()=>{s(Zj)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&JS(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Kj();u.length!==0&&(u+=a),xA(u).then(()=>{i(a,o,s)}).catch(d=>{s(d)})}}).catch(a=>{s(a)})})})}};function nA(t,e,n,r=!1){return I(this,null,function*(){let i=new cw(t),o;try{o=yield i.verify(n)}catch{o=yield i.verify(n,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function uw(t,e,n,r){return I(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield nA(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(o=>I(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield nA(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)}))})}function Dw(t,e){let n=ss(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(is(o,e??{}))return i;Rr(i,"already-initialized")}return n.initialize({options:e})}function Jj(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(li);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Tw(t,e,n){let r=ps(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=NA(e),{host:s,port:a}=Xj(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||eB()}function NA(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Xj(t){let e=NA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:rA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:rA(s)}}}function rA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function eB(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var rl=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ui("not implemented")}_getIdTokenResponse(e){return ui("not implemented")}_linkToIdToken(e,n){return ui("not implemented")}_getReauthenticationResolver(e){return ui("not implemented")}};function tB(t,e){return I(this,null,function*(){return fi(t,"POST","/v1/accounts:signUp",e)})}function nB(t,e){return I(this,null,function*(){return sl(t,"POST","/v1/accounts:signInWithPassword",hi(t,e))})}function rB(t,e){return I(this,null,function*(){return fi(t,"POST","/v1/accounts:sendOobCode",hi(t,e))})}function iB(t,e){return I(this,null,function*(){return rB(t,e)})}function oB(t,e){return I(this,null,function*(){return sl(t,"POST","/v1/accounts:signInWithEmailLink",hi(t,e))})}function sB(t,e){return I(this,null,function*(){return sl(t,"POST","/v1/accounts:signInWithEmailLink",hi(t,e))})}var il=class t extends rl{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return I(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uw(e,n,"signInWithPassword",nB);case"emailLink":return oB(e,{email:this._email,oobCode:this._password});default:Rr(e,"internal-error")}})}_linkToIdToken(e,n){return I(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uw(e,r,"signUpPassword",tB);case"emailLink":return sB(e,{idToken:n,email:this._email,oobCode:this._password});default:Rr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function J_(t,e){return I(this,null,function*(){return sl(t,"POST","/v1/accounts:signInWithIdp",hi(t,e))})}function aB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cB(t){let e=qa(za(t)).link,n=e?qa(za(e)).deep_link_id:null,r=qa(za(t)).deep_link_id;return(r?qa(za(r)).link:null)||r||n||e||t}var fp=class t{constructor(e){var n,r,i,o,s,a;let u=qa(za(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,p=(r=u.oobCode)!==null&&r!==void 0?r:null,m=aB((i=u.mode)!==null&&i!==void 0?i:null);se(d&&p&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=p,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=cB(e);try{return new t(n)}catch{return null}}};var PA=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return il._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=fp.parseLink(r);return se(i,"argument-error"),il._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),pp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var lw=class extends pp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function uB(t,e){return I(this,null,function*(){return sl(t,"POST","/v1/accounts:signUp",hi(t,e))})}var Qa=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return I(this,null,function*(){let o=yield Ka._fromIdTokenResponse(e,r,i),s=iA(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return I(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=iA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function iA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var dw=class t extends Kt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function kA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?dw._fromErrorAndOperation(t,o,e,r):o})}function lB(t,e,n=!1){return I(this,null,function*(){let r=yield tl(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Qa._forOperation(t,"link",r)})}function dB(t,e,n=!1){return I(this,null,function*(){let{auth:r}=t;if(Kn(r.app))return Promise.reject(di(r));let i="reauthenticate";try{let o=yield tl(t,kA(r,i,e,t),n);se(o.idToken,r,"internal-error");let s=Iw(o.idToken);se(s,r,"internal-error");let{sub:a}=s;return se(t.uid===a,r,"user-mismatch"),Qa._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Rr(r,"user-mismatch"),o}})}function OA(t,e,n=!1){return I(this,null,function*(){if(Kn(t.app))return Promise.reject(di(t));let r="signIn",i=yield kA(t,r,e),o=yield Qa._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function Sw(t,e){return I(this,null,function*(){return OA(ps(t),e)})}function hB(t,e,n){var r;se(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),se(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(se(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(se(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}function FA(t){return I(this,null,function*(){let e=ps(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Aw(t,e,n){return I(this,null,function*(){if(Kn(t.app))return Promise.reject(di(t));let r=ps(t),s=yield uw(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uB).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&FA(t),u}),a=yield Qa._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function Rw(t,e,n){return Kn(t.app)?Promise.reject(di(t)):Sw(We(t),PA.credential(e,n)).catch(r=>I(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&FA(t),r}))}function xw(t,e){return I(this,null,function*(){let n=We(t),i={requestType:"VERIFY_EMAIL",idToken:yield t.getIdToken()};e&&hB(n.auth,i,e);let{email:o}=yield iB(n.auth,i);o!==t.email&&(yield t.reload())})}function Mw(t,e,n,r){return We(t).onIdTokenChanged(e,n,r)}function Nw(t,e,n){return We(t).beforeAuthStateChanged(e,n)}function Pw(t){return We(t).signOut()}var mp="__sak";var gp=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mp,"1"),this.storage.removeItem(mp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var fB=1e3,pB=10,mB=(()=>{class t extends gp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,d)=>{this.notifyListeners(a,d)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);qj()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,pB):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},fB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return I(this,null,function*(){yield Ui(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return I(this,null,function*(){let r=yield Ui(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return I(this,null,function*(){yield Ui(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),LA=mB;var gB=(()=>{class t extends gp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),kw=gB;function yB(t){return Promise.all(t.map(e=>I(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var vB=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return I(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(p=>I(this,null,function*(){return p(r.origin,s)})),d=yield yB(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:d})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function VA(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var hw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return I(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let d=VA("",20);i.port1.start();let p=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(m){let w=m;if(w.data.eventId===d)switch(w.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(w.data.response);break;default:clearTimeout(p),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Ar(){return window}function _B(t){Ar().location.href=t}function UA(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}function wB(){return I(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function EB(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function IB(){return UA()?self:null}var jA="firebaseLocalStorageDb",bB=1,yp="firebaseLocalStorage",BA="fbase_key",fs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function wp(t,e){return t.transaction([yp],e?"readwrite":"readonly").objectStore(yp)}function CB(){let t=indexedDB.deleteDatabase(jA);return new fs(t).toPromise()}function fw(){let t=indexedDB.open(jA,bB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(yp,{keyPath:BA})}catch(i){n(i)}}),t.addEventListener("success",()=>I(this,null,function*(){let r=t.result;r.objectStoreNames.contains(yp)?e(r):(r.close(),yield CB(),e(yield fw()))}))})}function oA(t,e,n){return I(this,null,function*(){let r=wp(t,!0).put({[BA]:e,value:n});return new fs(r).toPromise()})}function DB(t,e){return I(this,null,function*(){let n=wp(t,!1).get(e),r=yield new fs(n).toPromise();return r===void 0?null:r.value})}function sA(t,e){let n=wp(t,!0).delete(e);return new fs(n).toPromise()}var TB=800,SB=3,AB=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return I(this,null,function*(){return this.db?this.db:(this.db=yield fw(),this.db)})}_withRetries(n){return I(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>SB)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return I(this,null,function*(){return UA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return I(this,null,function*(){this.receiver=vB._getInstance(IB()),this.receiver._subscribe("keyChanged",(n,r)=>I(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>I(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return I(this,null,function*(){var n,r;if(this.activeServiceWorker=yield wB(),!this.activeServiceWorker)return;this.sender=new hw(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return I(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||EB()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return I(this,null,function*(){try{if(!indexedDB)return!1;let n=yield fw();return yield oA(n,mp,"1"),yield sA(n,mp),!0}catch{}return!1})}_withPendingWrite(n){return I(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(i=>oA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return I(this,null,function*(){let r=yield this._withRetries(i=>DB(i,n));return this.localCache[n]=r,r})}_remove(n){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(r=>sA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return I(this,null,function*(){let n=yield this._withRetries(o=>{let s=wp(o,!1).getAll();return new fs(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>I(this,null,function*(){return this._poll()}),TB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),$A=AB;var sY=MA("rcb"),aY=new hs(3e4,6e4);function RB(t,e){return e?li(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var ol=class extends rl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return J_(e,this._buildIdpRequest())}_linkToIdToken(e,n){return J_(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return J_(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function xB(t){return OA(t.auth,new ol(t),t.bypassAuthState)}function MB(t){let{auth:e,user:n}=t;return se(n,e,"internal-error"),dB(n,new ol(t),t.bypassAuthState)}function NB(t){return I(this,null,function*(){let{auth:e,user:n}=t;return se(n,e,"internal-error"),lB(n,new ol(t),t.bypassAuthState)})}var pw=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>I(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return I(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xB;case"linkViaPopup":case"linkViaRedirect":return NB;case"reauthViaPopup":case"reauthViaRedirect":return MB;default:Rr(this.auth,"internal-error")}}resolve(e){co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var cY=new hs(2e3,1e4);var PB="pendingRedirect",sp=new Map,mw=class t extends pw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return I(this,null,function*(){let e=sp.get(this.auth._key());if(!e){try{let r=(yield kB(this.resolver,this.auth))?yield Ui(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sp.set(this.auth._key(),e)}return this.bypassAuthState||sp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return I(this,null,function*(){if(e.type==="signInViaRedirect")return Ui(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Ui(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return I(this,null,function*(){})}cleanUp(){}};function kB(t,e){return I(this,null,function*(){let n=LB(e),r=FB(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function OB(t,e){sp.set(t._key(),e)}function FB(t){return li(t._redirectPersistence)}function LB(t){return op(PB,t.config.apiKey,t.name)}function VB(t,e,n=!1){return I(this,null,function*(){if(Kn(t.app))return Promise.reject(di(t));let r=ps(t),i=RB(r,e),s=yield new mw(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var UB=10*60*1e3,gw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!HA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ds(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UB&&this.cachedEventUids.clear(),this.cachedEventUids.has(aA(e))}saveEventToCache(e){this.cachedEventUids.add(aA(e)),this.lastProcessedEventTime=Date.now()}};function aA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function HA({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function jB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HA(t);default:return!1}}function BB(n){return I(this,arguments,function*(t,e={}){return fi(t,"GET","/v1/projects",e)})}var $B=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HB=/^https?/;function qB(t){return I(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield BB(t);for(let n of e)try{if(zB(n))return}catch{}Rr(t,"unauthorized-domain")})}function zB(t){let e=ew(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!HB.test(n))return!1;if($B.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var GB=new hs(3e4,6e4);function cA(){let t=Ar().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function WB(t){return new Promise((e,n)=>{var r,i,o;function s(){cA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cA(),n(ds(t,"network-request-failed"))},timeout:GB.get()})}if(!((i=(r=Ar().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Ar().gapi)===null||o===void 0)&&o.load)s();else{let a=MA("iframefcb");return Ar()[a]=()=>{gapi.load?s():n(ds(t,"network-request-failed"))},xA(`${Qj()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw ap=null,e})}var ap=null;function KB(t){return ap=ap||WB(t),ap}var QB=new hs(5e3,15e3),YB="__/auth/iframe",ZB="emulator/auth/iframe",JB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function e$(t){let e=t.config;se(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?ww(e,ZB):`https://${t.config.authDomain}/${YB}`,r={apiKey:e.apiKey,appName:t.name,v:Sr},i=XB.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Qu(r).slice(1)}`}function t$(t){return I(this,null,function*(){let e=yield KB(t),n=Ar().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:e$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JB,dontclear:!0},r=>new Promise((i,o)=>I(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=ds(t,"network-request-failed"),a=Ar().setTimeout(()=>{o(s)},QB.get());function u(){Ar().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var n$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},r$=500,i$=600,o$="_blank",s$="http://localhost",vp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function a$(t,e,n,r=r$,i=i$){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},n$),{width:r.toString(),height:i.toString(),top:o,left:s}),d=xt().toLowerCase();n&&(a=bA(d)?o$:n),EA(d)&&(e=e||s$,u.scrollbars="yes");let p=Object.entries(u).reduce((w,[b,M])=>`${w}${b}=${M},`,"");if(Hj(d)&&a!=="_self")return c$(e||"",a),new vp(null);let m=window.open(e||"",a,p);se(m,t,"popup-blocked");try{m.focus()}catch{}return new vp(m)}function c$(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var u$="__/auth/handler",l$="emulator/auth/handler",d$=encodeURIComponent("fac");function uA(t,e,n,r,i,o){return I(this,null,function*(){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Sr,eventId:i};if(e instanceof pp){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",OS(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[p,m]of Object.entries(o||{}))s[p]=m}if(e instanceof lw){let p=e.getScopes().filter(m=>m!=="");p.length>0&&(s.scopes=p.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let p of Object.keys(a))a[p]===void 0&&delete a[p];let u=yield t._getAppCheckToken(),d=u?`#${d$}=${encodeURIComponent(u)}`:"";return`${h$(t)}?${Qu(a).slice(1)}${d}`})}function h$({config:t}){return t.emulator?ww(t,l$):`https://${t.authDomain}/${u$}`}var X_="webStorageSupport",yw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kw,this._completeRedirectFn=VB,this._overrideRedirectResult=OB}_openPopup(e,n,r,i){return I(this,null,function*(){var o;co((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield uA(e,n,r,ew(),i);return a$(e,s,VA())})}_openRedirect(e,n,r,i){return I(this,null,function*(){yield this._originValidation(e);let o=yield uA(e,n,r,ew(),i);return _B(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(co(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return I(this,null,function*(){let n=yield t$(e),r=new gw(e);return n.register("authEvent",i=>(se(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(X_,{type:X_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[X_];s!==void 0&&n(!!s),Rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return AA()||IA()||Cw()}},qA=yw;var lA="@firebase/auth",dA="1.7.9";var vw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return I(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function f$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function p$(t){Tr(new on("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;se(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RA(t)},d=new aw(r,i,o,u);return Jj(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Tr(new on("auth-internal",e=>{let n=ps(e.getProvider("auth").getImmediate());return(r=>new vw(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Je(lA,dA,f$(t)),Je(lA,dA,"esm2017")}var m$=5*60,g$=N_("authIdTokenMaxAge")||m$,hA=null,y$=t=>e=>I(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>g$)return;let i=n?.token;hA!==i&&(hA=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Ow(t=oo()){let e=ss(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Dw(t,{popupRedirectResolver:qA,persistence:[$A,LA,kw]}),r=N_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=y$(o.toString());Nw(n,s,()=>s(n.currentUser)),Mw(n,a=>s(a))}}let i=x_("auth");return i&&Tw(n,`http://${i}`),n}function v$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Wj({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=ds("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",v$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});p$("Browser");var zA="auth",ms=class{constructor(e){return e}},al=class{constructor(){return Wa(zA)}};var Fw=new Q("angularfire2.auth-instances");function aH(t,e){let n=Ju(zA,t,e);return n&&new ms(n)}function cH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ms(r)}}var uH={provide:al,deps:[[new jt,Fw]]},lH={provide:ms,useFactory:aH,deps:[[new jt,Fw],ci]};function zY(t,...e){return Je("angularfire",so.full,"auth"),yr([lH,uH,{provide:Fw,useFactory:cH(t),multi:!0,deps:[Fe,kt,us,ls,[new jt,cs],...e]}])}var GA=Xe(Aw,!0);var GY=Xe(Ow,!0);var WA=Xe(xw,!0);var KA=Xe(Rw,!0);var QA=Xe(Pw,!0);var YA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ZA={};var uo,Lw;(function(){var t;function e(T,E){function C(){}C.prototype=E.prototype,T.D=E.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(S,A,R){for(var D=Array(arguments.length-2),Pn=2;Pn<arguments.length;Pn++)D[Pn-2]=arguments[Pn];return E.prototype[A].apply(S,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,E,C){C||(C=0);var S=Array(16);if(typeof E=="string")for(var A=0;16>A;++A)S[A]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(A=0;16>A;++A)S[A]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=T.g[0],C=T.g[1],A=T.g[2];var R=T.g[3],D=E+(R^C&(A^R))+S[0]+3614090360&4294967295;E=C+(D<<7&4294967295|D>>>25),D=R+(A^E&(C^A))+S[1]+3905402710&4294967295,R=E+(D<<12&4294967295|D>>>20),D=A+(C^R&(E^C))+S[2]+606105819&4294967295,A=R+(D<<17&4294967295|D>>>15),D=C+(E^A&(R^E))+S[3]+3250441966&4294967295,C=A+(D<<22&4294967295|D>>>10),D=E+(R^C&(A^R))+S[4]+4118548399&4294967295,E=C+(D<<7&4294967295|D>>>25),D=R+(A^E&(C^A))+S[5]+1200080426&4294967295,R=E+(D<<12&4294967295|D>>>20),D=A+(C^R&(E^C))+S[6]+2821735955&4294967295,A=R+(D<<17&4294967295|D>>>15),D=C+(E^A&(R^E))+S[7]+4249261313&4294967295,C=A+(D<<22&4294967295|D>>>10),D=E+(R^C&(A^R))+S[8]+1770035416&4294967295,E=C+(D<<7&4294967295|D>>>25),D=R+(A^E&(C^A))+S[9]+2336552879&4294967295,R=E+(D<<12&4294967295|D>>>20),D=A+(C^R&(E^C))+S[10]+4294925233&4294967295,A=R+(D<<17&4294967295|D>>>15),D=C+(E^A&(R^E))+S[11]+2304563134&4294967295,C=A+(D<<22&4294967295|D>>>10),D=E+(R^C&(A^R))+S[12]+1804603682&4294967295,E=C+(D<<7&4294967295|D>>>25),D=R+(A^E&(C^A))+S[13]+4254626195&4294967295,R=E+(D<<12&4294967295|D>>>20),D=A+(C^R&(E^C))+S[14]+2792965006&4294967295,A=R+(D<<17&4294967295|D>>>15),D=C+(E^A&(R^E))+S[15]+1236535329&4294967295,C=A+(D<<22&4294967295|D>>>10),D=E+(A^R&(C^A))+S[1]+4129170786&4294967295,E=C+(D<<5&4294967295|D>>>27),D=R+(C^A&(E^C))+S[6]+3225465664&4294967295,R=E+(D<<9&4294967295|D>>>23),D=A+(E^C&(R^E))+S[11]+643717713&4294967295,A=R+(D<<14&4294967295|D>>>18),D=C+(R^E&(A^R))+S[0]+3921069994&4294967295,C=A+(D<<20&4294967295|D>>>12),D=E+(A^R&(C^A))+S[5]+3593408605&4294967295,E=C+(D<<5&4294967295|D>>>27),D=R+(C^A&(E^C))+S[10]+38016083&4294967295,R=E+(D<<9&4294967295|D>>>23),D=A+(E^C&(R^E))+S[15]+3634488961&4294967295,A=R+(D<<14&4294967295|D>>>18),D=C+(R^E&(A^R))+S[4]+3889429448&4294967295,C=A+(D<<20&4294967295|D>>>12),D=E+(A^R&(C^A))+S[9]+568446438&4294967295,E=C+(D<<5&4294967295|D>>>27),D=R+(C^A&(E^C))+S[14]+3275163606&4294967295,R=E+(D<<9&4294967295|D>>>23),D=A+(E^C&(R^E))+S[3]+4107603335&4294967295,A=R+(D<<14&4294967295|D>>>18),D=C+(R^E&(A^R))+S[8]+1163531501&4294967295,C=A+(D<<20&4294967295|D>>>12),D=E+(A^R&(C^A))+S[13]+2850285829&4294967295,E=C+(D<<5&4294967295|D>>>27),D=R+(C^A&(E^C))+S[2]+4243563512&4294967295,R=E+(D<<9&4294967295|D>>>23),D=A+(E^C&(R^E))+S[7]+1735328473&4294967295,A=R+(D<<14&4294967295|D>>>18),D=C+(R^E&(A^R))+S[12]+2368359562&4294967295,C=A+(D<<20&4294967295|D>>>12),D=E+(C^A^R)+S[5]+4294588738&4294967295,E=C+(D<<4&4294967295|D>>>28),D=R+(E^C^A)+S[8]+2272392833&4294967295,R=E+(D<<11&4294967295|D>>>21),D=A+(R^E^C)+S[11]+1839030562&4294967295,A=R+(D<<16&4294967295|D>>>16),D=C+(A^R^E)+S[14]+4259657740&4294967295,C=A+(D<<23&4294967295|D>>>9),D=E+(C^A^R)+S[1]+2763975236&4294967295,E=C+(D<<4&4294967295|D>>>28),D=R+(E^C^A)+S[4]+1272893353&4294967295,R=E+(D<<11&4294967295|D>>>21),D=A+(R^E^C)+S[7]+4139469664&4294967295,A=R+(D<<16&4294967295|D>>>16),D=C+(A^R^E)+S[10]+3200236656&4294967295,C=A+(D<<23&4294967295|D>>>9),D=E+(C^A^R)+S[13]+681279174&4294967295,E=C+(D<<4&4294967295|D>>>28),D=R+(E^C^A)+S[0]+3936430074&4294967295,R=E+(D<<11&4294967295|D>>>21),D=A+(R^E^C)+S[3]+3572445317&4294967295,A=R+(D<<16&4294967295|D>>>16),D=C+(A^R^E)+S[6]+76029189&4294967295,C=A+(D<<23&4294967295|D>>>9),D=E+(C^A^R)+S[9]+3654602809&4294967295,E=C+(D<<4&4294967295|D>>>28),D=R+(E^C^A)+S[12]+3873151461&4294967295,R=E+(D<<11&4294967295|D>>>21),D=A+(R^E^C)+S[15]+530742520&4294967295,A=R+(D<<16&4294967295|D>>>16),D=C+(A^R^E)+S[2]+3299628645&4294967295,C=A+(D<<23&4294967295|D>>>9),D=E+(A^(C|~R))+S[0]+4096336452&4294967295,E=C+(D<<6&4294967295|D>>>26),D=R+(C^(E|~A))+S[7]+1126891415&4294967295,R=E+(D<<10&4294967295|D>>>22),D=A+(E^(R|~C))+S[14]+2878612391&4294967295,A=R+(D<<15&4294967295|D>>>17),D=C+(R^(A|~E))+S[5]+4237533241&4294967295,C=A+(D<<21&4294967295|D>>>11),D=E+(A^(C|~R))+S[12]+1700485571&4294967295,E=C+(D<<6&4294967295|D>>>26),D=R+(C^(E|~A))+S[3]+2399980690&4294967295,R=E+(D<<10&4294967295|D>>>22),D=A+(E^(R|~C))+S[10]+4293915773&4294967295,A=R+(D<<15&4294967295|D>>>17),D=C+(R^(A|~E))+S[1]+2240044497&4294967295,C=A+(D<<21&4294967295|D>>>11),D=E+(A^(C|~R))+S[8]+1873313359&4294967295,E=C+(D<<6&4294967295|D>>>26),D=R+(C^(E|~A))+S[15]+4264355552&4294967295,R=E+(D<<10&4294967295|D>>>22),D=A+(E^(R|~C))+S[6]+2734768916&4294967295,A=R+(D<<15&4294967295|D>>>17),D=C+(R^(A|~E))+S[13]+1309151649&4294967295,C=A+(D<<21&4294967295|D>>>11),D=E+(A^(C|~R))+S[4]+4149444226&4294967295,E=C+(D<<6&4294967295|D>>>26),D=R+(C^(E|~A))+S[11]+3174756917&4294967295,R=E+(D<<10&4294967295|D>>>22),D=A+(E^(R|~C))+S[2]+718787259&4294967295,A=R+(D<<15&4294967295|D>>>17),D=C+(R^(A|~E))+S[9]+3951481745&4294967295,T.g[0]=T.g[0]+E&4294967295,T.g[1]=T.g[1]+(A+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+R&4294967295}r.prototype.u=function(T,E){E===void 0&&(E=T.length);for(var C=E-this.blockSize,S=this.B,A=this.h,R=0;R<E;){if(A==0)for(;R<=C;)i(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<E;)if(S[A++]=T.charCodeAt(R++),A==this.blockSize){i(this,S),A=0;break}}else for(;R<E;)if(S[A++]=T[R++],A==this.blockSize){i(this,S),A=0;break}}this.h=A,this.o+=E},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var E=1;E<T.length-8;++E)T[E]=0;var C=8*this.o;for(E=T.length-8;E<T.length;++E)T[E]=C&255,C/=256;for(this.u(T),T=Array(16),E=C=0;4>E;++E)for(var S=0;32>S;S+=8)T[C++]=this.g[E]>>>S&255;return T};function o(T,E){var C=a;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=E(T)}function s(T,E){this.h=E;for(var C=[],S=!0,A=T.length-1;0<=A;A--){var R=T[A]|0;S&&R==E||(C[A]=R,S=!1)}this.g=C}var a={};function u(T){return-128<=T&&128>T?o(T,function(E){return new s([E|0],0>E?-1:0)}):new s([T|0],0>T?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return m;if(0>T)return O(d(-T));for(var E=[],C=1,S=0;T>=C;S++)E[S]=T/C|0,C*=4294967296;return new s(E,0)}function p(T,E){if(T.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T.charAt(0)=="-")return O(p(T.substring(1),E));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=d(Math.pow(E,8)),S=m,A=0;A<T.length;A+=8){var R=Math.min(8,T.length-A),D=parseInt(T.substring(A,A+R),E);8>R?(R=d(Math.pow(E,R)),S=S.j(R).add(d(D))):(S=S.j(C),S=S.add(d(D)))}return S}var m=u(0),w=u(1),b=u(16777216);t=s.prototype,t.m=function(){if(L(this))return-O(this).m();for(var T=0,E=1,C=0;C<this.g.length;C++){var S=this.i(C);T+=(0<=S?S:4294967296+S)*E,E*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(M(this))return"0";if(L(this))return"-"+O(this).toString(T);for(var E=d(Math.pow(T,6)),C=this,S="";;){var A=ne(C,E).g;C=H(C,A.j(E));var R=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=A,M(C))return R+S;for(;6>R.length;)R="0"+R;S=R+S}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function M(T){if(T.h!=0)return!1;for(var E=0;E<T.g.length;E++)if(T.g[E]!=0)return!1;return!0}function L(T){return T.h==-1}t.l=function(T){return T=H(this,T),L(T)?-1:M(T)?0:1};function O(T){for(var E=T.g.length,C=[],S=0;S<E;S++)C[S]=~T.g[S];return new s(C,~T.h).add(w)}t.abs=function(){return L(this)?O(this):this},t.add=function(T){for(var E=Math.max(this.g.length,T.g.length),C=[],S=0,A=0;A<=E;A++){var R=S+(this.i(A)&65535)+(T.i(A)&65535),D=(R>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);S=D>>>16,R&=65535,D&=65535,C[A]=D<<16|R}return new s(C,C[C.length-1]&-2147483648?-1:0)};function H(T,E){return T.add(O(E))}t.j=function(T){if(M(this)||M(T))return m;if(L(this))return L(T)?O(this).j(O(T)):O(O(this).j(T));if(L(T))return O(this.j(O(T)));if(0>this.l(b)&&0>T.l(b))return d(this.m()*T.m());for(var E=this.g.length+T.g.length,C=[],S=0;S<2*E;S++)C[S]=0;for(S=0;S<this.g.length;S++)for(var A=0;A<T.g.length;A++){var R=this.i(S)>>>16,D=this.i(S)&65535,Pn=T.i(A)>>>16,Ei=T.i(A)&65535;C[2*S+2*A]+=D*Ei,X(C,2*S+2*A),C[2*S+2*A+1]+=R*Ei,X(C,2*S+2*A+1),C[2*S+2*A+1]+=D*Pn,X(C,2*S+2*A+1),C[2*S+2*A+2]+=R*Pn,X(C,2*S+2*A+2)}for(S=0;S<E;S++)C[S]=C[2*S+1]<<16|C[2*S];for(S=E;S<2*E;S++)C[S]=0;return new s(C,0)};function X(T,E){for(;(T[E]&65535)!=T[E];)T[E+1]+=T[E]>>>16,T[E]&=65535,E++}function Z(T,E){this.g=T,this.h=E}function ne(T,E){if(M(E))throw Error("division by zero");if(M(T))return new Z(m,m);if(L(T))return E=ne(O(T),E),new Z(O(E.g),O(E.h));if(L(E))return E=ne(T,O(E)),new Z(O(E.g),E.h);if(30<T.g.length){if(L(T)||L(E))throw Error("slowDivide_ only works with positive integers.");for(var C=w,S=E;0>=S.l(T);)C=Oe(C),S=Oe(S);var A=oe(C,1),R=oe(S,1);for(S=oe(S,2),C=oe(C,2);!M(S);){var D=R.add(S);0>=D.l(T)&&(A=A.add(C),R=D),S=oe(S,1),C=oe(C,1)}return E=H(T,A.j(E)),new Z(A,E)}for(A=m;0<=T.l(E);){for(C=Math.max(1,Math.floor(T.m()/E.m())),S=Math.ceil(Math.log(C)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),R=d(C),D=R.j(E);L(D)||0<D.l(T);)C-=S,R=d(C),D=R.j(E);M(R)&&(R=w),A=A.add(R),T=H(T,D)}return new Z(A,T)}t.A=function(T){return ne(this,T).h},t.and=function(T){for(var E=Math.max(this.g.length,T.g.length),C=[],S=0;S<E;S++)C[S]=this.i(S)&T.i(S);return new s(C,this.h&T.h)},t.or=function(T){for(var E=Math.max(this.g.length,T.g.length),C=[],S=0;S<E;S++)C[S]=this.i(S)|T.i(S);return new s(C,this.h|T.h)},t.xor=function(T){for(var E=Math.max(this.g.length,T.g.length),C=[],S=0;S<E;S++)C[S]=this.i(S)^T.i(S);return new s(C,this.h^T.h)};function Oe(T){for(var E=T.g.length+1,C=[],S=0;S<E;S++)C[S]=T.i(S)<<1|T.i(S-1)>>>31;return new s(C,T.h)}function oe(T,E){var C=E>>5;E%=32;for(var S=T.g.length-C,A=[],R=0;R<S;R++)A[R]=0<E?T.i(R+C)>>>E|T.i(R+C+1)<<32-E:T.i(R+C);return new s(A,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Lw=ZA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=p,uo=ZA.Integer=s}).apply(typeof YA<"u"?YA:typeof self<"u"?self:typeof window<"u"?window:{});var Ep=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pi={};var Vw,hH,Ya,Uw,cl,Ip,jw,Bw,$w;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ep=="object"&&Ep];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(c,f){if(f)e:{var g=r;c=c.split(".");for(var v=0;v<c.length-1;v++){var x=c[v];if(!(x in g))break e;g=g[x]}c=c[c.length-1],v=g[c],f=f(v),f!=v&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function o(c,f){c instanceof String&&(c+="");var g=0,v=!1,x={next:function(){if(!v&&g<c.length){var k=g++;return{value:f(k,c[k]),done:!1}}return v=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}i("Array.prototype.values",function(c){return c||function(){return o(this,function(f,g){return g})}});var s=s||{},a=this||self;function u(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function d(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function p(c,f,g){return c.call.apply(c.bind,arguments)}function m(c,f,g){if(!c)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,v),c.apply(f,x)}}return function(){return c.apply(f,arguments)}}function w(c,f,g){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,w.apply(null,arguments)}function b(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),c.apply(this,v)}}function M(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(v,x,k){for(var $=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)$[Ve-2]=arguments[Ve];return f.prototype[x].apply(v,$)}}function L(c){let f=c.length;if(0<f){let g=Array(f);for(let v=0;v<f;v++)g[v]=c[v];return g}return[]}function O(c,f){for(let g=1;g<arguments.length;g++){let v=arguments[g];if(u(v)){let x=c.length||0,k=v.length||0;c.length=x+k;for(let $=0;$<k;$++)c[x+$]=v[$]}else c.push(v)}}class H{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function X(c){return/^[\s\xa0]*$/.test(c)}function Z(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ne(c){return ne[" "](c),c}ne[" "]=function(){};var Oe=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function oe(c,f,g){for(let v in c)f.call(g,c[v],v,c)}function T(c,f){for(let g in c)f.call(void 0,c[g],g,c)}function E(c){let f={};for(let g in c)f[g]=c[g];return f}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(c,f){let g,v;for(let x=1;x<arguments.length;x++){v=arguments[x];for(g in v)c[g]=v[g];for(let k=0;k<C.length;k++)g=C[k],Object.prototype.hasOwnProperty.call(v,g)&&(c[g]=v[g])}}function A(c){var f=1;c=c.split(":");let g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function R(c){a.setTimeout(()=>{throw c},0)}function D(){var c=bi;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class Pn{constructor(){this.h=this.g=null}add(f,g){let v=Ei.get();v.set(f,g),this.h?this.h.next=v:this.g=v,this.h=v}}var Ei=new H(()=>new Rc,c=>c.reset());class Rc{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Ii,jr=!1,bi=new Pn,an=()=>{let c=a.Promise.resolve(void 0);Ii=()=>{c.then(Ci)}};var Ci=()=>{for(var c;c=D();){try{c.h.call(c.g)}catch(g){R(g)}var f=Ei;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}jr=!1};function Vt(){this.s=this.s,this.C=this.C}Vt.prototype.s=!1,Vt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Vt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Dt(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}Dt.prototype.h=function(){this.defaultPrevented=!0};var Di=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return c}();function kn(c,f){if(Dt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,v=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(Oe){e:{try{ne(f.nodeName);var x=!0;break e}catch{}x=!1}x||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Wl[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&kn.aa.h.call(this)}}M(kn,Dt);var Wl={2:"touch",3:"pen",4:"mouse"};kn.prototype.h=function(){kn.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var er="closure_listenable_"+(1e6*Math.random()|0),xc=0;function zm(c,f,g,v,x){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!v,this.ha=x,this.key=++xc,this.da=this.fa=!1}function Ti(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Si(c){this.src=c,this.g={},this.h=0}Si.prototype.add=function(c,f,g,v,x){var k=c.toString();c=this.g[k],c||(c=this.g[k]=[],this.h++);var $=Mc(c,f,v,x);return-1<$?(f=c[$],g||(f.fa=!1)):(f=new zm(f,this.src,k,!!v,x),f.fa=g,c.push(f)),f};function Ai(c,f){var g=f.type;if(g in c.g){var v=c.g[g],x=Array.prototype.indexOf.call(v,f,void 0),k;(k=0<=x)&&Array.prototype.splice.call(v,x,1),k&&(Ti(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function Mc(c,f,g,v){for(var x=0;x<c.length;++x){var k=c[x];if(!k.da&&k.listener==f&&k.capture==!!g&&k.ha==v)return x}return-1}var Nt="closure_lm_"+(1e6*Math.random()|0),cn={};function Kl(c,f,g,v,x){if(v&&v.once)return Nc(c,f,g,v,x);if(Array.isArray(f)){for(var k=0;k<f.length;k++)Kl(c,f[k],g,v,x);return null}return g=ut(g),c&&c[er]?c.K(f,g,d(v)?!!v.capture:!!v,x):Ut(c,f,g,!1,v,x)}function Ut(c,f,g,v,x,k){if(!f)throw Error("Invalid event type");var $=d(x)?!!x.capture:!!x,Ve=On(c);if(Ve||(c[Nt]=Ve=new Si(c)),g=Ve.add(f,g,v,$,k),g.proxy)return g;if(v=Ps(),g.proxy=v,v.src=c,v.listener=g,c.addEventListener)Di||(x=$),x===void 0&&(x=!1),c.addEventListener(f.toString(),v,x);else if(c.attachEvent)c.attachEvent(un(f.toString()),v);else if(c.addListener&&c.removeListener)c.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Ps(){function c(g){return f.call(c.src,c.listener,g)}let f=tr;return c}function Nc(c,f,g,v,x){if(Array.isArray(f)){for(var k=0;k<f.length;k++)Nc(c,f[k],g,v,x);return null}return g=ut(g),c&&c[er]?c.L(f,g,d(v)?!!v.capture:!!v,x):Ut(c,f,g,!0,v,x)}function Pc(c,f,g,v,x){if(Array.isArray(f))for(var k=0;k<f.length;k++)Pc(c,f[k],g,v,x);else v=d(v)?!!v.capture:!!v,g=ut(g),c&&c[er]?(c=c.i,f=String(f).toString(),f in c.g&&(k=c.g[f],g=Mc(k,g,v,x),-1<g&&(Ti(k[g]),Array.prototype.splice.call(k,g,1),k.length==0&&(delete c.g[f],c.h--)))):c&&(c=On(c))&&(f=c.g[f.toString()],c=-1,f&&(c=Mc(f,g,v,x)),(g=-1<c?f[c]:null)&&be(g))}function be(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[er])Ai(f.i,c);else{var g=c.type,v=c.proxy;f.removeEventListener?f.removeEventListener(g,v,c.capture):f.detachEvent?f.detachEvent(un(g),v):f.addListener&&f.removeListener&&f.removeListener(v),(g=On(f))?(Ai(g,c),g.h==0&&(g.src=null,f[Nt]=null)):Ti(c)}}}function un(c){return c in cn?cn[c]:cn[c]="on"+c}function tr(c,f){if(c.da)c=!0;else{f=new kn(f,this);var g=c.listener,v=c.ha||c.src;c.fa&&be(c),c=g.call(v,f)}return c}function On(c){return c=c[Nt],c instanceof Si?c:null}var tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ut(c){return typeof c=="function"?c:(c[tt]||(c[tt]=function(f){return c.handleEvent(f)}),c[tt])}function lt(){Vt.call(this),this.i=new Si(this),this.M=this,this.F=null}M(lt,Vt),lt.prototype[er]=!0,lt.prototype.removeEventListener=function(c,f,g,v){Pc(this,c,f,g,v)};function Tt(c,f){var g,v=c.F;if(v)for(g=[];v;v=v.F)g.push(v);if(c=c.M,v=f.type||f,typeof f=="string")f=new Dt(f,c);else if(f instanceof Dt)f.target=f.target||c;else{var x=f;f=new Dt(v,c),S(f,x)}if(x=!0,g)for(var k=g.length-1;0<=k;k--){var $=f.g=g[k];x=nr($,v,!0,f)&&x}if($=f.g=c,x=nr($,v,!0,f)&&x,x=nr($,v,!1,f)&&x,g)for(k=0;k<g.length;k++)$=f.g=g[k],x=nr($,v,!1,f)&&x}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],v=0;v<g.length;v++)Ti(g[v]);delete c.g[f],c.h--}}this.F=null},lt.prototype.K=function(c,f,g,v){return this.i.add(String(c),f,!1,g,v)},lt.prototype.L=function(c,f,g,v){return this.i.add(String(c),f,!0,g,v)};function nr(c,f,g,v){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var x=!0,k=0;k<f.length;++k){var $=f[k];if($&&!$.da&&$.capture==g){var Ve=$.listener,_t=$.ha||$.src;$.fa&&Ai(c.i,$),x=Ve.call(_t,v)!==!1&&x}}return x&&!v.defaultPrevented}function Pt(c,f,g){if(typeof c=="function")g&&(c=w(c,g));else if(c&&typeof c.handleEvent=="function")c=w(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function Ql(c){c.g=Pt(()=>{c.g=null,c.i&&(c.i=!1,Ql(c))},c.l);let f=c.h;c.h=null,c.m.apply(null,f)}class Yl extends Vt{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ql(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ri(c){Vt.call(this),this.h=c,this.g={}}M(Ri,Vt);var ks=[];function Zl(c){oe(c.g,function(f,g){this.g.hasOwnProperty(g)&&be(f)},c),c.g={}}Ri.prototype.N=function(){Ri.aa.N.call(this),Zl(this)},Ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kc=a.JSON.stringify,Gm=a.JSON.parse,Wm=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Fn(){}Fn.prototype.h=null;function Jl(c){return c.h||(c.h=c.i())}function Xl(){}var Eo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Oc(){Dt.call(this,"d")}M(Oc,Dt);function Fc(){Dt.call(this,"c")}M(Fc,Dt);var Ln={},ed=null;function Os(){return ed=ed||new lt}Ln.La="serverreachability";function td(c){Dt.call(this,Ln.La,c)}M(td,Dt);function Io(c){let f=Os();Tt(f,new td(f))}Ln.STAT_EVENT="statevent";function nd(c,f){Dt.call(this,Ln.STAT_EVENT,c),this.stat=f}M(nd,Dt);function vt(c){let f=Os();Tt(f,new nd(f,c))}Ln.Ma="timingevent";function rd(c,f){Dt.call(this,Ln.Ma,c),this.size=f}M(rd,Dt);function bo(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function Co(){this.g=!0}Co.prototype.xa=function(){this.g=!1};function Km(c,f,g,v,x,k){c.info(function(){if(c.g)if(k)for(var $="",Ve=k.split("&"),_t=0;_t<Ve.length;_t++){var Se=Ve[_t].split("=");if(1<Se.length){var St=Se[0];Se=Se[1];var wt=St.split("_");$=2<=wt.length&&wt[1]=="type"?$+(St+"="+Se+"&"):$+(St+"=redacted&")}}else $=null;else $=k;return"XMLHTTP REQ ("+v+") [attempt "+x+"]: "+f+`
`+g+`
`+$})}function Qm(c,f,g,v,x,k,$){c.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+x+"]: "+f+`
`+g+`
`+k+" "+$})}function Ne(c,f,g,v){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+Zm(c,g)+(v?" "+v:"")})}function Ym(c,f){c.info(function(){return"TIMEOUT: "+f})}Co.prototype.info=function(){};function Zm(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var v=g[c];if(!(2>v.length)){var x=v[1];if(Array.isArray(x)&&!(1>x.length)){var k=x[0];if(k!="noop"&&k!="stop"&&k!="close")for(var $=1;$<x.length;$++)x[$]=""}}}}return kc(g)}catch{return f}}var Fs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},id={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Lc;function Ls(){}M(Ls,Fn),Ls.prototype.g=function(){return new XMLHttpRequest},Ls.prototype.i=function(){return{}},Lc=new Ls;function En(c,f,g,v){this.j=c,this.i=f,this.l=g,this.R=v||1,this.U=new Ri(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xi}function xi(){this.i=null,this.g="",this.h=!1}var Vc={},Mi={};function qe(c,f,g){c.L=1,c.v=Us(In(f)),c.m=g,c.P=!0,od(c,null)}function od(c,f){c.F=Date.now(),Do(c),c.A=In(c.v);var g=c.A,v=c.R;Array.isArray(v)||(v=[String(v)]),Ed(g.i,"t",v),c.C=0,g=c.j.J,c.h=new xi,c.g=Xc(c.j,g?f:null,!c.m),0<c.O&&(c.M=new Yl(w(c.Y,c,c.g),c.O)),f=c.U,g=c.g,v=c.ca;var x="readystatechange";Array.isArray(x)||(x&&(ks[0]=x.toString()),x=ks);for(var k=0;k<x.length;k++){var $=Kl(g,x[k],v||f.handleEvent,!1,f.h||f);if(!$)break;f.g[$.key]=$}f=c.H?E(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),Io(),Km(c.i,c.u,c.A,c.l,c.R,c.m)}En.prototype.ca=function(c){c=c.target;let f=this.M;f&&Un(c)==3?f.j():this.Y(c)},En.prototype.Y=function(c){try{if(c==this.g)e:{let wt=Un(this.g);var f=this.g.Ba();let ar=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||Ad(this.g)))){this.J||wt!=4||f==7||(f==8||0>=ar?Io(3):Io(2)),Uc(this);var g=this.g.Z();this.X=g;t:if(sd(this)){var v=Ad(this.g);c="";var x=v.length,k=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){rr(this),To(this);var $="";break t}this.h.i=new a.TextDecoder}for(f=0;f<x;f++)this.h.h=!0,c+=this.h.i.decode(v[f],{stream:!(k&&f==x-1)});v.length=0,this.h.g+=c,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=g==200,Qm(this.i,this.u,this.A,this.l,this.R,wt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,_t=this.g;if((Ve=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Ve)){var Se=Ve;break t}}Se=null}if(g=Se)Ne(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jc(this,g);else{this.o=!1,this.s=3,vt(12),rr(this),To(this);break e}}if(this.P){g=!0;let ln;for(;!this.J&&this.C<$.length;)if(ln=Jm(this,$),ln==Mi){wt==4&&(this.s=4,vt(14),g=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==Vc){this.s=4,vt(15),Ne(this.i,this.l,$,"[Invalid Chunk]"),g=!1;break}else Ne(this.i,this.l,ln,null),jc(this,ln);if(sd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||$.length!=0||this.h.h||(this.s=1,vt(16),g=!1),this.o=this.o&&g,!g)Ne(this.i,this.l,$,"[Invalid Chunked Response]"),rr(this),To(this);else if(0<$.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Li(St),St.M=!0,vt(11))}}else Ne(this.i,this.l,$,null),jc(this,$);wt==4&&rr(this),this.o&&!this.J&&(wt==4?Qc(this.j,this):(this.o=!1,Do(this)))}else ag(this.g),g==400&&0<$.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),rr(this),To(this)}}}catch{}finally{}};function sd(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Jm(c,f){var g=c.C,v=f.indexOf(`
`,g);return v==-1?Mi:(g=Number(f.substring(g,v)),isNaN(g)?Vc:(v+=1,v+g>f.length?Mi:(f=f.slice(v,v+g),c.C=v+g,f)))}En.prototype.cancel=function(){this.J=!0,rr(this)};function Do(c){c.S=Date.now()+c.I,ad(c,c.I)}function ad(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=bo(w(c.ba,c),f)}function Uc(c){c.B&&(a.clearTimeout(c.B),c.B=null)}En.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(Ym(this.i,this.A),this.L!=2&&(Io(),vt(17)),rr(this),this.s=2,To(this)):ad(this,this.S-c)};function To(c){c.j.G==0||c.J||Qc(c.j,c)}function rr(c){Uc(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,Zl(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function jc(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||Bc(g.h,c))){if(!c.K&&Bc(g.h,c)&&g.G==3){try{var v=g.Da.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var x=v;if(x[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)ko(g),Hs(g);else break e;Po(g),vt(18)}}else g.za=x[1],0<g.za-g.T&&37500>x[2]&&g.F&&g.v==0&&!g.C&&(g.C=bo(w(g.Za,g),6e3));if(1>=dd(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else sr(g,11)}else if((c.K||g.g==c)&&ko(g),!X(f))for(x=g.Da.g.parse(f),f=0;f<x.length;f++){let Se=x[f];if(g.T=Se[0],Se=Se[1],g.G==2)if(Se[0]=="c"){g.K=Se[1],g.ia=Se[2];let St=Se[3];St!=null&&(g.la=St,g.j.info("VER="+g.la));let wt=Se[4];wt!=null&&(g.Aa=wt,g.j.info("SVER="+g.Aa));let ar=Se[5];ar!=null&&typeof ar=="number"&&0<ar&&(v=1.5*ar,g.L=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;let ln=c.g;if(ln){let zs=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zs){var k=v.h;k.g||zs.indexOf("spdy")==-1&&zs.indexOf("quic")==-1&&zs.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&($c(k,k.h),k.h=null))}if(v.D){let tu=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;tu&&(v.ya=tu,$e(v.I,v.D,tu))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),v=g;var $=c;if(v.qa=Jc(v,v.J?v.ia:null,v.W),$.K){hd(v.h,$);var Ve=$,_t=v.L;_t&&(Ve.I=_t),Ve.B&&(Uc(Ve),Do(Ve)),v.g=$}else Kc(v);0<g.i.length&&qs(g)}else Se[0]!="stop"&&Se[0]!="close"||sr(g,7);else g.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?sr(g,7):$s(g):Se[0]!="noop"&&g.l&&g.l.ta(Se),g.v=0)}}Io(4)}catch{}}var cd=class{constructor(c,f){this.g=c,this.map=f}};function ud(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ld(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function dd(c){return c.h?1:c.g?c.g.size:0}function Bc(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function $c(c,f){c.g?c.g.add(f):c.h=f}function hd(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}ud.prototype.cancel=function(){if(this.i=fd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function fd(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(let g of c.g.values())f=f.concat(g.D);return f}return L(c.i)}function pd(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var f=[],g=c.length,v=0;v<g;v++)f.push(c[v]);return f}f=[],g=0;for(v in c)f[g++]=c[v];return f}function Xm(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(let v in c)f[g++]=v;return f}}}function Hc(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=Xm(c),v=pd(c),x=v.length,k=0;k<x;k++)f.call(void 0,v[k],g&&g[k],c)}var md=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eg(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var v=c[g].indexOf("="),x=null;if(0<=v){var k=c[g].substring(0,v);x=c[g].substring(v+1)}else k=c[g];f(k,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Yt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Yt){this.h=c.h,Vs(this,c.j),this.o=c.o,this.g=c.g,Ni(this,c.s),this.l=c.l;var f=c.i,g=new Ro;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),qc(this,g),this.m=c.m}else c&&(f=String(c).match(md))?(this.h=!1,Vs(this,f[1]||"",!0),this.o=So(f[2]||""),this.g=So(f[3]||"",!0),Ni(this,f[4]),this.l=So(f[5]||"",!0),qc(this,f[6]||"",!0),this.m=So(f[7]||"")):(this.h=!1,this.i=new Ro(null,this.h))}Yt.prototype.toString=function(){var c=[],f=this.j;f&&c.push(Ao(f,gd,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Ao(f,gd,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Ao(g,g.charAt(0)=="/"?ng:Pi,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Ao(g,vd)),c.join("")};function In(c){return new Yt(c)}function Vs(c,f,g){c.j=g?So(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Ni(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function qc(c,f,g){f instanceof Ro?(c.i=f,rg(c.i,c.h)):(g||(f=Ao(f,yd)),c.i=new Ro(f,c.h))}function $e(c,f,g){c.i.set(f,g)}function Us(c){return $e(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function So(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ao(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,tg),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function tg(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var gd=/[#\/\?@]/g,Pi=/[#\?:]/g,ng=/[#\?]/g,yd=/[#\?@]/g,vd=/#/g;function Ro(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function ir(c){c.g||(c.g=new Map,c.h=0,c.i&&eg(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=Ro.prototype,t.add=function(c,f){ir(this),this.i=null,c=ki(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function _d(c,f){ir(c),f=ki(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function wd(c,f){return ir(c),f=ki(c,f),c.g.has(f)}t.forEach=function(c,f){ir(this),this.g.forEach(function(g,v){g.forEach(function(x){c.call(f,x,v,this)},this)},this)},t.na=function(){ir(this);let c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let v=0;v<f.length;v++){let x=c[v];for(let k=0;k<x.length;k++)g.push(f[v])}return g},t.V=function(c){ir(this);let f=[];if(typeof c=="string")wd(this,c)&&(f=f.concat(this.g.get(ki(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return ir(this),this.i=null,c=ki(this,c),wd(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function Ed(c,f,g){_d(c,f),0<g.length&&(c.i=null,c.g.set(ki(c,f),L(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var v=f[g];let k=encodeURIComponent(String(v)),$=this.V(v);for(v=0;v<$.length;v++){var x=k;$[v]!==""&&(x+="="+encodeURIComponent(String($[v]))),c.push(x)}}return this.i=c.join("&")};function ki(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function rg(c,f){f&&!c.j&&(ir(c),c.i=null,c.g.forEach(function(g,v){var x=v.toLowerCase();v!=x&&(_d(this,v),Ed(this,x,g))},c)),c.j=f}function Oi(c,f){let g=new Co;if(a.Image){let v=new Image;v.onload=b(or,g,"TestLoadImage: loaded",!0,f,v),v.onerror=b(or,g,"TestLoadImage: error",!1,f,v),v.onabort=b(or,g,"TestLoadImage: abort",!1,f,v),v.ontimeout=b(or,g,"TestLoadImage: timeout",!1,f,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=c}else f(!1)}function ig(c,f){let g=new Co,v=new AbortController,x=setTimeout(()=>{v.abort(),or(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:v.signal}).then(k=>{clearTimeout(x),k.ok?or(g,"TestPingServer: ok",!0,f):or(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(x),or(g,"TestPingServer: error",!1,f)})}function or(c,f,g,v,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),v(g)}catch{}}function Id(){this.g=new Wm}function og(c,f,g){let v=g||"";try{Hc(c,function(x,k){let $=x;d(x)&&($=kc(x)),f.push(v+k+"="+encodeURIComponent($))})}catch(x){throw f.push(v+"type="+encodeURIComponent("_badmap")),x}}function Zt(c){this.l=c.Ub||null,this.j=c.eb||!1}M(Zt,Fn),Zt.prototype.g=function(){return new js(this.l,this.j)},Zt.prototype.i=function(c){return function(){return c}}({});function js(c,f){lt.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(js,lt),t=js.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,xo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vn(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,xo(this)),this.g&&(this.readyState=3,xo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function zc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Vn(this):xo(this),this.readyState==3&&zc(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Vn(this))},t.Qa=function(c){this.g&&(this.response=c,Vn(this))},t.ga=function(){this.g&&Vn(this)};function Vn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,xo(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function xo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function bd(c){let f="";return oe(c,function(g,v){f+=v,f+=":",f+=g,f+=`\r
`}),f}function Gc(c,f,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=bd(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):$e(c,f,g))}function ze(c){lt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(ze,lt);var Fi=/^https?$/i,sg=["POST","PUT"];t=ze.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Lc.g(),this.v=this.o?Jl(this.o):Jl(Lc),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(k){Cd(this,k);return}if(c=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var x in v)g.set(x,v[x]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(let k of v.keys())g.set(k,v.get(k));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(k=>k.toLowerCase()=="content-type"),x=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(sg,f,void 0))||v||x||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[k,$]of g)this.g.setRequestHeader(k,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sd(this),this.u=!0,this.g.send(c),this.u=!1}catch(k){Cd(this,k)}};function Cd(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Dd(c),Bs(c)}function Dd(c){c.A||(c.A=!0,Tt(c,"complete"),Tt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Tt(this,"complete"),Tt(this,"abort"),Bs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bs(this,!0)),ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Td(this):this.bb())},t.bb=function(){Td(this)};function Td(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Un(c)!=4||c.Z()!=2)){if(c.u&&Un(c)==4)Pt(c.Ea,0,c);else if(Tt(c,"readystatechange"),Un(c)==4){c.h=!1;try{let $=c.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var v;if(v=$===0){var x=String(c.D).match(md)[1]||null;!x&&a.self&&a.self.location&&(x=a.self.location.protocol.slice(0,-1)),v=!Fi.test(x?x.toLowerCase():"")}g=v}if(g)Tt(c,"complete"),Tt(c,"success");else{c.m=6;try{var k=2<Un(c)?c.g.statusText:""}catch{k=""}c.l=k+" ["+c.Z()+"]",Dd(c)}}finally{Bs(c)}}}}function Bs(c,f){if(c.g){Sd(c);let g=c.g,v=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||Tt(c,"ready");try{g.onreadystatechange=v}catch{}}}function Sd(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Un(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),Gm(f)}};function Ad(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ag(c){let f={};c=(c.g&&2<=Un(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<c.length;v++){if(X(c[v]))continue;var g=A(c[v]);let x=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let k=f[x]||[];f[x]=k,k.push(g)}T(f,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mo(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function No(c){this.Aa=0,this.i=[],this.j=new Co,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mo("baseRetryDelayMs",5e3,c),this.cb=Mo("retryDelaySeedMs",1e4,c),this.Wa=Mo("forwardChannelMaxRetries",2,c),this.wa=Mo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ud(c&&c.concurrentRequestLimit),this.Da=new Id,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=No.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,v){vt(0),this.W=c,this.H=f||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.I=Jc(this,null,this.W),qs(this)};function $s(c){if(Rd(c),c.G==3){var f=c.U++,g=In(c.I);if($e(g,"SID",c.K),$e(g,"RID",f),$e(g,"TYPE","terminate"),Br(c,g),f=new En(c,c.j,f),f.L=2,f.v=Us(In(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Xc(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Do(f)}Zc(c)}function Hs(c){c.g&&(Li(c),c.g.cancel(),c.g=null)}function Rd(c){Hs(c),c.u&&(a.clearTimeout(c.u),c.u=null),ko(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function qs(c){if(!ld(c.h)&&!c.s){c.s=!0;var f=c.Ga;Ii||an(),jr||(Ii(),jr=!0),bi.add(f,c),c.B=0}}function xd(c,f){return dd(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=bo(w(c.Ga,c,f),Yc(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let x=new En(this,this.j,c),k=this.o;if(this.S&&(k?(k=E(k),S(k,this.S)):k=this.S),this.m!==null||this.O||(x.H=k,k=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(f+=v,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Wc(this,x,f),g=In(this.I),$e(g,"RID",c),$e(g,"CVER",22),this.D&&$e(g,"X-HTTP-Session-Id",this.D),Br(this,g),k&&(this.O?f="headers="+encodeURIComponent(String(bd(k)))+"&"+f:this.m&&Gc(g,this.m,k)),$c(this.h,x),this.Ua&&$e(g,"TYPE","init"),this.P?($e(g,"$req",f),$e(g,"SID","null"),x.T=!0,qe(x,g,null)):qe(x,g,f),this.G=2}}else this.G==3&&(c?Md(this,c):this.i.length==0||ld(this.h)||Md(this))};function Md(c,f){var g;f?g=f.l:g=c.U++;let v=In(c.I);$e(v,"SID",c.K),$e(v,"RID",g),$e(v,"AID",c.T),Br(c,v),c.m&&c.o&&Gc(v,c.m,c.o),g=new En(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=Wc(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),$c(c.h,g),qe(g,v,f)}function Br(c,f){c.H&&oe(c.H,function(g,v){$e(f,v,g)}),c.l&&Hc({},function(g,v){$e(f,v,g)})}function Wc(c,f,g){g=Math.min(c.i.length,g);var v=c.l?w(c.l.Na,c.l,c):null;e:{var x=c.i;let k=-1;for(;;){let $=["count="+g];k==-1?0<g?(k=x[0].g,$.push("ofs="+k)):k=0:$.push("ofs="+k);let Ve=!0;for(let _t=0;_t<g;_t++){let Se=x[_t].g,St=x[_t].map;if(Se-=k,0>Se)k=Math.max(0,x[_t].g-100),Ve=!1;else try{og(St,$,"req"+Se+"_")}catch{v&&v(St)}}if(Ve){v=$.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,v}function Kc(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;Ii||an(),jr||(Ii(),jr=!0),bi.add(f,c),c.v=0}}function Po(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=bo(w(c.Fa,c),Yc(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Nd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=bo(w(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),Hs(this),Nd(this))};function Li(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Nd(c){c.g=new En(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=In(c.qa);$e(f,"RID","rpc"),$e(f,"SID",c.K),$e(f,"AID",c.T),$e(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&$e(f,"TO",c.ja),$e(f,"TYPE","xmlhttp"),Br(c,f),c.m&&c.o&&Gc(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Us(In(f)),g.m=null,g.P=!0,od(g,c)}t.Za=function(){this.C!=null&&(this.C=null,Hs(this),Po(this),vt(19))};function ko(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Qc(c,f){var g=null;if(c.g==f){ko(c),Li(c),c.g=null;var v=2}else if(Bc(c.h,f))g=f.D,hd(c.h,f),v=1;else return;if(c.G!=0){if(f.o)if(v==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var x=c.B;v=Os(),Tt(v,new rd(v,g)),qs(c)}else Kc(c);else if(x=f.s,x==3||x==0&&0<f.X||!(v==1&&xd(c,f)||v==2&&Po(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),x){case 1:sr(c,5);break;case 4:sr(c,10);break;case 3:sr(c,6);break;default:sr(c,2)}}}function Yc(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function sr(c,f){if(c.j.info("Error code "+f),f==2){var g=w(c.fb,c),v=c.Xa;let x=!v;v=new Yt(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Vs(v,"https"),Us(v),x?Oi(v.toString(),g):ig(v.toString(),g)}else vt(2);c.G=0,c.l&&c.l.sa(f),Zc(c),Rd(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function Zc(c){if(c.G=0,c.ka=[],c.l){let f=fd(c.h);(f.length!=0||c.i.length!=0)&&(O(c.ka,f),O(c.ka,c.i),c.h.i.length=0,L(c.i),c.i.length=0),c.l.ra()}}function Jc(c,f,g){var v=g instanceof Yt?In(g):new Yt(g);if(v.g!="")f&&(v.g=f+"."+v.g),Ni(v,v.s);else{var x=a.location;v=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;var k=new Yt(null);v&&Vs(k,v),f&&(k.g=f),x&&Ni(k,x),g&&(k.l=g),v=k}return g=c.D,f=c.ya,g&&f&&$e(v,g,f),$e(v,"VER",c.la),Br(c,v),v}function Xc(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new ze(new Zt({eb:g})):new ze(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function eu(){}t=eu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Oo(){}Oo.prototype.g=function(c,f){return new dt(c,f)};function dt(c,f){lt.call(this),this.g=new No(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!X(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!X(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Vi(this)}M(dt,lt),dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dt.prototype.close=function(){$s(this.g)},dt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=kc(c),c=g);f.i.push(new cd(f.Ya++,c)),f.G==3&&qs(f)},dt.prototype.N=function(){this.g.l=null,delete this.j,$s(this.g),delete this.g,dt.aa.N.call(this)};function Pd(c){Oc.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(let g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}M(Pd,Oc);function kd(){Fc.call(this),this.status=1}M(kd,Fc);function Vi(c){this.g=c}M(Vi,eu),Vi.prototype.ua=function(){Tt(this.g,"a")},Vi.prototype.ta=function(c){Tt(this.g,new Pd(c))},Vi.prototype.sa=function(c){Tt(this.g,new kd)},Vi.prototype.ra=function(){Tt(this.g,"b")},Oo.prototype.createWebChannel=Oo.prototype.g,dt.prototype.send=dt.prototype.o,dt.prototype.open=dt.prototype.m,dt.prototype.close=dt.prototype.close,$w=pi.createWebChannelTransport=function(){return new Oo},Bw=pi.getStatEventTarget=function(){return Os()},jw=pi.Event=Ln,Ip=pi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fs.NO_ERROR=0,Fs.TIMEOUT=8,Fs.HTTP_ERROR=6,cl=pi.ErrorCode=Fs,id.COMPLETE="complete",Uw=pi.EventType=id,Xl.EventType=Eo,Eo.OPEN="a",Eo.CLOSE="b",Eo.ERROR="c",Eo.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Ya=pi.WebChannel=Xl,hH=pi.FetchXmlHttpFactory=Zt,ze.prototype.listenOnce=ze.prototype.L,ze.prototype.getLastError=ze.prototype.Ka,ze.prototype.getLastErrorCode=ze.prototype.Ba,ze.prototype.getStatus=ze.prototype.Z,ze.prototype.getResponseJson=ze.prototype.Oa,ze.prototype.getResponseText=ze.prototype.oa,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Ha,Vw=pi.XhrIo=ze}).apply(typeof Ep<"u"?Ep:typeof self<"u"?self:typeof window<"u"?window:{});var JA="@firebase/firestore";var Mt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");var yc="10.14.0";var _s=new ro("@firebase/firestore");function ul(){return _s.logLevel}function J(t,...e){if(_s.logLevel<=De.DEBUG){let n=e.map(DI);_s.debug(`Firestore (${yc}): ${t}`,...n)}}function mi(t,...e){if(_s.logLevel<=De.ERROR){let n=e.map(DI);_s.error(`Firestore (${yc}): ${t}`,...n)}}function rc(t,...e){if(_s.logLevel<=De.WARN){let n=e.map(DI);_s.warn(`Firestore (${yc}): ${t}`,...n)}}function DI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ue(t="Unexpected state"){let e=`FIRESTORE (${yc}) INTERNAL ASSERTION FAILED: `+t;throw mi(e),new Error(e)}function Be(t,e){t||ue()}function he(t,e){return t}var V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends Kt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Qn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Sp=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ww=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}},Kw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Qw=class{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Be(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>I(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Be(typeof r.accessToken=="string"),new Sp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string"),new Mt(e)}},Yw=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Zw=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Yw(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Jw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Xw=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Be(this.o===void 0);let r=o=>{o.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,J("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Be(typeof n.token=="string"),this.R=n.token,new Jw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function fH(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ap=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=fH(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function Le(t,e){return t<e?-1:t>e?1:0}function ic(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ft=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var pe=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ft(0,0))}static max(){return new t(new Ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Rp=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(),r===void 0?r=e.length-n:r>e.length-n&&ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},et=class t extends Rp{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new K(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},pH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wn=class t extends Rp{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return pH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new K(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new K(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new K(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var ie=class t{constructor(e){this.path=e}static fromPath(e){return new t(et.fromString(e))}static fromName(e){return new t(et.fromString(e).popFirst(5))}static empty(){return new t(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new et(e.slice()))}};var eE=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};eE.UNKNOWN_ID=-1;function mH(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=pe.fromTimestamp(r===1e9?new Ft(n+1,0):new Ft(n,r));return new ws(i,ie.empty(),e)}function gH(t){return new ws(t.readTime,t.key,-1)}var ws=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(pe.min(),ie.empty(),-1)}static max(){return new t(pe.max(),ie.empty(),-1)}};function yH(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}var vH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",tE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Sl(t){return I(this,null,function*(){if(t.code!==V.FAILED_PRECONDITION||t.message!==vH)throw t;J("LocalStore","Unexpectedly lost primary lease")})}var B=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let d=u;n(e[d]).next(p=>{s[d]=p,++a,a===o&&r(s)},p=>i(p))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function _H(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Al(t){return t.name==="IndexedDbTransactionError"}var NR=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function am(t){return t==null}function ml(t){return t===0&&1/t==-1/0}function wH(t){return typeof t=="number"&&Number.isInteger(t)&&!ml(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var EH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oZ=[...EH,"documentOverlays"],IH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bH=IH,CH=[...bH,"indexConfiguration","indexState","indexEntries"];var sZ=[...CH,"globals"];function XA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ss(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PR(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var rt=class t{constructor(e,n){this.comparator=e,this.root=n||Mr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ec(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ec(this.root,e,this.comparator,!1)}getReverseIterator(){return new ec(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ec(this.root,e,this.comparator,!0)}},ec=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Mr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();let e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}};Mr.EMPTY=null,Mr.RED=!0,Mr.BLACK=!1;Mr.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Mr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var $t=class t{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xp(this.data.getIterator())}getIteratorFrom(e){return new xp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},xp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var xn=class t{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new t([])}unionWith(e){let n=new $t(wn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ic(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Mp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ht=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Mp("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ht.EMPTY_BYTE_STRING=new Ht("");var DH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(t){if(Be(!!t),typeof t=="string"){let e=0,n=DH.exec(t);if(Be(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fo(t){return typeof t=="string"?Ht.fromBase64String(t):Ht.fromUint8Array(t)}function TI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function SI(t){let e=t.mapValue.fields.__previous_value__;return TI(e)?SI(e):e}function gl(t){let e=gi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ft(e.seconds,e.nanos)}var nE=class{constructor(e,n,r,i,o,s,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}},Np=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var bp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?TI(t)?4:OR(t)?9007199254740991:kR(t)?10:11:ue()}function kr(t,e){if(t===e)return!0;let n=Es(t);if(n!==Es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gl(t).isEqual(gl(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=gi(i.timestampValue),a=gi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return fo(i.bytesValue).isEqual(fo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ke(i.geoPointValue.latitude)===Ke(o.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ke(i.integerValue)===Ke(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ke(i.doubleValue),a=Ke(o.doubleValue);return s===a?ml(s)===ml(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ic(t.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(XA(s)!==XA(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!kr(s[u],a[u])))return!1;return!0}(t,e);default:return ue()}}function yl(t,e){return(t.values||[]).find(n=>kr(n,e))!==void 0}function oc(t,e){if(t===e)return 0;let n=Es(t),r=Es(e);if(n!==r)return Le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ke(o.integerValue||o.doubleValue),u=Ke(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return eR(t.timestampValue,e.timestampValue);case 4:return eR(gl(t),gl(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(o,s){let a=fo(o),u=fo(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let d=0;d<a.length&&d<u.length;d++){let p=Le(a[d],u[d]);if(p!==0)return p}return Le(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Le(Ke(o.latitude),Ke(s.latitude));return a!==0?a:Le(Ke(o.longitude),Ke(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tR(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,d,p;let m=o.fields||{},w=s.fields||{},b=(a=m.value)===null||a===void 0?void 0:a.arrayValue,M=(u=w.value)===null||u===void 0?void 0:u.arrayValue,L=Le(((d=b?.values)===null||d===void 0?void 0:d.length)||0,((p=M?.values)===null||p===void 0?void 0:p.length)||0);return L!==0?L:tR(b,M)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===bp.mapValue&&s===bp.mapValue)return 0;if(o===bp.mapValue)return 1;if(s===bp.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),d=s.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){let w=Le(u[m],p[m]);if(w!==0)return w;let b=oc(a[u[m]],d[p[m]]);if(b!==0)return b}return Le(u.length,p.length)}(t.mapValue,e.mapValue);default:throw ue()}}function eR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);let n=gi(t),r=gi(e),i=Le(n.seconds,r.seconds);return i!==0?i:Le(n.nanos,r.nanos)}function tR(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=oc(n[i],r[i]);if(o)return o}return Le(n.length,r.length)}function sc(t){return rE(t)}function rE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=gi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return fo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=rE(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${rE(n.fields[s])}`;return i+"}"}(t.mapValue):ue()}function nR(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function iE(t){return!!t&&"integerValue"in t}function AI(t){return!!t&&"arrayValue"in t}function rR(t){return!!t&&"nullValue"in t}function iR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dp(t){return!!t&&"mapValue"in t}function kR(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function dl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ss(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=dl(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var _n=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Dp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dl(n)}setAll(e){let n=wn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=dl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Dp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Dp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ss(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(dl(this.value))}};function FR(t){let e=[];return Ss(t.fields,(n,r)=>{let i=new wn([n]);if(Dp(r)){let o=FR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new xn(e)}var Yn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,pe.min(),pe.min(),pe.min(),_n.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,pe.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,pe.min(),pe.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,pe.min(),pe.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ac=class{constructor(e,n){this.position=e,this.inclusive=n}};function oR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=ie.comparator(ie.fromName(s.referenceValue),n.key):r=oc(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function sR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kr(t.position[n],e.position[n]))return!1;return!0}var cc=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function TH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Pp=class{},yt=class t extends Pp{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new sE(e,n,r):n==="array-contains"?new uE(e,r):n==="in"?new lE(e,r):n==="not-in"?new dE(e,r):n==="array-contains-any"?new hE(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new aE(e,r):new cE(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(oc(n,this.value)):n!==null&&Es(this.value)===Es(n)&&this.matchesComparison(oc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Zn=class t extends Pp{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return LR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function LR(t){return t.op==="and"}function VR(t){return SH(t)&&LR(t)}function SH(t){for(let e of t.filters)if(e instanceof Zn)return!1;return!0}function oE(t){if(t instanceof yt)return t.field.canonicalString()+t.op.toString()+sc(t.value);if(VR(t))return t.filters.map(e=>oE(e)).join(",");{let e=t.filters.map(n=>oE(n)).join(",");return`${t.op}(${e})`}}function UR(t,e){return t instanceof yt?function(r,i){return i instanceof yt&&r.op===i.op&&r.field.isEqual(i.field)&&kr(r.value,i.value)}(t,e):t instanceof Zn?function(r,i){return i instanceof Zn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&UR(s,i.filters[a]),!0):!1}(t,e):void ue()}function jR(t){return t instanceof yt?function(n){return`${n.field.canonicalString()} ${n.op} ${sc(n.value)}`}(t):t instanceof Zn?function(n){return n.op.toString()+" {"+n.getFilters().map(jR).join(" ,")+"}"}(t):"Filter"}var sE=class extends yt{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){let n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}},aE=class extends yt{constructor(e,n){super(e,"in",n),this.keys=BR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},cE=class extends yt{constructor(e,n){super(e,"not-in",n),this.keys=BR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function BR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}var uE=class extends yt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return AI(n)&&yl(n.arrayValue,this.value)}},lE=class extends yt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&yl(this.value.arrayValue,n)}},dE=class extends yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!yl(this.value.arrayValue,n)}},hE=class extends yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!AI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yl(this.value.arrayValue,r))}};var fE=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function aR(t,e=null,n=[],r=[],i=null,o=null,s=null){return new fE(t,e,n,r,i,o,s)}function RI(t){let e=he(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>oE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),am(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>sc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>sc(r)).join(",")),e.ue=n}return e.ue}function xI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!TH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!UR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sR(t.startAt,e.startAt)&&sR(t.endAt,e.endAt)}function pE(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Is=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function AH(t,e,n,r,i,o,s,a){return new Is(t,e,n,r,i,o,s,a)}function MI(t){return new Is(t)}function cR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $R(t){return t.collectionGroup!==null}function hl(t){let e=he(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new $t(wn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new cc(o,r))}),n.has(wn.keyField().canonicalString())||e.ce.push(new cc(wn.keyField(),r))}return e.ce}function Nr(t){let e=he(t);return e.le||(e.le=RH(e,hl(t))),e.le}function RH(t,e){if(t.limitType==="F")return aR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new cc(i.field,o)});let n=t.endAt?new ac(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ac(t.startAt.position,t.startAt.inclusive):null;return aR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function mE(t,e){let n=t.filters.concat([e]);return new Is(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gE(t,e,n){return new Is(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cm(t,e){return xI(Nr(t),Nr(e))&&t.limitType===e.limitType}function HR(t){return`${RI(Nr(t))}|lt:${t.limitType}`}function Za(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>jR(i)).join(", ")}]`),am(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>sc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>sc(i)).join(",")),`Target(${r})`}(Nr(t))}; limitType=${t.limitType})`}function um(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ie.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of hl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let d=oR(s,a,u);return s.inclusive?d<=0:d<0}(r.startAt,hl(r),i)||r.endAt&&!function(s,a,u){let d=oR(s,a,u);return s.inclusive?d>=0:d>0}(r.endAt,hl(r),i))}(t,e)}function xH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qR(t){return(e,n)=>{let r=!1;for(let i of hl(t)){let o=MH(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function MH(t,e,n){let r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),d=a.data.field(o);return u!==null&&d!==null?oc(u,d):ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue()}}var po=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ss(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return PR(this.inner)}size(){return this.innerSize}};var NH=new rt(ie.comparator);function yi(){return NH}var zR=new rt(ie.comparator);function ll(...t){let e=zR;for(let n of t)e=e.insert(n.key,n);return e}function GR(t){let e=zR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gs(){return fl()}function WR(){return fl()}function fl(){return new po(t=>t.toString(),(t,e)=>t.isEqual(e))}var PH=new rt(ie.comparator),kH=new $t(ie.comparator);function Te(...t){let e=kH;for(let n of t)e=e.add(n);return e}var OH=new $t(Le);function FH(){return OH}function NI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ml(e)?"-0":e}}function KR(t){return{integerValue:""+t}}function LH(t,e){return wH(e)?KR(e):NI(t,e)}var uc=class{constructor(){this._=void 0}};function VH(t,e,n){return t instanceof lc?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&TI(o)&&(o=SI(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof bs?YR(t,e):t instanceof Cs?ZR(t,e):function(i,o){let s=QR(i,o),a=uR(s)+uR(i.Pe);return iE(s)&&iE(i.Pe)?KR(a):NI(i.serializer,a)}(t,e)}function UH(t,e,n){return t instanceof bs?YR(t,e):t instanceof Cs?ZR(t,e):n}function QR(t,e){return t instanceof dc?function(r){return iE(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var lc=class extends uc{},bs=class extends uc{constructor(e){super(),this.elements=e}};function YR(t,e){let n=JR(e);for(let r of t.elements)n.some(i=>kr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Cs=class extends uc{constructor(e){super(),this.elements=e}};function ZR(t,e){let n=JR(e);for(let r of t.elements)n=n.filter(i=>!kr(i,r));return{arrayValue:{values:n}}}var dc=class extends uc{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function uR(t){return Ke(t.integerValue||t.doubleValue)}function JR(t){return AI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function jH(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof bs&&i instanceof bs||r instanceof Cs&&i instanceof Cs?ic(r.elements,i.elements,kr):r instanceof dc&&i instanceof dc?kr(r.Pe,i.Pe):r instanceof lc&&i instanceof lc}(t.transform,e.transform)}var yE=class{constructor(e,n){this.version=e,this.transformResults=n}},lo=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Tp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var hc=class{};function XR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kp(t.key,lo.none()):new Ds(t.key,t.data,lo.none());{let n=t.data,r=_n.empty(),i=new $t(wn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Or(t.key,r,new xn(i.toArray()),lo.none())}}function BH(t,e,n){t instanceof Ds?function(i,o,s){let a=i.value.clone(),u=dR(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Or?function(i,o,s){if(!Tp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=dR(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(ex(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function pl(t,e,n,r){return t instanceof Ds?function(o,s,a,u){if(!Tp(o.precondition,s))return a;let d=o.value.clone(),p=hR(o.fieldTransforms,u,s);return d.setAll(p),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Or?function(o,s,a,u){if(!Tp(o.precondition,s))return a;let d=hR(o.fieldTransforms,u,s),p=s.data;return p.setAll(ex(o)),p.setAll(d),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(o,s,a){return Tp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function $H(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=QR(r.transform,i||null);o!=null&&(n===null&&(n=_n.empty()),n.set(r.field,o))}return n||null}function lR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ic(r,i,(o,s)=>jH(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ds=class extends hc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Or=class extends hc{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function ex(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function dR(t,e,n){let r=new Map;Be(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,UH(s,a,n[i]))}return r}function hR(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,VH(o,s,e))}return r}var kp=class extends hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},vE=class extends hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var _E=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&BH(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=pl(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=pl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=WR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=XR(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(pe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&ic(this.mutations,e.mutations,(n,r)=>lR(n,r))&&ic(this.baseMutations,e.baseMutations,(n,r)=>lR(n,r))}},wE=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Be(e.mutations.length===r.length);let i=function(){return PH}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var EE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var IE=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var mt,Me;function HH(t){switch(t){default:return ue();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function tx(t){if(t===void 0)return mi("GRPC error has no .code"),V.UNKNOWN;switch(t){case mt.OK:return V.OK;case mt.CANCELLED:return V.CANCELLED;case mt.UNKNOWN:return V.UNKNOWN;case mt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case mt.INTERNAL:return V.INTERNAL;case mt.UNAVAILABLE:return V.UNAVAILABLE;case mt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case mt.NOT_FOUND:return V.NOT_FOUND;case mt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case mt.ABORTED:return V.ABORTED;case mt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case mt.DATA_LOSS:return V.DATA_LOSS;default:return ue()}}(Me=mt||(mt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";var fR=null;function qH(){return new TextEncoder}var zH=new uo([4294967295,4294967295],0);function pR(t){let e=qH().encode(t),n=new Lw;return n.update(e),new Uint8Array(n.digest())}function mR(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new uo([n,r],0),new uo([i,o],0)]}var bE=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ys(`Invalid padding: ${n}`);if(r<0)throw new ys(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ys(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ys(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=uo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(uo.fromNumber(r)));return i.compare(zH)===1&&(i=new uo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=pR(e),[r,i]=mR(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=pR(e),[r,i]=mR(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ys=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Op=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,vl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(pe.min(),i,new rt(Le),yi(),Te())}},vl=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Te(),Te(),Te())}};var tc=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Fp=class{constructor(e,n){this.targetId=e,this.me=n}},Lp=class{constructor(e,n,r=Ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Vp=class{constructor(){this.fe=0,this.ge=yR(),this.pe=Ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Te(),n=Te(),r=Te();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ue()}}),new vl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=yR()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},CE=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=yi(),this.qe=gR(),this.Qe=new rt(Le)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(pE(o))if(r===0){let s=new ie(o.path);this.Ue(n,s,Yn.newNoDocument(s,pe.min()))}else Be(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(n);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}fR?.et(function(p,m,w,b,M){var L,O,H,X,Z,ne;let Oe={localCacheCount:p,existenceFilterCount:m.count,databaseId:w.database,projectId:w.projectId},oe=m.unchangedNames;return oe&&(Oe.bloomFilter={applied:M===0,hashCount:(L=oe?.hashCount)!==null&&L!==void 0?L:0,bitmapLength:(X=(H=(O=oe?.bits)===null||O===void 0?void 0:O.bitmap)===null||H===void 0?void 0:H.length)!==null&&X!==void 0?X:0,padding:(ne=(Z=oe?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&ne!==void 0?ne:0,mightContain:T=>{var E;return(E=b?.mightContain(T))!==null&&E!==void 0&&E}}),Oe}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=fo(r).toUint8Array()}catch(u){if(u instanceof Mp)return rc("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new bE(s,i,o)}catch(u){return rc(u instanceof ys?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&pE(a.target)){let u=new ie(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,Yn.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=Te();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Op(e,n,this.Qe,this.ke,r);return this.ke=yi(),this.qe=gR(),this.Qe=new rt(Le),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Vp,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new $t(Le),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Vp),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function gR(){return new rt(ie.comparator)}function yR(){return new rt(ie.comparator)}var GH={asc:"ASCENDING",desc:"DESCENDING"},WH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KH={and:"AND",or:"OR"},DE=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function TE(t,e){return t.useProto3Json||am(e)?e:{value:e}}function Up(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QH(t,e){return Up(t,e.toTimestamp())}function Pr(t){return Be(!!t),pe.fromTimestamp(function(n){let r=gi(n);return new Ft(r.seconds,r.nanos)}(t))}function PI(t,e){return SE(t,e).canonicalString()}function SE(t,e){let n=function(i){return new et(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function rx(t){let e=et.fromString(t);return Be(cx(e)),e}function AE(t,e){return PI(t.databaseId,e.path)}function Hw(t,e){let n=rx(e);if(n.get(1)!==t.databaseId.projectId)throw new K(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(ox(n))}function ix(t,e){return PI(t.databaseId,e)}function YH(t){let e=rx(t);return e.length===4?et.emptyPath():ox(e)}function RE(t){return new et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ox(t){return Be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function vR(t,e,n){return{name:AE(t,e),fields:n.value.mapValue.fields}}function ZH(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,p){return d.useProto3Json?(Be(p===void 0||typeof p=="string"),Ht.fromBase64String(p||"")):(Be(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Ht.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(d){let p=d.code===void 0?V.UNKNOWN:tx(d.code);return new K(p,d.message||"")}(s);n=new Lp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Hw(t,r.document.name),o=Pr(r.document.updateTime),s=r.document.createTime?Pr(r.document.createTime):pe.min(),a=new _n({mapValue:{fields:r.document.fields}}),u=Yn.newFoundDocument(i,o,s,a),d=r.targetIds||[],p=r.removedTargetIds||[];n=new tc(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Hw(t,r.document),o=r.readTime?Pr(r.readTime):pe.min(),s=Yn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new tc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Hw(t,r.document),o=r.removedTargetIds||[];n=new tc([],o,i,null)}else{if(!("filter"in e))return ue();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new IE(i,o),a=r.targetId;n=new Fp(a,s)}}return n}function JH(t,e){let n;if(e instanceof Ds)n={update:vR(t,e.key,e.value)};else if(e instanceof kp)n={delete:AE(t,e.key)};else if(e instanceof Or)n={update:vR(t,e.key,e.data),updateMask:aq(e.fieldMask)};else{if(!(e instanceof vE))return ue();n={verify:AE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof lc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Cs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof dc)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:QH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ue()}(t,e.precondition)),n}function XH(t,e){return t&&t.length>0?(Be(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Pr(i.updateTime):Pr(o);return s.isEqual(pe.min())&&(s=Pr(o)),new yE(s,i.transformResults||[])}(n,e))):[]}function eq(t,e){return{documents:[ix(t,e.path)]}}function tq(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ix(t,i);let o=function(d){if(d.length!==0)return ax(Zn.create(d,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(d){if(d.length!==0)return d.map(p=>function(w){return{field:Ja(w.field),direction:iq(w.dir)}}(p))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=TE(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function nq(t){let e=YH(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Be(r===1);let p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=function(m){let w=sx(m);return w instanceof Zn&&VR(w)?w.getFilters():[w]}(n.where));let s=[];n.orderBy&&(s=function(m){return m.map(w=>function(M){return new cc(Xa(M.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(w))}(n.orderBy));let a=null;n.limit&&(a=function(m){let w;return w=typeof m=="object"?m.value:m,am(w)?null:w}(n.limit));let u=null;n.startAt&&(u=function(m){let w=!!m.before,b=m.values||[];return new ac(b,w)}(n.startAt));let d=null;return n.endAt&&(d=function(m){let w=!m.before,b=m.values||[];return new ac(b,w)}(n.endAt)),AH(e,i,s,o,a,"F",u,d)}function rq(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Xa(n.unaryFilter.field);return yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Xa(n.unaryFilter.field);return yt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Xa(n.unaryFilter.field);return yt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Xa(n.unaryFilter.field);return yt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(t):t.fieldFilter!==void 0?function(n){return yt.create(Xa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zn.create(n.compositeFilter.filters.map(r=>sx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ue()}}(n.compositeFilter.op))}(t):ue()}function iq(t){return GH[t]}function oq(t){return WH[t]}function sq(t){return KH[t]}function Ja(t){return{fieldPath:t.canonicalString()}}function Xa(t){return wn.fromServerFormat(t.fieldPath)}function ax(t){return t instanceof yt?function(n){if(n.op==="=="){if(iR(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NAN"}};if(rR(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iR(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NOT_NAN"}};if(rR(n.value))return{unaryFilter:{field:Ja(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ja(n.field),op:oq(n.op),value:n.value}}}(t):t instanceof Zn?function(n){let r=n.getFilters().map(i=>ax(i));return r.length===1?r[0]:{compositeFilter:{op:sq(n.op),filters:r}}}(t):ue()}function aq(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function cx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var _l=class t{constructor(e,n,r,i,o=pe.min(),s=pe.min(),a=Ht.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var xE=class{constructor(e){this.ct=e}};function cq(t){let e=nq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gE(e,e.limit,"L"):e}var jp=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ke(e.integerValue));else if("doubleValue"in e){let r=Ke(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),ml(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=gi(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(fo(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?OR(e)?this.dt(n,Number.MAX_SAFE_INTEGER):kR(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ue()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let o=e.fields||{};this.dt(n,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ke(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),ie.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};jp.vt=new jp;var ME=class{constructor(){this.un=new NE}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(ws.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}},NE=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new $t(et.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $t(et.comparator)).toArray()}};var cZ=new Uint8Array(0);var xr=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};xr.DEFAULT_COLLECTION_PERCENTILE=10,xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xr.DEFAULT=new xr(41943040,xr.DEFAULT_COLLECTION_PERCENTILE,xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xr.DISABLED=new xr(-1,0,0);var wl=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var PE=class{constructor(){this.changes=new po(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var kE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var OE=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&pl(r.mutation,i,xn.empty(),Ft.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Te()){let i=gs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ll();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Te()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=yi(),s=fl(),a=function(){return fl()}();return n.forEach((u,d)=>{let p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof Or)?o=o.insert(d.key,d):p!==void 0?(s.set(d.key,p.mutation.getFieldMask()),pl(p.mutation,d,p.mutation.getFieldMask(),Ft.now())):s.set(d.key,xn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,p)=>s.set(d,p)),n.forEach((d,p)=>{var m;return a.set(d,new kE(p,(m=s.get(d))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){let r=fl(),i=new rt((s,a)=>s-a),o=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let d=n.get(u);if(d===null)return;let p=r.get(u)||xn.empty();p=a.applyToLocalView(d,p),r.set(u,p);let m=(i.get(a.batchId)||Te()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),d=u.key,p=u.value,m=WR();p.forEach(w=>{if(!o.has(w)){let b=XR(n.get(w),r.get(w));b!==null&&m.set(w,b),o=o.add(w)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,m))}return B.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return ie.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$R(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):B.resolve(gs()),a=-1,u=o;return s.next(d=>B.forEach(d,(p,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),o.get(p)?B.resolve():this.remoteDocumentCache.getEntry(e,p).next(w=>{u=u.insert(p,w)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,Te())).next(p=>({batchId:a,changes:GR(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let i=ll();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=ll();return this.indexManager.getCollectionParents(e,o).next(a=>B.forEach(a,u=>{let d=function(m,w){return new Is(w,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((m,w)=>{s=s.insert(m,w)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,d)=>{let p=d.getKey();s.get(p)===null&&(s=s.insert(p,Yn.newInvalidDocument(p)))});let a=ll();return s.forEach((u,d)=>{let p=o.get(u);p!==void 0&&pl(p.mutation,d,xn.empty(),Ft.now()),um(n,d)&&(a=a.insert(u,d))}),a})}};var FE=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Pr(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:cq(i.bundledQuery),readTime:Pr(i.readTime)}}(n)),B.resolve()}};var LE=class{constructor(){this.overlays=new rt(ie.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){let r=gs();return B.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),B.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){let i=gs(),o=n.length+1,s=new ie(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new rt((d,p)=>d-p),s=this.overlays.getIterator();for(;s.hasNext();){let d=s.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=o.get(d.largestBatchId);p===null&&(p=gs(),o=o.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}let a=gs(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>a.set(d,p)),!(a.size()>=i)););return B.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new EE(n,r));let o=this.Ir.get(n);o===void 0&&(o=Te(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}};var VE=class{constructor(){this.sessionToken=Ht.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}};var El=class{constructor(){this.Tr=new $t(gt.Er),this.dr=new $t(gt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new gt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new gt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new ie(new et([])),r=new gt(n,e),i=new gt(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new ie(new et([])),r=new gt(n,e),i=new gt(n,e+1),o=Te();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new gt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},gt=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||Le(e.wr,n.wr)}static Ar(e,n){return Le(e.wr,n.wr)||ie.comparator(e.key,n.key)}};var UE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new $t(gt.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new _E(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new gt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(s)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),o=i<0?0:i;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new gt(n,0),i=new gt(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $t(Le);return n.forEach(i=>{let o=new gt(i,0),s=new gt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;ie.isDocumentKey(o)||(o=o.child(""));let s=new gt(new ie(o),0),a=new $t(Le);return this.br.forEachWhile(u=>{let d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.wr)),!0)},s),B.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Be(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,i=>{let o=new gt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new gt(n,0),i=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var jE=class{constructor(e){this.Mr=e,this.docs=function(){return new rt(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Yn.newInvalidDocument(n))}getEntries(e,n){let r=yi();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Yn.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=yi(),s=n.path,a=new ie(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:d,value:{document:p}}=u.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||yH(gH(p),r)<=0||(i.has(p.key)||um(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ue()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new BE(this)}getSize(e){return B.resolve(this.size)}},BE=class extends PE{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var $E=class{constructor(e){this.persistence=e,this.Nr=new po(n=>RI(n),xI),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new El,this.targetCount=0,this.kr=wl.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new wl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(o).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}};var HE=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new NR(0),this.Kr=!1,this.Kr=!0,this.$r=new VE,this.referenceDelegate=e(this),this.Ur=new $E(this),this.indexManager=new ME,this.remoteDocumentCache=function(i){return new jE(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new xE(n),this.Gr=new FE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new LE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new UE(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);let i=new qE(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},qE=class extends tE{constructor(e){super(),this.currentSequenceNumber=e}},zE=class t{constructor(e){this.persistence=e,this.Jr=new El,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw ue()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{let i=ie.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,pe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var GE=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Te(),i=Te();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var WE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var KE=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return PS()?8:_H(xt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new WE;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ul()<=De.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Za(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(ul()<=De.DEBUG&&J("QueryEngine","Query:",Za(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ul()<=De.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Za(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(n))):B.resolve())}Yi(e,n){if(cR(n))return B.resolve(null);let r=Nr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=gE(n,null,"F"),r=Nr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Te(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let d=this.ts(n,a);return this.ns(n,d,s,u.readTime)?this.Yi(e,gE(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,i){return cR(n)||i.isEqual(pe.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(n,o);return this.ns(n,s,r,i)?B.resolve(null):(ul()<=De.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Za(n)),this.rs(e,s,n,mH(i,-1)).next(a=>a))})}ts(e,n){let r=new $t(qR(e));return n.forEach((i,o)=>{um(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return ul()<=De.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Za(n)),this.Ji.getDocumentsMatchingQuery(e,n,ws.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var QE=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new rt(Le),this._s=new po(o=>RI(o),xI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OE(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function uq(t,e,n,r){return new QE(t,e,n,r)}function ux(t,e){return I(this,null,function*(){let n=he(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=Te();for(let d of i){s.push(d.batchId);for(let p of d.mutations)u=u.add(p.key)}for(let d of o){a.push(d.batchId);for(let p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:s,addedBatchIds:a}))})})})}function lq(t,e){let n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,d,p){let m=d.batch,w=m.keys(),b=B.resolve();return w.forEach(M=>{b=b.next(()=>p.getEntry(u,M)).next(L=>{let O=d.docVersions.get(M);Be(O!==null),L.version.compareTo(O)<0&&(m.applyToRemoteDocument(L,d),L.isValidDocument()&&(L.setReadTime(d.commitVersion),p.addEntry(L)))})}),b.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Te();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function lx(t){let e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function dq(t,e){let n=he(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((p,m)=>{let w=i.get(m);if(!w)return;a.push(n.Ur.removeMatchingKeys(o,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(o,p.addedDocuments,m)));let b=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?b=b.withResumeToken(Ht.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),i=i.insert(m,b),function(L,O,H){return L.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(w,b,p)&&a.push(n.Ur.updateTargetData(o,b))});let u=yi(),d=Te();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))}),a.push(hq(o,s,e.documentUpdates).next(p=>{u=p.Ps,d=p.Is})),!r.isEqual(pe.min())){let p=n.Ur.getLastRemoteSnapshotVersion(o).next(m=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(p)}return B.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(n.os=i,o))}function hq(t,e,n){let r=Te(),i=Te();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=yi();return n.forEach((a,u)=>{let d=o.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(pe.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):J("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function fq(t,e){let n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pq(t,e){let n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,B.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new _l(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function YE(t,e,n){return I(this,null,function*(){let r=he(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Al(s))throw s;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function _R(t,e,n){let r=he(t),i=pe.min(),o=Te();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,d,p){let m=he(u),w=m._s.get(p);return w!==void 0?B.resolve(m.os.get(w)):m.Ur.getTargetData(d,p)}(r,s,Nr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:pe.min(),n?o:Te())).next(a=>(mq(r,xH(e),a),{documents:a,Ts:o})))}function mq(t,e,n){let r=t.us.get(e)||pe.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}var Bp=class{constructor(){this.activeTargetIds=FH()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var ZE=class{constructor(){this.so=new Bp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Bp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var JE=class{_o(e){}shutdown(){}};var $p=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Cp=null;function qw(){return Cp===null?Cp=function(){return 268435456+Math.round(2147483648*Math.random())}():Cp++,"0x"+Cp.toString(16)}var gq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var XE=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Bt="WebChannelConnection",eI=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){let a=qw(),u=this.xo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,s),this.No(n,u,d,i).then(p=>(J("RestConnection",`Received RPC '${n}' ${a}: `,p),p),p=>{throw rc("RestConnection",`RPC '${n}' ${a} failed with error: `,p,"url: ",u,"request:",i),p})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){let i=gq[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let o=qw();return new Promise((s,a)=>{let u=new Vw;u.setWithCredentials(!0),u.listenOnce(Uw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case cl.NO_ERROR:let p=u.getResponseJson();J(Bt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),s(p);break;case cl.TIMEOUT:J(Bt,`RPC '${e}' ${o} timed out`),a(new K(V.DEADLINE_EXCEEDED,"Request time out"));break;case cl.HTTP_ERROR:let m=u.getStatus();if(J(Bt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);let b=w?.error;if(b&&b.status&&b.message){let M=function(O){let H=O.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(H)>=0?H:V.UNKNOWN}(b.status);a(new K(M,b.message))}else a(new K(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new K(V.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{J(Bt,`RPC '${e}' ${o} completed.`)}});let d=JSON.stringify(i);J(Bt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,r,15)})}Bo(e,n,r){let i=qw(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=$w(),a=Bw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let p=o.join("");J(Bt,`Creating RPC '${e}' stream ${i}: ${p}`,u);let m=s.createWebChannel(p,u),w=!1,b=!1,M=new XE({Io:O=>{b?J(Bt,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(w||(J(Bt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),w=!0),J(Bt,`RPC '${e}' stream ${i} sending:`,O),m.send(O))},To:()=>m.close()}),L=(O,H,X)=>{O.listen(H,Z=>{try{X(Z)}catch(ne){setTimeout(()=>{throw ne},0)}})};return L(m,Ya.EventType.OPEN,()=>{b||(J(Bt,`RPC '${e}' stream ${i} transport opened.`),M.yo())}),L(m,Ya.EventType.CLOSE,()=>{b||(b=!0,J(Bt,`RPC '${e}' stream ${i} transport closed`),M.So())}),L(m,Ya.EventType.ERROR,O=>{b||(b=!0,rc(Bt,`RPC '${e}' stream ${i} transport errored:`,O),M.So(new K(V.UNAVAILABLE,"The operation could not be completed")))}),L(m,Ya.EventType.MESSAGE,O=>{var H;if(!b){let X=O.data[0];Be(!!X);let Z=X,ne=Z.error||((H=Z[0])===null||H===void 0?void 0:H.error);if(ne){J(Bt,`RPC '${e}' stream ${i} received error:`,ne);let Oe=ne.status,oe=function(C){let S=mt[C];if(S!==void 0)return tx(S)}(Oe),T=ne.message;oe===void 0&&(oe=V.INTERNAL,T="Unknown error status: "+Oe+" with message "+ne.message),b=!0,M.So(new K(oe,T)),m.close()}else J(Bt,`RPC '${e}' stream ${i} received:`,X),M.bo(X)}}),L(a,jw.STAT_EVENT,O=>{O.stat===Ip.PROXY?J(Bt,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===Ip.NOPROXY&&J(Bt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.wo()},0),M}};function zw(){return typeof document<"u"?document:null}function lm(t){return new DE(t,!0)}var Hp=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var qp=class{constructor(e,n,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Hp(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return I(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return I(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return I(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(mi(n.toString()),mi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new K(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>I(this,null,function*(){this.state=0,this.start()}))}I_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},tI=class extends qp{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=ZH(this.serializer,e),r=function(o){if(!("targetChange"in o))return pe.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?pe.min():s.readTime?Pr(s.readTime):pe.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=RE(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=pE(u)?{documents:eq(o,u)}:{query:tq(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=nx(o,s.resumeToken);let d=TE(o,s.expectedCount);d!==null&&(a.expectedCount=d)}else if(s.snapshotVersion.compareTo(pe.min())>0){a.readTime=Up(o,s.snapshotVersion.toTimestamp());let d=TE(o,s.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);let r=rq(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=RE(this.serializer),n.removeTarget=e,this.a_(n)}},nI=class extends qp{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Be(!!e.streamToken),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=XH(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=RE(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>JH(this.serializer,r))};this.a_(n)}};var rI=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new K(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,SE(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(V.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,SE(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(V.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},iI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(mi(n),this.D_=!1):J("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var oI=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>I(this,null,function*(){As(this)&&(J("RemoteStore","Restarting streams for network reachability change."),yield function(u){return I(this,null,function*(){let d=he(u);d.L_.add(4),yield Rl(d),d.q_.set("Unknown"),d.L_.delete(4),yield dm(d)})}(this))}))}),this.q_=new iI(r,i)}};function dm(t){return I(this,null,function*(){if(As(t))for(let e of t.B_)yield e(!0)})}function Rl(t){return I(this,null,function*(){for(let e of t.B_)yield e(!1)})}function dx(t,e){let n=he(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),LI(n)?FI(n):vc(n).r_()&&OI(n,e))}function kI(t,e){let n=he(t),r=vc(n);n.N_.delete(e),r.r_()&&hx(n,e),n.N_.size===0&&(r.r_()?r.o_():As(n)&&n.q_.set("Unknown"))}function OI(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vc(t).A_(e)}function hx(t,e){t.Q_.xe(e),vc(t).R_(e)}function FI(t){t.Q_=new CE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),vc(t).start(),t.q_.v_()}function LI(t){return As(t)&&!vc(t).n_()&&t.N_.size>0}function As(t){return he(t).L_.size===0}function fx(t){t.Q_=void 0}function yq(t){return I(this,null,function*(){t.q_.set("Online")})}function vq(t){return I(this,null,function*(){t.N_.forEach((e,n)=>{OI(t,e)})})}function _q(t,e){return I(this,null,function*(){fx(t),LI(t)?(t.q_.M_(e),FI(t)):t.q_.set("Unknown")})}function wq(t,e,n){return I(this,null,function*(){if(t.q_.set("Online"),e instanceof Lp&&e.state===2&&e.cause)try{yield function(i,o){return I(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield zp(t,r)}else if(e instanceof tc?t.Q_.Ke(e):e instanceof Fp?t.Q_.He(e):t.Q_.We(e),!n.isEqual(pe.min()))try{let r=yield lx(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let p=o.N_.get(d);p&&o.N_.set(d,p.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,d)=>{let p=o.N_.get(u);if(!p)return;o.N_.set(u,p.withResumeToken(Ht.EMPTY_BYTE_STRING,p.snapshotVersion)),hx(o,u);let m=new _l(p.target,u,d,p.sequenceNumber);OI(o,m)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){J("RemoteStore","Failed to raise snapshot:",r),yield zp(t,r)}})}function zp(t,e,n){return I(this,null,function*(){if(!Al(e))throw e;t.L_.add(1),yield Rl(t),t.q_.set("Offline"),n||(n=()=>lx(t.localStore)),t.asyncQueue.enqueueRetryable(()=>I(this,null,function*(){J("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield dm(t)}))})}function px(t,e){return e().catch(n=>zp(t,n,e))}function hm(t){return I(this,null,function*(){let e=he(t),n=mo(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Eq(e);)try{let i=yield fq(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Iq(e,i)}catch(i){yield zp(e,i)}mx(e)&&gx(e)})}function Eq(t){return As(t)&&t.O_.length<10}function Iq(t,e){t.O_.push(e);let n=mo(t);n.r_()&&n.V_&&n.m_(e.mutations)}function mx(t){return As(t)&&!mo(t).n_()&&t.O_.length>0}function gx(t){mo(t).start()}function bq(t){return I(this,null,function*(){mo(t).p_()})}function Cq(t){return I(this,null,function*(){let e=mo(t);for(let n of t.O_)e.m_(n.mutations)})}function Dq(t,e,n){return I(this,null,function*(){let r=t.O_.shift(),i=wE.from(r,e,n);yield px(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield hm(t)})}function Tq(t,e){return I(this,null,function*(){e&&mo(t).V_&&(yield function(r,i){return I(this,null,function*(){if(function(s){return HH(s)&&s!==V.ABORTED}(i.code)){let o=r.O_.shift();mo(r).s_(),yield px(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield hm(r)}})}(t,e)),mx(t)&&gx(t)})}function wR(t,e){return I(this,null,function*(){let n=he(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");let r=As(n);n.L_.add(3),yield Rl(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield dm(n)})}function Sq(t,e){return I(this,null,function*(){let n=he(t);e?(n.L_.delete(2),yield dm(n)):e||(n.L_.add(2),yield Rl(n),n.q_.set("Unknown"))})}function vc(t){return t.K_||(t.K_=function(n,r,i){let o=he(n);return o.w_(),new tI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:yq.bind(null,t),Ro:vq.bind(null,t),mo:_q.bind(null,t),d_:wq.bind(null,t)}),t.B_.push(e=>I(this,null,function*(){e?(t.K_.s_(),LI(t)?FI(t):t.q_.set("Unknown")):(yield t.K_.stop(),fx(t))}))),t.K_}function mo(t){return t.U_||(t.U_=function(n,r,i){let o=he(n);return o.w_(),new nI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:bq.bind(null,t),mo:Tq.bind(null,t),f_:Cq.bind(null,t),g_:Dq.bind(null,t)}),t.B_.push(e=>I(this,null,function*(){e?(t.U_.s_(),yield hm(t)):(yield t.U_.stop(),t.O_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var sI=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function VI(t,e){if(mi("AsyncQueue",`${e}: ${t}`),Al(t))return new K(V.UNAVAILABLE,`${e}: ${t}`);throw t}var Gp=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=ll(),this.sortedSet=new rt(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Wp=class{constructor(){this.W_=new rt(ie.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ue():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},fc=class t{constructor(e,n,r,i,o,s,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Gp.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var aI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},cI=class{constructor(){this.queries=ER(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=he(n),o=i.queries;i.queries=ER(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new K(V.ABORTED,"Firestore shutting down"))}};function ER(){return new po(t=>HR(t),cm)}function yx(t,e){return I(this,null,function*(){let n=he(t),r=3,i=e.query,o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new aI,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield n.onListen(i,!0);break;case 1:o.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=VI(s,`Initialization of query '${Za(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&UI(n)})}function vx(t,e){return I(this,null,function*(){let n=he(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Aq(t,e){let n=he(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&UI(n)}function Rq(t,e,n){let r=he(t),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(n);r.queries.delete(e)}function UI(t){t.Y_.forEach(e=>{e.next()})}var uI,IR;(IR=uI||(uI={})).ea="default",IR.Cache="cache";var Kp=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new fc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=fc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==uI.Cache}};var Qp=class{constructor(e){this.key=e}},Yp=class{constructor(e){this.key=e}},lI=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Te(),this.mutatedKeys=Te(),this.Aa=qR(e),this.Ra=new Gp(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Wp,i=n?n.Ra:this.Ra,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,m)=>{let w=i.get(p),b=um(this.query,m)?m:null,M=!!w&&this.mutatedKeys.has(w.key),L=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations),O=!1;w&&b?w.data.isEqual(b.data)?M!==L&&(r.track({type:3,doc:b}),O=!0):this.ga(w,b)||(r.track({type:2,doc:b}),O=!0,(u&&this.Aa(b,u)>0||d&&this.Aa(b,d)<0)&&(a=!0)):!w&&b?(r.track({type:0,doc:b}),O=!0):w&&!b&&(r.track({type:1,doc:w}),O=!0,(u||d)&&(a=!0)),O&&(b?(s=s.add(b),o=L?o.add(p):o.delete(p)):(s=s.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((p,m)=>function(b,M){let L=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return L(b)-L(M)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,s.length!==0||d?{snapshot:new fc(this.query,e.Ra,o,s,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Wp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Te(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Yp(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Qp(r))}),n}ba(e){this.Ta=e.Ts,this.da=Te();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return fc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},dI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},hI=class{constructor(e){this.key=e,this.va=!1}},fI=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new po(a=>HR(a),cm),this.Ma=new Map,this.xa=new Set,this.Oa=new rt(ie.comparator),this.Na=new Map,this.La=new El,this.Ba={},this.ka=new Map,this.qa=wl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function xq(t,e,n=!0){return I(this,null,function*(){let r=Cx(t),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield _x(r,e,n,!0),i})}function Mq(t,e){return I(this,null,function*(){let n=Cx(t);yield _x(n,e,!0,!1)})}function _x(t,e,n,r){return I(this,null,function*(){let i=yield pq(t.localStore,Nr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield Nq(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&dx(t.remoteStore,i),a})}function Nq(t,e,n,r,i){return I(this,null,function*(){t.Ka=(m,w,b)=>function(L,O,H,X){return I(this,null,function*(){let Z=O.view.ma(H);Z.ns&&(Z=yield _R(L.localStore,O.query,!1).then(({documents:T})=>O.view.ma(T,Z)));let ne=X&&X.targetChanges.get(O.targetId),Oe=X&&X.targetMismatches.get(O.targetId)!=null,oe=O.view.applyChanges(Z,L.isPrimaryClient,ne,Oe);return CR(L,O.targetId,oe.wa),oe.snapshot})}(t,m,w,b);let o=yield _R(t.localStore,e,!0),s=new lI(e,o.Ts),a=s.ma(o.documents),u=vl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=s.applyChanges(a,t.isPrimaryClient,u);CR(t,n,d.wa);let p=new dI(e,n,s);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot})}function Pq(t,e,n){return I(this,null,function*(){let r=he(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!cm(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield YE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&kI(r.remoteStore,i.targetId),pI(r,i.targetId)}).catch(Sl))):(pI(r,i.targetId),yield YE(r.localStore,i.targetId,!0))})}function kq(t,e){return I(this,null,function*(){let n=he(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kI(n.remoteStore,r.targetId))})}function Oq(t,e,n){return I(this,null,function*(){let r=$q(t);try{let i=yield function(s,a){let u=he(s),d=Ft.now(),p=a.reduce((b,M)=>b.add(M.key),Te()),m,w;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let M=yi(),L=Te();return u.cs.getEntries(b,p).next(O=>{M=O,M.forEach((H,X)=>{X.isValidDocument()||(L=L.add(H))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,M)).next(O=>{m=O;let H=[];for(let X of a){let Z=$H(X,m.get(X.key).overlayedDocument);Z!=null&&H.push(new Or(X.key,Z,FR(Z.value.mapValue),lo.exists(!0)))}return u.mutationQueue.addMutationBatch(b,d,H,a)}).next(O=>{w=O;let H=O.applyToLocalDocumentSet(m,L);return u.documentOverlayCache.saveOverlays(b,O.batchId,H)})}).then(()=>({batchId:w.batchId,changes:GR(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let d=s.Ba[s.currentUser.toKey()];d||(d=new rt(Le)),d=d.insert(a,u),s.Ba[s.currentUser.toKey()]=d}(r,i.batchId,n),yield xl(r,i.changes),yield hm(r.remoteStore)}catch(i){let o=VI(i,"Failed to persist write");n.reject(o)}})}function wx(t,e){return I(this,null,function*(){let n=he(t);try{let r=yield dq(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Na.get(o);s&&(Be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Be(s.va):i.removedDocuments.size>0&&(Be(s.va),s.va=!1))}),yield xl(n,r,e)}catch(r){yield Sl(r)}})}function bR(t,e,n){let r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=he(s);u.onlineState=a;let d=!1;u.queries.forEach((p,m)=>{for(let w of m.j_)w.Z_(a)&&(d=!0)}),d&&UI(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Fq(t,e,n){return I(this,null,function*(){let r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new rt(ie.comparator);s=s.insert(o,Yn.newNoDocument(o,pe.min()));let a=Te().add(o),u=new Op(pe.min(),new Map,new rt(Le),s,a);yield wx(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),jI(r)}else yield YE(r.localStore,e,!1).then(()=>pI(r,e,n)).catch(Sl)})}function Lq(t,e){return I(this,null,function*(){let n=he(t),r=e.batch.batchId;try{let i=yield lq(n.localStore,e);Ix(n,r,null),Ex(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield xl(n,i)}catch(i){yield Sl(i)}})}function Vq(t,e,n){return I(this,null,function*(){let r=he(t);try{let i=yield function(s,a){let u=he(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,a).next(m=>(Be(m!==null),p=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);Ix(r,e,n),Ex(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield xl(r,i)}catch(i){yield Sl(i)}})}function Ex(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Ix(t,e,n){let r=he(t),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function pI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||bx(t,r)})}function bx(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(kI(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),jI(t))}function CR(t,e,n){for(let r of n)r instanceof Qp?(t.La.addReference(r.key,e),Uq(t,r)):r instanceof Yp?(J("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||bx(t,r.key)):ue()}function Uq(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(J("SyncEngine","New document in limbo: "+n),t.xa.add(r),jI(t))}function jI(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new ie(et.fromString(e)),r=t.qa.next();t.Na.set(r,new hI(n)),t.Oa=t.Oa.insert(n,r),dx(t.remoteStore,new _l(Nr(MI(n.path)),r,"TargetPurposeLimboResolution",NR.oe))}}function xl(t,e,n){return I(this,null,function*(){let r=he(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){let m=d?!d.fromCache:(p=n?.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);let m=GE.Wi(u.targetId,d);o.push(m)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,d){return I(this,null,function*(){let p=he(u);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>B.forEach(d,w=>B.forEach(w.$i,b=>p.persistence.referenceDelegate.addReference(m,w.targetId,b)).next(()=>B.forEach(w.Ui,b=>p.persistence.referenceDelegate.removeReference(m,w.targetId,b)))))}catch(m){if(!Al(m))throw m;J("LocalStore","Failed to update sequence numbers: "+m)}for(let m of d){let w=m.targetId;if(!m.fromCache){let b=p.os.get(w),M=b.snapshotVersion,L=b.withLastLimboFreeSnapshotVersion(M);p.os=p.os.insert(w,L)}}})}(r.localStore,o))})}function jq(t,e){return I(this,null,function*(){let n=he(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());let r=yield ux(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new K(V.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield xl(n,r.hs)}})}function Bq(t,e){let n=he(t),r=n.Na.get(e);if(r&&r.va)return Te().add(r.key);{let i=Te(),o=n.Ma.get(e);if(!o)return i;for(let s of o){let a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function Cx(t){let e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fq.bind(null,e),e.Ca.d_=Aq.bind(null,e.eventManager),e.Ca.$a=Rq.bind(null,e.eventManager),e}function $q(t){let e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vq.bind(null,e),e}var DR=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return I(this,null,function*(){this.serializer=lm(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return uq(this.persistence,new KE,n.initialUser,this.serializer)}Ga(n){return new HE(zE.Zr,this.serializer)}Wa(n){return new ZE}terminate(){return I(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var Hq=(()=>{class t{initialize(n,r){return I(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=jq.bind(null,this.syncEngine),yield Sq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new cI}()}createDatastore(n){let r=lm(n.databaseInfo.databaseId),i=function(s){return new eI(s)}(n.databaseInfo);return function(s,a,u,d){return new rI(s,a,u,d)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,a,u){return new oI(i,o,s,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>bR(this.syncEngine,r,0),function(){return $p.D()?new $p:new JE}())}createSyncEngine(n,r){return function(o,s,a,u,d,p,m){let w=new fI(o,s,a,u,d,p);return m&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return I(this,null,function*(){var n,r;yield function(o){return I(this,null,function*(){let s=he(o);J("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Rl(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Zp=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):mi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var mI=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Mt.UNAUTHENTICATED,this.clientId=Ap.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>I(this,null,function*(){J("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(J("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>I(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=VI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Gw(t,e){return I(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>I(this,null,function*(){r.isEqual(i)||(yield ux(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function TR(t,e){return I(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield qq(t);J("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>wR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>wR(e.remoteStore,i)),t._onlineComponents=e})}function qq(t){return I(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Gw(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;rc("Error using user provided cache. Falling back to memory cache: "+n),yield Gw(t,new DR)}}else J("FirestoreClient","Using default OfflineComponentProvider"),yield Gw(t,new DR);return t._offlineComponents})}function Dx(t){return I(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),yield TR(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),yield TR(t,new Hq))),t._onlineComponents})}function zq(t){return Dx(t).then(e=>e.syncEngine)}function Tx(t){return I(this,null,function*(){let e=yield Dx(t),n=e.eventManager;return n.onListen=xq.bind(null,e.syncEngine),n.onUnlisten=Pq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Mq.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=kq.bind(null,e.syncEngine),n})}function Gq(t,e,n={}){let r=new Qn;return t.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return function(o,s,a,u,d){let p=new Zp({next:w=>{p.Za(),s.enqueueAndForget(()=>vx(o,m));let b=w.docs.has(a);!b&&w.fromCache?d.reject(new K(V.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&w.fromCache&&u&&u.source==="server"?d.reject(new K(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(w)},error:w=>d.reject(w)}),m=new Kp(MI(a.path),p,{includeMetadataChanges:!0,_a:!0});return yx(o,m)}(yield Tx(t),t.asyncQueue,e,n,r)})),r.promise}function Wq(t,e,n={}){let r=new Qn;return t.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return function(o,s,a,u,d){let p=new Zp({next:w=>{p.Za(),s.enqueueAndForget(()=>vx(o,m)),w.fromCache&&u.source==="server"?d.reject(new K(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(w)},error:w=>d.reject(w)}),m=new Kp(a,p,{includeMetadataChanges:!0,_a:!0});return yx(o,m)}(yield Tx(t),t.asyncQueue,e,n,r)})),r.promise}function Sx(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var SR=new Map;function Ax(t,e,n){if(!n)throw new K(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Kq(t,e,n,r){if(e===!0&&r===!0)throw new K(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function AR(t){if(!ie.isDocumentKey(t))throw new K(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function RR(t){if(ie.isDocumentKey(t))throw new K(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue()}function vi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=fm(t);throw new K(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Jp=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Kq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},pc=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ww;switch(r.type){case"firstParty":return new Zw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return I(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=SR.get(n);r&&(J("ComponentProvider","Removing Datastore"),SR.delete(n),r.terminate())}(this),Promise.resolve()}};function Rx(t,e,n,r={}){var i;let o=(t=vi(t,pc))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&rc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Mt.MOCK_USER;else{a=Zf(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new K(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Mt(d)}t._authCredentials=new Kw(new Sp(a,u))}}var mc=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Qt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},ho=class t extends mc{constructor(e,n,r){super(e,n,MI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new ie(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function xx(t,e,...n){if(t=We(t),Ax("collection","path",e),t instanceof pc){let r=et.fromString(e,...n);return RR(r),new ho(t,null,r)}{if(!(t instanceof Qt||t instanceof ho))throw new K(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(et.fromString(e,...n));return RR(r),new ho(t.firestore,null,r)}}function Mx(t,e,...n){if(t=We(t),arguments.length===1&&(e=Ap.newId()),Ax("doc","path",e),t instanceof pc){let r=et.fromString(e,...n);return AR(r),new Qt(t,null,new ie(r))}{if(!(t instanceof Qt||t instanceof ho))throw new K(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(et.fromString(e,...n));return AR(r),new Qt(t.firestore,t instanceof ho?t.converter:null,new ie(r))}}var Xp=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Hp(this,"async_queue_retry"),this.Vu=()=>{let r=zw();r&&J("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=zw();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=zw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new Qn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return I(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Al(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw mi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=sI.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&ue()}verifyOperationInProgress(){}wu(){return I(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};var Ts=class extends pc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Xp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return I(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Xp(e),this._firestoreClient=void 0,yield e}})}};function Nx(t,e){let n=typeof t=="object"?t:oo(),r=typeof t=="string"?t:e||"(default)",i=ss(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Yf("firestore");o&&Rx(i,...o)}return i}function BI(t){if(t._terminated)throw new K(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Qq(t),t._firestoreClient}function Qq(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,d,p){return new nE(a,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Sx(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new mI(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var Il=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ht.fromBase64String(e))}catch(n){throw new K(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var gc=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var bl=class{constructor(e){this._methodName=e}};var Cl=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}};var Dl=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var Yq=/^__.*__$/,gI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Or(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ds(e,this.data,n,this.fieldTransforms)}},em=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Or(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function Px(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}var yI=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return nm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Px(this.Cu)&&Yq.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},vI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||lm(e)}Qu(e,n,r,i=!1){return new yI({Cu:e,methodName:n,qu:r,path:wn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function $I(t){let e=t._freezeSettings(),n=lm(t._databaseId);return new vI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Zq(t,e,n,r,i,o={}){let s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);HI("Data must be an object, but it was:",s,r);let a=kx(r,s),u,d;if(o.merge)u=new xn(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){let p=[];for(let m of o.mergeFields){let w=_I(e,m,n);if(!s.contains(w))throw new K(V.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);Fx(p,w)||p.push(w)}u=new xn(p),d=s.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=s.fieldTransforms;return new gI(new _n(a),u,d)}var tm=class t extends bl{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function Jq(t,e,n,r){let i=t.Qu(1,e,n);HI("Data must be an object, but it was:",i,r);let o=[],s=_n.empty();Ss(r,(u,d)=>{let p=qI(e,u,n);d=We(d);let m=i.Nu(p);if(d instanceof tm)o.push(p);else{let w=Ml(d,m);w!=null&&(o.push(p),s.set(p,w))}});let a=new xn(o);return new em(s,a,i.fieldTransforms)}function Xq(t,e,n,r,i,o){let s=t.Qu(1,e,n),a=[_I(e,r,n)],u=[i];if(o.length%2!=0)throw new K(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)a.push(_I(e,o[w])),u.push(o[w+1]);let d=[],p=_n.empty();for(let w=a.length-1;w>=0;--w)if(!Fx(d,a[w])){let b=a[w],M=u[w];M=We(M);let L=s.Nu(b);if(M instanceof tm)d.push(b);else{let O=Ml(M,L);O!=null&&(d.push(b),p.set(b,O))}}let m=new xn(d);return new em(p,m,s.fieldTransforms)}function e4(t,e,n,r=!1){return Ml(n,t.Qu(r?4:3,e))}function Ml(t,e){if(Ox(t=We(t)))return HI("Unsupported field value:",e,t),kx(t,e);if(t instanceof bl)return function(r,i){if(!Px(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Ml(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return LH(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ft.fromDate(r);return{timestampValue:Up(i.serializer,o)}}if(r instanceof Ft){let o=new Ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Up(i.serializer,o)}}if(r instanceof Cl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Il)return{bytesValue:nx(i.serializer,r._byteString)};if(r instanceof Qt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:PI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Dl)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return NI(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${fm(r)}`)}(t,e)}function kx(t,e){let n={};return PR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ss(t,(r,i)=>{let o=Ml(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function Ox(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ft||t instanceof Cl||t instanceof Il||t instanceof Qt||t instanceof bl||t instanceof Dl)}function HI(t,e,n){if(!Ox(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=fm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function _I(t,e,n){if((e=We(e))instanceof gc)return e._internalPath;if(typeof e=="string")return qI(t,e);throw nm("Field path arguments must be of type string or ",t,!1,void 0,n)}var t4=new RegExp("[~\\*/\\[\\]]");function qI(t,e,n){if(e.search(t4)>=0)throw nm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gc(...e.split("."))._internalPath}catch{throw nm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nm(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new K(V.INVALID_ARGUMENT,a+t+u)}function Fx(t,e){return t.some(n=>n.isEqual(e))}var rm=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new wI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(zI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},wI=class extends rm{data(){return super.data()}};function zI(t,e){return typeof e=="string"?qI(t,e):e instanceof gc?e._internalPath:e._delegate._internalPath}function n4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Tl=class{},EI=class extends Tl{};function Lx(t,e,...n){let r=[];e instanceof Tl&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof II).length,a=o.filter(u=>u instanceof im).length;if(s>1||s>0&&a>0)throw new K(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var im=class t extends EI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return Ux(e._query,n),new mc(e.firestore,e.converter,mE(e._query,n))}_parse(e){let n=$I(e.firestore);return function(o,s,a,u,d,p,m){let w;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new K(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){MR(m,p);let b=[];for(let M of m)b.push(xR(u,o,M));w={arrayValue:{values:b}}}else w=xR(u,o,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||MR(m,p),w=e4(a,s,m,p==="in"||p==="not-in");return yt.create(d,p,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function Vx(t,e,n){let r=e,i=zI("where",t);return im._create(i,r,n)}var II=class t extends Tl{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)Ux(s,u),s=mE(s,u)}(e._query,n),new mc(e.firestore,e.converter,mE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function xR(t,e,n){if(typeof(n=We(n))=="string"){if(n==="")throw new K(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$R(e)&&n.indexOf("/")!==-1)throw new K(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(et.fromString(n));if(!ie.isDocumentKey(r))throw new K(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nR(t,new ie(r))}if(n instanceof Qt)return nR(t,n._key);throw new K(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fm(n)}.`)}function MR(t,e){if(!Array.isArray(t)||t.length===0)throw new K(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ux(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var bI=class{convertValue(e,n="none"){switch(Es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ss(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ke(s.doubleValue));return new Dl(o)}convertGeoPoint(e){return new Cl(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=SI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(gl(e));default:return null}}convertTimestamp(e){let n=gi(e);return new Ft(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=et.fromString(e);Be(cx(r));let i=new Np(r.get(1),r.get(3)),o=new ie(r.popFirst(5));return i.isEqual(n)||mi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function r4(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var vs=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},om=class extends rm{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new nc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(zI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},nc=class extends om{data(e={}){return super.data(e)}},CI=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new vs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new nc(this._firestore,this._userDataWriter,r.key,r,new vs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new nc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new nc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,p=-1;return a.type!==0&&(d=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),p=s.indexOf(a.doc.key)),{type:i4(a.type),doc:u,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function i4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}function jx(t){t=vi(t,Qt);let e=vi(t.firestore,Ts);return Gq(BI(e),t._key).then(n=>o4(e,t,n))}var sm=class extends bI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Il(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,n)}};function Bx(t){t=vi(t,mc);let e=vi(t.firestore,Ts),n=BI(e),r=new sm(e);return n4(t._query),Wq(n,t._query).then(i=>new CI(e,r,t,i))}function $x(t,e,n){t=vi(t,Qt);let r=vi(t.firestore,Ts),i=r4(t.converter,e,n);return qx(r,[Zq($I(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,lo.none())])}function Hx(t,e,n,...r){t=vi(t,Qt);let i=vi(t.firestore,Ts),o=$I(i),s;return s=typeof(e=We(e))=="string"||e instanceof gc?Xq(o,"updateDoc",t._key,e,n,r):Jq(o,"updateDoc",t._key,e),qx(i,[s.toMutation(t._key,lo.exists(!0))])}function qx(t,e){return function(r,i){let o=new Qn;return r.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return Oq(yield zq(r),i,o)})),o.promise}(BI(t),e)}function o4(t,e,n){let r=n.docs.get(e._key),i=new sm(t);return new om(t,i,e._key,r,new vs(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){yc=i})(Sr),Tr(new on("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ts(new Qw(r.getProvider("auth-internal")),new Xw(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Np(d.options.projectId,p)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Je(JA,"4.7.3",e),Je(JA,"4.7.3","esm2017")})();var _i=class{constructor(e){return e}},zx="firestore",GI=class{constructor(){return Wa(zx)}};var WI=new Q("angularfire2.firestore-instances");function s4(t,e){let n=Ju(zx,t,e);return n&&new _i(n)}function a4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new _i(r)}}var c4={provide:GI,deps:[[new jt,WI]]},u4={provide:_i,useFactory:s4,deps:[[new jt,WI],ci]};function TJ(t,...e){return Je("angularfire",so.full,"fst"),yr([u4,c4,{provide:WI,useFactory:a4(t),multi:!0,deps:[Fe,kt,us,ls,[new jt,al],[new jt,cs],...e]}])}var Nl=Xe(xx,!0);var Fr=Xe(Mx,!0);var pm=Xe(jx,!0);var mm=Xe(Bx,!0);var SJ=Xe(Nx,!0);var AJ=Xe(Lx,!0);var gm=Xe($x,!0);var _c=Xe(Hx,!0);var RJ=Xe(Vx,!0);var Xx="firebasestorage.googleapis.com",eM="storageBucket",l4=2*60*1e3,d4=10*60*1e3;var it=class t extends Kt{constructor(e,n,r=0){super(KI(e),`Firebase Storage: ${n} (${KI(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return KI(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},ct=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(ct||{});function KI(t){return"storage/"+t}function eb(){let t="An unknown error occurred, please check the error payload for server response.";return new it(ct.UNKNOWN,t)}function h4(t){return new it(ct.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function f4(t){return new it(ct.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function p4(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new it(ct.UNAUTHENTICATED,t)}function m4(){return new it(ct.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function g4(t){return new it(ct.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function y4(){return new it(ct.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function v4(){return new it(ct.CANCELED,"User canceled the upload/download.")}function _4(t){return new it(ct.INVALID_URL,"Invalid URL '"+t+"'.")}function w4(t){return new it(ct.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function E4(){return new it(ct.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+eM+"' property when initializing the app?")}function I4(){return new it(ct.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function b4(){return new it(ct.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function C4(t){return new it(ct.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function QI(t){return new it(ct.INVALID_ARGUMENT,t)}function tM(){return new it(ct.APP_DELETED,"The Firebase app was deleted.")}function D4(t){return new it(ct.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function kl(t,e){return new it(ct.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Pl(t){throw new it(ct.INTERNAL_ERROR,"Internal error: "+t)}var Jn=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw w4(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function d(ne){ne.path_=decodeURIComponent(ne.path)}let p="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",b=new RegExp(`^https?://${m}/${p}/b/${i}/o${w}`,"i"),M={bucket:1,path:3},L=n===Xx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,O="([^?#]*)",H=new RegExp(`^https?://${L}/${i}/${O}`,"i"),Z=[{regex:a,indices:u,postModify:o},{regex:b,indices:M,postModify:d},{regex:H,indices:{bucket:1,path:2},postModify:d}];for(let ne=0;ne<Z.length;ne++){let Oe=Z[ne],oe=Oe.regex.exec(e);if(oe){let T=oe[Oe.indices.bucket],E=oe[Oe.indices.path];E||(E=""),r=new t(T,E),Oe.postModify(r);break}}if(r==null)throw _4(e);return r}},YI=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function T4(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function u(){return a===2}let d=!1;function p(...O){d||(d=!0,e.apply(null,O))}function m(O){i=setTimeout(()=>{i=null,t(b,u())},O)}function w(){o&&clearTimeout(o)}function b(O,...H){if(d){w();return}if(O){w(),p.call(null,O,...H);return}if(u()||s){w(),p.call(null,O,...H);return}r<64&&(r*=2);let Z;a===1?(a=2,Z=0):Z=(r+Math.random())*1e3,m(Z)}let M=!1;function L(O){M||(M=!0,w(),!d&&(i!==null?(O||(a=2),clearTimeout(i),m(0)):O||(a=1)))}return m(0),o=setTimeout(()=>{s=!0,L(!0)},n),L}function S4(t){t(!1)}function A4(t){return t!==void 0}function R4(t){return typeof t=="object"&&!Array.isArray(t)}function tb(t){return typeof t=="string"||t instanceof String}function Wx(t){return nb()&&t instanceof Blob}function nb(){return typeof Blob<"u"}function Kx(t,e,n,r){if(r<e)throw QI(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw QI(`Invalid value for '${t}'. Expected ${n} or less.`)}function rb(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function nM(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ec=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Ec||{});function x4(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}var ZI=class{constructor(e,n,r,i,o,s,a,u,d,p,m,w=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=m,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,M)=>{this.resolve_=b,this.reject_=M,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new wc(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let u=a.loaded,d=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===Ec.NO_ERROR,u=o.getStatus();if(!a||x4(u,this.additionalRetryCodes_)&&this.retry){let p=o.getErrorCode()===Ec.ABORT;r(!1,new wc(!1,null,p));return}let d=this.successCodes_.indexOf(u)!==-1;r(!0,new wc(d,o))})},n=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(a,a.getResponse());A4(u)?o(u):o()}catch(u){s(u)}else if(a!==null){let u=eb();u.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,u)):s(u)}else if(i.canceled){let u=this.appDelete_?tM():v4();s(u)}else{let u=y4();s(u)}};this.canceled_?n(!1,new wc(!1,null,!0)):this.backoffId_=T4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&S4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},wc=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function M4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function N4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function P4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function k4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function O4(t,e,n,r,i,o,s=!0){let a=nM(t.urlParams),u=t.url+a,d=Object.assign({},t.headers);return P4(d,e),M4(d,n),N4(d,o),k4(d,r),new ZI(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}function F4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function L4(...t){let e=F4();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(nb())return new Blob(t);throw new it(ct.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function V4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function U4(t){if(typeof atob>"u")throw C4("base-64");return atob(t)}var Lr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ol=class{constructor(e,n){this.data=e,this.contentType=n||null}};function j4(t,e){switch(t){case Lr.RAW:return new Ol(rM(e));case Lr.BASE64:case Lr.BASE64URL:return new Ol(iM(t,e));case Lr.DATA_URL:return new Ol($4(e),H4(e))}throw eb()}function rM(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function B4(t){let e;try{e=decodeURIComponent(t)}catch{throw kl(Lr.DATA_URL,"Malformed data URL.")}return rM(e)}function iM(t,e){switch(t){case Lr.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw kl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Lr.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw kl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=U4(e)}catch(i){throw i.message.includes("polyfill")?i:kl(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var vm=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw kl(Lr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=q4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function $4(t){let e=new vm(t);return e.base64?iM(Lr.BASE64,e.rest):B4(e.rest)}function H4(t){return new vm(t).contentType}function q4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var _m=class t{constructor(e,n){let r=0,i="";Wx(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Wx(this.data_)){let r=this.data_,i=V4(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(nb()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(L4.apply(null,n))}else{let n=e.map(s=>tb(s)?j4(Lr.RAW,s).data:s.data_),r=0;n.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new t(i,!0)}}uploadData(){return this.data_}};function oM(t){let e;try{e=JSON.parse(t)}catch{return null}return R4(e)?e:null}function z4(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function G4(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function sM(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function W4(t,e){return e}var Lt=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||W4}},ym=null;function K4(t){return!tb(t)||t.length<2?t:sM(t)}function aM(){if(ym)return ym;let t=[];t.push(new Lt("bucket")),t.push(new Lt("generation")),t.push(new Lt("metageneration")),t.push(new Lt("name","fullPath",!0));function e(o,s){return K4(s)}let n=new Lt("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}let i=new Lt("size");return i.xform=r,t.push(i),t.push(new Lt("timeCreated")),t.push(new Lt("updated")),t.push(new Lt("md5Hash",null,!0)),t.push(new Lt("cacheControl",null,!0)),t.push(new Lt("contentDisposition",null,!0)),t.push(new Lt("contentEncoding",null,!0)),t.push(new Lt("contentLanguage",null,!0)),t.push(new Lt("contentType",null,!0)),t.push(new Lt("metadata","customMetadata",!0)),ym=t,ym}function Q4(t,e){function n(){let r=t.bucket,i=t.fullPath,o=new Jn(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function Y4(t,e,n){let r={};r.type="file";let i=n.length;for(let o=0;o<i;o++){let s=n[o];r[s.local]=s.xform(r,e[s.server])}return Q4(r,t),r}function cM(t,e,n){let r=oM(e);return r===null?null:Y4(t,r,n)}function Z4(t,e,n,r){let i=oM(e);if(i===null||!tb(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(d=>{let p=t.bucket,m=t.fullPath,w="/b/"+s(p)+"/o/"+s(m),b=rb(w,n,r),M=nM({alt:"media",token:d});return b+M})[0]}function J4(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var wm=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function uM(t){if(!t)throw eb()}function X4(t,e){function n(r,i){let o=cM(t,i,e);return uM(o!==null),o}return n}function ez(t,e){function n(r,i){let o=cM(t,i,e);return uM(o!==null),Z4(o,i,t.host,t._protocol)}return n}function lM(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=m4():i=p4():n.getStatus()===402?i=f4(t.bucket):n.getStatus()===403?i=g4(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function tz(t){let e=lM(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=h4(t.path)),o.serverResponse=i.serverResponse,o}return n}function nz(t,e,n){let r=e.fullServerUrl(),i=rb(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new wm(i,o,ez(t,n),s);return a.errorHandler=tz(e),a}function rz(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function iz(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=rz(null,e)),r}function oz(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let Z="";for(let ne=0;ne<2;ne++)Z=Z+Math.random().toString().slice(2);return Z}let u=a();s["Content-Type"]="multipart/related; boundary="+u;let d=iz(e,r,i),p=J4(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,w=`\r
--`+u+"--",b=_m.getBlob(m,r,w);if(b===null)throw I4();let M={name:d.fullPath},L=rb(o,t.host,t._protocol),O="POST",H=t.maxUploadRetryTime,X=new wm(L,O,X4(t,n),H);return X.urlParams=M,X.headers=s,X.body=b.uploadData(),X.errorHandler=lM(e),X}var kJ=256*1024;var Qx=null,JI=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ec.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ec.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ec.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Pl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Pl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Pl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Pl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Pl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},XI=class extends JI{initXhr(){this.xhr_.responseType="text"}};function dM(){return Qx?Qx():new XI}var Ic=class t{constructor(e,n){this._service=e,n instanceof Jn?this._location=n:this._location=Jn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sM(this._location.path)}get storage(){return this._service}get parent(){let e=z4(this._location.path);if(e===null)return null;let n=new Jn(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw D4(e)}};function sz(t,e,n){t._throwIfRoot("uploadBytes");let r=oz(t.storage,t._location,aM(),new _m(e,!0),n);return t.storage.makeRequestWithTokens(r,dM).then(i=>({metadata:i,ref:t}))}function az(t){t._throwIfRoot("getDownloadURL");let e=nz(t.storage,t._location,aM());return t.storage.makeRequestWithTokens(e,dM).then(n=>{if(n===null)throw b4();return n})}function cz(t,e){let n=G4(t._location.path,e),r=new Jn(t._location.bucket,n);return new Ic(t.storage,r)}function uz(t){return/^[A-Za-z]+:\/\//.test(t)}function lz(t,e){return new Ic(t,e)}function hM(t,e){if(t instanceof Fl){let n=t;if(n._bucket==null)throw E4();let r=new Ic(n,n._bucket);return e!=null?hM(r,e):r}else return e!==void 0?cz(t,e):t}function dz(t,e){if(e&&uz(e)){if(t instanceof Fl)return lz(t,e);throw QI("To use ref(service, url), the first argument must be a Storage instance.")}else return hM(t,e)}function Yx(t,e){let n=e?.[eM];return n==null?null:Jn.makeFromBucketSpec(n,t)}function hz(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Zf(i,t.app.options.projectId))}var Fl=class{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Xx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=l4,this._maxUploadRetryTime=d4,this._requests=new Set,i!=null?this._bucket=Jn.makeFromBucketSpec(i,this._host):this._bucket=Yx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jn.makeFromBucketSpec(this._url,e):this._bucket=Yx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Kx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Kx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return I(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return I(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ic(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new YI(tM());{let s=O4(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){return I(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},Zx="@firebase/storage",Jx="0.13.2";var fM="storage";function pM(t,e,n){return t=We(t),sz(t,e,n)}function mM(t){return t=We(t),az(t)}function gM(t,e){return t=We(t),dz(t,e)}function yM(t=oo(),e){t=We(t);let r=ss(t,fM).getImmediate({identifier:e}),i=Yf("storage");return i&&vM(r,...i),r}function vM(t,e,n,r={}){hz(t,e,n,r)}function fz(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Fl(n,r,i,e,Sr)}function pz(){Tr(new on(fM,fz,"PUBLIC").setMultipleInstances(!0)),Je(Zx,Jx,""),Je(Zx,Jx,"esm2017")}pz();var _M=Xe(mM,!0);var wM=Xe(yM,!0);var EM=Xe(gM,!0);var IM=Xe(pM,!0);var Mn=class t{constructor(e,n){this.auth=e;this.firestore=n}userSubject=new at(null);uploadImage(e){return I(this,null,function*(){let n=wM(),r=EM(n,`images/${e.name}`);try{return yield IM(r,e),yield _M(r)}catch(i){throw console.error("Error al subir la imagen:",i),i}})}registerUser(e,n,r,i){return I(this,null,function*(){try{let o=yield GA(this.auth,e,n);yield WA(o.user);let s=i!=="especialista",a=le(j({uid:o.user.uid},r),{role:i,createdAt:new Date,habilitado:s,emailVerificado:!1});return yield gm(Fr(this.firestore,"users",o.user.uid),a),le(j({},o.user),{role:i})}catch(o){throw console.error(`Error al registrar el ${i}:`,o),o}})}verificarCorreo(e){return I(this,null,function*(){let n=this.auth.currentUser;if(n){yield n.reload();let r=yield this.getUserData(n.uid);n.emailVerified&&(yield _c(Fr(this.firestore,`users/${n.uid}`),{emailVerificado:!0}))}})}login(e,n){return I(this,null,function*(){try{let r=yield KA(this.auth,e,n);yield this.verificarCorreo(r.user.uid);let i=yield this.getUserData(r.user.uid);if(i.role==="especialista"){if(!i.habilitado)throw new Error("Tu cuenta debe ser aprobada por un administrador antes de poder iniciar sesi\xF3n.");if(!i.emailVerificado)throw new Error("Debes verificar tu correo electr\xF3nico para ingresar.")}else if(!i.emailVerificado)throw new Error("Debes verificar tu correo electr\xF3nico para ingresar.");return this.userSubject.next(j(j({},r.user),i)),j(j({},r.user),i)}catch(r){throw console.error("Error en el login:",r),r}})}getUserData(e){return I(this,null,function*(){let n=Fr(this.firestore,`users/${e}`),r=yield pm(n);if(r.exists())return r.data();throw new Error("No se encontr\xF3 el documento del usuario")})}logout(){return QA(this.auth).then(()=>{this.userSubject.next(null)})}habilitarUsuario(e){return I(this,null,function*(){let n=Fr(this.firestore,"users",e);yield _c(n,{habilitado:!0})})}inhabilitarUsuario(e){return I(this,null,function*(){let n=Fr(this.firestore,"users",e);yield _c(n,{habilitado:!1})})}obtenerUsuarios(){return I(this,null,function*(){let e=Nl(this.firestore,"users");return(yield mm(e)).docs.map(r=>j({id:r.id},r.data()))})}getUser(){return this.userSubject.asObservable()}static \u0275fac=function(n){return new(n||t)(ee(ms),ee(_i))};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})};var NM=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||t)(Y(ei),Y(zn))}}static{this.\u0275dir=Ge({type:t})}}return t})(),xm=(()=>{class t extends NM{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Xr(t)))(i||t)}})()}static{this.\u0275dir=Ge({type:t,features:[nn]})}}return t})(),Sc=new Q("");var mz={provide:Sc,useExisting:pn(()=>Vr),multi:!0};function gz(){let t=ni()?ni().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var yz=new Q(""),Vr=(()=>{class t extends NM{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!gz())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||t)(Y(ei),Y(zn),Y(yz,8))}}static{this.\u0275dir=Ge({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ee("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Gn([mz]),nn]})}}return t})();function go(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function PM(t){return t!=null&&typeof t.length=="number"}var ql=new Q(""),Mm=new Q(""),vz=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ae=class{static min(e){return _z(e)}static max(e){return wz(e)}static required(e){return kM(e)}static requiredTrue(e){return Ez(e)}static email(e){return Iz(e)}static minLength(e){return bz(e)}static maxLength(e){return Cz(e)}static pattern(e){return Dz(e)}static nullValidator(e){return Im(e)}static compose(e){return jM(e)}static composeAsync(e){return BM(e)}};function _z(t){return e=>{if(go(e.value)||go(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function wz(t){return e=>{if(go(e.value)||go(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function kM(t){return go(t.value)?{required:!0}:null}function Ez(t){return t.value===!0?null:{required:!0}}function Iz(t){return go(t.value)||vz.test(t.value)?null:{email:!0}}function bz(t){return e=>go(e.value)||!PM(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function Cz(t){return e=>PM(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function Dz(t){if(!t)return Im;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(go(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function Im(t){return null}function OM(t){return t!=null}function FM(t){return Zo(t)?Ye(t):t}function LM(t){let e={};return t.forEach(n=>{e=n!=null?j(j({},e),n):e}),Object.keys(e).length===0?null:e}function VM(t,e){return e.map(n=>n(t))}function Tz(t){return!t.validate}function UM(t){return t.map(e=>Tz(e)?e:n=>e.validate(n))}function jM(t){if(!t)return null;let e=t.filter(OM);return e.length==0?null:function(n){return LM(VM(n,e))}}function ub(t){return t!=null?jM(UM(t)):null}function BM(t){if(!t)return null;let e=t.filter(OM);return e.length==0?null:function(n){let r=VM(n,e).map(FM);return Mg(r).pipe(_e(LM))}}function lb(t){return t!=null?BM(UM(t)):null}function bM(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function $M(t){return t._rawValidators}function HM(t){return t._rawAsyncValidators}function ib(t){return t?Array.isArray(t)?t:[t]:[]}function bm(t,e){return Array.isArray(t)?t.includes(e):t===e}function CM(t,e){let n=ib(e);return ib(t).forEach(i=>{bm(n,i)||n.push(i)}),n}function DM(t,e){return ib(e).filter(n=>!bm(t,n))}var Cm=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ub(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},wi=class extends Cm{get formDirective(){return null}get path(){return null}},Rs=class extends Cm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Dm=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Sz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},bX=le(j({},Sz),{"[class.ng-submitted]":"isSubmitted"}),vo=(()=>{class t extends Dm{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(Y(Rs,2))}}static{this.\u0275dir=Ge({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&gf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[nn]})}}return t})(),_o=(()=>{class t extends Dm{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(Y(wi,10))}}static{this.\u0275dir=Ge({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&gf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[nn]})}}return t})();var Vl="VALID",Em="INVALID",bc="PENDING",Ul="DISABLED",yo=class{},Tm=class extends yo{constructor(e,n){super(),this.value=e,this.source=n}},Bl=class extends yo{constructor(e,n){super(),this.pristine=e,this.source=n}},$l=class extends yo{constructor(e,n){super(),this.touched=e,this.source=n}},Cc=class extends yo{constructor(e,n){super(),this.status=e,this.source=n}},ob=class extends yo{constructor(e){super(),this.source=e}},sb=class extends yo{constructor(e){super(),this.source=e}};function db(t){return(Nm(t)?t.validators:t)||null}function Az(t){return Array.isArray(t)?ub(t):t||null}function hb(t,e){return(Nm(e)?e.asyncValidators:t)||null}function Rz(t){return Array.isArray(t)?lb(t):t||null}function Nm(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function qM(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new re(1e3,"");if(!r[n])throw new re(1001,"")}function zM(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new re(1002,"")})}var Dc=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=xa(()=>this.statusReactive()),this.statusReactive=Ra(void 0),this._pristine=xa(()=>this.pristineReactive()),this.pristineReactive=Ra(!0),this._touched=xa(()=>this.touchedReactive()),this.touchedReactive=Ra(!1),this._events=new st,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return br(this.statusReactive)}set status(e){br(()=>this.statusReactive.set(e))}get valid(){return this.status===Vl}get invalid(){return this.status===Em}get pending(){return this.status==bc}get disabled(){return this.status===Ul}get enabled(){return this.status!==Ul}get pristine(){return br(this.pristineReactive)}set pristine(e){br(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return br(this.touchedReactive)}set touched(e){br(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(CM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(CM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(DM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(DM(e,this._rawAsyncValidators))}hasValidator(e){return bm(this._rawValidators,e)}hasAsyncValidator(e){return bm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(le(j({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new $l(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new $l(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(le(j({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Bl(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Bl(!0,r))}markAsPending(e={}){this.status=bc;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Cc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(le(j({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ul,this.errors=null,this._forEachChild(i=>{i.disable(le(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Tm(this.value,r)),this._events.next(new Cc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(le(j({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Vl,this._forEachChild(r=>{r.enable(le(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(le(j({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vl||this.status===bc)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Tm(this.value,n)),this._events.next(new Cc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(le(j({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ul:Vl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=bc,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=FM(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Cc(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Ze,this.statusChanges=new Ze}_calculateStatus(){return this._allControlsDisabled()?Ul:this.errors?Em:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bc)?bc:this._anyControlsHaveStatus(Em)?Em:Vl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Bl(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new $l(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Nm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Az(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Rz(this._rawAsyncValidators)}},Tc=class extends Dc{constructor(e,n,r){super(db(n),hb(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){zM(this,!0,e),Object.keys(e).forEach(r=>{qM(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ab=class extends Tc{};var zl=new Q("CallSetDisabledState",{providedIn:"root",factory:()=>Pm}),Pm="always";function GM(t,e){return[...e.path,t]}function Sm(t,e,n=Pm){fb(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Mz(t,e),Pz(t,e),Nz(t,e),xz(t,e)}function TM(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Rm(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Am(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function xz(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function fb(t,e){let n=$M(t);e.validator!==null?t.setValidators(bM(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=HM(t);e.asyncValidator!==null?t.setAsyncValidators(bM(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Am(e._rawValidators,i),Am(e._rawAsyncValidators,i)}function Rm(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=$M(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=HM(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return Am(e._rawValidators,r),Am(e._rawAsyncValidators,r),n}function Mz(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&WM(t,e)})}function Nz(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&WM(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function WM(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Pz(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function KM(t,e){t==null,fb(t,e)}function kz(t,e){return Rm(t,e)}function QM(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Oz(t){return Object.getPrototypeOf(t.constructor)===xm}function YM(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function ZM(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Vr?n=o:Oz(o)?r=o:i=o}),i||r||n||null}function Fz(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var Lz={provide:wi,useExisting:pn(()=>pb)},jl=Promise.resolve(),pb=(()=>{class t extends wi{get submitted(){return br(this.submittedReactive)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=xa(()=>this.submittedReactive()),this.submittedReactive=Ra(!1),this._directives=new Set,this.ngSubmit=new Ze,this.form=new Tc({},ub(n),lb(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){jl.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Sm(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){jl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){jl.then(()=>{let r=this._findContainer(n.path),i=new Tc({});KM(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){jl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){jl.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),YM(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||t)(Y(ql,10),Y(Mm,10),Y(zl,8))}}static{this.\u0275dir=Ge({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ee("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Gn([Lz]),nn]})}}return t})();function SM(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function AM(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Hl=class extends Dc{constructor(e=null,n,r){super(db(n),hb(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nm(n)&&(n.nonNullable||n.initialValueIsDefault)&&(AM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){SM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){SM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){AM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Vz=t=>t instanceof Hl;var Uz={provide:Rs,useExisting:pn(()=>mb)},RM=Promise.resolve(),mb=(()=>{class t extends Rs{constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Hl,this._registered=!1,this.name="",this.update=new Ze,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=ZM(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),QM(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Sm(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){RM.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&wu(r);RM.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?GM(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||t)(Y(wi,9),Y(ql,10),Y(Mm,10),Y(Sc,10),Y(Xo,8),Y(zl,8))}}static{this.\u0275dir=Ge({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Gn([Uz]),nn,Jr]})}}return t})(),wo=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Ge({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return t})(),jz={provide:Sc,useExisting:pn(()=>xs),multi:!0},xs=(()=>{class t extends xm{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Xr(t)))(i||t)}})()}static{this.\u0275dir=Ge({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Ee("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[Gn([jz]),nn]})}}return t})();var JM=new Q("");var Bz={provide:wi,useExisting:pn(()=>Ms)},Ms=(()=>{class t extends wi{get submitted(){return br(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=xa(()=>this._submittedReactive()),this._submittedReactive=Ra(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ze,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Rm(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let r=this.form.get(n.path);return Sm(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){TM(n.control||null,n,!1),Fz(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this._submittedReactive.set(!0),YM(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new ob(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this._submittedReactive.set(!1),this.form._events.next(new sb(this.form))}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,i=this.form.get(n.path);r!==i&&(TM(r||null,n),Vz(i)&&(Sm(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);KM(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&kz(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){fb(this.form,this),this._oldForm&&Rm(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||t)(Y(ql,10),Y(Mm,10),Y(zl,8))}}static{this.\u0275dir=Ge({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Ee("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Gn([Bz]),nn,Jr]})}}return t})();var $z={provide:Rs,useExisting:pn(()=>Ns)},Ns=(()=>{class t extends Rs{set isDisabled(n){}static{this._ngModelWarningSentOnce=!1}constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new Ze,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=ZM(this,o)}ngOnChanges(n){this._added||this._setUpControl(),QM(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return GM(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||t)(Y(wi,13),Y(ql,10),Y(Mm,10),Y(Sc,10),Y(JM,8))}}static{this.\u0275dir=Ge({type:t,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Gn([$z]),nn,Jr]})}}return t})(),Hz={provide:Sc,useExisting:pn(()=>eN),multi:!0};function XM(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function qz(t){return t.split(":")[0]}var eN=(()=>{class t extends xm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r=this._getOptionId(n),i=XM(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=qz(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Xr(t)))(i||t)}})()}static{this.\u0275dir=Ge({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Ee("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Gn([Hz]),nn]})}}return t})(),DX=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(XM(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||t)(Y(zn),Y(ei),Y(eN,9))}}static{this.\u0275dir=Ge({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})(),zz={provide:Sc,useExisting:pn(()=>tN),multi:!0};function xM(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function Gz(t){return t.split(":")[0]}var tN=(()=>{class t extends xm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],d=this._getOptionValue(u.value);i.push(d)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let d=this._getOptionValue(u.value);i.push(d)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=Gz(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Xr(t)))(i||t)}})()}static{this.\u0275dir=Ge({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Ee("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Gn([zz]),nn]})}}return t})(),TX=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(xM(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(xM(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||t)(Y(zn),Y(ei),Y(tN,9))}}static{this.\u0275dir=Ge({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})();var Wz=(()=>{class t{constructor(){this._validator=Im}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Im,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Ge({type:t,features:[Jr]})}}return t})();var Kz={provide:ql,useExisting:pn(()=>gb),multi:!0};var gb=(()=>{class t extends Wz{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=wu,this.createValidator=n=>kM}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Xr(t)))(i||t)}})()}static{this.\u0275dir=Ge({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&_u("required",i._enabled?"":null)},inputs:{required:"required"},features:[Gn([Kz]),nn]})}}return t})();var nN=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ct({type:t})}static{this.\u0275inj=bt({})}}return t})(),cb=class extends Dc{constructor(e,n,r){super(db(n),hb(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){zM(this,!1,e),e.forEach((r,i)=>{qM(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function MM(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var Ac=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){let n=new t;return n.useNonNullable=!0,n}group(n,r=null){let i=this._reduceControls(n),o={};return MM(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Tc(i,o)}record(n,r=null){let i=this._reduceControls(n);return new ab(i,r)}control(n,r,i){let o={};return this.useNonNullable?(MM(r)?o=r:(o.validators=r,o.asyncValidators=i),new Hl(n,le(j({},o),{nonNullable:!0}))):new Hl(n,r,i)}array(n,r,i){let o=n.map(s=>this._createControl(s));return new cb(o,r,i)}_reduceControls(n){let r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){if(n instanceof Hl)return n;if(n instanceof Dc)return n;if(Array.isArray(n)){let r=n[0],i=n.length>1?n[1]:null,o=n.length>2?n[2]:null;return this.control(r,i,o)}else return this.control(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var rN=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:zl,useValue:n.callSetDisabledState??Pm}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ct({type:t})}static{this.\u0275inj=bt({imports:[nN]})}}return t})(),iN=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:JM,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:zl,useValue:n.callSetDisabledState??Pm}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ct({type:t})}static{this.\u0275inj=bt({imports:[nN]})}}return t})();var Xn=Ud(Gl());function Qz(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function Yz(t,e){t&1&&(F(0,"div"),U(1,"Solo se permiten letras."),N())}function Zz(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function Jz(t,e){t&1&&(F(0,"div"),U(1,"Solo se permiten letras."),N())}function Xz(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function e3(t,e){t&1&&(F(0,"div"),U(1,"La edad m\xEDnima es 18 a\xF1os."),N())}function t3(t,e){t&1&&(F(0,"div"),U(1,"La edad m\xE1xima es 99 a\xF1os."),N())}function n3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function r3(t,e){t&1&&(F(0,"div"),U(1,"El DNI debe tener 8 d\xEDgitos."),N())}function i3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function o3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function s3(t,e){t&1&&(F(0,"div"),U(1,"Formato de email inv\xE1lido."),N())}function a3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function c3(t,e){t&1&&(F(0,"div"),U(1,"La contrase\xF1a debe tener al menos 6 caracteres."),N())}function u3(t,e){t&1&&(F(0,"div"),U(1,"Debes subir exactamente 2 im\xE1genes."),N())}function l3(t,e){if(t&1){let n=Er();F(0,"div")(1,"div",20),Ee("captchaValido",function(i){_r(n);let o=Ir();return wr(o.onCaptchaResolved(i))}),N()()}}function d3(t,e){t&1&&(F(0,"div")(1,"span"),U(2,"Captcha completado con \xE9xito"),N()())}var Om=class t{constructor(e,n,r){this.fb=e;this.authService=n;this.router=r;this.pacienteForm=this.fb.group({nombre:["",[ae.required,ae.pattern("^[a-zA-Z ]*$")]],apellido:["",[ae.required,ae.pattern("^[a-zA-Z ]*$")]],edad:["",[ae.required,ae.min(1),ae.max(123)]],dni:["",[ae.required,ae.pattern("^[0-9]{8,8}$")]],obraSocial:["",ae.required],email:["",[ae.required,ae.email]],password:["",[ae.required,ae.minLength(6)]],imagenes:this.fb.array([],[ae.required])})}pacienteForm;allowedFileTypes=["image/jpeg","image/png","image/gif"];maxFileSize=2*1024*1024;captchaValido=!1;agregarImagen(e){let n=e.target,r=this.pacienteForm.get("imagenes");if(n.files&&n.files.length>0){let i=Array.from(n.files);for(let o of i){if(!this.allowedFileTypes.includes(o.type)){Xn.default.fire("Tipo de archivo no v\xE1lido","Solo se permiten im\xE1genes en formato JPEG, PNG o GIF.","error");return}if(o.size>this.maxFileSize){Xn.default.fire("Tama\xF1o de archivo excedido","El tama\xF1o m\xE1ximo permitido es de 2 MB por archivo.","error");return}}if(r.length>=2){Xn.default.fire("Error","Solo puedes subir hasta 2 im\xE1genes.","error");return}i.forEach(o=>{r.length<2&&r.push(this.fb.control(o))})}}mostrarError(e,n){let r=this.pacienteForm.get(e);return r?r.hasError(n)&&(r.dirty||r.touched):!1}guardarPaciente(){return I(this,null,function*(){if(this.pacienteForm.valid&&this.captchaValido){let e=this.pacienteForm.get("imagenes");if(e.length!==2){Xn.default.fire("Error","Debes subir exactamente 2 im\xE1genes.","error");return}Xn.default.fire({title:"Cargando...",text:"Por favor, espera un momento.",allowOutsideClick:!1,didOpen:()=>{Xn.default.showLoading()}});try{let n=[];for(let i=0;i<e.length;i++){let o=e.at(i).value,s=yield this.authService.uploadImage(o);n.push(s)}let r=le(j({},this.pacienteForm.value),{role:"paciente",imagenes:n});yield this.authService.registerUser(r.email,r.password,r,"paciente"),Xn.default.fire("Registro exitoso","El paciente ha sido registrado correctamente","success"),this.pacienteForm.reset(),this.router.navigate(["/bienvenida"])}catch(n){Xn.default.fire("Error",`Ha ocurrido un error durante el registro: ${n}`,"error")}finally{Xn.default.close()}}else Xn.default.fire("Formulario inv\xE1lido","Por favor, completa todos los campos correctamente.","warning")})}onCaptchaResolved(e){this.captchaValido=e}static \u0275fac=function(n){return new(n||t)(Y(Ac),Y(Mn),Y(At))};static \u0275cmp=mn({type:t,selectors:[["app-registro-paciente"]],decls:53,vars:19,consts:[[3,"ngSubmit","formGroup"],["for","nombre"],["id","nombre","formControlName","nombre"],[4,"ngIf"],["for","apellido"],["id","apellido","formControlName","apellido"],["for","edad"],["id","edad","type","number","formControlName","edad"],["for","dni"],["id","dni","formControlName","dni"],["for","obraSocial"],["id","obraSocial","formControlName","obraSocial"],["for","email"],["id","email","formControlName","email"],["for","password"],["id","password","type","password","formControlName","password"],["for","imagenes"],["type","file","multiple","",3,"change"],[1,"captcha-container"],["type","submit",3,"disabled"],["appRecaptcha","",3,"captchaValido"]],template:function(n,r){n&1&&(F(0,"form",0),Ee("ngSubmit",function(){return r.guardarPaciente()}),F(1,"div")(2,"label",1),U(3,"Nombre:"),N(),ye(4,"input",2),xe(5,Qz,2,0,"div",3)(6,Yz,2,0,"div",3),N(),F(7,"div")(8,"label",4),U(9,"Apellido:"),N(),ye(10,"input",5),xe(11,Zz,2,0,"div",3)(12,Jz,2,0,"div",3),N(),F(13,"div")(14,"label",6),U(15,"Edad:"),N(),ye(16,"input",7),xe(17,Xz,2,0,"div",3)(18,e3,2,0,"div",3)(19,t3,2,0,"div",3),N(),F(20,"div")(21,"label",8),U(22,"DNI:"),N(),ye(23,"input",9),xe(24,n3,2,0,"div",3)(25,r3,2,0,"div",3),N(),F(26,"div")(27,"label",10),U(28,"Obra Social:"),N(),ye(29,"input",11),xe(30,i3,2,0,"div",3),N(),F(31,"div")(32,"label",12),U(33,"Email:"),N(),ye(34,"input",13),xe(35,o3,2,0,"div",3)(36,s3,2,0,"div",3),N(),F(37,"div")(38,"label",14),U(39,"Contrase\xF1a:"),N(),ye(40,"input",15),xe(41,a3,2,0,"div",3)(42,c3,2,0,"div",3),N(),F(43,"div")(44,"label",16),U(45,"Sube exactamente 2 im\xE1genes:"),N(),F(46,"input",17),Ee("change",function(o){return r.agregarImagen(o)}),N(),xe(47,u3,2,0,"div",3),N(),F(48,"div",18),xe(49,l3,2,0,"div",3)(50,d3,3,0,"div",3),N(),F(51,"button",19),U(52,"Registrar Paciente "),N()()),n&2&&(W("formGroup",r.pacienteForm),G(5),W("ngIf",r.mostrarError("nombre","required")),G(),W("ngIf",r.mostrarError("nombre","pattern")),G(5),W("ngIf",r.mostrarError("apellido","required")),G(),W("ngIf",r.mostrarError("apellido","pattern")),G(5),W("ngIf",r.mostrarError("edad","required")),G(),W("ngIf",r.mostrarError("edad","min")),G(),W("ngIf",r.mostrarError("edad","max")),G(5),W("ngIf",r.mostrarError("dni","required")),G(),W("ngIf",r.mostrarError("dni","pattern")),G(5),W("ngIf",r.mostrarError("obraSocial","required")),G(5),W("ngIf",r.mostrarError("email","required")),G(),W("ngIf",r.mostrarError("email","email")),G(5),W("ngIf",r.mostrarError("password","required")),G(),W("ngIf",r.mostrarError("password","minlength")),G(5),W("ngIf",r.mostrarError("imagenes","required")),G(2),W("ngIf",!r.captchaValido),G(),W("ngIf",r.captchaValido),G(),W("disabled",!r.captchaValido))},dependencies:[eo,wo,Vr,xs,vo,_o,Ms,Ns],styles:['@charset "UTF-8";form[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:30px;border:1px solid #007bff;border-radius:10px;background-color:#e0f7fa;box-shadow:0 4px 20px #0003}label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:8px;display:block;color:#007bff}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #007bff;border-radius:6px;margin-bottom:15px;box-sizing:border-box;transition:border-color .3s,background-color .3s;background-color:#f1f1f1}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus, input[type=email][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus{border-color:#0056b3;outline:none;background-color:#fff}div[ngIf][_ngcontent-%COMP%]{color:#dc3545;font-size:.9em;margin-top:-10px;margin-bottom:10px}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:12px 15px;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s,transform .2s;width:100%;font-size:1em}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-2px)}input[type=text][_ngcontent-%COMP%]:hover, input[type=number][_ngcontent-%COMP%]:hover, input[type=email][_ngcontent-%COMP%]:hover, input[type=password][_ngcontent-%COMP%]:hover{border-color:#0056b3}div[_ngcontent-%COMP%]{margin-bottom:15px}']})};var sn=Ud(Gl());var Lm=class t{constructor(e){this.firestore=e}addEspecialidad(e){return I(this,null,function*(){let n=Fr(Nl(this.firestore,"especialidades"));yield gm(n,{nombre:e})})}getEspecialidades(){return I(this,null,function*(){let e=Nl(this.firestore,"especialidades");return(yield mm(e)).docs.map(r=>j({id:r.id},r.data()))})}getEspecialidad(e){return I(this,null,function*(){let n=Fr(this.firestore,`especialidades/${e}`),r=yield pm(n);if(r.exists())return j({id:r.id},r.data());throw new Error("No se encontr\xF3 la especialidad")})}updateEspecialidad(e,n){return I(this,null,function*(){let r=Fr(this.firestore,`especialidades/${e}`);yield _c(r,{nombre:n})})}static \u0275fac=function(n){return new(n||t)(ee(_i))};static \u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"})};function p3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function m3(t,e){t&1&&(F(0,"div"),U(1,"Solo se permiten letras."),N())}function g3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function y3(t,e){t&1&&(F(0,"div"),U(1,"Solo se permiten letras."),N())}function v3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function _3(t,e){t&1&&(F(0,"div"),U(1,"La edad m\xEDnima es 18 a\xF1os."),N())}function w3(t,e){t&1&&(F(0,"div"),U(1,"La edad m\xE1xima es 99 a\xF1os."),N())}function E3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function I3(t,e){t&1&&(F(0,"div"),U(1,"El DNI debe tener 8 d\xEDgitos."),N())}function b3(t,e){if(t&1){let n=Er();F(0,"div")(1,"input",22),Ee("change",function(i){_r(n);let o=Ir();return wr(o.onEspecialidadChange(i))}),N(),U(2),N()}if(t&2){let n=e.$implicit;G(),W("value",n),G(),yf(" ",n," ")}}function C3(t,e){t&1&&(F(0,"div")(1,"p"),U(2,"No hay especialidades disponibles. Puedes agregar una nueva a continuaci\xF3n:"),N()())}function D3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function T3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio si no hay especialidades disponibles."),N())}function S3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function A3(t,e){t&1&&(F(0,"div"),U(1,"El formato del email es inv\xE1lido."),N())}function R3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function x3(t,e){t&1&&(F(0,"div"),U(1,"La contrase\xF1a debe tener al menos 6 caracteres."),N())}function M3(t,e){t&1&&(F(0,"div"),U(1,"Se debe cargar una imagen."),N())}function N3(t,e){if(t&1){let n=Er();F(0,"div")(1,"div",23),Ee("captchaValido",function(i){_r(n);let o=Ir();return wr(o.onCaptchaResolved(i))}),N()()}}function P3(t,e){t&1&&(F(0,"div")(1,"span"),U(2,"Captcha completado con \xE9xito"),N()())}var Vm=class t{constructor(e,n,r,i){this.fb=e;this.authService=n;this.router=r;this.especialidadService=i;this.especialistaForm=this.fb.group({nombre:["",[ae.required,ae.pattern("^[a-zA-Z ]*$")]],apellido:["",[ae.required,ae.pattern("^[a-zA-Z ]*$")]],edad:["",[ae.required,ae.min(18),ae.max(99)]],dni:["",[ae.required,ae.pattern("^[0-9]{8}$")]],especialidades:this.fb.array([],ae.required),nuevaEspecialidad:[""],email:["",[ae.required,ae.email]],password:["",[ae.required,ae.minLength(6)]],imagenes:this.fb.array([],ae.required)})}especialistaForm;allowedFileTypes=["image/jpeg","image/png","image/gif"];maxFileSize=2*1024*1024;especialidades=[];captchaValido=!1;ngOnInit(){this.loadEspecialidades()}loadEspecialidades(){this.especialidadService.getEspecialidades().then(e=>{this.especialidades=e.map(n=>n.nombre)})}onEspecialidadChange(e){let n=this.especialistaForm.get("especialidades");if(e.target.checked)n.push(this.fb.control(e.target.value));else{let r=n.controls.findIndex(i=>i.value===e.target.value);r>=0&&n.removeAt(r)}}agregarNuevaEspecialidad(){let e=this.especialistaForm.get("nuevaEspecialidad")?.value?.trim();if(!e){sn.default.fire("Advertencia","Ingresa una nueva especialidad antes de agregarla.","warning");return}if(this.especialidades.includes(e)){sn.default.fire("Advertencia","La especialidad ya existe en la lista.","warning");return}this.especialidadService.addEspecialidad(e).then(()=>{sn.default.fire("\xC9xito","Nueva especialidad agregada correctamente.","success"),this.loadEspecialidades(),this.especialistaForm.get("nuevaEspecialidad")?.reset()}).catch(n=>{sn.default.fire("Error","No se pudo agregar la especialidad.","error")})}agregarImagen(e){let n=e.target,r=this.especialistaForm.get("imagenes");if(n.files&&n.files.length>0){let i=n.files[0];if(!this.allowedFileTypes.includes(i.type)){sn.default.fire("Tipo de archivo no v\xE1lido","Por favor, sube una imagen en formato JPEG, PNG o GIF.","error");return}if(i.size>this.maxFileSize){sn.default.fire("Tama\xF1o de archivo excedido","El tama\xF1o m\xE1ximo permitido es de 2 MB.","error");return}r.clear(),r.push(this.fb.control(i))}}mostrarError(e,n){let r=this.especialistaForm.get(e);return r?r.hasError(n)&&(r.dirty||r.touched):!1}guardarEspecialista(){return I(this,null,function*(){if(this.especialistaForm.valid&&this.captchaValido){let e=this.especialistaForm.get("especialidades"),n=this.especialistaForm.get("nuevaEspecialidad")?.value;if(e.length===0&&n)e.push(this.fb.control(n));else if(e.length===0){sn.default.fire("Advertencia","Debes seleccionar al menos una especialidad o agregar una nueva.","warning");return}sn.default.fire({title:"Cargando...",text:"Por favor, espera un momento.",allowOutsideClick:!1}),sn.default.showLoading();let i=this.especialistaForm.get("imagenes").at(0).value;try{let o=yield this.authService.uploadImage(i),s=le(j({},this.especialistaForm.value),{especialidades:e.value,role:"especialista",imageUrl:o});delete s.imagenes,yield this.authService.registerUser(s.email,s.password,s,"especialista"),sn.default.fire("Registro exitoso","El especialista ha sido registrado correctamente","success"),this.router.navigate(["/bienvenida"])}catch(o){sn.default.fire("Error",`Ha ocurrido un error durante la subida de la imagen: ${o}`,"error")}finally{sn.default.close()}}else sn.default.fire("Formulario inv\xE1lido","Por favor, completa todos los campos","warning")})}onCaptchaResolved(e){this.captchaValido=e}static \u0275fac=function(n){return new(n||t)(Y(Ac),Y(Mn),Y(At),Y(Lm))};static \u0275cmp=mn({type:t,selectors:[["app-registro-especialista"]],decls:61,vars:22,consts:[[3,"ngSubmit","formGroup"],["for","nombre"],["id","nombre","formControlName","nombre"],[4,"ngIf"],["for","apellido"],["id","apellido","formControlName","apellido"],["for","edad"],["id","edad","type","number","formControlName","edad"],["for","dni"],["id","dni","formControlName","dni"],[4,"ngFor","ngForOf"],["for","nuevaEspecialidad"],["id","nuevaEspecialidad","formControlName","nuevaEspecialidad","placeholder","Si no est\xE1 en la lista, ingr\xE9sela aqu\xED"],["type","button",3,"click"],["for","email"],["id","email","formControlName","email"],["for","password"],["id","password","type","password","formControlName","password"],["for","imagenes"],["type","file",3,"change"],[1,"captcha-container"],["type","submit",3,"disabled"],["type","checkbox",3,"change","value"],["appRecaptcha","",3,"captchaValido"]],template:function(n,r){n&1&&(F(0,"form",0),Ee("ngSubmit",function(){return r.guardarEspecialista()}),F(1,"div")(2,"label",1),U(3,"Nombre:"),N(),ye(4,"input",2),xe(5,p3,2,0,"div",3)(6,m3,2,0,"div",3),N(),F(7,"div")(8,"label",4),U(9,"Apellido:"),N(),ye(10,"input",5),xe(11,g3,2,0,"div",3)(12,y3,2,0,"div",3),N(),F(13,"div")(14,"label",6),U(15,"Edad:"),N(),ye(16,"input",7),xe(17,v3,2,0,"div",3)(18,_3,2,0,"div",3)(19,w3,2,0,"div",3),N(),F(20,"div")(21,"label",8),U(22,"DNI:"),N(),ye(23,"input",9),xe(24,E3,2,0,"div",3)(25,I3,2,0,"div",3),N(),F(26,"div")(27,"label"),U(28,"Especialidades:"),N(),xe(29,b3,3,2,"div",10)(30,C3,3,0,"div",3)(31,D3,2,0,"div",3),N(),F(32,"div")(33,"label",11),U(34,"Nueva Especialidad:"),N(),ye(35,"input",12),F(36,"button",13),Ee("click",function(){return r.agregarNuevaEspecialidad()}),U(37,"Agregar Nueva Especialidad"),N(),xe(38,T3,2,0,"div",3),N(),F(39,"div")(40,"label",14),U(41,"Email:"),N(),ye(42,"input",15),xe(43,S3,2,0,"div",3)(44,A3,2,0,"div",3),N(),F(45,"div")(46,"label",16),U(47,"Contrase\xF1a:"),N(),ye(48,"input",17),xe(49,R3,2,0,"div",3)(50,x3,2,0,"div",3),N(),F(51,"div")(52,"label",18),U(53,"Im\xE1genes:"),N(),F(54,"input",19),Ee("change",function(o){return r.agregarImagen(o)}),N(),xe(55,M3,2,0,"div",3),N(),F(56,"div",20),xe(57,N3,2,0,"div",3)(58,P3,3,0,"div",3),N(),F(59,"button",21),U(60,"Registrar Especialista"),N()()),n&2&&(W("formGroup",r.especialistaForm),G(5),W("ngIf",r.mostrarError("nombre","required")),G(),W("ngIf",r.mostrarError("nombre","pattern")),G(5),W("ngIf",r.mostrarError("apellido","required")),G(),W("ngIf",r.mostrarError("apellido","pattern")),G(5),W("ngIf",r.mostrarError("edad","required")),G(),W("ngIf",r.mostrarError("edad","min")),G(),W("ngIf",r.mostrarError("edad","max")),G(5),W("ngIf",r.mostrarError("dni","required")),G(),W("ngIf",r.mostrarError("dni","pattern")),G(4),W("ngForOf",r.especialidades),G(),W("ngIf",r.especialidades.length===0),G(),W("ngIf",r.mostrarError("especialidades","required")),G(7),W("ngIf",r.mostrarError("nuevaEspecialidad","required")),G(5),W("ngIf",r.mostrarError("email","required")),G(),W("ngIf",r.mostrarError("email","email")),G(5),W("ngIf",r.mostrarError("password","required")),G(),W("ngIf",r.mostrarError("password","minlength")),G(5),W("ngIf",r.mostrarError("imagenes","required")),G(2),W("ngIf",!r.captchaValido),G(),W("ngIf",r.captchaValido),G(),W("disabled",!r.captchaValido))},dependencies:[bT,eo,wo,Vr,xs,vo,_o,Ms,Ns],styles:['@charset "UTF-8";form[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:30px;border:2px solid #007bff;border-radius:15px;background-color:#e0f7fa;box-shadow:0 4px 20px #0003}label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px;display:block;color:#007bff}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #007bff;border-radius:6px;font-size:16px;margin-bottom:15px;box-sizing:border-box;transition:border-color .3s,background-color .3s;background-color:#f1f1f1}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus, input[type=email][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:#0056b3;outline:none;background-color:#fff}input[type=file][_ngcontent-%COMP%]{margin-bottom:10px}div[ngIf][_ngcontent-%COMP%]{color:#dc3545;font-size:.9em;margin-top:-10px;margin-bottom:10px}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:12px 15px;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s,transform .2s;width:100%;font-size:1em}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-2px)}div[_ngcontent-%COMP%]{margin-bottom:20px}']})};var Nn=Ud(Gl());function O3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function F3(t,e){t&1&&(F(0,"div"),U(1,"Solo se permiten letras."),N())}function L3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function V3(t,e){t&1&&(F(0,"div"),U(1,"Solo se permiten letras."),N())}function U3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function j3(t,e){t&1&&(F(0,"div"),U(1,"La edad m\xEDnima es 18 a\xF1os."),N())}function B3(t,e){t&1&&(F(0,"div"),U(1,"La edad m\xE1xima es 99 a\xF1os."),N())}function $3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function H3(t,e){t&1&&(F(0,"div"),U(1,"El DNI debe tener 8 d\xEDgitos."),N())}function q3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function z3(t,e){t&1&&(F(0,"div"),U(1,"Formato de email inv\xE1lido."),N())}function G3(t,e){t&1&&(F(0,"div"),U(1,"Este campo es obligatorio."),N())}function W3(t,e){t&1&&(F(0,"div"),U(1,"La contrase\xF1a debe tener al menos 6 caracteres."),N())}function K3(t,e){t&1&&(F(0,"div"),U(1,"Debes subir al menos 1 imagen."),N())}function Q3(t,e){if(t&1){let n=Er();F(0,"div")(1,"div",18),Ee("captchaValido",function(i){_r(n);let o=Ir();return wr(o.onCaptchaResolved(i))}),N()()}}function Y3(t,e){t&1&&(F(0,"div")(1,"span"),U(2,"Captcha completado con \xE9xito"),N()())}var Um=class t{constructor(e,n,r){this.fb=e;this.authService=n;this.router=r;this.adminForm=this.fb.group({nombre:["",[ae.required,ae.pattern("^[a-zA-Z ]*$")]],apellido:["",[ae.required,ae.pattern("^[a-zA-Z ]*$")]],edad:["",[ae.required,ae.min(18),ae.max(99)]],dni:["",[ae.required,ae.pattern("^[0-9]{8,8}$")]],email:["",[ae.required,ae.email]],password:["",[ae.required,ae.minLength(6)]],imagenes:this.fb.array([],[ae.required])})}adminForm;allowedFileTypes=["image/jpeg","image/png","image/gif"];maxFileSize=2*1024*1024;captchaValido=!1;agregarImagen(e){let n=e.target,r=this.adminForm.get("imagenes");if(n.files&&n.files.length>0){let i=n.files[0];if(!this.allowedFileTypes.includes(i.type)){Nn.default.fire("Tipo de archivo no v\xE1lido","Por favor, sube una imagen en formato JPEG, PNG o GIF.","error");return}if(i.size>this.maxFileSize){Nn.default.fire("Tama\xF1o de archivo excedido","El tama\xF1o m\xE1ximo permitido es de 2 MB.","error");return}r.length<1?r.push(this.fb.control(i)):Nn.default.fire("Error","Solo se permite subir una imagen.","error")}}uploadImage(e){return I(this,null,function*(){try{return yield this.authService.uploadImage(e)}catch(n){throw console.error("Error al subir la imagen:",n),Nn.default.fire("Error al subir la imagen","Hubo un problema al subir la imagen. Por favor, intenta de nuevo.","error"),n}})}mostrarError(e,n){let r=this.adminForm.get(e);return r?r.hasError(n)&&(r.dirty||r.touched):!1}guardarAdmin(){return I(this,null,function*(){if(this.adminForm.valid&&this.captchaValido){let e=this.adminForm.get("imagenes");if(e.length!==1){Nn.default.fire("Error","Debes subir exactamente 1 imagen.","error");return}let n=e.at(0).value;Nn.default.fire({title:"Cargando...",text:"Por favor, espera un momento.",allowOutsideClick:!1,didOpen:()=>{Nn.default.showLoading()}});try{let r=yield this.uploadImage(n),i=le(j({},this.adminForm.value),{role:"administrador",imageUrl:r});delete i.imagenes,yield this.authService.registerUser(i.email,i.password,i,"administrador"),Nn.default.fire("Registro exitoso","El administrador ha sido registrado correctamente","success"),this.adminForm.reset(),this.router.navigate(["/bienvenida"])}catch{Nn.default.fire("Error","Ha ocurrido un error durante el registro","error")}finally{Nn.default.close()}}else Nn.default.fire("Formulario inv\xE1lido","Por favor, completa todos los campos","warning")})}onCaptchaResolved(e){this.captchaValido=e}static \u0275fac=function(n){return new(n||t)(Y(Ac),Y(Mn),Y(At))};static \u0275cmp=mn({type:t,selectors:[["app-registro-admin"]],decls:48,vars:18,consts:[[3,"ngSubmit","formGroup"],["for","nombre"],["id","nombre","formControlName","nombre"],[4,"ngIf"],["for","apellido"],["id","apellido","formControlName","apellido"],["for","edad"],["id","edad","type","number","formControlName","edad"],["for","dni"],["id","dni","formControlName","dni"],["for","email"],["id","email","formControlName","email"],["for","password"],["id","password","type","password","formControlName","password"],["for","imagen"],["type","file",3,"change"],[1,"captcha-container"],["type","submit",3,"disabled"],["appRecaptcha","",3,"captchaValido"]],template:function(n,r){n&1&&(F(0,"form",0),Ee("ngSubmit",function(){return r.guardarAdmin()}),F(1,"div")(2,"label",1),U(3,"Nombre:"),N(),ye(4,"input",2),xe(5,O3,2,0,"div",3)(6,F3,2,0,"div",3),N(),F(7,"div")(8,"label",4),U(9,"Apellido:"),N(),ye(10,"input",5),xe(11,L3,2,0,"div",3)(12,V3,2,0,"div",3),N(),F(13,"div")(14,"label",6),U(15,"Edad:"),N(),ye(16,"input",7),xe(17,U3,2,0,"div",3)(18,j3,2,0,"div",3)(19,B3,2,0,"div",3),N(),F(20,"div")(21,"label",8),U(22,"DNI:"),N(),ye(23,"input",9),xe(24,$3,2,0,"div",3)(25,H3,2,0,"div",3),N(),F(26,"div")(27,"label",10),U(28,"Email:"),N(),ye(29,"input",11),xe(30,q3,2,0,"div",3)(31,z3,2,0,"div",3),N(),F(32,"div")(33,"label",12),U(34,"Contrase\xF1a:"),N(),ye(35,"input",13),xe(36,G3,2,0,"div",3)(37,W3,2,0,"div",3),N(),F(38,"div")(39,"label",14),U(40,"Sube 1 imagen:"),N(),F(41,"input",15),Ee("change",function(o){return r.agregarImagen(o)}),N(),xe(42,K3,2,0,"div",3),N(),F(43,"div",16),xe(44,Q3,2,0,"div",3)(45,Y3,3,0,"div",3),N(),F(46,"button",17),U(47,"Registrar Administrador"),N()()),n&2&&(W("formGroup",r.adminForm),G(5),W("ngIf",r.mostrarError("nombre","required")),G(),W("ngIf",r.mostrarError("nombre","pattern")),G(5),W("ngIf",r.mostrarError("apellido","required")),G(),W("ngIf",r.mostrarError("apellido","pattern")),G(5),W("ngIf",r.mostrarError("edad","required")),G(),W("ngIf",r.mostrarError("edad","min")),G(),W("ngIf",r.mostrarError("edad","max")),G(5),W("ngIf",r.mostrarError("dni","required")),G(),W("ngIf",r.mostrarError("dni","pattern")),G(5),W("ngIf",r.mostrarError("email","required")),G(),W("ngIf",r.mostrarError("email","email")),G(5),W("ngIf",r.mostrarError("password","required")),G(),W("ngIf",r.mostrarError("password","minlength")),G(5),W("ngIf",r.mostrarError("imagenes","required")),G(2),W("ngIf",!r.captchaValido),G(),W("ngIf",r.captchaValido),G(),W("disabled",!r.captchaValido))},dependencies:[eo,wo,Vr,xs,vo,_o,Ms,Ns],styles:['@charset "UTF-8";form[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:30px;border:1px solid #007bff;border-radius:10px;background-color:#e0f7fa;box-shadow:0 4px 20px #0003}label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:8px;display:block;color:#007bff}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #007bff;border-radius:6px;margin-bottom:15px;box-sizing:border-box;transition:border-color .3s,background-color .3s;background-color:#f1f1f1}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus, input[type=email][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus{border-color:#0056b3;outline:none;background-color:#fff}div[ngIf][_ngcontent-%COMP%]{color:#dc3545;font-size:.9em;margin-top:-10px;margin-bottom:10px}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:12px 15px;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s,transform .2s;width:100%;font-size:1em}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-2px)}input[type=text][_ngcontent-%COMP%]:hover, input[type=number][_ngcontent-%COMP%]:hover, input[type=email][_ngcontent-%COMP%]:hover, input[type=password][_ngcontent-%COMP%]:hover{border-color:#0056b3}']})};function J3(t,e){if(t&1){let n=Er();F(0,"button",2),Ee("click",function(){_r(n);let i=Ir();return wr(i.cambiarTipoUsuario("administrador"))}),ye(1,"img",8),F(2,"span"),U(3,"Administrador"),N()()}}function X3(t,e){t&1&&(F(0,"div")(1,"h2",9),U(2,"Registro del Especialista"),N(),ye(3,"app-registro-especialista"),N())}function e5(t,e){t&1&&(F(0,"div")(1,"h2",9),U(2,"Registro del Paciente"),N(),ye(3,"app-registro-paciente"),N())}function t5(t,e){t&1&&(F(0,"div")(1,"h2",9),U(2,"Registro del Administrador"),N(),ye(3,"app-registro-admin"),N())}function n5(t,e){if(t&1){let n=Er();F(0,"div",10)(1,"span"),U(2,"\xBFYa tienes una cuenta?"),N(),F(3,"a",11),Ee("click",function(){_r(n);let i=Ir();return wr(i.goTo("/authentication/login"))}),U(4,"Iniciar sesi\xF3n"),N()()}}var jm=class t{constructor(e,n){this.authService=e;this.router=n}tipoUsuario="paciente";esAdmin=!1;ngOnInit(){this.authService.getUser().subscribe(e=>{e&&e.role==="administrador"&&(this.esAdmin=!0)})}cambiarTipoUsuario(e){this.tipoUsuario=e}goTo(e){this.router.navigate([e])}static \u0275fac=function(n){return new(n||t)(Y(Mn),Y(At))};static \u0275cmp=mn({type:t,selectors:[["app-registro"]],decls:16,vars:5,consts:[[1,"registro-titulo"],[1,"user-type-selection"],[1,"user-type-button",3,"click"],["src","logoPaciente.png","alt","Paciente"],["src","logoEspecialista.png","alt","Especialista"],["class","user-type-button",3,"click",4,"ngIf"],[4,"ngIf"],["class","text-center mt-3 cuenta-texto",4,"ngIf"],["src","logoAdministrador.png","alt","Administrador"],[1,"registro-subtitulo"],[1,"text-center","mt-3","cuenta-texto"],["id","iniciar-sesion",1,"text-decoration-none","iniciar-sesion-link",3,"click"]],template:function(n,r){n&1&&(F(0,"h2",0),U(1,"Bienvenido al Registro"),N(),F(2,"div",1)(3,"button",2),Ee("click",function(){return r.cambiarTipoUsuario("paciente")}),ye(4,"img",3),F(5,"span"),U(6,"Paciente"),N()(),F(7,"button",2),Ee("click",function(){return r.cambiarTipoUsuario("especialista")}),ye(8,"img",4),F(9,"span"),U(10,"Especialista"),N()(),xe(11,J3,4,0,"button",5),N(),xe(12,X3,4,0,"div",6)(13,e5,4,0,"div",6)(14,t5,4,0,"div",6)(15,n5,5,0,"div",7)),n&2&&(G(11),W("ngIf",r.esAdmin),G(),W("ngIf",r.tipoUsuario==="especialista"),G(),W("ngIf",r.tipoUsuario==="paciente"),G(),W("ngIf",r.tipoUsuario==="administrador"),G(),W("ngIf",r.tipoUsuario!="administrador"))},dependencies:[eo,Om,Vm,Um],styles:[".registro-titulo[_ngcontent-%COMP%]{text-align:center;color:#154360;font-size:1.8rem;font-weight:700}.registro-subtitulo[_ngcontent-%COMP%]{text-align:center;color:#1e8449;font-size:1.5rem;font-weight:700;margin-top:1.5rem}.user-type-selection[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1.5rem;margin-top:2rem}.user-type-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1rem;width:150px;height:200px;border:none;background-color:#f2f3f4;border-radius:8px;box-shadow:0 4px 8px #0000001a;cursor:pointer;transition:transform .2s ease,background-color .2s ease}.user-type-button[_ngcontent-%COMP%]:hover{background-color:#60db94;transform:scale(1.05)}img[_ngcontent-%COMP%]{width:80px;height:80px;margin-bottom:.5rem}span[_ngcontent-%COMP%]{font-weight:700;color:#071721;margin-top:.5rem}.cuenta-texto[_ngcontent-%COMP%]{font-size:.9rem;color:#154360;text-align:center;margin-top:1rem}.iniciar-sesion-link[_ngcontent-%COMP%]{color:#0b311b;font-weight:700;text-decoration:none;margin-left:.3rem}.iniciar-sesion-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.captcha-container[_ngcontent-%COMP%]{margin-top:15px}.captcha-label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-control[_ngcontent-%COMP%]{padding:10px;width:100%;border-radius:5px;border:1px solid #ddd}"]})};var vb=Ud(Gl());var Bm=class t{constructor(e,n){this.authService=e;this.router=n}userMail="";userPWD="";msjError="";Login(){this.authService.login(this.userMail,this.userPWD).then(()=>{vb.default.fire({icon:"success",title:"\xA1Bienvenido!",text:"Has iniciado sesi\xF3n con \xE9xito.",timer:2e3,showConfirmButton:!1}),this.router.navigate(["/bienvenida"])}).catch(e=>{this.manejarErrores(e)})}manejarErrores(e){switch(e.code){case"auth/invalid-email":this.msjError="Email inv\xE1lido. Por favor, verifica el formato del correo.";break;case"auth/user-not-found":this.msjError="Usuario no encontrado. Por favor, revisa tus credenciales.";break;case"auth/wrong-password":this.msjError="Contrase\xF1a incorrecta. Vuelve a intentarlo.";break;case"auth/missing-password":this.msjError="Se necesita la contrase\xF1a.";break;case"auth/invalid-credential":this.msjError="Las credenciales no son v\xE1lidas.";break;default:this.msjError="Error: "+e.message;break}vb.default.fire({icon:"error",title:"Error en el inicio de sesi\xF3n",text:this.msjError,showConfirmButton:!0})}goTo(e){this.router.navigate([e])}setQuickAccess(e,n){this.userMail=e,this.userPWD=n}static \u0275fac=function(n){return new(n||t)(Y(Mn),Y(At))};static \u0275cmp=mn({type:t,selectors:[["app-login"]],decls:37,vars:2,consts:[[1,"overlay","d-flex","justify-content-center","align-items-center","vh-100"],[1,"card","p-4","shadow-lg",2,"width","600px","border-radius","20px"],[1,"text-center","mb-4"],[1,"quick-access-container","text-center","mb-3"],["type","button",1,"btn","quick-access-btn",3,"click"],["src","https://firebasestorage.googleapis.com/v0/b/prog2-c4fdc.appspot.com/o/images%2Fadmin1.jpeg?alt=media&token=a57cbd55-f2e1-4757-af16-eff8bdafa8bb","alt","Admin",1,"profile-image"],["src","https://firebasestorage.googleapis.com/v0/b/prog2-c4fdc.appspot.com/o/images%2FprimerPaciente2.jpeg?alt=media&token=99602e1f-cbf5-4875-9578-4abed68d326e","alt","Paciente 1",1,"profile-image"],["src","https://firebasestorage.googleapis.com/v0/b/prog2-c4fdc.appspot.com/o/images%2FsegundoPaciente2.jpeg?alt=media&token=5810d4e8-b42d-4700-92f7-9c2b0555f6e5","alt","Paciente 2",1,"profile-image"],["src","https://firebasestorage.googleapis.com/v0/b/prog2-c4fdc.appspot.com/o/images%2FtercerPaciente2.jpeg?alt=media&token=2db42b31-2a1c-4089-9cbb-83e135bde901","alt","Paciente 3",1,"profile-image"],["src","https://firebasestorage.googleapis.com/v0/b/prog2-c4fdc.appspot.com/o/images%2Fespecialista1.jpeg?alt=media&token=bf238ea3-3895-4bce-8c26-f4d0230180ec","alt","Especialista 1",1,"profile-image"],["src","https://firebasestorage.googleapis.com/v0/b/prog2-c4fdc.appspot.com/o/images%2Fespecialista2.jpeg?alt=media&token=6f0acb41-2667-4bf3-b506-c2a4da7a2e21","alt","Especialista 2",1,"profile-image"],[3,"ngSubmit"],[1,"form-group"],["for","nombre"],["type","email","id","nombre","name","email","placeholder","Ingrese su email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","clave"],["type","password","id","clave","name","password","placeholder","Ingrese su contrase\xF1a","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-center","mb-3"],["id","olvido-contrasena",1,"text-decoration-none"],["type","submit",1,"btn","btn-warning","btn-block","rounded-pill","font-weight-bold"],[1,"text-center","mt-3"],["id","registrarse",1,"text-decoration-none",3,"click"]],template:function(n,r){n&1&&(F(0,"div",0)(1,"div",1)(2,"h1",2),U(3,"Inicio Sesi\xF3n"),N(),F(4,"div",3)(5,"button",4),Ee("click",function(){return r.setQuickAccess("celusal704@gmail.com","123456")}),ye(6,"img",5),N(),F(7,"button",4),Ee("click",function(){return r.setQuickAccess("demaiojuanpablo05@gmail.com","123456")}),ye(8,"img",6),N(),F(9,"button",4),Ee("click",function(){return r.setQuickAccess("whole.bovid.bmlb@flashpost.net","123456")}),ye(10,"img",7),N(),F(11,"button",4),Ee("click",function(){return r.setQuickAccess("surprising.amphibian.jhgc@flashpost.net","123456")}),ye(12,"img",8),N(),F(13,"button",4),Ee("click",function(){return r.setQuickAccess("demaiojuanpablo2005@gmail.com","123456")}),ye(14,"img",9),N(),F(15,"button",4),Ee("click",function(){return r.setQuickAccess("integral.pig.qzgk@flashpost.net","123456")}),ye(16,"img",10),N()(),F(17,"form",11),Ee("ngSubmit",function(){return r.Login()}),F(18,"div",12)(19,"label",13),U(20,"Email"),N(),F(21,"input",14),_f("ngModelChange",function(o){return bv(r.userMail,o)||(r.userMail=o),o}),N()(),F(22,"div",12)(23,"label",15),U(24,"Contrase\xF1a"),N(),F(25,"input",16),_f("ngModelChange",function(o){return bv(r.userPWD,o)||(r.userPWD=o),o}),N()(),F(26,"div",17)(27,"a",18),U(28,"\xBFOlvid\xF3 su contrase\xF1a?"),N()(),F(29,"button",19),U(30,"Ingresar"),N(),F(31,"div",20)(32,"div")(33,"span"),U(34,"\xBFNo tienes una cuenta?"),N(),F(35,"a",21),Ee("click",function(){return r.goTo("/authentication/registro")}),U(36,"Registrarse"),N()()()()()()),n&2&&(G(21),vf("ngModel",r.userMail),G(4),vf("ngModel",r.userPWD))},dependencies:[wo,Vr,vo,_o,gb,mb,pb],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Oswald,sans-serif;background-color:#2a2a2a}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(#000000b3,#000000b3);display:flex;justify-content:center;align-items:center;z-index:-1}.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#b7f4f9e6;border:none;box-shadow:0 4px 8px #0003;border-radius:20px;padding:40px;width:600px;height:auto;max-width:90%;min-height:600px;margin:20px auto;text-align:center}h1[_ngcontent-%COMP%]{color:#333;text-align:center;margin-bottom:25px}.form-control[_ngcontent-%COMP%]{padding:15px;background-color:#fff;border-radius:10px;border:2px solid #ddd;transition:all .3s ease;text-align:center;width:250px}.form-control[_ngcontent-%COMP%]:focus{border-color:#fc0;box-shadow:0 0 8px #ffcc0080}label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700;display:block}#registrarse[_ngcontent-%COMP%], #olvido-contrasena[_ngcontent-%COMP%]{margin:5px 0;font-weight:700;color:#000;text-decoration:none}#registrarse[_ngcontent-%COMP%]:hover, #olvido-contrasena[_ngcontent-%COMP%]:hover{color:#fc0;cursor:pointer}span[_ngcontent-%COMP%]{font-weight:700}button[_ngcontent-%COMP%]{background-color:#fc0;border-radius:50px;padding:10px 20px;font-weight:700;border:none;transition:all .3s ease;box-shadow:0 4px 6px #0003;margin:10px}button[_ngcontent-%COMP%]:hover{background-color:#ffcc0083;transform:scale(1.05);box-shadow:0 6px 8px #0000004d}button[_ngcontent-%COMP%]:focus{outline:none}.quick-access-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:20px;width:100%;flex-wrap:wrap}.quick-access-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#fff;color:#333;border:2px solid #ddd;border-radius:10px;padding:8px;text-decoration:none;margin:5px;width:80px;transition:all .3s ease;font-size:.9em}.quick-access-btn[_ngcontent-%COMP%]:hover{background-color:#fc0;color:#fff}.quick-access-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:33px;border-radius:50%}']})};var r5=[{path:"registro",component:jm},{path:"login",component:Bm}],$m=class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Ct({type:t});static \u0275inj=bt({imports:[Ha.forChild(r5),Ha]})};var i5=[],Hm=class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Ct({type:t});static \u0275inj=bt({imports:[Ha.forChild(i5),Ha]})};var o5=new Q("recaptcha-language"),s5=new Q("recaptcha-base-url"),a5=new Q("recaptcha-nonce-tag"),gee=new Q("recaptcha-settings"),oN=new Q("recaptcha-v3-site-key"),c5=new Q("recaptcha-loader-options");function u5(t,e,n,{url:r,lang:i,nonce:o}={}){window.ng2recaptchaloaded=()=>{n(grecaptcha)};let s=document.createElement("script");s.innerHTML="";let{url:a,nonce:u}=e(new URL(r||"https://www.google.com/recaptcha/api.js"));a.searchParams.set("render",t==="explicit"?t:t.key),a.searchParams.set("onload","ng2recaptchaloaded"),a.searchParams.set("trustedtypes","true"),i&&a.searchParams.set("hl",i),s.src=a.href;let d=u||o;d&&s.setAttribute("nonce",d),s.async=!0,s.defer=!0,document.head.appendChild(s)}function l5({v3SiteKey:t,onBeforeLoad:e,onLoaded:n}){let r=t?{key:t}:"explicit";sN.loadScript(r,e,n)}var sN={loadScript:u5,newLoadScript:l5};function d5(t){return t.asObservable().pipe(Xt(e=>e!==null))}var aN=(()=>{class t{static{this.ready=null}constructor(n,r,i,o,s,a){this.platformId=n,this.language=r,this.baseUrl=i,this.nonce=o,this.v3SiteKey=s,this.options=a;let u=this.init();this.ready=u?d5(u):ce()}init(){if(t.ready)return t.ready;if(!Ov(this.platformId))return;let n=new at(null);return t.ready=n,sN.newLoadScript({v3SiteKey:this.v3SiteKey,onBeforeLoad:r=>{if(this.options?.onBeforeLoad)return this.options.onBeforeLoad(r);let i=new URL(this.baseUrl??r);return this.language&&i.searchParams.set("hl",this.language),{url:i,nonce:this.nonce}},onLoaded:r=>{let i=r;this.options?.onLoaded&&(i=this.options.onLoaded(r)),n.next(i)}}),n}static{this.\u0275fac=function(r){return new(r||t)(ee(An),ee(o5,8),ee(s5,8),ee(a5,8),ee(oN,8),ee(c5,8))}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac})}}return t})();var h5=(()=>{class t{constructor(n,r,i){this.recaptchaLoader=r,this.zone=n,this.siteKey=i,this.init()}get onExecute(){return this.onExecuteSubject||(this.onExecuteSubject=new st,this.onExecuteObservable=this.onExecuteSubject.asObservable()),this.onExecuteObservable}get onExecuteError(){return this.onExecuteErrorSubject||(this.onExecuteErrorSubject=new st,this.onExecuteErrorObservable=this.onExecuteErrorSubject.asObservable()),this.onExecuteErrorObservable}execute(n){let r=new st;return this.grecaptcha?this.executeActionWithSubject(n,r):(this.actionBacklog||(this.actionBacklog=[]),this.actionBacklog.push([n,r])),r.asObservable()}executeActionWithSubject(n,r){let i=o=>{this.zone.run(()=>{r.error(o),this.onExecuteErrorSubject&&this.onExecuteErrorSubject.next({action:n,error:o})})};this.zone.runOutsideAngular(()=>{try{this.grecaptcha.execute(this.siteKey,{action:n}).then(o=>{this.zone.run(()=>{r.next(o),r.complete(),this.onExecuteSubject&&this.onExecuteSubject.next({action:n,token:o})})},i)}catch(o){i(o)}})}init(){this.recaptchaLoader.ready.subscribe(n=>{this.grecaptcha=n,this.actionBacklog&&this.actionBacklog.length>0&&(this.actionBacklog.forEach(([r,i])=>this.executeActionWithSubject(r,i)),this.actionBacklog=void 0)})}static{this.\u0275fac=function(r){return new(r||t)(ee(Fe),ee(aN),ee(oN))}}static{this.\u0275prov=te({token:t,factory:t.\u0275fac})}}return t})(),cN=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ct({type:t})}static{this.\u0275inj=bt({providers:[h5,aN]})}}return t})();var qm=class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Ct({type:t});static \u0275inj=bt({imports:[Eu,Hm,cN]})};var uN=class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=Ct({type:t});static \u0275inj=bt({imports:[Eu,iN,rN,$m,qm]})};export{_e as a,te as b,bt as c,ee as d,mn as e,Ct as f,_r as g,wr as h,Ze as i,P7 as j,G as k,Y as l,xe as m,W as n,F as o,N as p,ye as q,Er as r,Ee as s,Ir as t,nL as u,U as v,oL as w,yf as x,sL as y,aL as z,vf as A,bv as B,_f as C,tT as D,L7 as E,V7 as F,U7 as G,j7 as H,B7 as I,$7 as J,pK as K,bT as L,eo as M,mK as N,Eu as O,BK as P,UV as Q,At as R,uQ as S,Ha as T,Vr as U,ae as V,vo as W,_o as X,pb as Y,mb as Z,wo as _,Ms as $,Ns as aa,eN as ba,DX as ca,TX as da,Ac as ea,rN as fa,iN as ga,ZQ as ha,JQ as ia,zY as ja,GY as ka,_i as la,TJ as ma,Nl as na,Fr as oa,pm as pa,mm as qa,SJ as ra,AJ as sa,gm as ta,RJ as ua,Mn as va,Gl as wa,Lm as xa,jm as ya,uN as za};
