var TN=Object.create;var Kc=Object.defineProperty,DN=Object.defineProperties,bN=Object.getOwnPropertyDescriptor,CN=Object.getOwnPropertyDescriptors,SN=Object.getOwnPropertyNames,lw=Object.getOwnPropertySymbols,hw=Object.getPrototypeOf,fw=Object.prototype.hasOwnProperty,AN=Object.prototype.propertyIsEnumerable,RN=Reflect.get;var dw=(t,e,n)=>e in t?Kc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||={})fw.call(e,n)&&dw(t,n,e[n]);if(lw)for(var n of lw(e))AN.call(e,n)&&dw(t,n,e[n]);return t},_e=(t,e)=>DN(t,CN(e));var Qq=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),NN=(t,e)=>{for(var n in e)Kc(t,n,{get:e[n],enumerable:!0})},MN=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of SN(e))!fw.call(t,i)&&i!==n&&Kc(t,i,{get:()=>e[i],enumerable:!(r=bN(e,i))||r.enumerable});return t};var Yq=(t,e,n)=>(n=t!=null?TN(hw(t)):{},MN(e||!t||!t.__esModule?Kc(n,"default",{value:t,enumerable:!0}):n,t));var ur=(t,e,n)=>RN(hw(t),n,e);var _=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});function pw(t,e){return Object.is(t,e)}var je=null,Qc=!1,Yc=1,Mn=Symbol("SIGNAL");function he(t){let e=je;return je=t,e}function gw(){return je}var Go={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function of(t){if(Qc)throw new Error("");if(je===null)return;je.consumerOnSignalRead(t);let e=je.nextProducerIndex++;if(eu(je),e<je.producerNode.length&&je.producerNode[e]!==t&&zo(je)){let n=je.producerNode[e];Xc(n,je.producerIndexOfThis[e])}je.producerNode[e]!==t&&(je.producerNode[e]=t,je.producerIndexOfThis[e]=zo(je)?_w(t,je,e):0),je.producerLastReadVersion[e]=t.version}function PN(){Yc++}function mw(t){if(!(zo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Yc)){if(!t.producerMustRecompute(t)&&!cf(t)){t.dirty=!1,t.lastCleanEpoch=Yc;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Yc}}function yw(t){if(t.liveConsumerNode===void 0)return;let e=Qc;Qc=!0;try{for(let n of t.liveConsumerNode)n.dirty||xN(n)}finally{Qc=e}}function vw(){return je?.consumerAllowSignalWrites!==!1}function xN(t){t.dirty=!0,yw(t),t.consumerMarkedDirty?.(t)}function Jc(t){return t&&(t.nextProducerIndex=0),he(t)}function af(t,e){if(he(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(zo(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Xc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function cf(t){eu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(mw(n),r!==n.version))return!0}return!1}function uf(t){if(eu(t),zo(t))for(let e=0;e<t.producerNode.length;e++)Xc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function _w(t,e,n){if(Iw(t),t.liveConsumerNode.length===0&&ww(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=_w(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Xc(t,e){if(Iw(t),t.liveConsumerNode.length===1&&ww(t))for(let r=0;r<t.producerNode.length;r++)Xc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];eu(i),i.producerIndexOfThis[r]=e}}function zo(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function eu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Iw(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function ww(t){return t.producerNode!==void 0}function Ew(t){let e=Object.create(kN);e.computation=t;let n=()=>{if(mw(e),of(e),e.value===Zc)throw e.error;return e.value};return n[Mn]=e,n}var rf=Symbol("UNSET"),sf=Symbol("COMPUTING"),Zc=Symbol("ERRORED"),kN=_e(L({},Go),{value:rf,dirty:!0,error:null,equal:pw,producerMustRecompute(t){return t.value===rf||t.value===sf},producerRecomputeValue(t){if(t.value===sf)throw new Error("Detected cycle in computations.");let e=t.value;t.value=sf;let n=Jc(t),r;try{r=t.computation()}catch(i){r=Zc,t.error=i}finally{af(t,n)}if(e!==rf&&e!==Zc&&r!==Zc&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function ON(){throw new Error}var Tw=ON;function Dw(){Tw()}function bw(t){Tw=t}var LN=null;function Cw(t){let e=Object.create(Aw);e.value=t;let n=()=>(of(e),e.value);return n[Mn]=e,n}function lf(t,e){vw()||Dw(),t.equal(t.value,e)||(t.value=e,FN(t))}function Sw(t,e){vw()||Dw(),lf(t,e(t.value))}var Aw=_e(L({},Go),{equal:pw,value:void 0});function FN(t){t.version++,PN(),yw(t),LN?.()}function X(t){return typeof t=="function"}function Fi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var tu=Fi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function qr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Me=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(s){e=s instanceof tu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Rw(s)}catch(o){e=e??[],o instanceof tu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new tu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Rw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&qr(n,e)}remove(e){let{_finalizers:n}=this;n&&qr(n,e),e instanceof t&&e._removeParent(this)}};Me.EMPTY=(()=>{let t=new Me;return t.closed=!0,t})();var df=Me.EMPTY;function nu(t){return t instanceof Me||t&&"closed"in t&&X(t.remove)&&X(t.add)&&X(t.unsubscribe)}function Rw(t){X(t)?t():t.unsubscribe()}var Wt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Vi={setTimeout(t,e,...n){let{delegate:r}=Vi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Vi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ru(t){Vi.setTimeout(()=>{let{onUnhandledError:e}=Wt;if(e)e(t);else throw t})}function Wo(){}var Nw=hf("C",void 0,void 0);function Mw(t){return hf("E",void 0,t)}function Pw(t){return hf("N",t,void 0)}function hf(t,e,n){return{kind:t,value:e,error:n}}var zr=null;function Ui(t){if(Wt.useDeprecatedSynchronousErrorHandling){let e=!zr;if(e&&(zr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=zr;if(zr=null,n)throw r}}else t()}function xw(t){Wt.useDeprecatedSynchronousErrorHandling&&zr&&(zr.errorThrown=!0,zr.error=t)}var Gr=class extends Me{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,nu(e)&&e.add(this)):this.destination=jN}static create(e,n,r){return new ji(e,n,r)}next(e){this.isStopped?pf(Pw(e),this):this._next(e)}error(e){this.isStopped?pf(Mw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?pf(Nw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},VN=Function.prototype.bind;function ff(t,e){return VN.call(t,e)}var gf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){iu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){iu(r)}else iu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){iu(n)}}},ji=class extends Gr{constructor(e,n,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Wt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ff(e.next,s),error:e.error&&ff(e.error,s),complete:e.complete&&ff(e.complete,s)}):i=e}this.destination=new gf(i)}};function iu(t){Wt.useDeprecatedSynchronousErrorHandling?xw(t):ru(t)}function UN(t){throw t}function pf(t,e){let{onStoppedNotification:n}=Wt;n&&Vi.setTimeout(()=>n(t,e))}var jN={closed:!0,next:Wo,error:UN,complete:Wo};var Bi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dt(t){return t}function mf(...t){return yf(t)}function yf(t){return t.length===0?Dt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var oe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=$N(n)?n:new ji(n,r,i);return Ui(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=kw(r),new r((i,s)=>{let o=new ji({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Bi](){return this}pipe(...n){return yf(n)(this)}toPromise(n){return n=kw(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function kw(t){var e;return(e=t??Wt.Promise)!==null&&e!==void 0?e:Promise}function BN(t){return t&&X(t.next)&&X(t.error)&&X(t.complete)}function $N(t){return t&&t instanceof Gr||BN(t)&&nu(t)}function vf(t){return X(t?.lift)}function ae(t){return e=>{if(vf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function re(t,e,n,r,i){return new _f(t,e,n,r,i)}var _f=class extends Gr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function $i(){return ae((t,e)=>{let n=null;t._refCount++;let r=re(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Hi=class extends oe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,vf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Me;let n=this.getSubject();e.add(this.source.subscribe(re(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Me.EMPTY)}return e}refCount(){return $i()(this)}};var Ow=Fi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var dt=(()=>{class t extends oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new su(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ow}next(n){Ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?df:(this.currentObservers=null,s.push(n),new Me(()=>{this.currentObservers=null,qr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new oe;return n.source=this,n}}return t.create=(e,n)=>new su(e,n),t})(),su=class extends dt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:df}};var Be=class extends dt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var If={now(){return(If.delegate||Date).now()},delegate:void 0};var ou=class extends Me{constructor(e,n){super()}schedule(e,n=0){return this}};var Ko={setInterval(t,e,...n){let{delegate:r}=Ko;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ko;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var qi=class extends ou{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Ko.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ko.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,qr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var zi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};zi.now=If.now;var Gi=class extends zi{constructor(e,n=zi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Qo=new Gi(qi);var au=class extends qi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var cu=class extends Gi{};var wf=new cu(au);var bt=new oe(t=>t.complete());function Lw(t){return t&&X(t.schedule)}function Fw(t){return t[t.length-1]}function uu(t){return X(Fw(t))?t.pop():void 0}function lr(t){return Lw(Fw(t))?t.pop():void 0}function Ef(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Uw(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Vw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wr(t){return this instanceof Wr?(this.v=t,this):new Wr(t)}function jw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(b){return Promise.resolve(b).then(y,p)}}function a(y,b){r[y]&&(i[y]=function(N){return new Promise(function(R,O){s.push([y,N,R,O])>1||u(y,N)})},b&&(i[y]=b(i[y])))}function u(y,b){try{l(r[y](b))}catch(N){m(s[0][3],N)}}function l(y){y.value instanceof Wr?Promise.resolve(y.value.v).then(h,p):m(s[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,b){y(b),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Bw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Vw=="function"?Vw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var lu=t=>t&&typeof t.length=="number"&&typeof t!="function";function du(t){return X(t?.then)}function hu(t){return X(t[Bi])}function fu(t){return Symbol.asyncIterator&&X(t?.[Symbol.asyncIterator])}function pu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function HN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var gu=HN();function mu(t){return X(t?.[gu])}function yu(t){return jw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Wr(n.read());if(i)return yield Wr(void 0);yield yield Wr(r)}}finally{n.releaseLock()}})}function vu(t){return X(t?.getReader)}function Oe(t){if(t instanceof oe)return t;if(t!=null){if(hu(t))return qN(t);if(lu(t))return zN(t);if(du(t))return GN(t);if(fu(t))return $w(t);if(mu(t))return WN(t);if(vu(t))return KN(t)}throw pu(t)}function qN(t){return new oe(e=>{let n=t[Bi]();if(X(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function zN(t){return new oe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function GN(t){return new oe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ru)})}function WN(t){return new oe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function $w(t){return new oe(e=>{QN(t,e).catch(n=>e.error(n))})}function KN(t){return $w(yu(t))}function QN(t,e){var n,r,i,s;return Uw(this,void 0,void 0,function*(){try{for(n=Bw(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function vt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Pn(t,e=0){return ae((n,r)=>{n.subscribe(re(r,i=>vt(r,t,()=>r.next(i),e),()=>vt(r,t,()=>r.complete(),e),i=>vt(r,t,()=>r.error(i),e)))})}function dr(t,e=0){return ae((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Hw(t,e){return Oe(t).pipe(dr(e),Pn(e))}function qw(t,e){return Oe(t).pipe(dr(e),Pn(e))}function zw(t,e){return new oe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Gw(t,e){return new oe(n=>{let r;return vt(n,e,()=>{r=t[gu](),vt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function _u(t,e){if(!t)throw new Error("Iterable cannot be null");return new oe(n=>{vt(n,e,()=>{let r=t[Symbol.asyncIterator]();vt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Ww(t,e){return _u(yu(t),e)}function Kw(t,e){if(t!=null){if(hu(t))return Hw(t,e);if(lu(t))return zw(t,e);if(du(t))return qw(t,e);if(fu(t))return _u(t,e);if(mu(t))return Gw(t,e);if(vu(t))return Ww(t,e)}throw pu(t)}function De(t,e){return e?Kw(t,e):Oe(t)}function Q(...t){let e=lr(t);return De(t,e)}function Wi(t,e){let n=X(t)?t:()=>t,r=i=>i.error(n());return new oe(e?i=>e.schedule(r,0,i):r)}function Tf(t){return!!t&&(t instanceof oe||X(t.lift)&&X(t.subscribe))}var xn=Fi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ie(t,e){return ae((n,r)=>{let i=0;n.subscribe(re(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:YN}=Array;function ZN(t,e){return YN(e)?t(...e):t(e)}function Iu(t){return ie(e=>ZN(t,e))}var{isArray:JN}=Array,{getPrototypeOf:XN,prototype:eM,keys:tM}=Object;function wu(t){if(t.length===1){let e=t[0];if(JN(e))return{args:e,keys:null};if(nM(e)){let n=tM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function nM(t){return t&&typeof t=="object"&&XN(t)===eM}function Eu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Yo(...t){let e=lr(t),n=uu(t),{args:r,keys:i}=wu(t);if(r.length===0)return De([],e);let s=new oe(rM(r,e,i?o=>Eu(i,o):Dt));return n?s.pipe(Iu(n)):s}function rM(t,e,n=Dt){return r=>{Qw(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)Qw(e,()=>{let l=De(t[u],e),h=!1;l.subscribe(re(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Qw(t,e,n){t?vt(n,t,e):e()}function Yw(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?b(N):u.push(N),b=N=>{s&&e.next(N),l++;let R=!1;Oe(n(N,h++)).subscribe(re(e,O=>{i?.(O),s?y(O):e.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let O=u.shift();o?vt(e,o,()=>b(O)):b(O)}m()}catch(O){e.error(O)}}))};return t.subscribe(re(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Le(t,e,n=1/0){return X(e)?Le((r,i)=>ie((s,o)=>e(r,s,i,o))(Oe(t(r,i))),n):(typeof e=="number"&&(n=e),ae((r,i)=>Yw(r,i,t,n)))}function Ki(t=1/0){return Le(Dt,t)}function Zw(){return Ki(1)}function Qi(...t){return Zw()(De(t,lr(t)))}function Tu(t){return new oe(e=>{Oe(t()).subscribe(e)})}function iM(...t){let e=uu(t),{args:n,keys:r}=wu(t),i=new oe(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Oe(n[h]).subscribe(re(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?Eu(r,a):a),s.complete())}))}});return e?i.pipe(Iu(e)):i}function Ot(t,e){return ae((n,r)=>{let i=0;n.subscribe(re(r,s=>t.call(e,s,i++)&&r.next(s)))})}function hr(t){return ae((e,n)=>{let r=null,i=!1,s;r=e.subscribe(re(n,void 0,void 0,o=>{s=Oe(t(o,hr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Jw(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(re(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function Kr(t,e){return X(e)?Le(t,e,1):Le(t,1)}function Df(t,e=Qo){return ae((n,r)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=s;s=null,r.next(l)}};function u(){let l=o+t,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}n.subscribe(re(r,l=>{s=l,o=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function fr(t){return ae((e,n)=>{let r=!1;e.subscribe(re(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function kn(t){return t<=0?()=>bt:ae((e,n)=>{let r=0;e.subscribe(re(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function bf(t){return ie(()=>t)}function Du(t=sM){return ae((e,n)=>{let r=!1;e.subscribe(re(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function sM(){return new xn}function Zo(t){return ae((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function sn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ot((i,s)=>t(i,s,r)):Dt,kn(1),n?fr(e):Du(()=>new xn))}function Yi(t){return t<=0?()=>bt:ae((e,n)=>{let r=[];e.subscribe(re(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Cf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ot((i,s)=>t(i,s,r)):Dt,Yi(1),n?fr(e):Du(()=>new xn))}function Sf(t,e){return ae(Jw(t,e,arguments.length>=2,!0))}function Af(...t){let e=lr(t);return ae((n,r)=>{(e?Qi(t,n,e):Qi(t,n)).subscribe(r)})}function ht(t,e){return ae((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(re(r,u=>{i?.unsubscribe();let l=0,h=s++;Oe(t(u,h)).subscribe(i=re(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Rf(t){return ae((e,n)=>{Oe(t).subscribe(re(n,()=>n.complete(),Wo)),!n.closed&&e.subscribe(n)})}function Fe(t,e,n){let r=X(t)||e||n?{next:t,error:e,complete:n}:t;return r?ae((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(re(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Dt}var FE="https://g.co/ng/security#xss",W=class extends Error{constructor(e,n){super(xp(e,n)),this.code=e}};function xp(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function oa(t){return{toString:t}.toString()}var bu="__parameters__";function oM(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function VE(t,e,n){return oa(()=>{let r=oM(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(bu)?u[bu]:Object.defineProperty(u,bu,{value:[]})[bu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Te(t){for(let e in t)if(t[e]===Te)return e;throw Error("Could not find renamed property on target object.")}function aM(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function gt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(gt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Xw(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var cM=Te({__forward_ref__:Te});function UE(t){return t.__forward_ref__=UE,t.toString=function(){return gt(this())},t}function ft(t){return jE(t)?t():t}function jE(t){return typeof t=="function"&&t.hasOwnProperty(cM)&&t.__forward_ref__===UE}function q(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ms(t){return{providers:t.providers||[],imports:t.imports||[]}}function il(t){return eE(t,$E)||eE(t,HE)}function BE(t){return il(t)!==null}function eE(t,e){return t.hasOwnProperty(e)?t[e]:null}function uM(t){let e=t&&(t[$E]||t[HE]);return e||null}function tE(t){return t&&(t.hasOwnProperty(nE)||t.hasOwnProperty(lM))?t[nE]:null}var $E=Te({\u0275prov:Te}),nE=Te({\u0275inj:Te}),HE=Te({ngInjectableDef:Te}),lM=Te({ngInjectorDef:Te}),$=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=q({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function qE(t){return t&&!!t.\u0275providers}var dM=Te({\u0275cmp:Te}),hM=Te({\u0275dir:Te}),fM=Te({\u0275pipe:Te}),pM=Te({\u0275mod:Te}),ku=Te({\u0275fac:Te}),Xo=Te({__NG_ELEMENT_ID__:Te}),rE=Te({__NG_ENV_ID__:Te});function sl(t){return typeof t=="string"?t:t==null?"":String(t)}function gM(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():sl(t)}function mM(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new W(-200,t)}function kp(t,e){throw new W(-201,!1)}var ne=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ne||{}),Hf;function zE(){return Hf}function Lt(t){let e=Hf;return Hf=t,e}function GE(t,e,n){let r=il(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ne.Optional)return null;if(e!==void 0)return e;kp(t,"Injector")}var yM={},ea=yM,qf="__NG_DI_FLAG__",Ou="ngTempTokenPath",vM="ngTokenPath",_M=/\n/gm,IM="\u0275",iE="__source",ts;function wM(){return ts}function pr(t){let e=ts;return ts=t,e}function EM(t,e=ne.Default){if(ts===void 0)throw new W(-203,!1);return ts===null?GE(t,void 0,e):ts.get(t,e&ne.Optional?null:void 0,e)}function j(t,e=ne.Default){return(zE()||EM)(ft(t),e)}function k(t,e=ne.Default){return j(t,ol(e))}function ol(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function zf(t){let e=[];for(let n=0;n<t.length;n++){let r=ft(t[n]);if(Array.isArray(r)){if(r.length===0)throw new W(900,!1);let i,s=ne.Default;for(let o=0;o<r.length;o++){let a=r[o],u=TM(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(j(i,s))}else e.push(j(r))}return e}function WE(t,e){return t[qf]=e,t.prototype[qf]=e,t}function TM(t){return t[qf]}function DM(t,e,n,r){let i=t[Ou];throw e[iE]&&i.unshift(e[iE]),t.message=bM(`
`+t.message,i,n,r),t[vM]=i,t[Ou]=null,t}function bM(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==IM?t.slice(2):t;let i=gt(e);if(Array.isArray(e))i=e.map(gt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):gt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(_M,`
  `)}`}var Ke=WE(VE("Optional"),8);var Op=WE(VE("SkipSelf"),4);function rs(t,e){let n=t.hasOwnProperty(ku);return n?t[ku]:null}function Lp(t,e){t.forEach(n=>Array.isArray(n)?Lp(n,e):e(n))}function KE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Lu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function CM(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function SM(t,e,n){let r=aa(t,e);return r>=0?t[r|1]=n:(r=~r,CM(t,r,e,n)),r}function Nf(t,e){let n=aa(t,e);if(n>=0)return t[n|1]}function aa(t,e){return AM(t,e,1)}function AM(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var is={},Ft=[],ss=new $(""),QE=new $("",-1),YE=new $(""),Fu=class{get(e,n=ea){if(n===ea){let r=new Error(`NullInjectorError: No provider for ${gt(e)}!`);throw r.name="NullInjectorError",r}return n}},ZE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(ZE||{}),cn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(cn||{}),yr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(yr||{});function RM(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Gf(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];MM(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function NM(t){return t===3||t===4||t===6}function MM(t){return t.charCodeAt(0)===64}function ta(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?sE(t,n,i,null,e[++r]):sE(t,n,i,null,null))}}return t}function sE(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var JE="ng-template";function PM(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&RM(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Fp(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Fp(t){return t.type===4&&t.value!==JE}function xM(t,e,n){let r=t.type===4&&!n?JE:t.value;return e===r}function kM(t,e,n){let r=4,i=t.attrs,s=i!==null?FM(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Kt(r)&&!Kt(u))return!1;if(o&&Kt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!xM(t,u,n)||u===""&&e.length===1){if(Kt(r))return!1;o=!0}}else if(r&8){if(i===null||!PM(t,i,u,n)){if(Kt(r))return!1;o=!0}}else{let l=e[++a],h=OM(u,i,Fp(t),n);if(h===-1){if(Kt(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Kt(r))return!1;o=!0}}}}return Kt(r)||o}function Kt(t){return(t&1)===0}function OM(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return VM(e,t)}function LM(t,e,n=!1){for(let r=0;r<e.length;r++)if(kM(t,e[r],n))return!0;return!1}function FM(t){for(let e=0;e<t.length;e++){let n=t[e];if(NM(n))return e}return t.length}function VM(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function oE(t,e){return t?":not("+e.trim()+")":e}function UM(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Kt(o)&&(e+=oE(s,i),i=""),r=o,s=s||!Kt(r);n++}return i!==""&&(e+=oE(s,i)),e}function jM(t){return t.map(UM).join(",")}function BM(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Kt(i))break;i=s}r++}return{attrs:e,classes:n}}function XE(t){return oa(()=>{let e=iT(t),n=_e(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ZE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||cn.Emulated,styles:t.styles||Ft,_:null,schemas:t.schemas||null,tView:null,id:""});sT(n);let r=t.dependencies;return n.directiveDefs=cE(r,!1),n.pipeDefs=cE(r,!0),n.id=qM(n),n})}function $M(t){return vr(t)||eT(t)}function HM(t){return t!==null}function ys(t){return oa(()=>({type:t.type,bootstrap:t.bootstrap||Ft,declarations:t.declarations||Ft,imports:t.imports||Ft,exports:t.exports||Ft,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function aE(t,e){if(t==null)return is;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=yr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==yr.None?[r,a]:r,e[s]=o):n[s]=r}return n}function ca(t){return oa(()=>{let e=iT(t);return sT(e),e})}function vr(t){return t[dM]||null}function eT(t){return t[hM]||null}function tT(t){return t[fM]||null}function nT(t){let e=vr(t)||eT(t)||tT(t);return e!==null?e.standalone:!1}function rT(t,e){let n=t[pM]||null;if(!n&&e===!0)throw new Error(`Type ${gt(t)} does not have '\u0275mod' property.`);return n}function iT(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||is,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ft,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:aE(t.inputs,e),outputs:aE(t.outputs),debugInfo:null}}function sT(t){t.features?.forEach(e=>e(t))}function cE(t,e){if(!t)return null;let n=e?tT:$M;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(HM)}function qM(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function hn(t){return{\u0275providers:t}}function zM(...t){return{\u0275providers:oT(!0,t),\u0275fromNgModule:!0}}function oT(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Lp(e,o=>{let a=o;Wf(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&aT(i,s),n}function aT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Vp(i,s=>{e(s,r)})}}function Wf(t,e,n,r){if(t=ft(t),!t)return!1;let i=null,s=tE(t),o=!s&&vr(t);if(!s&&!o){let u=t.ngModule;if(s=tE(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)Wf(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Lp(s.imports,h=>{Wf(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&aT(l,e)}if(!a){let l=rs(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ft},i),e({provide:YE,useValue:i,multi:!0},i),e({provide:ss,useValue:()=>j(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;Vp(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Vp(t,e){for(let n of t)qE(n)&&(n=n.\u0275providers),Array.isArray(n)?Vp(n,e):e(n)}var GM=Te({provide:String,useValue:Te});function cT(t){return t!==null&&typeof t=="object"&&GM in t}function WM(t){return!!(t&&t.useExisting)}function KM(t){return!!(t&&t.useFactory)}function os(t){return typeof t=="function"}function QM(t){return!!t.useClass}var al=new $(""),Ru={},YM={},Mf;function Up(){return Mf===void 0&&(Mf=new Fu),Mf}var Ct=class{},na=class extends Ct{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qf(e,o=>this.processProvider(o)),this.records.set(QE,Zi(void 0,this)),i.has("environment")&&this.records.set(Ct,Zi(void 0,this));let s=this.records.get(al);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(YE,Ft,ne.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=he(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),he(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=pr(this),r=Lt(void 0),i;try{return e()}finally{pr(n),Lt(r)}}get(e,n=ea,r=ne.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(rE))return e[rE](this);r=ol(r);let i,s=pr(this),o=Lt(void 0);try{if(!(r&ne.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=tP(e)&&il(e);l&&this.injectableDefInScope(l)?u=Zi(Kf(e),Ru):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ne.Self?Up():this.parent;return n=r&ne.Optional&&n===ea?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Ou]=a[Ou]||[]).unshift(gt(e)),s)throw a;return DM(a,e,"R3InjectorError",this.source)}else throw a}finally{Lt(o),pr(s)}}resolveInjectorInitializers(){let e=he(null),n=pr(this),r=Lt(void 0),i;try{let s=this.get(ss,Ft,ne.Self);for(let o of s)o()}finally{pr(n),Lt(r),he(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(gt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new W(205,!1)}processProvider(e){e=ft(e);let n=os(e)?e:ft(e&&e.provide),r=JM(e);if(!os(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Zi(void 0,Ru,!0),i.factory=()=>zf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=he(null);try{return n.value===Ru&&(n.value=YM,n.value=n.factory()),typeof n.value=="object"&&n.value&&eP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{he(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ft(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Kf(t){let e=il(t),n=e!==null?e.factory:rs(t);if(n!==null)return n;if(t instanceof $)throw new W(204,!1);if(t instanceof Function)return ZM(t);throw new W(204,!1)}function ZM(t){if(t.length>0)throw new W(204,!1);let n=uM(t);return n!==null?()=>n.factory(t):()=>new t}function JM(t){if(cT(t))return Zi(void 0,t.useValue);{let e=uT(t);return Zi(e,Ru)}}function uT(t,e,n){let r;if(os(t)){let i=ft(t);return rs(i)||Kf(i)}else if(cT(t))r=()=>ft(t.useValue);else if(KM(t))r=()=>t.useFactory(...zf(t.deps||[]));else if(WM(t))r=()=>j(ft(t.useExisting));else{let i=ft(t&&(t.useClass||t.provide));if(XM(t))r=()=>new i(...zf(t.deps));else return rs(i)||Kf(i)}return r}function Zi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function XM(t){return!!t.deps}function eP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function tP(t){return typeof t=="function"||typeof t=="object"&&t instanceof $}function Qf(t,e){for(let n of t)Array.isArray(n)?Qf(n,e):n&&qE(n)?Qf(n.\u0275providers,e):e(n)}function fn(t,e){t instanceof na&&t.assertNotDestroyed();let n,r=pr(t),i=Lt(void 0);try{return e()}finally{pr(r),Lt(i)}}function lT(){return zE()!==void 0||wM()!=null}function nP(t){if(!lT())throw new W(-203,!1)}function rP(t){return typeof t=="function"}var Fn=0,ce=1,Z=2,mt=3,Qt=4,Zt=5,Vu=6,Uu=7,Yt=8,as=9,un=10,$e=11,ra=12,uE=13,vs=14,ln=15,cs=16,Ji=17,us=18,cl=19,dT=20,gr=21,Pf=22,Vt=23,_r=25,hT=1;var Yr=7,ju=8,Bu=9,Ut=10,$u=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}($u||{});function mr(t){return Array.isArray(t)&&typeof t[hT]=="object"}function Vn(t){return Array.isArray(t)&&t[hT]===!0}function fT(t){return(t.flags&4)!==0}function ul(t){return t.componentOffset>-1}function jp(t){return(t.flags&1)===1}function Ir(t){return!!t.template}function Yf(t){return(t[Z]&512)!==0}var Zf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function pT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function ll(){return gT}function gT(t){return t.type.prototype.ngOnChanges&&(t.setInput=sP),iP}ll.ngInherit=!0;function iP(){let t=yT(this),e=t?.current;if(e){let n=t.previous;if(n===is)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function sP(t,e,n,r,i){let s=this.declaredInputs[r],o=yT(t)||oP(t,{previous:is,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new Zf(l&&l.currentValue,n,u===is),pT(t,e,i,n)}var mT="__ngSimpleChanges__";function yT(t){return t[mT]||null}function oP(t,e){return t[mT]=e}var lE=null;var on=function(t,e,n){lE?.(t,e,n)},aP="svg",cP="math";function dn(t){for(;Array.isArray(t);)t=t[Fn];return t}function vT(t,e){return dn(e[t])}function jt(t,e){return dn(e[t.index])}function _T(t,e){return t.data[e]}function Tr(t,e){let n=e[t];return mr(n)?n:n[Fn]}function Bp(t){return(t[Z]&128)===128}function uP(t){return Vn(t[mt])}function Hu(t,e){return e==null?null:t[e]}function IT(t){t[Ji]=0}function wT(t){t[Z]&1024||(t[Z]|=1024,Bp(t)&&hl(t))}function lP(t,e){for(;t>0;)e=e[vs],t--;return e}function dl(t){return!!(t[Z]&9216||t[Vt]?.dirty)}function Jf(t){t[un].changeDetectionScheduler?.notify(8),t[Z]&64&&(t[Z]|=1024),dl(t)&&hl(t)}function hl(t){t[un].changeDetectionScheduler?.notify(0);let e=Zr(t);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!Bp(e)));)e=Zr(e)}function ET(t,e){if((t[Z]&256)===256)throw new W(911,!1);t[gr]===null&&(t[gr]=[]),t[gr].push(e)}function dP(t,e){if(t[gr]===null)return;let n=t[gr].indexOf(e);n!==-1&&t[gr].splice(n,1)}function Zr(t){let e=t[mt];return Vn(e)?e[mt]:e}var ue={lFrame:MT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var TT=!1;function hP(){return ue.lFrame.elementDepthCount}function fP(){ue.lFrame.elementDepthCount++}function pP(){ue.lFrame.elementDepthCount--}function DT(){return ue.bindingsEnabled}function gP(){return ue.skipHydrationRootTNode!==null}function mP(t){return ue.skipHydrationRootTNode===t}function yP(){ue.skipHydrationRootTNode=null}function Ce(){return ue.lFrame.lView}function St(){return ue.lFrame.tView}function I3(t){return ue.lFrame.contextLView=t,t[Yt]}function w3(t){return ue.lFrame.contextLView=null,t}function _t(){let t=bT();for(;t!==null&&t.type===64;)t=t.parent;return t}function bT(){return ue.lFrame.currentTNode}function vP(){let t=ue.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ua(t,e){let n=ue.lFrame;n.currentTNode=t,n.isParent=e}function CT(){return ue.lFrame.isParent}function _P(){ue.lFrame.isParent=!1}function ST(){return TT}function dE(t){TT=t}function IP(t){return ue.lFrame.bindingIndex=t}function fl(){return ue.lFrame.bindingIndex++}function wP(t){let e=ue.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function EP(){return ue.lFrame.inI18n}function TP(t,e){let n=ue.lFrame;n.bindingIndex=n.bindingRootIndex=t,Xf(e)}function DP(){return ue.lFrame.currentDirectiveIndex}function Xf(t){ue.lFrame.currentDirectiveIndex=t}function bP(t){let e=ue.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function AT(t){ue.lFrame.currentQueryIndex=t}function CP(t){let e=t[ce];return e.type===2?e.declTNode:e.type===1?t[Zt]:null}function RT(t,e,n){if(n&ne.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ne.Host);)if(i=CP(s),i===null||(s=s[vs],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ue.lFrame=NT();return r.currentTNode=e,r.lView=t,!0}function $p(t){let e=NT(),n=t[ce];ue.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function NT(){let t=ue.lFrame,e=t===null?null:t.child;return e===null?MT(t):e}function MT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function PT(){let t=ue.lFrame;return ue.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var xT=PT;function Hp(){let t=PT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function SP(t){return(ue.lFrame.contextLView=lP(t,ue.lFrame.contextLView))[Yt]}function _s(){return ue.lFrame.selectedIndex}function Jr(t){ue.lFrame.selectedIndex=t}function qp(){let t=ue.lFrame;return _T(t.tView,t.selectedIndex)}function AP(){return ue.lFrame.currentNamespace}var kT=!0;function zp(){return kT}function Gp(t){kT=t}function RP(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=gT(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Wp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Nu(t,e,n){OT(t,e,3,n)}function Mu(t,e,n,r){(t[Z]&3)===n&&OT(t,e,n,r)}function xf(t,e){let n=t[Z];(n&3)===e&&(n&=16383,n+=1,t[Z]=n)}function OT(t,e,n,r){let i=r!==void 0?t[Ji]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Ji]+=65536),(a<s||s==-1)&&(NP(t,n,e,u),t[Ji]=(t[Ji]&4294901760)+u+2),u++}function hE(t,e){on(4,t,e);let n=he(null);try{e.call(t)}finally{he(n),on(5,t,e)}}function NP(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[Z]>>14<t[Ji]>>16&&(t[Z]&3)===e&&(t[Z]+=16384,hE(a,s)):hE(a,s)}var ns=-1,Xr=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function MP(t){return t instanceof Xr}function PP(t){return(t.flags&8)!==0}function xP(t){return(t.flags&16)!==0}var kf={},ep=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ol(r);let i=this.injector.get(e,kf,r);return i!==kf||n===kf?i:this.parentInjector.get(e,n,r)}};function LT(t){return t!==ns}function qu(t){return t&32767}function kP(t){return t>>16}function zu(t,e){let n=kP(t),r=e;for(;n>0;)r=r[vs],n--;return r}var tp=!0;function fE(t){let e=tp;return tp=t,e}var OP=256,FT=OP-1,VT=5,LP=0,an={};function FP(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Xo)&&(r=n[Xo]),r==null&&(r=n[Xo]=LP++);let i=r&FT,s=1<<i;e.data[t+(i>>VT)]|=s}function Gu(t,e){let n=UT(t,e);if(n!==-1)return n;let r=e[ce];r.firstCreatePass&&(t.injectorIndex=e.length,Of(r.data,t),Of(e,null),Of(r.blueprint,null));let i=Kp(t,e),s=t.injectorIndex;if(LT(i)){let o=qu(i),a=zu(i,e),u=a[ce].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Of(t,e){t.push(0,0,0,0,0,0,0,0,e)}function UT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Kp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=qT(i),r===null)return ns;if(n++,i=i[vs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ns}function np(t,e,n){FP(t,e,n)}function jT(t,e,n){if(n&ne.Optional||t!==void 0)return t;kp(e,"NodeInjector")}function BT(t,e,n,r){if(n&ne.Optional&&r===void 0&&(r=null),!(n&(ne.Self|ne.Host))){let i=t[as],s=Lt(void 0);try{return i?i.get(e,r,n&ne.Optional):GE(e,r,n&ne.Optional)}finally{Lt(s)}}return jT(r,e,n)}function $T(t,e,n,r=ne.Default,i){if(t!==null){if(e[Z]&2048&&!(r&ne.Self)){let o=$P(t,e,n,r,an);if(o!==an)return o}let s=HT(t,e,n,r,an);if(s!==an)return s}return BT(e,n,r,i)}function HT(t,e,n,r,i){let s=jP(n);if(typeof s=="function"){if(!RT(e,t,r))return r&ne.Host?jT(i,n,r):BT(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ne.Optional))kp(n);else return o}finally{xT()}}else if(typeof s=="number"){let o=null,a=UT(t,e),u=ns,l=r&ne.Host?e[ln][Zt]:null;for((a===-1||r&ne.SkipSelf)&&(u=a===-1?Kp(t,e):e[a+8],u===ns||!gE(r,!1)?a=-1:(o=e[ce],a=qu(u),e=zu(u,e)));a!==-1;){let h=e[ce];if(pE(s,a,h.data)){let p=VP(a,e,n,o,r,l);if(p!==an)return p}u=e[a+8],u!==ns&&gE(r,e[ce].data[a+8]===l)&&pE(s,a,e)?(o=h,a=qu(u),e=zu(u,e)):a=-1}}return i}function VP(t,e,n,r,i,s){let o=e[ce],a=o.data[t+8],u=r==null?ul(a)&&tp:r!=o&&(a.type&3)!==0,l=i&ne.Host&&s===a,h=UP(a,o,n,u,l);return h!==null?ls(e,o,h,a):an}function UP(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let b=o[y];if(y<u&&n===b||y>=u&&b.type===n)return y}if(i){let y=o[u];if(y&&Ir(y)&&y.type===n)return u}return null}function ls(t,e,n,r){let i=t[n],s=e.data;if(MP(i)){let o=i;o.resolving&&mM(gM(s[n]));let a=fE(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?Lt(o.injectImpl):null,h=RT(t,r,ne.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&RP(n,s[n],e)}finally{l!==null&&Lt(l),fE(a),o.resolving=!1,xT()}}return i}function jP(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Xo)?t[Xo]:void 0;return typeof e=="number"?e>=0?e&FT:BP:e}function pE(t,e,n){let r=1<<t;return!!(n[e+(t>>VT)]&r)}function gE(t,e){return!(t&ne.Self)&&!(t&ne.Host&&e)}var Qr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return $T(this._tNode,this._lView,e,ol(r),n)}};function BP(){return new Qr(_t(),Ce())}function Qp(t){return oa(()=>{let e=t.prototype.constructor,n=e[ku]||rp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[ku]||rp(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function rp(t){return jE(t)?()=>{let e=rp(ft(t));return e&&e()}:rs(t)}function $P(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Z]&2048&&!(o[Z]&512);){let a=HT(s,o,n,r|ne.Self,an);if(a!==an)return a;let u=s.parent;if(!u){let l=o[dT];if(l){let h=l.get(n,an,r);if(h!==an)return h}u=qT(o),o=o[vs]}s=u}return i}function qT(t){let e=t[ce],n=e.type;return n===2?e.declTNode:n===1?t[Zt]:null}function mE(t,e=null,n=null,r){let i=zT(t,e,n,r);return i.resolveInjectorInitializers(),i}function zT(t,e=null,n=null,r,i=new Set){let s=[n||Ft,zM(t)];return r=r||(typeof t=="object"?void 0:gt(t)),new na(s,e||Up(),r||null,i)}var tt=class t{static{this.THROW_IF_NOT_FOUND=ea}static{this.NULL=new Fu}static create(e,n){if(Array.isArray(e))return mE({name:""},n,e,"");{let r=e.name??"";return mE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=q({token:t,providedIn:"any",factory:()=>j(QE)})}static{this.__NG_ELEMENT_ID__=-1}};var HP=new $("");HP.__NG_ELEMENT_ID__=t=>{let e=_t();if(e===null)throw new W(204,!1);if(e.type&2)return e.value;if(t&ne.Optional)return null;throw new W(204,!1)};var qP="ngOriginalError";function Lf(t){return t[qP]}var GT=!0,Yp=(()=>{class t{static{this.__NG_ELEMENT_ID__=zP}static{this.__NG_ENV_ID__=n=>n}}return t})(),ip=class extends Yp{constructor(e){super(),this._lView=e}onDestroy(e){return ET(this._lView,e),()=>dP(this._lView,e)}};function zP(){return new ip(Ce())}var Is=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Be(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=q({token:t,providedIn:"root",factory:()=>new t})}}return t})();var sp=class extends dt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,lT()&&(this.destroyRef=k(Yp,{optional:!0})??void 0,this.pendingTasks=k(Is,{optional:!0})??void 0)}emit(e){let n=he(null);try{super.next(e)}finally{he(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Me&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},pt=sp;function Wu(...t){}function WT(t){let e,n;function r(){t=Wu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function yE(t){return queueMicrotask(()=>t()),()=>{t=Wu}}var Zp="isAngularZone",Ku=Zp+"_ID",GP=0,fe=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pt(!1),this.onMicrotaskEmpty=new pt(!1),this.onStable=new pt(!1),this.onError=new pt(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=GT}=e;if(typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,QP(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Zp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new W(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,WP,Wu,Wu);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},WP={};function Jp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function KP(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){WT(()=>{t.callbackScheduled=!1,op(t),t.isCheckStableRunning=!0,Jp(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),op(t)}function QP(t){let e=()=>{KP(t)},n=GP++;t._inner=t._inner.fork({name:"angular",properties:{[Zp]:!0,[Ku]:n,[Ku+n]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(YP(u))return r.invokeTask(s,o,a,u);try{return vE(t),r.invokeTask(s,o,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),_E(t)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return vE(t),r.invoke(s,o,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!ZP(u)&&e(),_E(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,op(t),Jp(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function op(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function vE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function _E(t){t._nesting--,Jp(t)}var ap=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pt,this.onMicrotaskEmpty=new pt,this.onStable=new pt,this.onError=new pt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function YP(t){return KT(t,"__ignore_ng_zone__")}function ZP(t){return KT(t,"__scheduler_tick__")}function KT(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var On=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Lf(e);for(;n&&Lf(n);)n=Lf(n);return n||null}},JP=new $("",{providedIn:"root",factory:()=>{let t=k(fe),e=k(On);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function XP(){return pl(_t(),Ce())}function pl(t,e){return new gl(jt(t,e))}var gl=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=XP}}return t})();function QT(t){return(t.flags&128)===128}var YT=new Map,ex=0;function tx(){return ex++}function nx(t){YT.set(t[cl],t)}function cp(t){YT.delete(t[cl])}var IE="__ngContext__";function ei(t,e){mr(e)?(t[IE]=e[cl],nx(e)):t[IE]=e}function ZT(t){return XT(t[ra])}function JT(t){return XT(t[Qt])}function XT(t){for(;t!==null&&!Vn(t);)t=t[Qt];return t}var up;function eD(t){up=t}function rx(){if(up!==void 0)return up;if(typeof document<"u")return document;throw new W(210,!1)}var Xp=new $("",{providedIn:"root",factory:()=>ix}),ix="ng",eg=new $(""),At=new $("",{providedIn:"platform",factory:()=>"unknown"});var tg=new $("",{providedIn:"root",factory:()=>rx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var sx="h",ox="b";var ax=()=>null;function ng(t,e,n=!1){return ax(t,e,n)}var tD=!1,cx=new $("",{providedIn:"root",factory:()=>tD});var Qu=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${FE})`}};function ml(t){return t instanceof Qu?t.changingThisBreaksApplicationSecurity:t}function nD(t,e){let n=ux(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${FE})`)}return n===e}function ux(t){return t instanceof Qu&&t.getTypeName()||null}var lx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function rD(t){return t=String(t),t.match(lx)?t:"unsafe:"+t}var rg=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(rg||{});function E3(t){let e=dx();return e?e.sanitize(rg.URL,t)||"":nD(t,"URL")?ml(t):rD(sl(t))}function dx(){let t=Ce();return t&&t[un].sanitizer}function iD(t){return t instanceof Function?t():t}function hx(t){return(t??k(tt)).get(At)==="browser"}var Ln=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ln||{}),fx;function ig(t,e){return fx(t,e)}function Xi(t,e,n,r,i){if(r!=null){let s,o=!1;Vn(r)?s=r:mr(r)&&(o=!0,r=r[Fn]);let a=dn(r);t===0&&n!==null?i==null?uD(e,n,a):Yu(e,n,a,i||null,!0):t===1&&n!==null?Yu(e,n,a,i||null,!0):t===2?Ax(e,a,o):t===3&&e.destroyNode(a),s!=null&&Nx(e,t,s,n,i)}}function px(t,e){return t.createText(e)}function gx(t,e,n){t.setValue(e,n)}function sD(t,e,n){return t.createElement(e,n)}function mx(t,e){oD(t,e),e[Fn]=null,e[Zt]=null}function yx(t,e,n,r,i,s){r[Fn]=i,r[Zt]=e,yl(t,r,n,1,i,s)}function oD(t,e){e[un].changeDetectionScheduler?.notify(9),yl(t,e,e[$e],2,null,null)}function vx(t){let e=t[ra];if(!e)return Ff(t[ce],t);for(;e;){let n=null;if(mr(e))n=e[ra];else{let r=e[Ut];r&&(n=r)}if(!n){for(;e&&!e[Qt]&&e!==t;)mr(e)&&Ff(e[ce],e),e=e[mt];e===null&&(e=t),mr(e)&&Ff(e[ce],e),n=e&&e[Qt]}e=n}}function _x(t,e,n,r){let i=Ut+r,s=n.length;r>0&&(n[i-1][Qt]=e),r<s-Ut?(e[Qt]=n[i],KE(n,Ut+r,e)):(n.push(e),e[Qt]=null),e[mt]=n;let o=e[cs];o!==null&&n!==o&&aD(o,e);let a=e[us];a!==null&&a.insertView(t),Jf(e),e[Z]|=128}function aD(t,e){let n=t[Bu],r=e[mt];if(mr(r))t[Z]|=$u.HasTransplantedViews;else{let i=r[mt][ln];e[ln]!==i&&(t[Z]|=$u.HasTransplantedViews)}n===null?t[Bu]=[e]:n.push(e)}function sg(t,e){let n=t[Bu],r=n.indexOf(e);n.splice(r,1)}function lp(t,e){if(t.length<=Ut)return;let n=Ut+e,r=t[n];if(r){let i=r[cs];i!==null&&i!==t&&sg(i,r),e>0&&(t[n-1][Qt]=r[Qt]);let s=Lu(t,Ut+e);mx(r[ce],r);let o=s[us];o!==null&&o.detachView(s[ce]),r[mt]=null,r[Qt]=null,r[Z]&=-129}return r}function cD(t,e){if(!(e[Z]&256)){let n=e[$e];n.destroyNode&&yl(t,e,n,3,null,null),vx(e)}}function Ff(t,e){if(e[Z]&256)return;let n=he(null);try{e[Z]&=-129,e[Z]|=256,e[Vt]&&uf(e[Vt]),wx(t,e),Ix(t,e),e[ce].type===1&&e[$e].destroy();let r=e[cs];if(r!==null&&Vn(e[mt])){r!==e[mt]&&sg(r,e);let i=e[us];i!==null&&i.detachView(t)}cp(e)}finally{he(n)}}function Ix(t,e){let n=t.cleanup,r=e[Uu];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Uu]=null);let i=e[gr];if(i!==null){e[gr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function wx(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Xr)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];on(4,a,u);try{u.call(a)}finally{on(5,a,u)}}else{on(4,i,s);try{s.call(i)}finally{on(5,i,s)}}}}}function Ex(t,e,n){return Tx(t,e.parent,n)}function Tx(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Fn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===cn.None||s===cn.Emulated)return null}return jt(r,n)}}function Yu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function uD(t,e,n){t.appendChild(e,n)}function wE(t,e,n,r,i){r!==null?Yu(t,e,n,r,i):uD(t,e,n)}function lD(t,e){return t.parentNode(e)}function Dx(t,e){return t.nextSibling(e)}function bx(t,e,n){return Sx(t,e,n)}function Cx(t,e,n){return t.type&40?jt(t,n):null}var Sx=Cx,EE;function og(t,e,n,r){let i=Ex(t,r,e),s=e[$e],o=r.parent||e[Zt],a=bx(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)wE(s,i,n[u],a,!1);else wE(s,i,n,a,!1);EE!==void 0&&EE(s,r,e,n,i)}function Jo(t,e){if(e!==null){let n=e.type;if(n&3)return jt(e,t);if(n&4)return dp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Jo(t,r);{let i=t[e.index];return Vn(i)?dp(-1,i):dn(i)}}else{if(n&128)return Jo(t,e.next);if(n&32)return ig(e,t)()||dn(t[e.index]);{let r=dD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Zr(t[ln]);return Jo(i,r)}else return Jo(t,e.next)}}}return null}function dD(t,e){if(e!==null){let r=t[ln][Zt],i=e.projection;return r.projection[i]}return null}function dp(t,e){let n=Ut+t+1;if(n<e.length){let r=e[n],i=r[ce].firstChild;if(i!==null)return Jo(r,i)}return e[Yr]}function Ax(t,e,n){t.removeChild(null,e,n)}function ag(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(o&&e===0&&(a&&ei(dn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)ag(t,e,n.child,r,i,s,!1),Xi(e,t,i,a,s);else if(u&32){let l=ig(n,r),h;for(;h=l();)Xi(e,t,i,h,s);Xi(e,t,i,a,s)}else u&16?Rx(t,e,r,n,i,s):Xi(e,t,i,a,s);n=o?n.projectionNext:n.next}}function yl(t,e,n,r,i,s){ag(n,r,t.firstChild,e,i,s,!1)}function Rx(t,e,n,r,i,s){let o=n[ln],u=o[Zt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Xi(e,t,i,h,s)}else{let l=u,h=o[mt];QT(r)&&(l.flags|=128),ag(t,e,l,h,i,s,!0)}}function Nx(t,e,n,r,i){let s=n[Yr],o=dn(n);s!==o&&Xi(e,t,r,s,i);for(let a=Ut;a<n.length;a++){let u=n[a];yl(u[ce],u,t,e,r,s)}}function Mx(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Ln.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ln.Important),t.setStyle(n,r,i,s))}}function Px(t,e,n){t.setAttribute(e,"style",n)}function hD(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function fD(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Gf(t,e,r),i!==null&&hD(t,e,i),s!==null&&Px(t,e,s)}var ws={};function T3(t=1){pD(St(),Ce(),_s()+t,!1)}function pD(t,e,n,r){if(!r)if((e[Z]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Nu(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Mu(e,s,0,n)}Jr(n)}function Jt(t,e=ne.Default){let n=Ce();if(n===null)return j(t,e);let r=_t();return $T(r,n,ft(t),e)}function gD(){let t="invalid";throw new Error(t)}function mD(t,e,n,r,i,s){let o=he(null);try{let a=null;i&yr.SignalBased&&(a=e[r][Mn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&yr.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):pT(e,a,r,s)}finally{he(o)}}function xx(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Jr(~i);else{let s=i,o=n[++r],a=n[++r];TP(o,s);let u=e[s];a(2,u)}}}finally{Jr(-1)}}function vl(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[Fn]=i,p[Z]=r|4|128|8|64,(l!==null||t&&t[Z]&2048)&&(p[Z]|=2048),IT(p),p[mt]=p[vs]=t,p[Yt]=n,p[un]=o||t&&t[un],p[$e]=a||t&&t[$e],p[as]=u||t&&t[as]||null,p[Zt]=s,p[cl]=tx(),p[Vu]=h,p[dT]=l,p[ln]=e.type==2?t[ln]:p,p}function _l(t,e,n,r,i){let s=t.data[e];if(s===null)s=kx(t,e,n,r,i),EP()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=vP();s.injectorIndex=o===null?-1:o.injectorIndex}return ua(s,!0),s}function kx(t,e,n,r,i){let s=bT(),o=CT(),a=o?s:s&&s.parent,u=t.data[e]=Ux(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function yD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function vD(t,e,n,r,i){let s=_s(),o=r&2;try{Jr(-1),o&&e.length>_r&&pD(t,e,_r,!1),on(o?2:0,i),n(r,i)}finally{Jr(s),on(o?3:1,i)}}function _D(t,e,n){if(fT(e)){let r=he(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{he(r)}}}function ID(t,e,n){DT()&&(zx(t,e,n,jt(n,e)),(n.flags&64)===64&&CD(t,e,n))}function wD(t,e,n=jt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function ED(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=cg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function cg(t,e,n,r,i,s,o,a,u,l,h){let p=_r+r,m=p+i,y=Ox(p,m),b=typeof l=="function"?l():l;return y[ce]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function Ox(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ws);return n}function Lx(t,e,n,r){let s=r.get(cx,tD)||n===cn.ShadowDom,o=t.selectRootElement(e,s);return Fx(o),o}function Fx(t){Vx(t)}var Vx=()=>null;function Ux(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return gP()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function TE(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=yr.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?DE(r,n,l,a,u):DE(r,n,l,a)}return r}function DE(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function jx(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,y=m?m.inputs:null,b=m?m.outputs:null;u=TE(0,p.inputs,h,u,y),l=TE(1,p.outputs,h,l,b);let N=u!==null&&o!==null&&!Fp(e)?nk(u,h,o):null;a.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function Bx(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function TD(t,e,n,r,i,s,o,a){let u=jt(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(ug(t,n,h,r,i),ul(e)&&$x(n,e.index)):e.type&3?(r=Bx(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function $x(t,e){let n=Tr(e,t);n[Z]&16||(n[Z]|=64)}function DD(t,e,n,r){if(DT()){let i=r===null?null:{"":-1},s=Wx(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&bD(t,e,n,o,i,a),i&&Kx(n,r,i)}n.mergedAttrs=ta(n.mergedAttrs,n.attrs)}function bD(t,e,n,r,i,s){for(let l=0;l<r.length;l++)np(Gu(n,e),t,r[l].type);Yx(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=yD(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=ta(n.mergedAttrs,h.hostAttrs),Zx(t,n,e,u,h),Qx(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}jx(t,n,s)}function Hx(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;qx(o)!=a&&o.push(a),o.push(n,r,s)}}function qx(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function zx(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;ul(n)&&Jx(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Gu(n,e),ei(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=ls(e,t,a,n);if(ei(l,e),o!==null&&tk(e,a-i,l,u,n,o),Ir(u)){let h=Tr(n.index,e);h[Yt]=ls(e,t,a,n)}}}function CD(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=DP();try{Jr(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Xf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Gx(u,l)}}finally{Jr(-1),Xf(o)}}function Gx(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Wx(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(LM(e,o.selectors,!1))if(r||(r=[]),Ir(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;hp(t,e,u)}else r.unshift(o),hp(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function hp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Kx(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new W(-301,!1);r.push(e[i],s)}}}function Qx(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ir(e)&&(n[""]=t)}}function Yx(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Zx(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=rs(i.type,!0)),o=new Xr(s,Ir(i),Jt);t.blueprint[r]=o,n[r]=o,Hx(t,e,r,yD(t,n,i.hostVars,ws),i)}function Jx(t,e,n){let r=jt(e,t),i=ED(n),s=t[un].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Il(t,vl(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function Xx(t,e,n,r,i,s){let o=jt(t,e);ek(e[$e],o,s,t.value,n,r,i)}function ek(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?sl(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function tk(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];mD(r,n,u,l,h,p)}}function nk(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function SD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function AD(t,e){let n=t.contentQueries;if(n!==null){let r=he(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];AT(s),a.contentQueries(2,e[o],o)}}}finally{he(r)}}}function Il(t,e){return t[ra]?t[uE][Qt]=e:t[ra]=e,t[uE]=e,e}function fp(t,e,n){AT(0);let r=he(null);try{e(t,n)}finally{he(r)}}function rk(t){return t[Uu]??=[]}function ik(t){return t.cleanup??=[]}function RD(t,e){let n=t[as],r=n?n.get(On,null):null;r&&r.handleError(e)}function ug(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];mD(h,l,r,a,u,i)}}function sk(t,e,n){let r=vT(e,t);gx(t[$e],r,n)}function ok(t,e){let n=Tr(e,t),r=n[ce];ak(r,n);let i=n[Fn];i!==null&&n[Vu]===null&&(n[Vu]=ng(i,n[as])),lg(r,n,n[Yt])}function ak(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function lg(t,e,n){$p(e);try{let r=t.viewQuery;r!==null&&fp(1,r,n);let i=t.template;i!==null&&vD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[us]?.finishViewCreation(t),t.staticContentQueries&&AD(t,e),t.staticViewQueries&&fp(2,t.viewQuery,n);let s=t.components;s!==null&&ck(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Z]&=-5,Hp()}}function ck(t,e){for(let n=0;n<e.length;n++)ok(t,e[n])}function uk(t,e,n,r){let i=he(null);try{let s=e.tView,a=t[Z]&4096?4096:16,u=vl(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[cs]=l;let h=t[us];return h!==null&&(u[us]=h.createEmbeddedView(s)),lg(s,u,n),u}finally{he(i)}}function bE(t,e){return!e||e.firstChild===null||QT(t)}function lk(t,e,n,r=!0){let i=e[ce];if(_x(i,e,t,n),r){let o=dp(n,t),a=e[$e],u=lD(a,t[Yr]);u!==null&&yx(i,t[Zt],a,e,u,o)}let s=e[Vu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Zu(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(dn(s)),Vn(s)&&dk(s,r);let o=n.type;if(o&8)Zu(t,e,n.child,r);else if(o&32){let a=ig(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=dD(e,n);if(Array.isArray(a))r.push(...a);else{let u=Zr(e[ln]);Zu(u[ce],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function dk(t,e){for(let n=Ut;n<t.length;n++){let r=t[n],i=r[ce].firstChild;i!==null&&Zu(r[ce],r,i,e)}t[Yr]!==t[Fn]&&e.push(t[Yr])}var ND=[];function hk(t){return t[Vt]??fk(t)}function fk(t){let e=ND.pop()??Object.create(gk);return e.lView=t,e}function pk(t){t.lView[Vt]!==t&&(t.lView=null,ND.push(t))}var gk=_e(L({},Go),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{hl(t.lView)},consumerOnSignalRead(){this.lView[Vt]=this}});function mk(t){let e=t[Vt]??Object.create(yk);return e.lView=t,e}var yk=_e(L({},Go),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Zr(t.lView);for(;e&&!MD(e[ce]);)e=Zr(e);e&&wT(e)},consumerOnSignalRead(){this.lView[Vt]=this}});function MD(t){return t.type!==2}var vk=100;function PD(t,e=!0,n=0){let r=t[un],i=r.rendererFactory,s=!1;s||i.begin?.();try{_k(t,n)}catch(o){throw e&&RD(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function _k(t,e){let n=ST();try{dE(!0),pp(t,e);let r=0;for(;dl(t);){if(r===vk)throw new W(103,!1);r++,pp(t,1)}}finally{dE(n)}}function Ik(t,e,n,r){let i=e[Z];if((i&256)===256)return;let s=!1,o=!1;!s&&e[un].inlineEffectRunner?.flush(),$p(e);let a=!0,u=null,l=null;s||(MD(t)?(l=hk(e),u=Jc(l)):gw()===null?(a=!1,l=mk(e),u=Jc(l)):e[Vt]&&(uf(e[Vt]),e[Vt]=null));try{IT(e),IP(t.bindingStartIndex),n!==null&&vD(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let y=t.preOrderCheckHooks;y!==null&&Nu(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Mu(e,y,0,null),xf(e,0)}if(o||wk(e),xD(e,0),t.contentQueries!==null&&AD(t,e),!s)if(h){let y=t.contentCheckHooks;y!==null&&Nu(e,y)}else{let y=t.contentHooks;y!==null&&Mu(e,y,1),xf(e,1)}xx(t,e);let p=t.components;p!==null&&OD(e,p,0);let m=t.viewQuery;if(m!==null&&fp(2,m,r),!s)if(h){let y=t.viewCheckHooks;y!==null&&Nu(e,y)}else{let y=t.viewHooks;y!==null&&Mu(e,y,2),xf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Pf]){for(let y of e[Pf])y();e[Pf]=null}s||(e[Z]&=-73)}catch(h){throw s||hl(e),h}finally{l!==null&&(af(l,u),a&&pk(l)),Hp()}}function xD(t,e){for(let n=ZT(t);n!==null;n=JT(n))for(let r=Ut;r<n.length;r++){let i=n[r];kD(i,e)}}function wk(t){for(let e=ZT(t);e!==null;e=JT(e)){if(!(e[Z]&$u.HasTransplantedViews))continue;let n=e[Bu];for(let r=0;r<n.length;r++){let i=n[r];wT(i)}}}function Ek(t,e,n){let r=Tr(e,t);kD(r,n)}function kD(t,e){Bp(t)&&pp(t,e)}function pp(t,e){let r=t[ce],i=t[Z],s=t[Vt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&cf(s)),o||=!1,s&&(s.dirty=!1),t[Z]&=-9217,o)Ik(r,t,r.template,t[Yt]);else if(i&8192){xD(t,1);let a=r.components;a!==null&&OD(t,a,1)}}function OD(t,e,n){for(let r=0;r<e.length;r++)Ek(t,e[r],n)}function dg(t,e){let n=ST()?64:1088;for(t[un].changeDetectionScheduler?.notify(e);t;){t[Z]|=n;let r=Zr(t);if(Yf(t)&&!r)return t;t=r}return null}var ti=class{get rootNodes(){let e=this._lView,n=e[ce];return Zu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Yt]}set context(e){this._lView[Yt]=e}get destroyed(){return(this._lView[Z]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[mt];if(Vn(e)){let n=e[ju],r=n?n.indexOf(this):-1;r>-1&&(lp(e,r),Lu(n,r))}this._attachedToViewContainer=!1}cD(this._lView[ce],this._lView)}onDestroy(e){ET(this._lView,e)}markForCheck(){dg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){Jf(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,PD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Yf(this._lView),n=this._lView[cs];n!==null&&!e&&sg(n,this._lView),oD(this._lView[ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e;let n=Yf(this._lView),r=this._lView[cs];r!==null&&!n&&aD(r,this._lView),Jf(this._lView)}},wl=(()=>{class t{static{this.__NG_ELEMENT_ID__=bk}}return t})(),Tk=wl,Dk=class extends Tk{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=uk(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new ti(i)}};function bk(){return Ck(_t(),Ce())}function Ck(t,e){return t.type&4?new Dk(e,t,pl(t,e)):null}var b3=new RegExp(`^(\\d+)*(${ox}|${sx})*(.*)`);var Sk=()=>null;function CE(t,e){return Sk(t,e)}var ds=class{},El=new $("",{providedIn:"root",factory:()=>!1});var LD=new $(""),FD=new $(""),gp=class{},Ju=class{};function Ak(t){let e=Error(`No component factory found for ${gt(t)}.`);return e[Rk]=t,e}var Rk="ngComponent";var mp=class{resolveComponentFactory(e){throw Ak(e)}},hs=class{static{this.NULL=new mp}},fs=class{},hg=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>Nk()}}return t})();function Nk(){let t=Ce(),e=_t(),n=Tr(e.index,t);return(mr(n)?n:t)[$e]}var Mk=(()=>{class t{static{this.\u0275prov=q({token:t,providedIn:"root",factory:()=>null})}}return t})();function yp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Xw(i,a);else if(s==2){let u=a,l=e[++o];r=Xw(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Xu=class extends hs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=vr(e);return new ps(n,this.ngModule)}};function SE(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:yr.None;e?n.push({propName:o,templateName:r,isSignal:(a&yr.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function Pk(t){let e=t.toLowerCase();return e==="svg"?aP:e==="math"?cP:null}var ps=class extends Ju{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=SE(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return SE(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=jM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=he(null);try{i=i||this.ngModule;let o=i instanceof Ct?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new ep(e,o):e,u=a.get(fs,null);if(u===null)throw new W(407,!1);let l=a.get(Mk,null),h=a.get(ds,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?Lx(m,r,this.componentDef.encapsulation,a):sD(m,y,Pk(y)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let R=null;b!==null&&(R=ng(b,a,!0));let O=cg(0,null,null,1,0,null,null,null,null,null,null),U=vl(null,O,null,N,null,null,p,m,a,null,R);$p(U);let F,H,ve=null;try{let G=this.componentDef,E,v=null;G.findHostDirectiveDefs?(E=[],v=new Map,G.findHostDirectiveDefs(G,E,v),E.push(G)):E=[G];let I=xk(U,b);ve=kk(I,b,G,E,U,p,m),H=_T(O,_r),b&&Fk(m,G,b,r),n!==void 0&&Vk(H,this.ngContentSelectors,n),F=Lk(ve,G,E,v,U,[Uk]),lg(O,U,null)}catch(G){throw ve!==null&&cp(ve),cp(U),G}finally{Hp()}return new vp(this.componentType,F,pl(H,U),U,H)}finally{he(s)}}},vp=class extends gp{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ti(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;ug(s[ce],s,i,e,n),this.previousInputValues.set(e,n);let o=Tr(this._tNode.index,s);dg(o,1)}}get injector(){return new Qr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function xk(t,e){let n=t[ce],r=_r;return t[r]=e,_l(n,r,2,"#host",null)}function kk(t,e,n,r,i,s,o){let a=i[ce];Ok(r,t,e,o);let u=null;e!==null&&(u=ng(e,i[as]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=vl(i,ED(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&hp(a,t,r.length-1),Il(i,p),i[t.index]=p}function Ok(t,e,n,r){for(let i of t)e.mergedAttrs=ta(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(yp(e,e.mergedAttrs,!0),n!==null&&fD(r,n,e))}function Lk(t,e,n,r,i,s){let o=_t(),a=i[ce],u=jt(o,i);bD(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=ls(i,a,p,o);ei(m,i)}CD(a,i,o),u&&ei(u,i);let l=ls(i,a,o.directiveStart+o.componentOffset,o);if(t[Yt]=i[Yt]=l,s!==null)for(let h of s)h(l,e);return _D(a,o,i),l}function Fk(t,e,n,r){if(r)Gf(t,n,["ng-version","18.2.9"]);else{let{attrs:i,classes:s}=BM(e.selectors[0]);i&&Gf(t,n,i),s&&s.length>0&&hD(t,n,s.join(" "))}}function Vk(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function Uk(){let t=_t();Wp(Ce()[ce],t)}var Es=(()=>{class t{static{this.__NG_ELEMENT_ID__=jk}}return t})();function jk(){let t=_t();return $k(t,Ce())}var Bk=Es,VD=class extends Bk{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return pl(this._hostTNode,this._hostLView)}get injector(){return new Qr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Kp(this._hostTNode,this._hostLView);if(LT(e)){let n=zu(e,this._hostLView),r=qu(e),i=n[ce].data[r+8];return new Qr(i,n)}else return new Qr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=AE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ut}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=CE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,bE(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!rP(e),a;if(o)a=n;else{let b=n||{};a=b.index,r=b.injector,i=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef}let u=o?e:new ps(vr(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(Ct,null);N&&(s=N)}let h=vr(u.componentType??{}),p=CE(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,s);return this.insertImpl(y.hostView,a,bE(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(uP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[mt],l=new VD(u,u[Zt],u[mt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return lk(o,i,s,r),e.attachToViewContainerRef(),KE(Vf(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=AE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=lp(this._lContainer,n);r&&(Lu(Vf(this._lContainer),n),cD(r[ce],r))}detach(e){let n=this._adjustIndex(e,-1),r=lp(this._lContainer,n);return r&&Lu(Vf(this._lContainer),n)!=null?new ti(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function AE(t){return t[ju]}function Vf(t){return t[ju]||(t[ju]=[])}function $k(t,e){let n,r=e[t.index];return Vn(r)?n=r:(n=SD(r,e,null,t),e[t.index]=n,Il(e,n)),qk(n,e,t,r),new VD(n,t,e)}function Hk(t,e){let n=t[$e],r=n.createComment(""),i=jt(e,t),s=lD(n,i);return Yu(n,s,r,Dx(n,i),!1),r}var qk=Wk,zk=()=>!1;function Gk(t,e,n){return zk(t,e,n)}function Wk(t,e,n,r){if(t[Yr])return;let i;n.type&8?i=dn(r):i=Hk(e,n),t[Yr]=i}var RE=new Set;function Ts(t){RE.has(t)||(RE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Kk(t){return typeof t=="function"&&t[Mn]!==void 0}function S3(t,e){Ts("NgSignals");let n=Cw(t),r=n[Mn];return e?.equal&&(r.equal=e.equal),n.set=i=>lf(r,i),n.update=i=>Sw(r,i),n.asReadonly=Qk.bind(n),n}function Qk(){let t=this[Mn];if(t.readonlyFn===void 0){let e=()=>this();e[Mn]=t,t.readonlyFn=e}return t.readonlyFn}function UD(t){return Kk(t)&&typeof t.set=="function"}function Yk(t){return Object.getPrototypeOf(t.prototype).constructor}function Zk(t){let e=Yk(t.type),n=!0,r=[t];for(;e;){let i;if(Ir(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new W(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Cu(t.inputs),o.inputTransforms=Cu(t.inputTransforms),o.declaredInputs=Cu(t.declaredInputs),o.outputs=Cu(t.outputs);let a=i.hostBindings;a&&nO(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&eO(t,u),l&&tO(t,l),Jk(t,i),aM(t.outputs,i.outputs),Ir(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Zk&&(n=!1)}}e=Object.getPrototypeOf(e)}Xk(r)}function Jk(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function Xk(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ta(i.hostAttrs,n=ta(n,i.hostAttrs))}}function Cu(t){return t===is?{}:t===Ft?[]:t}function eO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function tO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function nO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var wr=class{},ia=class{};var _p=class extends wr{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Xu(this);let s=rT(e);this._bootstrapComponents=iD(s.bootstrap),this._r3Injector=zT(e,n,[{provide:wr,useValue:this},{provide:hs,useValue:this.componentFactoryResolver},...r],gt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ip=class extends ia{constructor(e){super(),this.moduleType=e}create(e){return new _p(this.moduleType,e,[])}};var el=class extends wr{constructor(e){super(),this.componentFactoryResolver=new Xu(this),this.instance=null;let n=new na([...e.providers,{provide:wr,useValue:this},{provide:hs,useValue:this.componentFactoryResolver}],e.parent||Up(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Tl(t,e,n=null){return new el({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function jD(t){return iO(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function rO(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function iO(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function la(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function sO(t){return(t.flags&32)===32}function oO(t,e,n,r,i,s,o,a,u){let l=e.consts,h=_l(e,t,4,o||null,a||null);DD(e,n,h,Hu(l,u)),Wp(e,h);let p=h.tView=cg(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function aO(t,e,n,r,i,s,o,a,u,l){let h=n+_r,p=e.firstCreatePass?oO(h,e,t,r,i,s,o,a,u):e.data[h];ua(p,!1);let m=uO(e,t,p,n);zp()&&og(e,t,m,p),ei(m,t);let y=SD(m,t,m,p);return t[h]=y,Il(t,y),Gk(y,p,t),jp(p)&&ID(e,t,p),u!=null&&wD(t,p,l),p}function cO(t,e,n,r,i,s,o,a){let u=Ce(),l=St(),h=Hu(l.consts,s);return aO(u,l,t,e,n,r,i,h,o,a),cO}var uO=lO;function lO(t,e,n,r){return Gp(!0),e[$e].createComment("")}var es=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(es||{}),BD=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=q({token:t,providedIn:"root",factory:()=>new t})}}return t})(),wp=class t{constructor(){this.ngZone=k(fe),this.scheduler=k(ds),this.errorHandler=k(On,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[es.EarlyRead,es.Write,es.MixedReadWrite,es.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=q({token:t,providedIn:"root",factory:()=>new t})}},Ep=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function fg(t,e){!e?.injector&&nP(fg);let n=e?.injector??k(tt);return hx(n)?(Ts("NgAfterNextRender"),hO(t,n,e,!0)):fO}function dO(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function hO(t,e,n,r){let i=e.get(BD);i.impl??=e.get(wp);let s=n?.phase??es.MixedReadWrite,o=n?.manualCleanup!==!0?e.get(Yp):null,a=new Ep(i.impl,dO(t,s),r,o);return i.impl.register(a),a}var fO={destroy(){}};function $D(t,e,n,r){let i=Ce(),s=fl();if(la(i,s,e)){let o=St(),a=qp();Xx(a,i,t,e,n,r)}return $D}function pO(t,e,n,r){return la(t,fl(),n)?e+sl(n)+r:ws}function Su(t,e){return t<<17|e<<2}function ni(t){return t>>17&32767}function gO(t){return(t&2)==2}function mO(t,e){return t&131071|e<<17}function Tp(t){return t|2}function gs(t){return(t&131068)>>2}function Uf(t,e){return t&-131069|e<<2}function yO(t){return(t&1)===1}function Dp(t){return t|1}function vO(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ni(o),u=gs(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||aa(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=ni(t[a+1]);t[r+1]=Su(m,a),m!==0&&(t[m+1]=Uf(t[m+1],r)),t[a+1]=mO(t[a+1],r)}else t[r+1]=Su(a,0),a!==0&&(t[a+1]=Uf(t[a+1],r)),a=r;else t[r+1]=Su(u,0),a===0?a=r:t[u+1]=Uf(t[u+1],r),u=r;l&&(t[r+1]=Tp(t[r+1])),NE(t,h,r,!0),NE(t,h,r,!1),_O(e,h,t,r,s),o=Su(a,u),s?e.classBindings=o:e.styleBindings=o}function _O(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&aa(s,e)>=0&&(n[r+1]=Dp(n[r+1]))}function NE(t,e,n,r){let i=t[n+1],s=e===null,o=r?ni(i):gs(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];IO(u,e)&&(a=!0,t[o+1]=r?Dp(l):Tp(l)),o=r?ni(l):gs(l)}a&&(t[n+1]=r?Tp(i):Dp(i))}function IO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?aa(t,e)>=0:!1}function wO(t,e,n){let r=Ce(),i=fl();if(la(r,i,e)){let s=St(),o=qp();TD(s,o,r,t,e,r[$e],n,!1)}return wO}function ME(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";ug(t,n,s[o],o,r)}function EO(t,e){return TO(t,e,null,!0),EO}function TO(t,e,n,r){let i=Ce(),s=St(),o=wP(2);if(s.firstUpdatePass&&bO(s,t,o,r),e!==ws&&la(i,o,e)){let a=s.data[_s()];NO(s,a,i,i[$e],t,i[o+1]=MO(e,n),r,o)}}function DO(t,e){return e>=t.expandoStartIndex}function bO(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[_s()],o=DO(t,n);PO(s,r)&&e===null&&!o&&(e=!1),e=CO(i,s,e,r),vO(i,s,e,n,o,r)}}function CO(t,e,n,r){let i=bP(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=jf(null,t,e,n,r),n=sa(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=jf(i,t,e,n,r),s===null){let u=SO(t,e,r);u!==void 0&&Array.isArray(u)&&(u=jf(null,t,e,u[1],r),u=sa(u,e.attrs,r),AO(t,e,r,u))}else s=RO(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function SO(t,e,n){let r=n?e.classBindings:e.styleBindings;if(gs(r)!==0)return t[ni(r)]}function AO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ni(i)]=r}function RO(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=sa(r,o,n)}return sa(r,e.attrs,n)}function jf(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=sa(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function sa(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),SM(t,o,n?!0:e[++s]))}return t===void 0?null:t}function NO(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=yO(l)?PE(u,e,n,i,gs(l),o):void 0;if(!tl(h)){tl(s)||gO(l)&&(s=PE(u,null,n,i,a,o));let p=vT(_s(),n);Mx(r,o,p,i,s)}}function PE(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===ws&&(m=p?Ft:void 0);let y=p?Nf(m,r):h===r?m:void 0;if(l&&!tl(y)&&(y=Nf(u,r)),tl(y)&&(a=y,o))return a;let b=t[i+1];i=o?ni(b):gs(b)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=Nf(u,r))}return a}function tl(t){return t!==void 0}function MO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=gt(ml(t)))),t}function PO(t,e){return(t.flags&(e?8:16))!==0}function xO(t,e,n,r,i,s){let o=e.consts,a=Hu(o,i),u=_l(e,t,2,r,a);return DD(e,n,u,Hu(o,s)),u.attrs!==null&&yp(u,u.attrs,!1),u.mergedAttrs!==null&&yp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function HD(t,e,n,r){let i=Ce(),s=St(),o=_r+t,a=i[$e],u=s.firstCreatePass?xO(o,s,i,e,n,r):s.data[o],l=kO(s,i,u,a,e,t);i[o]=l;let h=jp(u);return ua(u,!0),fD(a,l,u),!sO(u)&&zp()&&og(s,i,l,u),hP()===0&&ei(l,i),fP(),h&&(ID(s,i,u),_D(s,u,i)),r!==null&&wD(i,u),HD}function qD(){let t=_t();CT()?_P():(t=t.parent,ua(t,!1));let e=t;mP(e)&&yP(),pP();let n=St();return n.firstCreatePass&&(Wp(n,t),fT(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&PP(e)&&ME(n,e,Ce(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&xP(e)&&ME(n,e,Ce(),e.stylesWithoutHost,!1),qD}function pg(t,e,n,r){return HD(t,e,n,r),qD(),pg}var kO=(t,e,n,r,i,s)=>(Gp(!0),sD(r,i,AP()));function A3(){return Ce()}var nl="en-US";var OO=nl;function LO(t){typeof t=="string"&&(OO=t.toLowerCase().replace(/_/g,"-"))}var FO=(t,e,n)=>{};function zD(t,e,n,r){let i=Ce(),s=St(),o=_t();return GD(s,i,i[$e],o,t,e,r),zD}function VO(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Uu],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function GD(t,e,n,r,i,s,o){let a=jp(r),l=t.firstCreatePass&&ik(t),h=e[Yt],p=rk(e),m=!0;if(r.type&3||o){let N=jt(r,e),R=o?o(N):N,O=p.length,U=o?H=>o(dn(H[r.index])):r.index,F=null;if(!o&&a&&(F=VO(t,e,i,r.index)),F!==null){let H=F.__ngLastListenerFn__||F;H.__ngNextListenerFn__=s,F.__ngLastListenerFn__=s,m=!1}else{s=kE(r,e,h,s),FO(N,i,s);let H=n.listen(R,i,s);p.push(s,H),l&&l.push(i,U,O,O+1)}}else s=kE(r,e,h,s);let y=r.outputs,b;if(m&&y!==null&&(b=y[i])){let N=b.length;if(N)for(let R=0;R<N;R+=2){let O=b[R],U=b[R+1],ve=e[O][U].subscribe(s),G=p.length;p.push(s,ve),l&&l.push(i,r.index,G,-(G+1))}}}function xE(t,e,n,r){let i=he(null);try{return on(6,e,n),n(r)!==!1}catch(s){return RD(t,s),!1}finally{on(7,e,n),he(i)}}function kE(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?Tr(t.index,e):e;dg(o,5);let a=xE(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)a=xE(e,n,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function R3(t=1){return SP(t)}function N3(t,e=""){let n=Ce(),r=St(),i=t+_r,s=r.firstCreatePass?_l(r,i,1,e,null):r.data[i],o=UO(r,n,s,e,t);n[i]=o,zp()&&og(r,n,o,s),ua(s,!1)}var UO=(t,e,n,r,i)=>(Gp(!0),px(e[$e],r));function jO(t){return WD("",t,""),jO}function WD(t,e,n){let r=Ce(),i=pO(r,t,e,n);return i!==ws&&sk(r,_s(),i),WD}function BO(t,e,n){UD(e)&&(e=e());let r=Ce(),i=fl();if(la(r,i,e)){let s=St(),o=qp();TD(s,o,r,t,e,r[$e],n,!1)}return BO}function M3(t,e){let n=UD(t);return n&&t.set(e),n}function $O(t,e){let n=Ce(),r=St(),i=_t();return GD(r,n,n[$e],i,t,e),$O}function HO(t,e,n){let r=St();if(r.firstCreatePass){let i=Ir(t);bp(n,r.data,r.blueprint,i,!0),bp(e,r.data,r.blueprint,i,!1)}}function bp(t,e,n,r,i){if(t=ft(t),Array.isArray(t))for(let s=0;s<t.length;s++)bp(t[s],e,n,r,i);else{let s=St(),o=Ce(),a=_t(),u=os(t)?t:ft(t.provide),l=uT(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(os(t)||!t.multi){let y=new Xr(l,i,Jt),b=$f(u,e,i?h:h+m,p);b===-1?(np(Gu(a,o),s,u),Bf(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[b]=y,o[b]=y)}else{let y=$f(u,e,h+m,p),b=$f(u,e,h,h+m),N=y>=0&&n[y],R=b>=0&&n[b];if(i&&!R||!i&&!N){np(Gu(a,o),s,u);let O=GO(i?zO:qO,n.length,i,r,l);!i&&R&&(n[b].providerFactory=O),Bf(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(O),o.push(O)}else{let O=KD(n[i?b:y],l,!i&&r);Bf(s,t,y>-1?y:b,O)}!i&&r&&R&&n[b].componentProviders++}}}function Bf(t,e,n,r){let i=os(e),s=QM(e);if(i||s){let u=(s?ft(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function KD(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function $f(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function qO(t,e,n,r){return Cp(this.multi,[])}function zO(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ls(n,n[ce],this.providerFactory.index,r);s=a.slice(0,o),Cp(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Cp(i,s);return s}function Cp(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function GO(t,e,n,r,i){let s=new Xr(t,n,Jt);return s.multi=[],s.index=e,s.componentProviders=0,KD(s,i,r&&!n),s}function P3(t,e=[]){return n=>{n.providersResolver=(r,i)=>HO(r,i?i(t):t,e)}}var WO=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=oT(!1,n.type),i=r.length>0?Tl([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=q({token:t,providedIn:"environment",factory:()=>new t(j(Ct))})}}return t})();function QD(t){Ts("NgStandalone"),t.getStandaloneInjector=e=>e.get(WO).getOrCreateStandaloneInjector(t)}var Er=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},gg=new Er("18.2.9");var Dl=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var YD=new $("");function da(t){return!!t&&typeof t.then=="function"}function ZD(t){return!!t&&typeof t.subscribe=="function"}var bl=new $(""),JD=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=k(bl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(da(s))n.push(s);else if(ZD(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Cl=new $("");function KO(){bw(()=>{throw new W(600,!1)})}function QO(t){return t.isBoundToModule}var YO=10;function ZO(t,e,n){try{let r=n();return da(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var ri=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(JP),this.afterRenderManager=k(BD),this.zonelessEnabled=k(El),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new dt,this.afterTick=new dt,this.componentTypes=[],this.components=[],this.isStable=k(Is).hasPendingTasks.pipe(ie(n=>!n)),this._injector=k(Ct)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Ju;if(!this._injector.get(JD).done){let m=!i&&nT(n),y=!1;throw new W(405,y)}let o;i?o=n:o=this._injector.get(hs).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=QO(o)?void 0:this._injector.get(wr),u=r||o.selector,l=o.create(tt.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(YD,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Pu(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new W(101,!1);let n=he(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,he(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(fs,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<YO;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)JO(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>dl(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Pu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Cl,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Pu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new W(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Pu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function JO(t,e,n,r){if(!n&&!dl(t))return;PD(t,e,n&&!r?0:1)}var Sp=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Sl=(()=>{class t{compileModuleSync(n){return new Ip(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=rT(n),s=iD(i.declarations).reduce((o,a)=>{let u=vr(a);return u&&o.push(new ps(u)),o},[]);return new Sp(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var XO=(()=>{class t{constructor(){this.zone=k(fe),this.changeDetectionScheduler=k(ds),this.applicationRef=k(ri)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),e1=new $("",{factory:()=>!1});function XD({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new fe(_e(L({},eb()),{scheduleInRootZone:n})),[{provide:fe,useFactory:t},{provide:ss,multi:!0,useFactory:()=>{let r=k(XO,{optional:!0});return()=>r.initialize()}},{provide:ss,multi:!0,useFactory:()=>{let r=k(t1);return()=>{r.initialize()}}},e===!0?{provide:LD,useValue:!0}:[],{provide:FD,useValue:n??GT}]}function x3(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=XD({ngZoneFactory:()=>{let i=eb(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Ts("NgZone_CoalesceEvent"),new fe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return hn([{provide:e1,useValue:!0},{provide:El,useValue:!1},r])}function eb(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var t1=(()=>{class t{constructor(){this.subscription=new Me,this.initialized=!1,this.zone=k(fe),this.pendingTasks=k(Is)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{fe.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{fe.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var n1=(()=>{class t{constructor(){this.appRef=k(ri),this.taskService=k(Is),this.ngZone=k(fe),this.zonelessEnabled=k(El),this.disableScheduling=k(LD,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Me,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ku):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(FD,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ap||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?yE:WT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ku+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,yE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function r1(){return typeof $localize<"u"&&$localize.locale||nl}var mg=new $("",{providedIn:"root",factory:()=>k(mg,ne.Optional|ne.SkipSelf)||r1()});var Ap=new $("");function Au(t){return!t.moduleRef}function i1(t){let e=Au(t)?t.r3Injector:t.moduleRef.injector,n=e.get(fe);return n.run(()=>{Au(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(On,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),Au(t)){let s=()=>e.destroy(),o=t.platformInjector.get(Ap);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(Ap);o.add(s),t.moduleRef.onDestroy(()=>{Pu(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return ZO(r,n,()=>{let s=e.get(JD);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(mg,nl);if(LO(o||nl),Au(t)){let a=e.get(ri);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return s1(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function s1(t,e){let n=t.injector.get(ri);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new W(-403,!1);e.push(t)}var xu=null;function o1(t=[],e){return tt.create({name:e,providers:[{provide:al,useValue:"platform"},{provide:Ap,useValue:new Set([()=>xu=null])},...t]})}function a1(t=[]){if(xu)return xu;let e=o1(t);return xu=e,KO(),c1(e),e}function c1(t){t.get(eg,null)?.forEach(n=>n())}function yg(){return!1}var Ds=(()=>{class t{static{this.__NG_ELEMENT_ID__=u1}}return t})();function u1(t){return l1(_t(),Ce(),(t&16)===16)}function l1(t,e,n){if(ul(t)&&!n){let r=Tr(t.index,e);return new ti(r,r)}else if(t.type&175){let r=e[ln];return new ti(r,e)}return null}var Rp=class{constructor(){}supports(e){return jD(e)}create(e){return new Np(e)}},d1=(t,e)=>e,Np=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||d1}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<OE(r,i,s)?n:r,a=OE(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<s.length?s[m]:s[m]=0,b=y+m;h<=b&&b<l&&(s[m]=y+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!jD(e))throw new W(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,rO(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Mp(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new rl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new rl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Mp=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Pp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},rl=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Pp,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function OE(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function LE(){return new vg([new Rp])}var vg=(()=>{class t{static{this.\u0275prov=q({token:t,providedIn:"root",factory:LE})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||LE()),deps:[[t,new Op,new Ke]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new W(901,!1)}}return t})();function tb(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=a1(r),s=[XD({}),{provide:ds,useExisting:n1},...n||[]],o=new el({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return i1({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function nb(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function k3(t,e){Ts("NgSignals");let n=Ew(t);return e?.equal&&(n[Mn].equal=e.equal),n}function h1(t){let e=he(null);try{return t()}finally{he(e)}}function rb(t){let e=vr(t);if(!e)return null;let n=new ps(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var cb=null;function Cs(){return cb}function ub(t){cb??=t}var Al=class{};var It=new $(""),Tg=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:()=>k(m1),providedIn:"platform"})}}return t})(),lb=new $(""),m1=(()=>{class t extends Tg{constructor(){super(),this._doc=k(It),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Cs().getBaseHref(this._doc)}onPopState(n){let r=Cs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Cs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function Dg(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function ib(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Un(t){return t&&t[0]!=="?"?"?"+t:t}var ii=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:()=>k(bg),providedIn:"root"})}}return t})(),db=new $(""),bg=(()=>{class t extends ii{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(It).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Dg(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Un(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Un(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Un(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(j(Tg),j(db,8))}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),hb=(()=>{class t extends ii{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Dg(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Un(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Un(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(j(Tg),j(db,8))}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac})}}return t})(),Ss=(()=>{class t{constructor(n){this._subject=new pt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=_1(ib(sb(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Un(r))}normalize(n){return t.stripTrailingSlash(v1(this._basePath,sb(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Un(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Un(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Un}static{this.joinWithSlash=Dg}static{this.stripTrailingSlash=ib}static{this.\u0275fac=function(r){return new(r||t)(j(ii))}}static{this.\u0275prov=q({token:t,factory:()=>y1(),providedIn:"root"})}}return t})();function y1(){return new Ss(j(ii))}function v1(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function sb(t){return t.replace(/\/index.html$/,"")}function _1(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function fb(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var _g=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},o8=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new _g(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),ob(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);ob(s,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Jt(Es),Jt(wl),Jt(vg))}}static{this.\u0275dir=ca({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function ob(t,e){t.context.$implicit=e.item}var a8=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new Ig,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){ab("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){ab("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Jt(Es),Jt(wl))}}static{this.\u0275dir=ca({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),Ig=class{constructor(){this.$implicit=null,this.ngIf=null}};function ab(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${gt(e)}'.`)}var I1=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=ys({type:t})}static{this.\u0275inj=ms({})}}return t})(),Cg="browser",w1="server";function E1(t){return t===Cg}function Sg(t){return t===w1}var pb=(()=>{class t{static{this.\u0275prov=q({token:t,providedIn:"root",factory:()=>E1(k(At))?new wg(k(It),window):new Eg})}}return t})(),wg=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=T1(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function T1(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Eg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Rl=class{};var Ng=class extends Al{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Mg=class t extends Ng{static makeCurrent(){ub(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=D1();return n==null?null:b1(n)}resetBaseElement(){ha=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fb(document.cookie,e)}},ha=null;function D1(){return ha=ha||document.querySelector("base"),ha?ha.getAttribute("href"):null}function b1(t){return new URL(t,document.baseURI).pathname}var C1=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac})}}return t})(),Pg=new $(""),vb=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(j(Pg),j(fe))}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac})}}return t})(),Nl=class{constructor(e){this._doc=e}},Ag="ng-app-id",_b=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Sg(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Ag}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Ag),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Ag,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(j(It),j(Xp),j(tg,8),j(At))}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac})}}return t})(),Rg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},kg=/%COMP%/g,Ib="%COMP%",S1=`_nghost-${Ib}`,A1=`_ngcontent-${Ib}`,R1=!0,N1=new $("",{providedIn:"root",factory:()=>R1});function M1(t){return A1.replace(kg,t)}function P1(t){return S1.replace(kg,t)}function wb(t,e){return e.map(n=>n.replace(kg,t))}var gb=(()=>{class t{constructor(n,r,i,s,o,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Sg(a),this.defaultRenderer=new fa(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===cn.ShadowDom&&(r=_e(L({},r),{encapsulation:cn.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Ml?i.applyToHost(n):i instanceof pa&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case cn.Emulated:s=new Ml(u,l,r,this.appId,h,o,a,p);break;case cn.ShadowDom:return new xg(u,l,n,r,o,a,this.nonce,p);default:s=new pa(u,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(j(vb),j(_b),j(Xp),j(N1),j(It),j(At),j(fe),j(tg))}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac})}}return t})(),fa=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Rg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(mb(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(mb(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Rg[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Rg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ln.DashCase|Ln.Important)?e.style.setProperty(n,r,i&Ln.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ln.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Cs().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function mb(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var xg=class extends fa{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=wb(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},pa=class extends fa{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?wb(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ml=class extends pa{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=M1(l),this.hostAttr=P1(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},x1=(()=>{class t extends Nl{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(j(It))}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac})}}return t})(),yb=["alt","control","meta","shift"],k1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},O1={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},L1=(()=>{class t extends Nl{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cs().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),yb.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=k1[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),yb.forEach(o=>{if(o!==i){let a=O1[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(j(It))}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac})}}return t})();function k8(t,e){return tb(L({rootComponent:t},F1(e)))}function F1(t){return{appProviders:[...$1,...t?.providers??[]],platformProviders:B1}}function V1(){Mg.makeCurrent()}function U1(){return new On}function j1(){return eD(document),document}var B1=[{provide:At,useValue:Cg},{provide:eg,useValue:V1,multi:!0},{provide:It,useFactory:j1,deps:[]}];var $1=[{provide:al,useValue:"root"},{provide:On,useFactory:U1,deps:[]},{provide:Pg,useClass:x1,multi:!0,deps:[It,fe,At]},{provide:Pg,useClass:L1,multi:!0,deps:[It]},gb,_b,vb,{provide:fs,useExisting:gb},{provide:Rl,useClass:C1,deps:[]},[]];var Eb=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(j(It))}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var te="primary",Na=Symbol("RouteTitle"),Ug=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function xs(t){return new Ug(t)}function q1(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function z1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!pn(t[n],e[n]))return!1;return!0}function pn(t,e){let n=t?jg(t):void 0,r=e?jg(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!xb(t[i],e[i]))return!1;return!0}function jg(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function xb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function kb(t){return t.length>0?t[t.length-1]:null}function Cr(t){return Tf(t)?t:da(t)?De(Promise.resolve(t)):Q(t)}var G1={exact:Lb,subset:Fb},Ob={exact:W1,subset:K1,ignored:()=>!0};function Tb(t,e,n){return G1[n.paths](t.root,e.root,n.matrixParams)&&Ob[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function W1(t,e){return pn(t,e)}function Lb(t,e,n){if(!oi(t.segments,e.segments)||!kl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Lb(t.children[r],e.children[r],n))return!1;return!0}function K1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>xb(t[n],e[n]))}function Fb(t,e,n){return Vb(t,e,e.segments,n)}function Vb(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!oi(i,n)||e.hasChildren()||!kl(i,n,r))}else if(t.segments.length===n.length){if(!oi(t.segments,n)||!kl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Fb(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!oi(t.segments,i)||!kl(t.segments,i,r)||!t.children[te]?!1:Vb(t.children[te],e,s,r)}}function kl(t,e,n){return e.every((r,i)=>Ob[n](t[i].parameters,r.parameters))}var Bn=class{constructor(e=new ye([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=xs(this.queryParams),this._queryParamMap}toString(){return Z1.serialize(this)}},ye=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ol(this)}},si=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=xs(this.parameters),this._parameterMap}toString(){return jb(this)}};function Q1(t,e){return oi(t,e)&&t.every((n,r)=>pn(n.parameters,e[r].parameters))}function oi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Y1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===te&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==te&&(n=n.concat(e(i,r)))}),n}var Ma=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:()=>new ks,providedIn:"root"})}}return t})(),ks=class{parse(e){let n=new $g(e);return new Bn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ga(e.root,!0)}`,r=eL(e.queryParams),i=typeof e.fragment=="string"?`#${J1(e.fragment)}`:"";return`${n}${r}${i}`}},Z1=new ks;function Ol(t){return t.segments.map(e=>jb(e)).join("/")}function ga(t,e){if(!t.hasChildren())return Ol(t);if(e){let n=t.children[te]?ga(t.children[te],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==te&&r.push(`${i}:${ga(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Y1(t,(r,i)=>i===te?[ga(t.children[te],!1)]:[`${i}:${ga(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[te]!=null?`${Ol(t)}/${n[0]}`:`${Ol(t)}/(${n.join("//")})`}}function Ub(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pl(t){return Ub(t).replace(/%3B/gi,";")}function J1(t){return encodeURI(t)}function Bg(t){return Ub(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ll(t){return decodeURIComponent(t)}function Db(t){return Ll(t.replace(/\+/g,"%20"))}function jb(t){return`${Bg(t.path)}${X1(t.parameters)}`}function X1(t){return Object.entries(t).map(([e,n])=>`;${Bg(e)}=${Bg(n)}`).join("")}function eL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Pl(n)}=${Pl(i)}`).join("&"):`${Pl(n)}=${Pl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var tL=/^[^\/()?;#]+/;function Og(t){let e=t.match(tL);return e?e[0]:""}var nL=/^[^\/()?;=#]+/;function rL(t){let e=t.match(nL);return e?e[0]:""}var iL=/^[^=?&#]+/;function sL(t){let e=t.match(iL);return e?e[0]:""}var oL=/^[^&#]+/;function aL(t){let e=t.match(oL);return e?e[0]:""}var $g=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ye([],{}):new ye([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[te]=new ye(e,n)),r}parseSegment(){let e=Og(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new si(Ll(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=rL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Og(this.remaining);i&&(r=i,this.capture(r))}e[Ll(n)]=Ll(r)}parseQueryParam(e){let n=sL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=aL(this.remaining);o&&(r=o,this.capture(r))}let i=Db(n),s=Db(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Og(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new W(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=te);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[te]:new ye([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}};function Bb(t){return t.segments.length>0?new ye([],{[te]:t}):t}function $b(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=$b(i);if(r===te&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new ye(t.segments,e);return cL(n)}function cL(t){if(t.numberOfChildren===1&&t.children[te]){let e=t.children[te];return new ye(t.segments.concat(e.segments),e.children)}return t}function wa(t){return t instanceof Bn}function uL(t,e,n=null,r=null){let i=Hb(t);return qb(i,e,n,r)}function Hb(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new ye(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=Bb(r);return e??i}function qb(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Lg(i,i,i,n,r);let s=lL(e);if(s.toRoot())return Lg(i,i,new ye([],{}),n,r);let o=dL(s,i,t),a=o.processChildren?va(o.segmentGroup,o.index,s.commands):Gb(o.segmentGroup,o.index,s.commands);return Lg(i,o.segmentGroup,a,n,r)}function Fl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ea(t){return typeof t=="object"&&t!=null&&t.outlets}function Lg(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=zb(t,e,n);let a=Bb($b(o));return new Bn(a,s,i)}function zb(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=zb(s,e,n)}),new ye(t.segments,r)}var Vl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Fl(r[0]))throw new W(4003,!1);let i=r.find(Ea);if(i&&i!==kb(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function lL(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Vl(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Vl(n,e,r)}var Ns=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function dL(t,e,n){if(t.isAbsolute)return new Ns(e,!0,0);if(!n)return new Ns(e,!1,NaN);if(n.parent===null)return new Ns(n,!0,0);let r=Fl(t.commands[0])?0:1,i=n.segments.length-1+r;return hL(n,i,t.numberOfDoubleDots)}function hL(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new Ns(r,!1,i-s)}function fL(t){return Ea(t[0])?t[0].outlets:{[te]:t}}function Gb(t,e,n){if(t??=new ye([],{}),t.segments.length===0&&t.hasChildren())return va(t,e,n);let r=pL(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new ye(t.segments.slice(0,r.pathIndex),{});return s.children[te]=new ye(t.segments.slice(r.pathIndex),t.children),va(s,0,i)}else return r.match&&i.length===0?new ye(t.segments,{}):r.match&&!t.hasChildren()?Hg(t,e,n):r.match?va(t,0,i):Hg(t,e,n)}function va(t,e,n){if(n.length===0)return new ye(t.segments,{});{let r=fL(n),i={};if(Object.keys(r).some(s=>s!==te)&&t.children[te]&&t.numberOfChildren===1&&t.children[te].segments.length===0){let s=va(t.children[te],e,n);return new ye(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=Gb(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ye(t.segments,i)}}function pL(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Ea(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!Cb(u,l,o))return s;r+=2}else{if(!Cb(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Hg(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Ea(s)){let u=gL(s.outlets);return new ye(r,u)}if(i===0&&Fl(n[0])){let u=t.segments[e];r.push(new si(u.path,bb(n[0]))),i++;continue}let o=Ea(s)?s.outlets[te]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Fl(a)?(r.push(new si(o,bb(a))),i+=2):(r.push(new si(o,{})),i++)}return new ye(r,{})}function gL(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Hg(new ye([],{}),0,r))}),e}function bb(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Cb(t,e,n){return t==n.path&&pn(e,n.parameters)}var _a="imperative",qe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(qe||{}),Bt=class{constructor(e,n){this.id=e,this.url=n}},Os=class extends Bt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=qe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},$n=class extends Bt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=qe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Nt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Nt||{}),Ul=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ul||{}),jn=class extends Bt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Dr=class extends Bt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=qe.NavigationSkipped}},Ta=class extends Bt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=qe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},jl=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qg=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zg=class extends Bt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=qe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Gg=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wg=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kg=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Qg=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Yg=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zg=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jg=class{constructor(e){this.snapshot=e,this.type=qe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xg=class{constructor(e){this.snapshot=e,this.type=qe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bl=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=qe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Da=class{},Ls=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function mL(t,e){return t.providers&&!t._injector&&(t._injector=Tl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Xt(t){return t.outlet||te}function yL(t,e){let n=t.filter(r=>Xt(r)===e);return n.push(...t.filter(r=>Xt(r)!==e)),n}function Pa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var em=class{get injector(){return Pa(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new xa(this.rootInjector),this.attachRef=null}},xa=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new em(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(j(Ct))}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),$l=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=tm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=tm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=nm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return nm(e,this._root).map(n=>n.value)}};function tm(t,e){if(t===e.value)return e;for(let n of e.children){let r=tm(t,n);if(r)return r}return null}function nm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=nm(t,n);if(r.length)return r.unshift(e),r}return[]}var Rt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Rs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Hl=class extends $l{constructor(e,n){super(e),this.snapshot=n,dm(this,e)}toString(){return this.snapshot.toString()}};function Wb(t){let e=vL(t),n=new Be([new si("",{})]),r=new Be({}),i=new Be({}),s=new Be({}),o=new Be(""),a=new ai(n,r,s,o,i,te,t,e.root);return a.snapshot=e.root,new Hl(new Rt(a,[]),e)}function vL(t){let e={},n={},r={},i="",s=new Ms([],e,r,i,n,te,t,null,{});return new zl("",new Rt(s,[]))}var ai=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ie(l=>l[Na]))??Q(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(e=>xs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(e=>xs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ql(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&Qb(i)&&(r.resolve[Na]=i.title),r}var Ms=class{get title(){return this.data?.[Na]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},zl=class extends $l{constructor(e,n){super(n),this.url=e,dm(this,n)}toString(){return Kb(this._root)}};function dm(t,e){e.value._routerState=t,e.children.forEach(n=>dm(t,n))}function Kb(t){let e=t.children.length>0?` { ${t.children.map(Kb).join(", ")} } `:"";return`${t.value}${e}`}function Fg(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,pn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),pn(e.params,n.params)||t.paramsSubject.next(n.params),z1(e.url,n.url)||t.urlSubject.next(n.url),pn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function rm(t,e){let n=pn(t.params,e.params)&&Q1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||rm(t.parent,e.parent))}function Qb(t){return typeof t.title=="string"||t.title===null}var _L=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=te,this.activateEvents=new pt,this.deactivateEvents=new pt,this.attachEvents=new pt,this.detachEvents=new pt,this.parentContexts=k(xa),this.location=k(Es),this.changeDetector=k(Ds),this.inputBinder=k(Ql,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new im(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=ca({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ll]})}}return t})(),im=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ai?this.route:e===xa?this.childContexts:this.parent.get(e,n)}},Ql=new $(""),Sb=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=Yo([r.queryParams,r.params,r.data]).pipe(ht(([s,o,a],u)=>(a=L(L(L({},s),o),a),u===0?Q(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let o=rb(r.component);if(!o){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(n,i)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac})}}return t})();function IL(t,e,n){let r=ba(t,e._root,n?n._root:void 0);return new Hl(r,e)}function ba(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=wL(t,e,n);return new Rt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ba(t,a)),o}}let r=EL(e.value),i=e.children.map(s=>ba(t,s));return new Rt(r,i)}}function wL(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ba(t,r,i);return ba(t,r)})}function EL(t){return new ai(new Be(t.url),new Be(t.params),new Be(t.queryParams),new Be(t.fragment),new Be(t.data),t.outlet,t.component,t)}var Ca=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},Yb="ngNavigationCancelingError";function Gl(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=wa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Zb(!1,Nt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Zb(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Yb]=!0,n.cancellationCode=e,n}function TL(t){return Jb(t)&&wa(t.url)}function Jb(t){return!!t&&t[Yb]}var DL=(t,e,n,r)=>ie(i=>(new sm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),sm=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Fg(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Rs(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Rs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Rs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Rs(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Xg(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Zg(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Fg(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Fg(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Wl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ps=class{constructor(e,n){this.component=e,this.route=n}};function bL(t,e,n){let r=t._root,i=e?e._root:null;return ma(r,i,n,[r.value])}function CL(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Vs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!BE(t)?t:e.get(t):r}function ma(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Rs(e);return t.children.forEach(o=>{SL(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ia(a,n.getContext(o),i)),i}function SL(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=AL(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Wl(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ma(t,e,a?a.children:null,r,i):ma(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ps(a.outlet.component,o))}else o&&Ia(e,a,i),i.canActivateChecks.push(new Wl(r)),s.component?ma(t,null,a?a.children:null,r,i):ma(t,null,n,r,i);return i}function AL(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!oi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!oi(t.url,e.url)||!pn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rm(t,e)||!pn(t.queryParams,e.queryParams);case"paramsChange":default:return!rm(t,e)}}function Ia(t,e,n){let r=Rs(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Ia(o,e.children.getContext(s),n):Ia(o,null,n):Ia(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ps(e.outlet.component,i)):n.canDeactivateChecks.push(new Ps(null,i)):n.canDeactivateChecks.push(new Ps(null,i))}function ka(t){return typeof t=="function"}function RL(t){return typeof t=="boolean"}function NL(t){return t&&ka(t.canLoad)}function ML(t){return t&&ka(t.canActivate)}function PL(t){return t&&ka(t.canActivateChild)}function xL(t){return t&&ka(t.canDeactivate)}function kL(t){return t&&ka(t.canMatch)}function Xb(t){return t instanceof xn||t?.name==="EmptyError"}var xl=Symbol("INITIAL_VALUE");function Fs(){return ht(t=>Yo(t.map(e=>e.pipe(kn(1),Af(xl)))).pipe(ie(e=>{for(let n of e)if(n!==!0){if(n===xl)return xl;if(n===!1||OL(n))return n}return!0}),Ot(e=>e!==xl),kn(1)))}function OL(t){return wa(t)||t instanceof Ca}function LL(t,e){return Le(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?Q(_e(L({},n),{guardsResult:!0})):FL(o,r,i,t).pipe(Le(a=>a&&RL(a)?VL(r,s,t,e):Q(a)),ie(a=>_e(L({},n),{guardsResult:a})))})}function FL(t,e,n,r){return De(t).pipe(Le(i=>HL(i.component,i.route,n,e,r)),sn(i=>i!==!0,!0))}function VL(t,e,n,r){return De(e).pipe(Kr(i=>Qi(jL(i.route.parent,r),UL(i.route,r),$L(t,i.path,n),BL(t,i.route,n))),sn(i=>i!==!0,!0))}function UL(t,e){return t!==null&&e&&e(new Jg(t)),Q(!0)}function jL(t,e){return t!==null&&e&&e(new Yg(t)),Q(!0)}function BL(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Q(!0);let i=r.map(s=>Tu(()=>{let o=Pa(e)??n,a=Vs(s,o),u=ML(a)?a.canActivate(e,t):fn(o,()=>a(e,t));return Cr(u).pipe(sn())}));return Q(i).pipe(Fs())}function $L(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>CL(o)).filter(o=>o!==null).map(o=>Tu(()=>{let a=o.guards.map(u=>{let l=Pa(o.node)??n,h=Vs(u,l),p=PL(h)?h.canActivateChild(r,t):fn(l,()=>h(r,t));return Cr(p).pipe(sn())});return Q(a).pipe(Fs())}));return Q(s).pipe(Fs())}function HL(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Q(!0);let o=s.map(a=>{let u=Pa(e)??i,l=Vs(a,u),h=xL(l)?l.canDeactivate(t,e,n,r):fn(u,()=>l(t,e,n,r));return Cr(h).pipe(sn())});return Q(o).pipe(Fs())}function qL(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Q(!0);let s=i.map(o=>{let a=Vs(o,t),u=NL(a)?a.canLoad(e,n):fn(t,()=>a(e,n));return Cr(u)});return Q(s).pipe(Fs(),eC(r))}function eC(t){return mf(Fe(e=>{if(typeof e!="boolean")throw Gl(t,e)}),ie(e=>e===!0))}function zL(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Q(!0);let s=i.map(o=>{let a=Vs(o,t),u=kL(a)?a.canMatch(e,n):fn(t,()=>a(e,n));return Cr(u)});return Q(s).pipe(Fs(),eC(r))}var Sa=class{constructor(e){this.segmentGroup=e||null}},Aa=class extends Error{constructor(e){super(),this.urlTree=e}};function As(t){return Wi(new Sa(t))}function GL(t){return Wi(new W(4e3,!1))}function WL(t){return Wi(Zb(!1,Nt.GuardRejected))}var om=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Q(r);if(i.numberOfChildren>1||!i.children[te])return GL(`${e.redirectTo}`);i=i.children[te]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:b,title:N}=i,R=fn(s,()=>a({params:y,data:b,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:N}));if(R instanceof Bn)throw new Aa(R);n=R}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Aa(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Bn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new ye(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},am={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function KL(t,e,n,r,i){let s=tC(t,e,n);return s.matched?(r=mL(e,r),zL(r,e,n,i).pipe(ie(o=>o===!0?s:L({},am)))):Q(s)}function tC(t,e,n){if(e.path==="**")return QL(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},am):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||q1)(n,t,e);if(!i)return L({},am);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function QL(t){return{matched:!0,parameters:t.length>0?kb(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Ab(t,e,n,r){return n.length>0&&JL(t,n,r)?{segmentGroup:new ye(e,ZL(r,new ye(n,t.children))),slicedSegments:[]}:n.length===0&&XL(t,n,r)?{segmentGroup:new ye(t.segments,YL(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ye(t.segments,t.children),slicedSegments:n}}function YL(t,e,n,r){let i={};for(let s of n)if(Yl(t,e,s)&&!r[Xt(s)]){let o=new ye([],{});i[Xt(s)]=o}return L(L({},r),i)}function ZL(t,e){let n={};n[te]=e;for(let r of t)if(r.path===""&&Xt(r)!==te){let i=new ye([],{});n[Xt(r)]=i}return n}function JL(t,e,n){return n.some(r=>Yl(t,e,r)&&Xt(r)!==te)}function XL(t,e,n){return n.some(r=>Yl(t,e,r))}function Yl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function eF(t,e,n){return e.length===0&&!t.children[n]}var cm=class{};function tF(t,e,n,r,i,s,o="emptyOnly"){return new um(t,e,n,r,i,o,s).recognize()}var nF=31,um=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new om(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new W(4002,`'${e.segmentGroup}'`)}recognize(){let e=Ab(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ie(({children:n,rootSnapshot:r})=>{let i=new Rt(r,n),s=new zl("",i),o=uL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new Ms([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),te,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,te,n).pipe(ie(r=>({children:r,rootSnapshot:n})),hr(r=>{if(r instanceof Aa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Sa?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(ie(o=>o instanceof Rt?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return De(s).pipe(Kr(o=>{let a=r.children[o],u=yL(n,o);return this.processSegmentGroup(e,u,a,o,i)}),Sf((o,a)=>(o.push(...a),o)),fr(null),Cf(),Le(o=>{if(o===null)return As(r);let a=nC(o);return rF(a),Q(a)}))}processSegment(e,n,r,i,s,o,a){return De(n).pipe(Kr(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,s,o,a).pipe(hr(l=>{if(l instanceof Sa)return Q(null);throw l}))),sn(u=>!!u),hr(u=>{if(Xb(u))return eF(r,i,s)?Q(new cm):As(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,u){return Xt(r)!==o&&(o===te||!Yl(i,s,r))?As(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,u):As(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=tC(n,i,s);if(!u)return As(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>nF&&(this.allowRedirects=!1));let y=new Ms(s,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Rb(i),Xt(i),i.component??i._loadedComponent??null,i,Nb(i)),b=ql(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(Le(R=>this.processSegment(e,r,n,R.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=KL(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(ht(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ht(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,b=new Ms(m,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Rb(r),Xt(r),r.component??r._loadedComponent??null,r,Nb(r)),N=ql(b,o,this.paramsInheritanceStrategy);b.params=Object.freeze(N.params),b.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:O}=Ab(n,m,y,l);if(O.length===0&&R.hasChildren())return this.processChildren(h,l,R,b).pipe(ie(F=>new Rt(b,F)));if(l.length===0&&O.length===0)return Q(new Rt(b,[]));let U=Xt(r)===s;return this.processSegment(h,l,R,O,U?te:s,!0,b).pipe(ie(F=>new Rt(b,F instanceof Rt?[F]:[])))}))):As(n)))}getChildConfig(e,n,r){return n.children?Q({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Q({routes:n._loadedRoutes,injector:n._loadedInjector}):qL(e,n,r,this.urlSerializer).pipe(Le(i=>i?this.configLoader.loadChildren(e,n).pipe(Fe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):WL(n))):Q({routes:[],injector:e})}};function rF(t){t.sort((e,n)=>e.value.outlet===te?-1:n.value.outlet===te?1:e.value.outlet.localeCompare(n.value.outlet))}function iF(t){let e=t.value.routeConfig;return e&&e.path===""}function nC(t){let e=[],n=new Set;for(let r of t){if(!iF(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=nC(r.children);e.push(new Rt(r.value,i))}return e.filter(r=>!n.has(r))}function Rb(t){return t.data||{}}function Nb(t){return t.resolve||{}}function sF(t,e,n,r,i,s){return Le(o=>tF(t,e,n,r,o.extractedUrl,i,s).pipe(ie(({state:a,tree:u})=>_e(L({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function oF(t,e){return Le(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Q(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of rC(u))o.add(l);let a=0;return De(o).pipe(Kr(u=>s.has(u)?aF(u,r,t,e):(u.data=ql(u,u.parent,t).resolve,Q(void 0))),Fe(()=>a++),Yi(1),Le(u=>a===o.size?Q(n):bt))})}function rC(t){let e=t.children.map(n=>rC(n)).flat();return[t,...e]}function aF(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!Qb(i)&&(s[Na]=i.title),cF(s,t,e,r).pipe(ie(o=>(t._resolvedData=o,t.data=ql(t,t.parent,n).resolve,null)))}function cF(t,e,n,r){let i=jg(t);if(i.length===0)return Q({});let s={};return De(i).pipe(Le(o=>uF(t[o],e,n,r).pipe(sn(),Fe(a=>{if(a instanceof Ca)throw Gl(new ks,a);s[o]=a}))),Yi(1),bf(s),hr(o=>Xb(o)?bt:Wi(o)))}function uF(t,e,n,r){let i=Pa(e)??r,s=Vs(t,i),o=s.resolve?s.resolve(e,n):fn(i,()=>s(e,n));return Cr(o)}function Vg(t){return ht(e=>{let n=t(e);return n?De(n).pipe(ie(()=>e)):Q(e)})}var iC=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===te);return r}getResolvedTitleForRoute(n){return n.data[Na]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:()=>k(lF),providedIn:"root"})}}return t})(),lF=(()=>{class t extends iC{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(j(Eb))}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Oa=new $("",{providedIn:"root",factory:()=>({})}),dF=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=XE({type:t,selectors:[["ng-component"]],standalone:!0,features:[QD],decls:1,vars:0,template:function(r,i){r&1&&pg(0,"router-outlet")},dependencies:[_L],encapsulation:2})}}return t})();function hm(t){let e=t.children&&t.children.map(hm),n=e?_e(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==te&&(n.component=dF),n}var Ra=new $(""),fm=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(Sl)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Q(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Cr(n.loadComponent()).pipe(ie(sC),Fe(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Zo(()=>{this.componentLoaders.delete(n)})),i=new Hi(r,()=>new dt).pipe($i());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=hF(r,this.compiler,n,this.onLoadEndListener).pipe(Zo(()=>{this.childrenLoaders.delete(r)})),o=new Hi(s,()=>new dt).pipe($i());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function hF(t,e,n,r){return Cr(t.loadChildren()).pipe(ie(sC),Le(i=>i instanceof ia||Array.isArray(i)?Q(i):De(e.compileModuleAsync(i))),ie(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Ra,[],{optional:!0,self:!0}).flat()),{routes:o.map(hm),injector:s}}))}function fF(t){return t&&typeof t=="object"&&"default"in t}function sC(t){return fF(t)?t.default:t}var pm=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:()=>k(pF),providedIn:"root"})}}return t})(),pF=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),oC=new $(""),aC=new $("");function gF(t,e,n){let r=t.get(aC),i=t.get(It);return t.get(fe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),mF(t))),{onViewTransitionCreated:u}=r;return u&&fn(t,()=>u({transition:a,from:e,to:n})),o})}function mF(t){return new Promise(e=>{fg({read:()=>setTimeout(e)},{injector:t})})}var yF=new $(""),gm=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new dt,this.transitionAbortSubject=new dt,this.configLoader=k(fm),this.environmentInjector=k(Ct),this.urlSerializer=k(Ma),this.rootContexts=k(xa),this.location=k(Ss),this.inputBindingEnabled=k(Ql,{optional:!0})!==null,this.titleStrategy=k(iC),this.options=k(Oa,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(pm),this.createViewTransition=k(oC,{optional:!0}),this.navigationErrorHandler=k(yF,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Q(void 0),this.rootComponentType=null;let n=i=>this.events.next(new Kg(i)),r=i=>this.events.next(new Qg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(_e(L(L({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new Be({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:_a,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ot(s=>s.id!==0),ie(s=>_e(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ht(s=>{let o=!1,a=!1;return Q(s).pipe(ht(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Nt.SupersededByNewNavigation),bt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?_e(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Dr(u.id,this.urlSerializer.serialize(u.rawUrl),p,Ul.IgnoredSameUrlNavigation)),u.resolve(!1),bt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Q(u).pipe(ht(p=>{let m=this.transitions?.getValue();return this.events.next(new Os(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?bt:Promise.resolve(p)}),sF(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Fe(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=_e(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new jl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:b,extras:N}=u,R=new Os(p,this.urlSerializer.serialize(m),y,b);this.events.next(R);let O=Wb(this.rootComponentType).snapshot;return this.currentTransition=s=_e(L({},u),{targetSnapshot:O,urlAfterRedirects:m,extras:_e(L({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Q(s)}else{let p="";return this.events.next(new Dr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Ul.IgnoredByUrlHandlingStrategy)),u.resolve(!1),bt}}),Fe(u=>{let l=new qg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ie(u=>(this.currentTransition=s=_e(L({},u),{guards:bL(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),LL(this.environmentInjector,u=>this.events.next(u)),Fe(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Gl(this.urlSerializer,u.guardsResult);let l=new zg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Ot(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Nt.GuardRejected),!1)),Vg(u=>{if(u.guards.canActivateChecks.length)return Q(u).pipe(Fe(l=>{let h=new Gg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),ht(l=>{let h=!1;return Q(l).pipe(oF(this.paramsInheritanceStrategy,this.environmentInjector),Fe({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Nt.NoDataFromResolver)}}))}),Fe(l=>{let h=new Wg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Vg(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Fe(m=>{h.component=m}),ie(()=>{})));for(let m of h.children)p.push(...l(m));return p};return Yo(l(u.targetSnapshot.root)).pipe(fr(null),kn(1))}),Vg(()=>this.afterPreactivation()),ht(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?De(h).pipe(ie(()=>s)):Q(s)}),ie(u=>{let l=IL(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=_e(L({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Fe(()=>{this.events.next(new Da)}),DL(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),kn(1),Fe({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new $n(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),Rf(this.transitionAbortSubject.pipe(Fe(u=>{throw u}))),Zo(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Nt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),hr(u=>{if(a=!0,Jb(u))this.events.next(new jn(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),TL(u)?this.events.next(new Ls(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Ta(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let h=fn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Ca){let{message:p,cancellationCode:m}=Gl(this.urlSerializer,h);this.events.next(new jn(s.id,this.urlSerializer.serialize(s.extractedUrl),p,m)),this.events.next(new Ls(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=n.errorHandler(u);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return bt}))}))}cancelNavigationTransition(n,r,i){let s=new jn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function vF(t){return t!==_a}var _F=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:()=>k(IF),providedIn:"root"})}}return t})(),lm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},IF=(()=>{class t extends lm{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Qp(t)))(i||t)}})()}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),cC=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:()=>k(wF),providedIn:"root"})}}return t})(),wF=(()=>{class t extends cC{constructor(){super(...arguments),this.location=k(Ss),this.urlSerializer=k(Ma),this.options=k(Oa,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(pm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Bn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Wb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Os)this.stateMemento=this.createStateMemento();else if(n instanceof Dr)this.rawUrlTree=r.initialUrl;else if(n instanceof jl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof Da?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof jn&&(n.code===Nt.GuardRejected||n.code===Nt.NoDataFromResolver)?this.restoreHistory(r):n instanceof Ta?this.restoreHistory(r,!0):n instanceof $n&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Bn?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=L(L({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Qp(t)))(i||t)}})()}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ya=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ya||{});function uC(t,e){t.events.pipe(Ot(n=>n instanceof $n||n instanceof jn||n instanceof Ta||n instanceof Dr),ie(n=>n instanceof $n||n instanceof Dr?ya.COMPLETE:(n instanceof jn?n.code===Nt.Redirect||n.code===Nt.SupersededByNewNavigation:!1)?ya.REDIRECTING:ya.FAILED),Ot(n=>n!==ya.REDIRECTING),kn(1)).subscribe(()=>{e()})}function EF(t){throw t}var TF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},DF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},br=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=k(Dl),this.stateManager=k(cC),this.options=k(Oa,{optional:!0})||{},this.pendingTasks=k(Is),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(gm),this.urlSerializer=k(Ma),this.location=k(Ss),this.urlHandlingStrategy=k(pm),this._events=new dt,this.errorHandler=this.options.errorHandler||EF,this.navigated=!1,this.routeReuseStrategy=k(_F),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(Ra,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(Ql,{optional:!0}),this.eventsSubscription=new Me,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof jn&&r.code!==Nt.Redirect&&r.code!==Nt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof $n)this.navigated=!0;else if(r instanceof Ls){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||vF(i.source)},o);this.scheduleNavigation(a,_a,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}CF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),_a,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(hm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=Hb(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return qb(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=wa(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,_a,null,r)}navigate(n,r={skipLocationChange:!1}){return bF(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=L({},TF):r===!1?i=L({},DF):i=r,wa(n))return Tb(this.currentUrlTree,n,i);let s=this.parseUrl(n);return Tb(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return uC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function bF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new W(4008,!1)}function CF(t){return!(t instanceof Da)&&!(t instanceof Ls)}var Kl=class{};var SF=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ot(n=>n instanceof $n),Kr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Tl(s.providers,n,`Route: ${s.path}`));let o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return De(i).pipe(Ki())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=Q(null);let s=i.pipe(Le(o=>o===null?Q(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return De([s,o]).pipe(Ki())}else return s})}static{this.\u0275fac=function(r){return new(r||t)(j(br),j(Sl),j(Ct),j(Kl),j(fm))}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),lC=new $(""),AF=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Os?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof $n?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Dr&&n.code===Ul.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Bl&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Bl(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){gD()}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac})}}return t})();function n5(t,...e){return hn([{provide:Ra,multi:!0,useValue:t},[],{provide:ai,useFactory:dC,deps:[br]},{provide:Cl,multi:!0,useFactory:hC},e.map(n=>n.\u0275providers)])}function dC(t){return t.routerState.root}function La(t,e){return{\u0275kind:t,\u0275providers:e}}function hC(){let t=k(tt);return e=>{let n=t.get(ri);if(e!==n.components[0])return;let r=t.get(br),i=t.get(fC);t.get(mm)===1&&r.initialNavigation(),t.get(pC,null,ne.Optional)?.setUpPreloading(),t.get(lC,null,ne.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var fC=new $("",{factory:()=>new dt}),mm=new $("",{providedIn:"root",factory:()=>1});function RF(){return La(2,[{provide:mm,useValue:0},{provide:bl,multi:!0,deps:[tt],useFactory:e=>{let n=e.get(lb,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(br),s=e.get(fC);uC(i,()=>{r(!0)}),e.get(gm).afterPreactivation=()=>(r(!0),s.closed?Q(void 0):s),i.initialNavigation()}))}}])}function NF(){return La(3,[{provide:bl,multi:!0,useFactory:()=>{let e=k(br);return()=>{e.setUpLocationChangeListener()}}},{provide:mm,useValue:2}])}var pC=new $("");function MF(t){return La(0,[{provide:pC,useExisting:SF},{provide:Kl,useExisting:t}])}function PF(){return La(8,[Sb,{provide:Ql,useExisting:Sb}])}function xF(t){let e=[{provide:oC,useValue:gF},{provide:aC,useValue:L({skipNextTransition:!!t?.skipInitialTransition},t)}];return La(9,e)}var Mb=new $("ROUTER_FORROOT_GUARD"),kF=[Ss,{provide:Ma,useClass:ks},br,xa,{provide:ai,useFactory:dC,deps:[br]},fm,[]],r5=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[kF,[],{provide:Ra,multi:!0,useValue:n},{provide:Mb,useFactory:VF,deps:[[br,new Ke,new Op]]},{provide:Oa,useValue:r||{}},r?.useHash?LF():FF(),OF(),r?.preloadingStrategy?MF(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?UF(r):[],r?.bindToComponentInputs?PF().\u0275providers:[],r?.enableViewTransitions?xF().\u0275providers:[],jF()]}}static forChild(n){return{ngModule:t,providers:[{provide:Ra,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||t)(j(Mb,8))}}static{this.\u0275mod=ys({type:t})}static{this.\u0275inj=ms({})}}return t})();function OF(){return{provide:lC,useFactory:()=>{let t=k(pb),e=k(fe),n=k(Oa),r=k(gm),i=k(Ma);return n.scrollOffset&&t.setOffset(n.scrollOffset),new AF(i,r,t,e,n)}}}function LF(){return{provide:ii,useClass:hb}}function FF(){return{provide:ii,useClass:bg}}function VF(t){return"guarded"}function UF(t){return[t.initialNavigation==="disabled"?NF().\u0275providers:[],t.initialNavigation==="enabledBlocking"?RF().\u0275providers:[]]}var Pb=new $("");function jF(){return[{provide:Pb,useFactory:hC},{provide:Cl,multi:!0,useExisting:Pb}]}var Bm={};NN(Bm,{FirebaseError:()=>nt,SDK_VERSION:()=>Mt,_DEFAULT_ENTRY_NAME:()=>mn,_addComponent:()=>Hs,_addOrOverwriteComponent:()=>jm,_apps:()=>Sr,_clearComponents:()=>BV,_components:()=>$s,_getProvider:()=>qn,_isFirebaseApp:()=>jC,_isFirebaseServerApp:()=>qt,_registerComponent:()=>rt,_removeServiceInstance:()=>UC,_serverApps:()=>Bs,deleteApp:()=>qa,getApp:()=>zn,getApps:()=>Ha,initializeApp:()=>qs,initializeServerApp:()=>BC,onLog:()=>sd,registerVersion:()=>me,setLogLevel:()=>od});var mC=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},BF=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Zl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,o||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):BF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new vm;let m=s<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let b=l<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},vm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},$F=function(t){let e=mC(t);return Zl.encodeByteArray(e,!0)},Fa=function(t){return $F(t).replace(/\./g,"")},Im=function(t){try{return Zl.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Va(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!HF(n)||(t[n]=Va(t[n],e[n]));return t}function HF(t){return t!=="__proto__"}function Jl(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var qF=()=>Jl().__FIREBASE_DEFAULTS__,zF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Im(t[1]);return e&&JSON.parse(e)},Xl=()=>{try{return qF()||zF()||GF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wm=t=>{var e,n;return(n=(e=Xl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Em=t=>{let e=wm(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Tm=()=>{var t;return(t=Xl())===null||t===void 0?void 0:t.config},Dm=t=>{var e;return(e=Xl())===null||e===void 0?void 0:e[`_${t}`]};var ci=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ed(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fa(JSON.stringify(n)),Fa(JSON.stringify(o)),""].join(".")}function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function WF(){var t;let e=(t=Xl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vC(){return typeof window<"u"||bm()}function bm(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function _C(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IC(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function wC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EC(){let t=ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TC(){return!WF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ua(){try{return typeof indexedDB=="object"}catch{return!1}}function DC(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var KF="FirebaseError",nt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=KF,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wt.prototype.create)}},wt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?QF(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new nt(i,a,r)}};function QF(t,e){return t.replace(YF,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var YF=/\{\$([^}]+)}/g;function Cm(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function bC(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ui(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(gC(s)&&gC(o)){if(!ui(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function gC(t){return t!==null&&typeof t=="object"}function ja(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Us(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function js(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function td(t,e){let n=new _m(t,e);return n.subscribe.bind(n)}var _m=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ZF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ym),i.error===void 0&&(i.error=ym),i.complete===void 0&&(i.complete=ym);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ZF(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ym(){}var o5=4*60*60*1e3;function Ie(t){return t&&t._delegate?t._delegate:t}var ke=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var li="[DEFAULT]";var Sm=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ci;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XF(e))try{this.getOrInitializeService({instanceIdentifier:li})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=li){return this.instances.has(e)}getOptions(e=li){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=li){return this.component?this.component.multipleInstances?e:li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function JF(t){return t===li?void 0:t}function XF(t){return t.instantiationMode==="EAGER"}var Ba=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Sm(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Am=[],se=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(se||{}),CC={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},eV=se.INFO,tV={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},nV=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=tV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},$t=class{constructor(e){this.name=e,this._logLevel=eV,this._logHandler=nV,this._userLogHandler=null,Am.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}};function SC(t){Am.forEach(e=>{e.setLogLevel(t)})}function AC(t,e){for(let n of Am){let r=null;e&&e.level&&(r=CC[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{let a=o.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");s>=(r??i.logLevel)&&t({level:se[s].toLowerCase(),message:a,args:o,type:i.name})}}}var rV=(t,e)=>e.some(n=>t instanceof n),RC,NC;function iV(){return RC||(RC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sV(){return NC||(NC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var MC=new WeakMap,Nm=new WeakMap,PC=new WeakMap,Rm=new WeakMap,Pm=new WeakMap;function oV(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(gn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&MC.set(n,t)}).catch(()=>{}),Pm.set(e,t),e}function aV(t){if(Nm.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Nm.set(t,e)}var Mm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Nm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||PC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xC(t){Mm=t(Mm)}function cV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(nd(this),e,...n);return PC.set(r,e.sort?e.sort():[e]),gn(r)}:sV().includes(t)?function(...e){return t.apply(nd(this),e),gn(MC.get(this))}:function(...e){return gn(t.apply(nd(this),e))}}function uV(t){return typeof t=="function"?cV(t):(t instanceof IDBTransaction&&aV(t),rV(t,iV())?new Proxy(t,Mm):t)}function gn(t){if(t instanceof IDBRequest)return oV(t);if(Rm.has(t))return Rm.get(t);let e=uV(t);return e!==t&&(Rm.set(t,e),Pm.set(e,t)),e}var nd=t=>Pm.get(t);function OC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=gn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(gn(o.result),u.oldVersion,u.newVersion,gn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var lV=["get","getKey","getAll","getAllKeys","count"],dV=["put","add","delete","clear"],xm=new Map;function kC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xm.get(e))return xm.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=dV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lV.includes(n)))return;let s=function(o,...a){return _(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return xm.set(e,s),s}xC(t=>_e(L({},t),{get:(e,n,r)=>kC(e,n)||t.get(e,n,r),has:(e,n)=>!!kC(e,n)||t.has(e,n)}));var Om=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hV(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function hV(t){let e=t.getComponent();return e?.type==="VERSION"}var rd="@firebase/app",Lm="0.10.13";var Hn=new $t("@firebase/app"),fV="@firebase/app-compat",pV="@firebase/analytics-compat",gV="@firebase/analytics",mV="@firebase/app-check-compat",yV="@firebase/app-check",vV="@firebase/auth",_V="@firebase/auth-compat",IV="@firebase/database",wV="@firebase/data-connect",EV="@firebase/database-compat",TV="@firebase/functions",DV="@firebase/functions-compat",bV="@firebase/installations",CV="@firebase/installations-compat",SV="@firebase/messaging",AV="@firebase/messaging-compat",RV="@firebase/performance",NV="@firebase/performance-compat",MV="@firebase/remote-config",PV="@firebase/remote-config-compat",xV="@firebase/storage",kV="@firebase/storage-compat",OV="@firebase/firestore",LV="@firebase/vertexai-preview",FV="@firebase/firestore-compat",VV="firebase",UV="10.14.1";var mn="[DEFAULT]",jV={[rd]:"fire-core",[fV]:"fire-core-compat",[gV]:"fire-analytics",[pV]:"fire-analytics-compat",[yV]:"fire-app-check",[mV]:"fire-app-check-compat",[vV]:"fire-auth",[_V]:"fire-auth-compat",[IV]:"fire-rtdb",[wV]:"fire-data-connect",[EV]:"fire-rtdb-compat",[TV]:"fire-fn",[DV]:"fire-fn-compat",[bV]:"fire-iid",[CV]:"fire-iid-compat",[SV]:"fire-fcm",[AV]:"fire-fcm-compat",[RV]:"fire-perf",[NV]:"fire-perf-compat",[MV]:"fire-rc",[PV]:"fire-rc-compat",[xV]:"fire-gcs",[kV]:"fire-gcs-compat",[OV]:"fire-fst",[FV]:"fire-fst-compat",[LV]:"fire-vertex","fire-js":"fire-js",[VV]:"fire-js-all"};var Sr=new Map,Bs=new Map,$s=new Map;function Hs(t,e){try{t.container.addComponent(e)}catch(n){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jm(t,e){t.container.addOrOverwriteComponent(e)}function rt(t){let e=t.name;if($s.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;$s.set(e,t);for(let n of Sr.values())Hs(n,t);for(let n of Bs.values())Hs(n,t);return!0}function qn(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function UC(t,e,n=mn){qn(t,e).clearInstance(n)}function jC(t){return t.options!==void 0}function qt(t){return t.settings!==void 0}function BV(){$s.clear()}var $V={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ht=new wt("app","Firebase",$V);var id=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ke("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ht.create("app-deleted",{appName:this._name})}};var Fm=class extends id{constructor(e,n,r,i){let s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{let a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,me(rd,Lm,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){qa(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ht.create("server-app-deleted")}};var Mt=UV;function qs(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:mn,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ht.create("bad-app-name",{appName:String(i)});if(n||(n=Tm()),!n)throw Ht.create("no-options");let s=Sr.get(i);if(s){if(ui(n,s.options)&&ui(r,s.config))return s;throw Ht.create("duplicate-app",{appName:i})}let o=new Ba(i);for(let u of $s.values())o.addComponent(u);let a=new id(n,r,o);return Sr.set(i,a),a}function BC(t,e){if(vC()&&!bm())throw Ht.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;jC(t)?n=t.options:n=t;let r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;let i=l=>[...l].reduce((h,p)=>Math.imul(31,h)+p.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Ht.create("finalization-registry-not-supported",{});let s=""+i(JSON.stringify(r)),o=Bs.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;let a=new Ba(s);for(let l of $s.values())a.addComponent(l);let u=new Fm(n,e,s,a);return Bs.set(s,u),u}function zn(t=mn){let e=Sr.get(t);if(!e&&t===mn&&Tm())return qs();if(!e)throw Ht.create("no-app",{appName:t});return e}function Ha(){return Array.from(Sr.values())}function qa(t){return _(this,null,function*(){let e=!1,n=t.name;Sr.has(n)?(e=!0,Sr.delete(n)):Bs.has(n)&&t.decRefCount()<=0&&(Bs.delete(n),e=!0),e&&(yield Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)})}function me(t,e,n){var r;let i=(r=jV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(a.join(" "));return}rt(new ke(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function sd(t,e){if(t!==null&&typeof t!="function")throw Ht.create("invalid-log-argument");AC(t,e)}function od(t){SC(t)}var HV="firebase-heartbeat-database",qV=1,$a="firebase-heartbeat-store",km=null;function $C(){return km||(km=OC(HV,qV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($a)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ht.create("idb-open",{originalErrorMessage:t.message})})),km}function zV(t){return _(this,null,function*(){try{let n=(yield $C()).transaction($a),r=yield n.objectStore($a).get(HC(t));return yield n.done,r}catch(e){if(e instanceof nt)Hn.warn(e.message);else{let n=Ht.create("idb-get",{originalErrorMessage:e?.message});Hn.warn(n.message)}}})}function LC(t,e){return _(this,null,function*(){try{let r=(yield $C()).transaction($a,"readwrite");yield r.objectStore($a).put(e,HC(t)),yield r.done}catch(n){if(n instanceof nt)Hn.warn(n.message);else{let r=Ht.create("idb-set",{originalErrorMessage:n?.message});Hn.warn(r.message)}}})}function HC(t){return`${t.name}!${t.options.appId}`}var GV=1024,WV=30*24*60*60*1e3,Vm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Um(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=FC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=WV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Hn.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=FC(),{heartbeatsToSend:r,unsentEntries:i}=KV(this._heartbeatsCache.heartbeats),s=Fa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Hn.warn(n),""}})}};function FC(){return new Date().toISOString().substring(0,10)}function KV(t,e=GV){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),VC(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),VC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Um=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Ua()?DC().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield zV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return LC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return LC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function VC(t){return Fa(JSON.stringify({version:2,heartbeats:t})).length}function QV(t){rt(new ke("platform-logger",e=>new Om(e),"PRIVATE")),rt(new ke("heartbeat",e=>new Vm(e),"PRIVATE")),me(rd,Lm,t),me(rd,Lm,"esm2017"),me("fire-js","")}QV("");var YV="firebase",ZV="10.14.1";me(YV,ZV,"app");var Ar=new Er("ANGULARFIRE2_VERSION");function cd(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var za=(t,e)=>{let n=e?[e]:Ha(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Gn=class{constructor(){return za(JV)}},JV="app-check";function zs(){}var ad=class{zone;delegate;constructor(e,n=wf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},$m=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zs,{},zs,zs)),n.pipe(Fe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Rr=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new ad(Zone.current)),this.insideAngular=n.run(()=>new ad(Zone.current,Qo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(j(fe))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ga(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function XV(t){return Ga().ngZone.runOutsideAngular(()=>t())}function di(t){return Ga().ngZone.run(()=>t())}function Hm(t){return t.pipe(Pn(Ga().outsideAngular))}function ud(t){return eU(Ga())(t)}function eU(t){return function(n){return n=n.lift(new $m(t.ngZone)),n.pipe(dr(t.outsideAngular),Pn(t.insideAngular))}}var tU=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),di(()=>t.apply(void 0,r))},it=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=di(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zs,{},zs,zs))),r[s]=tU(r[s],n));let i=XV(()=>t.apply(this,r));if(!e)if(i instanceof oe){let s=Ga();return i.pipe(dr(s.outsideAngular),Pn(s.insideAngular))}else return di(()=>i);return i instanceof oe?i.pipe(ud):i instanceof Promise?di(()=>new Promise((s,o)=>i.then(a=>di(()=>s(a)),a=>di(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:di(()=>i)};var Wn=class{constructor(e){return e}},hi=class{constructor(){return Ha()}};function rU(t){return t&&t.length===1?t[0]:new Wn(zn())}var qm=new $("angularfire2._apps"),iU={provide:Wn,useFactory:rU,deps:[[new Ke,qm]]},sU={provide:hi,deps:[[new Ke,qm]]};function oU(t){return(e,n)=>{let r=n.get(At);me("angularfire",Ar.full,"core"),me("angularfire",Ar.full,"app"),me("angular",gg.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Wn(i)}}function L5(t,...e){return hn([iU,sU,{provide:qm,useFactory:oU(t),multi:!0,deps:[fe,tt,Rr,...e]}])}var F5=it(qs,!0);function oS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var aS=oS,cS=new wt("auth","Firebase",oS());var gd=new $t("@firebase/auth");function aU(t,...e){gd.logLevel<=se.WARN&&gd.warn(`Auth (${Mt}): ${t}`,...e)}function dd(t,...e){gd.logLevel<=se.ERROR&&gd.error(`Auth (${Mt}): ${t}`,...e)}function vn(t,...e){throw fy(t,...e)}function fi(t,...e){return fy(t,...e)}function uS(t,e,n){let r=Object.assign(Object.assign({},aS()),{[e]:n});return new wt("auth","Firebase",r).create(e,{appName:t.name})}function Yn(t){return uS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cS.create(t,...e)}function z(t,e,...n){if(!t)throw fy(e,...n)}function Kn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw dd(e),new Error(e)}function Mr(t,e){t||Kn(e)}function Km(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function cU(){return qC()==="http:"||qC()==="https:"}function qC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function uU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cU()||IC()||"connection"in navigator)?navigator.onLine:!0}function lU(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var pi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mr(n>e,"Short delay should be less than long delay!"),this.isMobile=yC()||wC()}get(){return uU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function py(t,e){Mr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var md=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var dU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var hU=new pi(3e4,6e4);function Zn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Jn(s,o,a,u){return _(this,arguments,function*(t,e,n,r,i={}){return lS(t,i,()=>_(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=ja(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:m},l);return _C()||(y.referrerPolicy="no-referrer"),md.fetch()(dS(t,t.config.apiHost,n,p),y)}))})}function lS(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},dU),e);try{let i=new Qm(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw ld(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ld(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw ld(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw ld(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw uS(t,h,l);vn(t,h)}}catch(i){if(i instanceof nt)throw i;vn(t,"network-request-failed",{message:String(i)})}})}function ec(s,o,a,u){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield Jn(t,e,n,r,i);return"mfaPendingCredential"in l&&vn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function dS(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?py(t.config,i):`${t.config.apiScheme}://${i}`}function fU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Qm=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fi(this.auth,"network-request-failed")),hU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ld(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=fi(t,e,r);return i.customData._tokenResponse=n,i}function zC(t){return t!==void 0&&t.enterprise!==void 0}var Ym=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return fU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function pU(t,e){return _(this,null,function*(){return Jn(t,"GET","/v2/recaptchaConfig",Zn(t,e))})}function gU(t,e){return _(this,null,function*(){return Jn(t,"POST","/v1/accounts:delete",e)})}function hS(t,e){return _(this,null,function*(){return Jn(t,"POST","/v1/accounts:lookup",e)})}function Wa(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function gy(t,e=!1){return _(this,null,function*(){let n=Ie(t),r=yield n.getIdToken(e),i=my(r);z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Wa(zm(i.auth_time)),issuedAtTime:Wa(zm(i.iat)),expirationTime:Wa(zm(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function zm(t){return Number(t)*1e3}function my(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Im(n);return i?JSON.parse(i):(dd("Failed to decode base64 JWT payload"),null)}catch(i){return dd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function GC(t){let e=my(t);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Qa(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof nt&&mU(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function mU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Zm=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ya=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wa(this.lastLoginAt),this.creationTime=Wa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function yd(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Qa(t,hS(n,{idToken:r}));z(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?fS(s.providerUserInfo):[],a=yU(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ya(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function yy(t){return _(this,null,function*(){let e=Ie(t);yield yd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function yU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fS(t){return t.map(e=>{var{providerId:n}=e,r=Ef(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function vU(t,e){return _(this,null,function*(){let n=yield lS(t,{},()=>_(this,null,function*(){let r=ja({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=dS(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",md.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function _U(t,e){return _(this,null,function*(){return Jn(t,"POST","/v2/accounts:revokeToken",Zn(t,e))})}var Ka=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){z(e.length!==0,"internal-error");let n=GC(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield vU(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(z(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Kn("not implemented")}};function Nr(t,e){z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Gs=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ef(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ya(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield Qa(this,this.stsTokenManager.getToken(this.auth,e));return z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return gy(this,e)}reload(){return yy(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield yd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(qt(this.auth.app))return Promise.reject(Yn(this.auth));let e=yield this.getIdToken();return yield Qa(this,gU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=n.createdAt)!==null&&l!==void 0?l:void 0,U=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:F,emailVerified:H,isAnonymous:ve,providerData:G,stsTokenManager:E}=n;z(F&&E,e,"internal-error");let v=Ka.fromJSON(this.name,E);z(typeof F=="string",e,"internal-error"),Nr(p,e.name),Nr(m,e.name),z(typeof H=="boolean",e,"internal-error"),z(typeof ve=="boolean",e,"internal-error"),Nr(y,e.name),Nr(b,e.name),Nr(N,e.name),Nr(R,e.name),Nr(O,e.name),Nr(U,e.name);let I=new t({uid:F,auth:e,email:m,emailVerified:H,displayName:p,isAnonymous:ve,photoURL:b,phoneNumber:y,tenantId:N,stsTokenManager:v,createdAt:O,lastLoginAt:U});return G&&Array.isArray(G)&&(I.providerData=G.map(T=>Object.assign({},T))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new Ka;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield yd(s),s})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];z(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?fS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ka;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ya(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var WC=new Map;function Qn(t){Mr(t instanceof Function,"Expected a class definition");let e=WC.get(t);return e?(Mr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,WC.set(t,e),e)}var IU=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Jm=IU;function hd(t,e,n){return`firebase:${t}:${e}:${n}`}var vd=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=hd(this.userKey,i.apiKey,s),this.fullPersistenceKey=hd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Gs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(Qn(Jm),e,r);let i=(yield Promise.all(n.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Qn(Jm),o=hd(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=Gs._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>_(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function KC(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_S(e))return"Blackberry";if(IS(e))return"Webos";if(gS(e))return"Safari";if((e.includes("chrome/")||mS(e))&&!e.includes("edge/"))return"Chrome";if(vS(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function pS(t=ze()){return/firefox\//i.test(t)}function gS(t=ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mS(t=ze()){return/crios\//i.test(t)}function yS(t=ze()){return/iemobile/i.test(t)}function vS(t=ze()){return/android/i.test(t)}function _S(t=ze()){return/blackberry/i.test(t)}function IS(t=ze()){return/webos/i.test(t)}function vy(t=ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wU(t=ze()){var e;return vy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function EU(){return EC()&&document.documentMode===10}function wS(t=ze()){return vy(t)||vS(t)||IS(t)||_S(t)||/windows phone/i.test(t)||yS(t)}function ES(t,e=[]){let n;switch(t){case"Browser":n=KC(ze());break;case"Worker":n=`${KC(ze())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mt}/${r}`}var Xm=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function TU(n){return _(this,arguments,function*(t,e={}){return Jn(t,"GET","/v2/passwordPolicy",Zn(t,e))})}var DU=6,ey=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:DU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var ty=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _d(this),this.idTokenSubscription=new _d(this),this.beforeStateQueue=new Xm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qn(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield vd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield hS(this,{idToken:e}),r=yield Gs._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(qt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield yd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=lU()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(qt(this.app))return Promise.reject(Yn(this));let n=e?Ie(e):null;return n&&z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return qt(this.app)?Promise.reject(Yn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return qt(this.app)?Promise.reject(Yn(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Qn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield TU(this),n=new ey(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield _U(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Qn(e)||this._popupRedirectResolver;z(n,this,"argument-error"),this.redirectPersistenceManager=yield vd.create(this,[Qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ES(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&aU(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function mi(t){return Ie(t)}var _d=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=td(n=>this.observer=n)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Cd={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bU(t){Cd=t}function TS(t){return Cd.loadJS(t)}function CU(){return Cd.recaptchaEnterpriseScript}function SU(){return Cd.gapiScript}function DS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var AU="recaptcha-enterprise",RU="NO_RECAPTCHA",ny=class{constructor(e){this.type=AU,this.auth=mi(e)}verify(e="verify",n=!1){return _(this,null,function*(){function r(s){return _(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>_(this,null,function*(){pU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Ym(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;zC(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(RU)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&zC(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=CU();u.length!==0&&(u+=a),TS(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function QC(t,e,n,r=!1){return _(this,null,function*(){let i=new ny(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function ry(t,e,n,r){return _(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield QC(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>_(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield QC(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function _y(t,e){let n=qn(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(ui(s,e??{}))return i;vn(i,"already-initialized")}return n.initialize({options:e})}function NU(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Qn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Iy(t,e,n){let r=mi(t);z(r._canInitEmulator,r,"emulator-config-failed"),z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=bS(e),{host:o,port:a}=MU(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||PU()}function bS(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MU(t){let e=bS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:YC(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:YC(o)}}}function YC(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function PU(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Za=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kn("not implemented")}_getIdTokenResponse(e){return Kn("not implemented")}_linkToIdToken(e,n){return Kn("not implemented")}_getReauthenticationResolver(e){return Kn("not implemented")}};function xU(t,e){return _(this,null,function*(){return Jn(t,"POST","/v1/accounts:signUp",e)})}function kU(t,e){return _(this,null,function*(){return ec(t,"POST","/v1/accounts:signInWithPassword",Zn(t,e))})}function OU(t,e){return _(this,null,function*(){return Jn(t,"POST","/v1/accounts:sendOobCode",Zn(t,e))})}function LU(t,e){return _(this,null,function*(){return OU(t,e)})}function FU(t,e){return _(this,null,function*(){return ec(t,"POST","/v1/accounts:signInWithEmailLink",Zn(t,e))})}function VU(t,e){return _(this,null,function*(){return ec(t,"POST","/v1/accounts:signInWithEmailLink",Zn(t,e))})}var Ja=class t extends Za{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ry(e,n,"signInWithPassword",kU);case"emailLink":return FU(e,{email:this._email,oobCode:this._password});default:vn(e,"internal-error")}})}_linkToIdToken(e,n){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ry(e,r,"signUpPassword",xU);case"emailLink":return VU(e,{idToken:n,email:this._email,oobCode:this._password});default:vn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Gm(t,e){return _(this,null,function*(){return ec(t,"POST","/v1/accounts:signInWithIdp",Zn(t,e))})}function UU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jU(t){let e=Us(js(t)).link,n=e?Us(js(e)).deep_link_id:null,r=Us(js(t)).deep_link_id;return(r?Us(js(r)).link:null)||r||n||e||t}var Id=class t{constructor(e){var n,r,i,s,o,a;let u=Us(js(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=UU((i=u.mode)!==null&&i!==void 0?i:null);z(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=jU(e);try{return new t(n)}catch{return null}}};var CS=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Ja._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Id.parseLink(r);return z(i,"argument-error"),Ja._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),wd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var iy=class extends wd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function BU(t,e){return _(this,null,function*(){return ec(t,"POST","/v1/accounts:signUp",Zn(t,e))})}var Ws=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let s=yield Gs._fromIdTokenResponse(e,r,i),o=ZC(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=ZC(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function ZC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var sy=class t extends nt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function SS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?sy._fromErrorAndOperation(t,s,e,r):s})}function $U(t,e,n=!1){return _(this,null,function*(){let r=yield Qa(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Ws._forOperation(t,"link",r)})}function HU(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(qt(r.app))return Promise.reject(Yn(r));let i="reauthenticate";try{let s=yield Qa(t,SS(r,i,e,t),n);z(s.idToken,r,"internal-error");let o=my(s.idToken);z(o,r,"internal-error");let{sub:a}=o;return z(t.uid===a,r,"user-mismatch"),Ws._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&vn(r,"user-mismatch"),s}})}function AS(t,e,n=!1){return _(this,null,function*(){if(qt(t.app))return Promise.reject(Yn(t));let r="signIn",i=yield SS(t,r,e),s=yield Ws._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function wy(t,e){return _(this,null,function*(){return AS(mi(t),e)})}function qU(t,e,n){var r;z(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),z(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(z(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(z(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}function RS(t){return _(this,null,function*(){let e=mi(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Ey(t,e,n){return _(this,null,function*(){if(qt(t.app))return Promise.reject(Yn(t));let r=mi(t),o=yield ry(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BU).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&RS(t),u}),a=yield Ws._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function Ty(t,e,n){return qt(t.app)?Promise.reject(Yn(t)):wy(Ie(t),CS.credential(e,n)).catch(r=>_(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&RS(t),r}))}function Dy(t,e){return _(this,null,function*(){let n=Ie(t),i={requestType:"VERIFY_EMAIL",idToken:yield t.getIdToken()};e&&qU(n.auth,i,e);let{email:s}=yield LU(n.auth,i);s!==t.email&&(yield t.reload())})}function by(t,e,n,r){return Ie(t).onIdTokenChanged(e,n,r)}function Cy(t,e,n){return Ie(t).beforeAuthStateChanged(e,n)}function Sy(t){return Ie(t).signOut()}var Ed="__sak";var Td=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ed,"1"),this.storage.removeItem(Ed),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var zU=1e3,GU=10,WU=(()=>{class t extends Td{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wS(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);EU()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,GU):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},zU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield ur(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield ur(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield ur(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),NS=WU;var KU=(()=>{class t extends Td{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Ay=KU;function QU(t){return Promise.all(t.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var YU=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,o)})),l=yield QU(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function MS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var oy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=MS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function yn(){return window}function ZU(t){yn().location.href=t}function PS(){return typeof yn().WorkerGlobalScope<"u"&&typeof yn().importScripts=="function"}function JU(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function XU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ej(){return PS()?self:null}var xS="firebaseLocalStorageDb",tj=1,Dd="firebaseLocalStorage",kS="fbase_key",gi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Sd(t,e){return t.transaction([Dd],e?"readwrite":"readonly").objectStore(Dd)}function nj(){let t=indexedDB.deleteDatabase(xS);return new gi(t).toPromise()}function ay(){let t=indexedDB.open(xS,tj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Dd,{keyPath:kS})}catch(i){n(i)}}),t.addEventListener("success",()=>_(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Dd)?e(r):(r.close(),yield nj(),e(yield ay()))}))})}function JC(t,e,n){return _(this,null,function*(){let r=Sd(t,!0).put({[kS]:e,value:n});return new gi(r).toPromise()})}function rj(t,e){return _(this,null,function*(){let n=Sd(t,!1).get(e),r=yield new gi(n).toPromise();return r===void 0?null:r.value})}function XC(t,e){let n=Sd(t,!0).delete(e);return new gi(n).toPromise()}var ij=800,sj=3,oj=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield ay(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>sj)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return PS()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=YU._getInstance(ej()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield JU(),!this.activeServiceWorker)return;this.sender=new oy(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||XU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield ay();return yield JC(n,Ed,"1"),yield XC(n,Ed),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>JC(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>rj(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>XC(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(s=>{let o=Sd(s,!1).getAll();return new gi(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),ij)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),OS=oj;var z5=DS("rcb"),G5=new pi(3e4,6e4);function aj(t,e){return e?Qn(e):(z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Xa=class extends Za{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gm(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gm(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gm(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function cj(t){return AS(t.auth,new Xa(t),t.bypassAuthState)}function uj(t){let{auth:e,user:n}=t;return z(n,e,"internal-error"),HU(n,new Xa(t),t.bypassAuthState)}function lj(t){return _(this,null,function*(){let{auth:e,user:n}=t;return z(n,e,"internal-error"),$U(n,new Xa(t),t.bypassAuthState)})}var cy=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cj;case"linkViaPopup":case"linkViaRedirect":return lj;case"reauthViaPopup":case"reauthViaRedirect":return uj;default:vn(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var W5=new pi(2e3,1e4);var dj="pendingRedirect",fd=new Map,uy=class t extends cy{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=fd.get(this.auth._key());if(!e){try{let r=(yield hj(this.resolver,this.auth))?yield ur(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fd.set(this.auth._key(),e)}return this.bypassAuthState||fd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return ur(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,ur(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function hj(t,e){return _(this,null,function*(){let n=gj(e),r=pj(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function fj(t,e){fd.set(t._key(),e)}function pj(t){return Qn(t._redirectPersistence)}function gj(t){return hd(dj,t.config.apiKey,t.name)}function mj(t,e,n=!1){return _(this,null,function*(){if(qt(t.app))return Promise.reject(Yn(t));let r=mi(t),i=aj(r,e),o=yield new uy(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var yj=10*60*1e3,ly=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!LS(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(fi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yj&&this.cachedEventUids.clear(),this.cachedEventUids.has(eS(e))}saveEventToCache(e){this.cachedEventUids.add(eS(e)),this.lastProcessedEventTime=Date.now()}};function eS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LS({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function vj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LS(t);default:return!1}}function _j(n){return _(this,arguments,function*(t,e={}){return Jn(t,"GET","/v1/projects",e)})}var Ij=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wj=/^https?/;function Ej(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield _j(t);for(let n of e)try{if(Tj(n))return}catch{}vn(t,"unauthorized-domain")})}function Tj(t){let e=Km(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!wj.test(n))return!1;if(Ij.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Dj=new pi(3e4,6e4);function tS(){let t=yn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bj(t){return new Promise((e,n)=>{var r,i,s;function o(){tS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tS(),n(fi(t,"network-request-failed"))},timeout:Dj.get()})}if(!((i=(r=yn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=yn().gapi)===null||s===void 0)&&s.load)o();else{let a=DS("iframefcb");return yn()[a]=()=>{gapi.load?o():n(fi(t,"network-request-failed"))},TS(`${SU()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw pd=null,e})}var pd=null;function Cj(t){return pd=pd||bj(t),pd}var Sj=new pi(5e3,15e3),Aj="__/auth/iframe",Rj="emulator/auth/iframe",Nj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pj(t){let e=t.config;z(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?py(e,Rj):`https://${t.config.authDomain}/${Aj}`,r={apiKey:e.apiKey,appName:t.name,v:Mt},i=Mj.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ja(r).slice(1)}`}function xj(t){return _(this,null,function*(){let e=yield Cj(t),n=yn().gapi;return z(n,t,"internal-error"),e.open({where:document.body,url:Pj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nj,dontclear:!0},r=>new Promise((i,s)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=fi(t,"network-request-failed"),a=yn().setTimeout(()=>{s(o)},Sj.get());function u(){yn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var kj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Oj=500,Lj=600,Fj="_blank",Vj="http://localhost",bd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Uj(t,e,n,r=Oj,i=Lj){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},kj),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ze().toLowerCase();n&&(a=mS(l)?Fj:n),pS(l)&&(e=e||Vj,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,b])=>`${m}${y}=${b},`,"");if(wU(l)&&a!=="_self")return jj(e||"",a),new bd(null);let p=window.open(e||"",a,h);z(p,t,"popup-blocked");try{p.focus()}catch{}return new bd(p)}function jj(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Bj="__/auth/handler",$j="emulator/auth/handler",Hj=encodeURIComponent("fac");function nS(t,e,n,r,i,s){return _(this,null,function*(){z(t.config.authDomain,t,"auth-domain-config-required"),z(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Mt,eventId:i};if(e instanceof wd){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",bC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof iy){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${Hj}=${encodeURIComponent(u)}`:"";return`${qj(t)}?${ja(a).slice(1)}${l}`})}function qj({config:t}){return t.emulator?py(t,$j):`https://${t.authDomain}/${Bj}`}var Wm="webStorageSupport",dy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ay,this._completeRedirectFn=mj,this._overrideRedirectResult=fj}_openPopup(e,n,r,i){return _(this,null,function*(){var s;Mr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield nS(e,n,r,Km(),i);return Uj(e,o,MS())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let s=yield nS(e,n,r,Km(),i);return ZU(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Mr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield xj(e),r=new ly(e);return n.register("authEvent",i=>(z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wm,{type:Wm},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Wm];o!==void 0&&n(!!o),vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ej(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return wS()||gS()||vy()}},FS=dy;var rS="@firebase/auth",iS="1.7.9";var hy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function zj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Gj(t){rt(new ke("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ES(t)},l=new ty(r,i,s,u);return NU(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),rt(new ke("auth-internal",e=>{let n=mi(e.getProvider("auth").getImmediate());return(r=>new hy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),me(rS,iS,zj(t)),me(rS,iS,"esm2017")}var Wj=5*60,Kj=Dm("authIdTokenMaxAge")||Wj,sS=null,Qj=t=>e=>_(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Kj)return;let i=n?.token;sS!==i&&(sS=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Ry(t=zn()){let e=qn(t,"auth");if(e.isInitialized())return e.getImmediate();let n=_y(t,{popupRedirectResolver:FS,persistence:[OS,NS,Ay]}),r=Dm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=Qj(s.toString());Cy(n,o,()=>o(n.currentUser)),by(n,a=>o(a))}}let i=wm("auth");return i&&Iy(n,`http://${i}`),n}function Yj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}bU({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=fi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Yj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Gj("Browser");var VS="auth",yi=class{constructor(e){return e}},tc=class{constructor(){return za(VS)}};var Ny=new $("angularfire2.auth-instances");function U2(t,e){let n=cd(VS,t,e);return n&&new yi(n)}function j2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new yi(r)}}var B2={provide:tc,deps:[[new Ke,Ny]]},$2={provide:yi,useFactory:U2,deps:[[new Ke,Ny],Wn]};function NK(t,...e){return me("angularfire",Ar.full,"auth"),hn([$2,B2,{provide:Ny,useFactory:j2(t),multi:!0,deps:[fe,tt,Rr,hi,[new Ke,Gn],...e]}])}var US=it(Ey,!0);var MK=it(Ry,!0);var jS=it(Dy,!0);var BS=it(Ty,!0);var $S=it(Sy,!0);var HS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qS={};var Pr,My;(function(){var t;function e(E,v){function I(){}I.prototype=v.prototype,E.D=v.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(T,D,S){for(var w=Array(arguments.length-2),An=2;An<arguments.length;An++)w[An-2]=arguments[An];return v.prototype[D].apply(T,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,I){I||(I=0);var T=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)T[D]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(D=0;16>D;++D)T[D]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=E.g[0],I=E.g[1],D=E.g[2];var S=E.g[3],w=v+(S^I&(D^S))+T[0]+3614090360&4294967295;v=I+(w<<7&4294967295|w>>>25),w=S+(D^v&(I^D))+T[1]+3905402710&4294967295,S=v+(w<<12&4294967295|w>>>20),w=D+(I^S&(v^I))+T[2]+606105819&4294967295,D=S+(w<<17&4294967295|w>>>15),w=I+(v^D&(S^v))+T[3]+3250441966&4294967295,I=D+(w<<22&4294967295|w>>>10),w=v+(S^I&(D^S))+T[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(D^v&(I^D))+T[5]+1200080426&4294967295,S=v+(w<<12&4294967295|w>>>20),w=D+(I^S&(v^I))+T[6]+2821735955&4294967295,D=S+(w<<17&4294967295|w>>>15),w=I+(v^D&(S^v))+T[7]+4249261313&4294967295,I=D+(w<<22&4294967295|w>>>10),w=v+(S^I&(D^S))+T[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(D^v&(I^D))+T[9]+2336552879&4294967295,S=v+(w<<12&4294967295|w>>>20),w=D+(I^S&(v^I))+T[10]+4294925233&4294967295,D=S+(w<<17&4294967295|w>>>15),w=I+(v^D&(S^v))+T[11]+2304563134&4294967295,I=D+(w<<22&4294967295|w>>>10),w=v+(S^I&(D^S))+T[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(D^v&(I^D))+T[13]+4254626195&4294967295,S=v+(w<<12&4294967295|w>>>20),w=D+(I^S&(v^I))+T[14]+2792965006&4294967295,D=S+(w<<17&4294967295|w>>>15),w=I+(v^D&(S^v))+T[15]+1236535329&4294967295,I=D+(w<<22&4294967295|w>>>10),w=v+(D^S&(I^D))+T[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^D&(v^I))+T[6]+3225465664&4294967295,S=v+(w<<9&4294967295|w>>>23),w=D+(v^I&(S^v))+T[11]+643717713&4294967295,D=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(D^S))+T[0]+3921069994&4294967295,I=D+(w<<20&4294967295|w>>>12),w=v+(D^S&(I^D))+T[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^D&(v^I))+T[10]+38016083&4294967295,S=v+(w<<9&4294967295|w>>>23),w=D+(v^I&(S^v))+T[15]+3634488961&4294967295,D=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(D^S))+T[4]+3889429448&4294967295,I=D+(w<<20&4294967295|w>>>12),w=v+(D^S&(I^D))+T[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^D&(v^I))+T[14]+3275163606&4294967295,S=v+(w<<9&4294967295|w>>>23),w=D+(v^I&(S^v))+T[3]+4107603335&4294967295,D=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(D^S))+T[8]+1163531501&4294967295,I=D+(w<<20&4294967295|w>>>12),w=v+(D^S&(I^D))+T[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^D&(v^I))+T[2]+4243563512&4294967295,S=v+(w<<9&4294967295|w>>>23),w=D+(v^I&(S^v))+T[7]+1735328473&4294967295,D=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(D^S))+T[12]+2368359562&4294967295,I=D+(w<<20&4294967295|w>>>12),w=v+(I^D^S)+T[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^D)+T[8]+2272392833&4294967295,S=v+(w<<11&4294967295|w>>>21),w=D+(S^v^I)+T[11]+1839030562&4294967295,D=S+(w<<16&4294967295|w>>>16),w=I+(D^S^v)+T[14]+4259657740&4294967295,I=D+(w<<23&4294967295|w>>>9),w=v+(I^D^S)+T[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^D)+T[4]+1272893353&4294967295,S=v+(w<<11&4294967295|w>>>21),w=D+(S^v^I)+T[7]+4139469664&4294967295,D=S+(w<<16&4294967295|w>>>16),w=I+(D^S^v)+T[10]+3200236656&4294967295,I=D+(w<<23&4294967295|w>>>9),w=v+(I^D^S)+T[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^D)+T[0]+3936430074&4294967295,S=v+(w<<11&4294967295|w>>>21),w=D+(S^v^I)+T[3]+3572445317&4294967295,D=S+(w<<16&4294967295|w>>>16),w=I+(D^S^v)+T[6]+76029189&4294967295,I=D+(w<<23&4294967295|w>>>9),w=v+(I^D^S)+T[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^D)+T[12]+3873151461&4294967295,S=v+(w<<11&4294967295|w>>>21),w=D+(S^v^I)+T[15]+530742520&4294967295,D=S+(w<<16&4294967295|w>>>16),w=I+(D^S^v)+T[2]+3299628645&4294967295,I=D+(w<<23&4294967295|w>>>9),w=v+(D^(I|~S))+T[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~D))+T[7]+1126891415&4294967295,S=v+(w<<10&4294967295|w>>>22),w=D+(v^(S|~I))+T[14]+2878612391&4294967295,D=S+(w<<15&4294967295|w>>>17),w=I+(S^(D|~v))+T[5]+4237533241&4294967295,I=D+(w<<21&4294967295|w>>>11),w=v+(D^(I|~S))+T[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~D))+T[3]+2399980690&4294967295,S=v+(w<<10&4294967295|w>>>22),w=D+(v^(S|~I))+T[10]+4293915773&4294967295,D=S+(w<<15&4294967295|w>>>17),w=I+(S^(D|~v))+T[1]+2240044497&4294967295,I=D+(w<<21&4294967295|w>>>11),w=v+(D^(I|~S))+T[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~D))+T[15]+4264355552&4294967295,S=v+(w<<10&4294967295|w>>>22),w=D+(v^(S|~I))+T[6]+2734768916&4294967295,D=S+(w<<15&4294967295|w>>>17),w=I+(S^(D|~v))+T[13]+1309151649&4294967295,I=D+(w<<21&4294967295|w>>>11),w=v+(D^(I|~S))+T[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~D))+T[11]+3174756917&4294967295,S=v+(w<<10&4294967295|w>>>22),w=D+(v^(S|~I))+T[2]+718787259&4294967295,D=S+(w<<15&4294967295|w>>>17),w=I+(S^(D|~v))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+S&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var I=v-this.blockSize,T=this.B,D=this.h,S=0;S<v;){if(D==0)for(;S<=I;)i(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<v;)if(T[D++]=E.charCodeAt(S++),D==this.blockSize){i(this,T),D=0;break}}else for(;S<v;)if(T[D++]=E[S++],D==this.blockSize){i(this,T),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var I=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=I&255,I/=256;for(this.u(E),E=Array(16),v=I=0;4>v;++v)for(var T=0;32>T;T+=8)E[I++]=this.g[v]>>>T&255;return E};function s(E,v){var I=a;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=v(E)}function o(E,v){this.h=v;for(var I=[],T=!0,D=E.length-1;0<=D;D--){var S=E[D]|0;T&&S==v||(I[D]=S,T=!1)}this.g=I}var a={};function u(E){return-128<=E&&128>E?s(E,function(v){return new o([v|0],0>v?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return R(l(-E));for(var v=[],I=1,T=0;E>=I;T++)v[T]=E/I|0,I*=4294967296;return new o(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return R(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),T=p,D=0;D<E.length;D+=8){var S=Math.min(8,E.length-D),w=parseInt(E.substring(D,D+S),v);8>S?(S=l(Math.pow(v,S)),T=T.j(S).add(l(w))):(T=T.j(I),T=T.add(l(w)))}return T}var p=u(0),m=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var E=0,v=1,I=0;I<this.g.length;I++){var T=this.i(I);E+=(0<=T?T:4294967296+T)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(b(this))return"0";if(N(this))return"-"+R(this).toString(E);for(var v=l(Math.pow(E,6)),I=this,T="";;){var D=H(I,v).g;I=O(I,D.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=D,b(I))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function b(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function N(E){return E.h==-1}t.l=function(E){return E=O(this,E),N(E)?-1:b(E)?0:1};function R(E){for(var v=E.g.length,I=[],T=0;T<v;T++)I[T]=~E.g[T];return new o(I,~E.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],T=0,D=0;D<=v;D++){var S=T+(this.i(D)&65535)+(E.i(D)&65535),w=(S>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);T=w>>>16,S&=65535,w&=65535,I[D]=w<<16|S}return new o(I,I[I.length-1]&-2147483648?-1:0)};function O(E,v){return E.add(R(v))}t.j=function(E){if(b(this)||b(E))return p;if(N(this))return N(E)?R(this).j(R(E)):R(R(this).j(E));if(N(E))return R(this.j(R(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,I=[],T=0;T<2*v;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var D=0;D<E.g.length;D++){var S=this.i(T)>>>16,w=this.i(T)&65535,An=E.i(D)>>>16,Co=E.i(D)&65535;I[2*T+2*D]+=w*Co,U(I,2*T+2*D),I[2*T+2*D+1]+=S*Co,U(I,2*T+2*D+1),I[2*T+2*D+1]+=w*An,U(I,2*T+2*D+1),I[2*T+2*D+2]+=S*An,U(I,2*T+2*D+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new o(I,0)};function U(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function F(E,v){this.g=E,this.h=v}function H(E,v){if(b(v))throw Error("division by zero");if(b(E))return new F(p,p);if(N(E))return v=H(R(E),v),new F(R(v.g),R(v.h));if(N(v))return v=H(E,R(v)),new F(R(v.g),v.h);if(30<E.g.length){if(N(E)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,T=v;0>=T.l(E);)I=ve(I),T=ve(T);var D=G(I,1),S=G(T,1);for(T=G(T,2),I=G(I,2);!b(T);){var w=S.add(T);0>=w.l(E)&&(D=D.add(I),S=w),T=G(T,1),I=G(I,1)}return v=O(E,D.j(v)),new F(D,v)}for(D=p;0<=E.l(v);){for(I=Math.max(1,Math.floor(E.m()/v.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=l(I),w=S.j(v);N(w)||0<w.l(E);)I-=T,S=l(I),w=S.j(v);b(S)&&(S=m),D=D.add(S),E=O(E,w)}return new F(D,E)}t.A=function(E){return H(this,E).h},t.and=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)&E.i(T);return new o(I,this.h&E.h)},t.or=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)|E.i(T);return new o(I,this.h|E.h)},t.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)^E.i(T);return new o(I,this.h^E.h)};function ve(E){for(var v=E.g.length+1,I=[],T=0;T<v;T++)I[T]=E.i(T)<<1|E.i(T-1)>>>31;return new o(I,E.h)}function G(E,v){var I=v>>5;v%=32;for(var T=E.g.length-I,D=[],S=0;S<T;S++)D[S]=0<v?E.i(S+I)>>>v|E.i(S+I+1)<<32-v:E.i(S+I);return new o(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,My=qS.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Pr=qS.Integer=o}).apply(typeof HS<"u"?HS:typeof self<"u"?self:typeof window<"u"?window:{});var Ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xn={};var Py,q2,Ks,xy,nc,Rd,ky,Oy,Ly;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ad=="object"&&Ad];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var x=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)x[Ee-2]=arguments[Ee];return d.prototype[C].apply(g,x)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let x=0;x<A;x++)c[C+x]=g[x]}else c.push(g)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function U(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function H(c){return H[" "](c),c}H[" "]=function(){};var ve=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function G(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function E(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function w(){var c=Ph;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class An{constructor(){this.h=this.g=null}add(d,f){let g=Co.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Co=new O(()=>new HR,c=>c.reset());class HR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let So,Ao=!1,Ph=new An,uI=()=>{let c=a.Promise.resolve(void 0);So=()=>{c.then(qR)}};var qR=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){S(f)}var d=Co;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ao=!1};function sr(){this.s=this.s,this.C=this.C}sr.prototype.s=!1,sr.prototype.ma=function(){this.s||(this.s=!0,this.N())},sr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ze(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Ze.prototype.h=function(){this.defaultPrevented=!0};var zR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ro(c,d){if(Ze.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ve){e:{try{H(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:GR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ro.aa.h.call(this)}}b(Ro,Ze);var GR={2:"touch",3:"pen",4:"mouse"};Ro.prototype.h=function(){Ro.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var No="closure_listenable_"+(1e6*Math.random()|0),WR=0;function KR(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++WR,this.da=this.fa=!1}function Mc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Pc(c){this.src=c,this.g={},this.h=0}Pc.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var x=kh(c,d,g,C);return-1<x?(d=c[x],f||(d.fa=!1)):(d=new KR(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function xh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(Mc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function kh(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Oh="closure_lm_"+(1e6*Math.random()|0),Lh={};function lI(c,d,f,g,C){if(g&&g.once)return hI(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)lI(c,d[A],f,g,C);return null}return f=jh(f),c&&c[No]?c.K(d,f,l(g)?!!g.capture:!!g,C):dI(c,d,f,!1,g,C)}function dI(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var x=l(C)?!!C.capture:!!C,Ee=Vh(c);if(Ee||(c[Oh]=Ee=new Pc(c)),f=Ee.add(d,f,g,x,A),f.proxy)return f;if(g=QR(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)zR||(C=x),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(pI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function QR(){function c(f){return d.call(c.src,c.listener,f)}let d=YR;return c}function hI(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)hI(c,d[A],f,g,C);return null}return f=jh(f),c&&c[No]?c.L(d,f,l(g)?!!g.capture:!!g,C):dI(c,d,f,!0,g,C)}function fI(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)fI(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=jh(f),c&&c[No]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=kh(A,f,g,C),-1<f&&(Mc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Vh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=kh(d,f,g,C)),(f=-1<c?d[c]:null)&&Fh(f))}function Fh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[No])xh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(pI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Vh(d))?(xh(f,c),f.h==0&&(f.src=null,d[Oh]=null)):Mc(c)}}}function pI(c){return c in Lh?Lh[c]:Lh[c]="on"+c}function YR(c,d){if(c.da)c=!0;else{d=new Ro(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Fh(c),c=f.call(g,d)}return c}function Vh(c){return c=c[Oh],c instanceof Pc?c:null}var Uh="__closure_events_fn_"+(1e9*Math.random()>>>0);function jh(c){return typeof c=="function"?c:(c[Uh]||(c[Uh]=function(d){return c.handleEvent(d)}),c[Uh])}function Je(){sr.call(this),this.i=new Pc(this),this.M=this,this.F=null}b(Je,sr),Je.prototype[No]=!0,Je.prototype.removeEventListener=function(c,d,f,g){fI(this,c,d,f,g)};function ut(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Ze(d,c);else if(d instanceof Ze)d.target=d.target||c;else{var C=d;d=new Ze(g,c),T(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var x=d.g=f[A];C=xc(x,g,!0,d)&&C}if(x=d.g=c,C=xc(x,g,!0,d)&&C,C=xc(x,g,!1,d)&&C,f)for(A=0;A<f.length;A++)x=d.g=f[A],C=xc(x,g,!1,d)&&C}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Mc(f[g]);delete c.g[d],c.h--}}this.F=null},Je.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Je.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function xc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var x=d[A];if(x&&!x.da&&x.capture==f){var Ee=x.listener,We=x.ha||x.src;x.fa&&xh(c.i,x),C=Ee.call(We,g)!==!1&&C}}return C&&!g.defaultPrevented}function gI(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function mI(c){c.g=gI(()=>{c.g=null,c.i&&(c.i=!1,mI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class ZR extends sr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:mI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mo(c){sr.call(this),this.h=c,this.g={}}b(Mo,sr);var yI=[];function vI(c){G(c.g,function(d,f){this.g.hasOwnProperty(f)&&Fh(d)},c),c.g={}}Mo.prototype.N=function(){Mo.aa.N.call(this),vI(this)},Mo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bh=a.JSON.stringify,JR=a.JSON.parse,XR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function $h(){}$h.prototype.h=null;function _I(c){return c.h||(c.h=c.i())}function II(){}var Po={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hh(){Ze.call(this,"d")}b(Hh,Ze);function qh(){Ze.call(this,"c")}b(qh,Ze);var jr={},wI=null;function kc(){return wI=wI||new Je}jr.La="serverreachability";function EI(c){Ze.call(this,jr.La,c)}b(EI,Ze);function xo(c){let d=kc();ut(d,new EI(d))}jr.STAT_EVENT="statevent";function TI(c,d){Ze.call(this,jr.STAT_EVENT,c),this.stat=d}b(TI,Ze);function lt(c){let d=kc();ut(d,new TI(d,c))}jr.Ma="timingevent";function DI(c,d){Ze.call(this,jr.Ma,c),this.size=d}b(DI,Ze);function ko(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Oo(){this.g=!0}Oo.prototype.xa=function(){this.g=!1};function eN(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var x="",Ee=A.split("&"),We=0;We<Ee.length;We++){var pe=Ee[We].split("=");if(1<pe.length){var Xe=pe[0];pe=pe[1];var et=Xe.split("_");x=2<=et.length&&et[1]=="type"?x+(Xe+"="+pe+"&"):x+(Xe+"=redacted&")}}else x=null;else x=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+x})}function tN(c,d,f,g,C,A,x){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+x})}function xi(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+rN(c,f)+(g?" "+g:"")})}function nN(c,d){c.info(function(){return"TIMEOUT: "+d})}Oo.prototype.info=function(){};function rN(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var x=1;x<C.length;x++)C[x]=""}}}}return Bh(f)}catch{return d}}var Oc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zh;function Lc(){}b(Lc,$h),Lc.prototype.g=function(){return new XMLHttpRequest},Lc.prototype.i=function(){return{}},zh=new Lc;function or(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Mo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new CI}function CI(){this.i=null,this.g="",this.h=!1}var SI={},Gh={};function Wh(c,d,f){c.L=1,c.v=jc(Rn(d)),c.m=f,c.P=!0,AI(c,null)}function AI(c,d){c.F=Date.now(),Fc(c),c.A=Rn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),$I(f.i,"t",g),c.C=0,f=c.j.J,c.h=new CI,c.g=ow(c.j,f?d:null,!c.m),0<c.O&&(c.M=new ZR(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(yI[0]=C.toString()),C=yI);for(var A=0;A<C.length;A++){var x=lI(f,C[A],g||d.handleEvent,!1,d.h||d);if(!x)break;d.g[x.key]=x}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),xo(),eN(c.i,c.u,c.A,c.l,c.R,c.m)}or.prototype.ca=function(c){c=c.target;let d=this.M;d&&Nn(c)==3?d.j():this.Y(c)},or.prototype.Y=function(c){try{if(c==this.g)e:{let et=Nn(this.g);var d=this.g.Ba();let Li=this.g.Z();if(!(3>et)&&(et!=3||this.g&&(this.h.h||this.g.oa()||QI(this.g)))){this.J||et!=4||d==7||(d==8||0>=Li?xo(3):xo(2)),Kh(this);var f=this.g.Z();this.X=f;t:if(RI(this)){var g=QI(this.g);c="";var C=g.length,A=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Br(this),Lo(this);var x="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=f==200,tN(this.i,this.u,this.A,this.l,this.R,et,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,We=this.g;if((Ee=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Ee)){var pe=Ee;break t}}pe=null}if(f=pe)xi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qh(this,f);else{this.o=!1,this.s=3,lt(12),Br(this),Lo(this);break e}}if(this.P){f=!0;let Gt;for(;!this.J&&this.C<x.length;)if(Gt=iN(this,x),Gt==Gh){et==4&&(this.s=4,lt(14),f=!1),xi(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==SI){this.s=4,lt(15),xi(this.i,this.l,x,"[Invalid Chunk]"),f=!1;break}else xi(this.i,this.l,Gt,null),Qh(this,Gt);if(RI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||x.length!=0||this.h.h||(this.s=1,lt(16),f=!1),this.o=this.o&&f,!f)xi(this.i,this.l,x,"[Invalid Chunked Response]"),Br(this),Lo(this);else if(0<x.length&&!this.W){this.W=!0;var Xe=this.j;Xe.g==this&&Xe.ba&&!Xe.M&&(Xe.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),tf(Xe),Xe.M=!0,lt(11))}}else xi(this.i,this.l,x,null),Qh(this,x);et==4&&Br(this),this.o&&!this.J&&(et==4?nw(this.j,this):(this.o=!1,Fc(this)))}else wN(this.g),f==400&&0<x.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),Br(this),Lo(this)}}}catch{}finally{}};function RI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function iN(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Gh:(f=Number(d.substring(f,g)),isNaN(f)?SI:(g+=1,g+f>d.length?Gh:(d=d.slice(g,g+f),c.C=g+f,d)))}or.prototype.cancel=function(){this.J=!0,Br(this)};function Fc(c){c.S=Date.now()+c.I,NI(c,c.I)}function NI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ko(m(c.ba,c),d)}function Kh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}or.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(nN(this.i,this.A),this.L!=2&&(xo(),lt(17)),Br(this),this.s=2,Lo(this)):NI(this,this.S-c)};function Lo(c){c.j.G==0||c.J||nw(c.j,c)}function Br(c){Kh(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,vI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Qh(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Yh(f.h,c))){if(!c.K&&Yh(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)zc(f),Hc(f);else break e;ef(f),lt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=ko(m(f.Za,f),6e3));if(1>=xI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Hr(f,11)}else if((c.K||f.g==c)&&zc(f),!U(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let pe=C[d];if(f.T=pe[0],pe=pe[1],f.G==2)if(pe[0]=="c"){f.K=pe[1],f.ia=pe[2];let Xe=pe[3];Xe!=null&&(f.la=Xe,f.j.info("VER="+f.la));let et=pe[4];et!=null&&(f.Aa=et,f.j.info("SVER="+f.Aa));let Li=pe[5];Li!=null&&typeof Li=="number"&&0<Li&&(g=1.5*Li,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Gt=c.g;if(Gt){let Wc=Gt.g?Gt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wc){var A=g.h;A.g||Wc.indexOf("spdy")==-1&&Wc.indexOf("quic")==-1&&Wc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Zh(A,A.h),A.h=null))}if(g.D){let nf=Gt.g?Gt.g.getResponseHeader("X-HTTP-Session-Id"):null;nf&&(g.ya=nf,be(g.I,g.D,nf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var x=c;if(g.qa=sw(g,g.J?g.ia:null,g.W),x.K){kI(g.h,x);var Ee=x,We=g.L;We&&(Ee.I=We),Ee.B&&(Kh(Ee),Fc(Ee)),g.g=x}else ew(g);0<f.i.length&&qc(f)}else pe[0]!="stop"&&pe[0]!="close"||Hr(f,7);else f.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Hr(f,7):Xh(f):pe[0]!="noop"&&f.l&&f.l.ta(pe),f.v=0)}}xo(4)}catch{}}var sN=class{constructor(c,d){this.g=c,this.map=d}};function MI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function PI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function xI(c){return c.h?1:c.g?c.g.size:0}function Yh(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Zh(c,d){c.g?c.g.add(d):c.h=d}function kI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}MI.prototype.cancel=function(){if(this.i=OI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function OI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function oN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function aN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function LI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=aN(c),g=oN(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var FI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cN(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function $r(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof $r){this.h=c.h,Vc(this,c.j),this.o=c.o,this.g=c.g,Uc(this,c.s),this.l=c.l;var d=c.i,f=new Uo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),VI(this,f),this.m=c.m}else c&&(d=String(c).match(FI))?(this.h=!1,Vc(this,d[1]||"",!0),this.o=Fo(d[2]||""),this.g=Fo(d[3]||"",!0),Uc(this,d[4]),this.l=Fo(d[5]||"",!0),VI(this,d[6]||"",!0),this.m=Fo(d[7]||"")):(this.h=!1,this.i=new Uo(null,this.h))}$r.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Vo(d,UI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Vo(d,UI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Vo(f,f.charAt(0)=="/"?dN:lN,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Vo(f,fN)),c.join("")};function Rn(c){return new $r(c)}function Vc(c,d,f){c.j=f?Fo(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Uc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function VI(c,d,f){d instanceof Uo?(c.i=d,pN(c.i,c.h)):(f||(d=Vo(d,hN)),c.i=new Uo(d,c.h))}function be(c,d,f){c.i.set(d,f)}function jc(c){return be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Fo(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Vo(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,uN),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function uN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var UI=/[#\/\?@]/g,lN=/[#\?:]/g,dN=/[#\?]/g,hN=/[#\?@]/g,fN=/#/g;function Uo(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function ar(c){c.g||(c.g=new Map,c.h=0,c.i&&cN(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Uo.prototype,t.add=function(c,d){ar(this),this.i=null,c=ki(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function jI(c,d){ar(c),d=ki(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function BI(c,d){return ar(c),d=ki(c,d),c.g.has(d)}t.forEach=function(c,d){ar(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},t.na=function(){ar(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},t.V=function(c){ar(this);let d=[];if(typeof c=="string")BI(this,c)&&(d=d.concat(this.g.get(ki(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return ar(this),this.i=null,c=ki(this,c),BI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function $I(c,d,f){jI(c,d),0<f.length&&(c.i=null,c.g.set(ki(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),x=this.V(g);for(g=0;g<x.length;g++){var C=A;x[g]!==""&&(C+="="+encodeURIComponent(String(x[g]))),c.push(C)}}return this.i=c.join("&")};function ki(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function pN(c,d){d&&!c.j&&(ar(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(jI(this,g),$I(this,C,f))},c)),c.j=d}function gN(c,d){let f=new Oo;if(a.Image){let g=new Image;g.onload=y(cr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(cr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(cr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(cr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function mN(c,d){let f=new Oo,g=new AbortController,C=setTimeout(()=>{g.abort(),cr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?cr(f,"TestPingServer: ok",!0,d):cr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),cr(f,"TestPingServer: error",!1,d)})}function cr(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function yN(){this.g=new XR}function vN(c,d,f){let g=f||"";try{LI(c,function(C,A){let x=C;l(C)&&(x=Bh(C)),d.push(g+A+"="+encodeURIComponent(x))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function jo(c){this.l=c.Ub||null,this.j=c.eb||!1}b(jo,$h),jo.prototype.g=function(){return new Bc(this.l,this.j)},jo.prototype.i=function(c){return function(){return c}}({});function Bc(c,d){Je.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Bc,Je),t=Bc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,$o(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,$o(this)),this.g&&(this.readyState=3,$o(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;HI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function HI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Bo(this):$o(this),this.readyState==3&&HI(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Bo(this))},t.Qa=function(c){this.g&&(this.response=c,Bo(this))},t.ga=function(){this.g&&Bo(this)};function Bo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,$o(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function $o(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Bc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function qI(c){let d="";return G(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Jh(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=qI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):be(c,d,f))}function Ne(c){Je.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ne,Je);var _N=/^https?$/i,IN=["POST","PUT"];t=Ne.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zh.g(),this.v=this.o?_I(this.o):_I(zh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){zI(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(IN,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,x]of f)this.g.setRequestHeader(A,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{KI(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){zI(this,A)}};function zI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,GI(c),$c(c)}function GI(c){c.A||(c.A=!0,ut(c,"complete"),ut(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ut(this,"complete"),ut(this,"abort"),$c(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$c(this,!0)),Ne.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?WI(this):this.bb())},t.bb=function(){WI(this)};function WI(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Nn(c)!=4||c.Z()!=2)){if(c.u&&Nn(c)==4)gI(c.Ea,0,c);else if(ut(c,"readystatechange"),Nn(c)==4){c.h=!1;try{let x=c.Z();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=x===0){var C=String(c.D).match(FI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!_N.test(C?C.toLowerCase():"")}f=g}if(f)ut(c,"complete"),ut(c,"success");else{c.m=6;try{var A=2<Nn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",GI(c)}}finally{$c(c)}}}}function $c(c,d){if(c.g){KI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||ut(c,"ready");try{f.onreadystatechange=g}catch{}}}function KI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Nn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),JR(d)}};function QI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function wN(c){let d={};c=(c.g&&2<=Nn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(U(c[g]))continue;var f=D(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}E(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ho(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function YI(c){this.Aa=0,this.i=[],this.j=new Oo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ho("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ho("baseRetryDelayMs",5e3,c),this.cb=Ho("retryDelaySeedMs",1e4,c),this.Wa=Ho("forwardChannelMaxRetries",2,c),this.wa=Ho("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new MI(c&&c.concurrentRequestLimit),this.Da=new yN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=YI.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){lt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=sw(this,null,this.W),qc(this)};function Xh(c){if(ZI(c),c.G==3){var d=c.U++,f=Rn(c.I);if(be(f,"SID",c.K),be(f,"RID",d),be(f,"TYPE","terminate"),qo(c,f),d=new or(c,c.j,d),d.L=2,d.v=jc(Rn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=ow(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Fc(d)}iw(c)}function Hc(c){c.g&&(tf(c),c.g.cancel(),c.g=null)}function ZI(c){Hc(c),c.u&&(a.clearTimeout(c.u),c.u=null),zc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function qc(c){if(!PI(c.h)&&!c.s){c.s=!0;var d=c.Ga;So||uI(),Ao||(So(),Ao=!0),Ph.add(d,c),c.B=0}}function EN(c,d){return xI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ko(m(c.Ga,c,d),rw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new or(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),T(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=XI(this,C,d),f=Rn(this.I),be(f,"RID",c),be(f,"CVER",22),this.D&&be(f,"X-HTTP-Session-Id",this.D),qo(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(qI(A)))+"&"+d:this.m&&Jh(f,this.m,A)),Zh(this.h,C),this.Ua&&be(f,"TYPE","init"),this.P?(be(f,"$req",d),be(f,"SID","null"),C.T=!0,Wh(C,f,null)):Wh(C,f,d),this.G=2}}else this.G==3&&(c?JI(this,c):this.i.length==0||PI(this.h)||JI(this))};function JI(c,d){var f;d?f=d.l:f=c.U++;let g=Rn(c.I);be(g,"SID",c.K),be(g,"RID",f),be(g,"AID",c.T),qo(c,g),c.m&&c.o&&Jh(g,c.m,c.o),f=new or(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=XI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Zh(c.h,f),Wh(f,g,d)}function qo(c,d){c.H&&G(c.H,function(f,g){be(d,g,f)}),c.l&&LI({},function(f,g){be(d,g,f)})}function XI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let x=["count="+f];A==-1?0<f?(A=C[0].g,x.push("ofs="+A)):A=0:x.push("ofs="+A);let Ee=!0;for(let We=0;We<f;We++){let pe=C[We].g,Xe=C[We].map;if(pe-=A,0>pe)A=Math.max(0,C[We].g-100),Ee=!1;else try{vN(Xe,x,"req"+pe+"_")}catch{g&&g(Xe)}}if(Ee){g=x.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function ew(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;So||uI(),Ao||(So(),Ao=!0),Ph.add(d,c),c.v=0}}function ef(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ko(m(c.Fa,c),rw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,tw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ko(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),Hc(this),tw(this))};function tf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function tw(c){c.g=new or(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Rn(c.qa);be(d,"RID","rpc"),be(d,"SID",c.K),be(d,"AID",c.T),be(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&be(d,"TO",c.ja),be(d,"TYPE","xmlhttp"),qo(c,d),c.m&&c.o&&Jh(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=jc(Rn(d)),f.m=null,f.P=!0,AI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Hc(this),ef(this),lt(19))};function zc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function nw(c,d){var f=null;if(c.g==d){zc(c),tf(c),c.g=null;var g=2}else if(Yh(c.h,d))f=d.D,kI(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=kc(),ut(g,new DI(g,f)),qc(c)}else ew(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&EN(c,d)||g==2&&ef(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:Hr(c,5);break;case 4:Hr(c,10);break;case 3:Hr(c,6);break;default:Hr(c,2)}}}function rw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Hr(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new $r(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Vc(g,"https"),jc(g),C?gN(g.toString(),f):mN(g.toString(),f)}else lt(2);c.G=0,c.l&&c.l.sa(d),iw(c),ZI(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function iw(c){if(c.G=0,c.ka=[],c.l){let d=OI(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function sw(c,d,f){var g=f instanceof $r?Rn(f):new $r(f);if(g.g!="")d&&(g.g=d+"."+g.g),Uc(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new $r(null);g&&Vc(A,g),d&&(A.g=d),C&&Uc(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&be(g,f,d),be(g,"VER",c.la),qo(c,g),g}function ow(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ne(new jo({eb:f})):new Ne(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function aw(){}t=aw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Gc(){}Gc.prototype.g=function(c,d){return new Tt(c,d)};function Tt(c,d){Je.call(this),this.g=new YI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!U(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!U(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Oi(this)}b(Tt,Je),Tt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tt.prototype.close=function(){Xh(this.g)},Tt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Bh(c),c=f);d.i.push(new sN(d.Ya++,c)),d.G==3&&qc(d)},Tt.prototype.N=function(){this.g.l=null,delete this.j,Xh(this.g),delete this.g,Tt.aa.N.call(this)};function cw(c){Hh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(cw,Hh);function uw(){qh.call(this),this.status=1}b(uw,qh);function Oi(c){this.g=c}b(Oi,aw),Oi.prototype.ua=function(){ut(this.g,"a")},Oi.prototype.ta=function(c){ut(this.g,new cw(c))},Oi.prototype.sa=function(c){ut(this.g,new uw)},Oi.prototype.ra=function(){ut(this.g,"b")},Gc.prototype.createWebChannel=Gc.prototype.g,Tt.prototype.send=Tt.prototype.o,Tt.prototype.open=Tt.prototype.m,Tt.prototype.close=Tt.prototype.close,Ly=Xn.createWebChannelTransport=function(){return new Gc},Oy=Xn.getStatEventTarget=function(){return kc()},ky=Xn.Event=jr,Rd=Xn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oc.NO_ERROR=0,Oc.TIMEOUT=8,Oc.HTTP_ERROR=6,nc=Xn.ErrorCode=Oc,bI.COMPLETE="complete",xy=Xn.EventType=bI,II.EventType=Po,Po.OPEN="a",Po.CLOSE="b",Po.ERROR="c",Po.MESSAGE="d",Je.prototype.listen=Je.prototype.K,Ks=Xn.WebChannel=II,q2=Xn.FetchXmlHttpFactory=jo,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,Py=Xn.XhrIo=Ne}).apply(typeof Ad<"u"?Ad:typeof self<"u"?self:typeof window<"u"?window:{});var zS="@firebase/firestore";var Ge=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ge.UNAUTHENTICATED=new Ge(null),Ge.GOOGLE_CREDENTIALS=new Ge("google-credentials-uid"),Ge.FIRST_PARTY=new Ge("first-party-uid"),Ge.MOCK_USER=new Ge("mock-user");var mo="10.14.0";var wi=new $t("@firebase/firestore");function rc(){return wi.logLevel}function V(t,...e){if(wi.logLevel<=se.DEBUG){let n=e.map(m_);wi.debug(`Firestore (${mo}): ${t}`,...n)}}function er(t,...e){if(wi.logLevel<=se.ERROR){let n=e.map(m_);wi.error(`Firestore (${mo}): ${t}`,...n)}}function to(t,...e){if(wi.logLevel<=se.WARN){let n=e.map(m_);wi.warn(`Firestore (${mo}): ${t}`,...n)}}function m_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function Y(t="Unexpected state"){let e=`FIRESTORE (${mo}) INTERNAL ASSERTION FAILED: `+t;throw er(e),new Error(e)}function we(t,e){t||Y()}function J(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends nt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var en=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var kd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},By=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ge.UNAUTHENTICATED))}shutdown(){}},$y=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Hy=class{constructor(e){this.t=e,this.currentUser=Ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new en;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new en,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new en)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new kd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new Ge(e)}},qy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ge.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},zy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new qy(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ge.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Gy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Wy=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){we(this.o===void 0);let r=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new Gy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function z2(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Od=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=z2(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ge(t,e){return t<e?-1:t>e?1:0}function no(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Qe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Qe(0,0))}static max(){return new t(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ld=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Pe=class t extends Ld{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},G2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,xt=class t extends Ld{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return G2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new B(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var K=class t{constructor(e){this.path=e}static fromPath(e){return new t(Pe.fromString(e))}static fromName(e){return new t(Pe.fromString(e).popFirst(5))}static empty(){return new t(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Pe(e.slice()))}};var Ky=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Ky.UNKNOWN_ID=-1;function W2(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new Ei(i,K.empty(),e)}function K2(t){return new Ei(t.readTime,t.key,-1)}var Ei=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ee.min(),K.empty(),-1)}static max(){return new t(ee.max(),K.empty(),-1)}};function Q2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}var Y2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Qy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ic(t){return _(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==Y2)throw t;V("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function Z2(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wc(t){return t.name==="IndexedDbTransactionError"}var EA=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function ph(t){return t==null}function uc(t){return t===0&&1/t==-1/0}function J2(t){return typeof t=="number"&&Number.isInteger(t)&&!uc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var X2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],HK=[...X2,"documentOverlays"],eB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tB=eB,nB=[...tB,"indexConfiguration","indexState","indexEntries"];var qK=[...nB,"globals"];function GS(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ai(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function TA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var xe=class t{constructor(e,n){this.comparator=e,this.root=n||In.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Js(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Js(this.root,e,this.comparator,!1)}getReverseIterator(){return new Js(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Js(this.root,e,this.comparator,!0)}},Js=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},In=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();let e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}};In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,i,s){return this}insert(e,n,r){return new In(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ot=class t{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fd(this.data.getIterator())}getIteratorFrom(e){return new Fd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Fd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var zt=class t{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new t([])}unionWith(e){let n=new ot(xt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return no(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Vd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var at=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Vd("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};at.EMPTY_BYTE_STRING=new at("");var rB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tr(t){if(we(!!t),typeof t=="string"){let e=0,n=rB.exec(t);if(we(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(t.seconds),nanos:Se(t.nanos)}}function Se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}function y_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function v_(t){let e=t.mapValue.fields.__previous_value__;return y_(e)?v_(e):e}function lc(t){let e=tr(t.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}var Yy=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Ud=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Nd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ti(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?y_(t)?4:bA(t)?9007199254740991:DA(t)?10:11:Y()}function Tn(t,e){if(t===e)return!0;let n=Ti(t);if(n!==Ti(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lc(t).isEqual(lc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=tr(i.timestampValue),a=tr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Or(i.bytesValue).isEqual(Or(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Se(i.geoPointValue.latitude)===Se(s.geoPointValue.latitude)&&Se(i.geoPointValue.longitude)===Se(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Se(i.integerValue)===Se(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Se(i.doubleValue),a=Se(s.doubleValue);return o===a?uc(o)===uc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return no(t.arrayValue.values||[],e.arrayValue.values||[],Tn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(GS(o)!==GS(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Tn(o[u],a[u])))return!1;return!0}(t,e);default:return Y()}}function dc(t,e){return(t.values||[]).find(n=>Tn(n,e))!==void 0}function ro(t,e){if(t===e)return 0;let n=Ti(t),r=Ti(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Se(s.integerValue||s.doubleValue),u=Se(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return WS(t.timestampValue,e.timestampValue);case 4:return WS(lc(t),lc(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Or(s),u=Or(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ge(a[l],u[l]);if(h!==0)return h}return ge(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ge(Se(s.latitude),Se(o.latitude));return a!==0?a:ge(Se(s.longitude),Se(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return KS(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},m=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=ge(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:KS(y,b)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Nd.mapValue&&o===Nd.mapValue)return 0;if(s===Nd.mapValue)return 1;if(o===Nd.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ge(u[p],h[p]);if(m!==0)return m;let y=ro(a[u[p]],l[h[p]]);if(y!==0)return y}return ge(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Y()}}function WS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);let n=tr(t),r=tr(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function KS(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=ro(n[i],r[i]);if(s)return s}return ge(n.length,r.length)}function io(t){return Zy(t)}function Zy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=tr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Or(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Zy(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Zy(n.fields[o])}`;return i+"}"}(t.mapValue):Y()}function Jy(t){return!!t&&"integerValue"in t}function __(t){return!!t&&"arrayValue"in t}function QS(t){return!!t&&"nullValue"in t}function YS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pd(t){return!!t&&"mapValue"in t}function DA(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function sc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ai(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Pt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(n)}setAll(e){let n=xt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=sc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Pd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Pd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ai(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(sc(this.value))}};function CA(t){let e=[];return Ai(t.fields,(n,r)=>{let i=new xt([n]);if(Pd(r)){let s=CA(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new zt(e)}var tn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ee.min(),ee.min(),ee.min(),Pt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ee.min(),ee.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ee.min(),ee.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var so=class{constructor(e,n){this.position=e,this.inclusive=n}};function ZS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=ro(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function JS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tn(t.position[n],e.position[n]))return!1;return!0}var oo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function iB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var jd=class{},He=class t extends jd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ev(e,n,r):n==="array-contains"?new rv(e,r):n==="in"?new iv(e,r):n==="not-in"?new sv(e,r):n==="array-contains-any"?new ov(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new tv(e,r):new nv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ro(n,this.value)):n!==null&&Ti(this.value)===Ti(n)&&this.matchesComparison(ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Dn=class t extends jd{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return SA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function SA(t){return t.op==="and"}function AA(t){return sB(t)&&SA(t)}function sB(t){for(let e of t.filters)if(e instanceof Dn)return!1;return!0}function Xy(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+io(t.value);if(AA(t))return t.filters.map(e=>Xy(e)).join(",");{let e=t.filters.map(n=>Xy(n)).join(",");return`${t.op}(${e})`}}function RA(t,e){return t instanceof He?function(r,i){return i instanceof He&&r.op===i.op&&r.field.isEqual(i.field)&&Tn(r.value,i.value)}(t,e):t instanceof Dn?function(r,i){return i instanceof Dn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&RA(o,i.filters[a]),!0):!1}(t,e):void Y()}function NA(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${io(n.value)}`}(t):t instanceof Dn?function(n){return n.op.toString()+" {"+n.getFilters().map(NA).join(" ,")+"}"}(t):"Filter"}var ev=class extends He{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){let n=K.comparator(e.key,this.key);return this.matchesComparison(n)}},tv=class extends He{constructor(e,n){super(e,"in",n),this.keys=MA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},nv=class extends He{constructor(e,n){super(e,"not-in",n),this.keys=MA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function MA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}var rv=class extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return __(n)&&dc(n.arrayValue,this.value)}},iv=class extends He{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&dc(this.value.arrayValue,n)}},sv=class extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!dc(this.value.arrayValue,n)}},ov=class extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!__(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>dc(this.value.arrayValue,r))}};var av=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function XS(t,e=null,n=[],r=[],i=null,s=null,o=null){return new av(t,e,n,r,i,s,o)}function I_(t){let e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Xy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ph(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>io(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>io(r)).join(",")),e.ue=n}return e.ue}function w_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!JS(t.startAt,e.startAt)&&JS(t.endAt,e.endAt)}function cv(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ao=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function oB(t,e,n,r,i,s,o,a){return new ao(t,e,n,r,i,s,o,a)}function E_(t){return new ao(t)}function eA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function aB(t){return t.collectionGroup!==null}function oc(t){let e=J(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ot(xt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new oo(s,r))}),n.has(xt.keyField().canonicalString())||e.ce.push(new oo(xt.keyField(),r))}return e.ce}function wn(t){let e=J(t);return e.le||(e.le=cB(e,oc(t))),e.le}function cB(t,e){if(t.limitType==="F")return XS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new oo(i.field,s)});let n=t.endAt?new so(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new so(t.startAt.position,t.startAt.inclusive):null;return XS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function uv(t,e,n){return new ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gh(t,e){return w_(wn(t),wn(e))&&t.limitType===e.limitType}function PA(t){return`${I_(wn(t))}|lt:${t.limitType}`}function Qs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>NA(i)).join(", ")}]`),ph(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>io(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>io(i)).join(",")),`Target(${r})`}(wn(t))}; limitType=${t.limitType})`}function mh(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of oc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=ZS(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,oc(r),i)||r.endAt&&!function(o,a,u){let l=ZS(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,oc(r),i))}(t,e)}function uB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xA(t){return(e,n)=>{let r=!1;for(let i of oc(t)){let s=lB(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function lB(t,e,n){let r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?ro(u,l):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}var Lr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ai(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return TA(this.inner)}size(){return this.innerSize}};var dB=new xe(K.comparator);function nr(){return dB}var kA=new xe(K.comparator);function ic(...t){let e=kA;for(let n of t)e=e.insert(n.key,n);return e}function OA(t){let e=kA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function vi(){return ac()}function LA(){return ac()}function ac(){return new Lr(t=>t.toString(),(t,e)=>t.isEqual(e))}var hB=new xe(K.comparator),fB=new ot(K.comparator);function le(...t){let e=fB;for(let n of t)e=e.add(n);return e}var pB=new ot(ge);function gB(){return pB}function T_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uc(e)?"-0":e}}function FA(t){return{integerValue:""+t}}function mB(t,e){return J2(e)?FA(e):T_(t,e)}var co=class{constructor(){this._=void 0}};function yB(t,e,n){return t instanceof uo?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&y_(s)&&(s=v_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Di?UA(t,e):t instanceof bi?jA(t,e):function(i,s){let o=VA(i,s),a=tA(o)+tA(i.Pe);return Jy(o)&&Jy(i.Pe)?FA(a):T_(i.serializer,a)}(t,e)}function vB(t,e,n){return t instanceof Di?UA(t,e):t instanceof bi?jA(t,e):n}function VA(t,e){return t instanceof lo?function(r){return Jy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var uo=class extends co{},Di=class extends co{constructor(e){super(),this.elements=e}};function UA(t,e){let n=BA(e);for(let r of t.elements)n.some(i=>Tn(i,r))||n.push(r);return{arrayValue:{values:n}}}var bi=class extends co{constructor(e){super(),this.elements=e}};function jA(t,e){let n=BA(e);for(let r of t.elements)n=n.filter(i=>!Tn(i,r));return{arrayValue:{values:n}}}var lo=class extends co{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function tA(t){return Se(t.integerValue||t.doubleValue)}function BA(t){return __(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function _B(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Di&&i instanceof Di||r instanceof bi&&i instanceof bi?no(r.elements,i.elements,Tn):r instanceof lo&&i instanceof lo?Tn(r.Pe,i.Pe):r instanceof uo&&i instanceof uo}(t.transform,e.transform)}var lv=class{constructor(e,n){this.version=e,this.transformResults=n}},xr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function xd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ho=class{};function $A(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Bd(t.key,xr.none()):new Ci(t.key,t.data,xr.none());{let n=t.data,r=Pt.empty(),i=new ot(xt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new bn(t.key,r,new zt(i.toArray()),xr.none())}}function IB(t,e,n){t instanceof Ci?function(i,s,o){let a=i.value.clone(),u=rA(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof bn?function(i,s,o){if(!xd(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=rA(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(HA(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function cc(t,e,n,r){return t instanceof Ci?function(s,o,a,u){if(!xd(s.precondition,o))return a;let l=s.value.clone(),h=iA(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof bn?function(s,o,a,u){if(!xd(s.precondition,o))return a;let l=iA(s.fieldTransforms,u,o),h=o.data;return h.setAll(HA(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return xd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function wB(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=VA(r.transform,i||null);s!=null&&(n===null&&(n=Pt.empty()),n.set(r.field,s))}return n||null}function nA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&no(r,i,(s,o)=>_B(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ci=class extends ho{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},bn=class extends ho{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function HA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function rA(t,e,n){let r=new Map;we(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,vB(o,a,n[i]))}return r}function iA(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,yB(s,o,e))}return r}var Bd=class extends ho{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},dv=class extends ho{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var hv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&IB(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=cc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=cc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=LA();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=$A(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&no(this.mutations,e.mutations,(n,r)=>nA(n,r))&&no(this.baseMutations,e.baseMutations,(n,r)=>nA(n,r))}},fv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length);let i=function(){return hB}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var pv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var gv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ve,de;function EB(t){switch(t){default:return Y();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function qA(t){if(t===void 0)return er("GRPC error has no .code"),M.UNKNOWN;switch(t){case Ve.OK:return M.OK;case Ve.CANCELLED:return M.CANCELLED;case Ve.UNKNOWN:return M.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return M.INTERNAL;case Ve.UNAVAILABLE:return M.UNAVAILABLE;case Ve.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ve.NOT_FOUND:return M.NOT_FOUND;case Ve.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ve.ABORTED:return M.ABORTED;case Ve.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ve.DATA_LOSS:return M.DATA_LOSS;default:return Y()}}(de=Ve||(Ve={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var sA=null;function TB(){return new TextEncoder}var DB=new Pr([4294967295,4294967295],0);function oA(t){let e=TB().encode(t),n=new My;return n.update(e),new Uint8Array(n.digest())}function aA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Pr([n,r],0),new Pr([i,s],0)]}var mv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _i(`Invalid padding: ${n}`);if(r<0)throw new _i(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _i(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _i(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Pr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Pr.fromNumber(r)));return i.compare(DB)===1&&(i=new Pr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=oA(e),[r,i]=aA(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=oA(e),[r,i]=aA(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},_i=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var $d=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,hc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ee.min(),i,new xe(ge),nr(),le())}},hc=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,le(),le(),le())}};var Xs=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Hd=class{constructor(e,n){this.targetId=e,this.me=n}},qd=class{constructor(e,n,r=at.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},zd=class{constructor(){this.fe=0,this.ge=uA(),this.pe=at.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=le(),n=le(),r=le();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new hc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=uA()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},yv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=nr(),this.qe=cA(),this.Qe=new xe(ge)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(cv(s))if(r===0){let o=new K(s.path);this.Ue(n,o,tn.newNoDocument(o,ee.min()))}else we(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}sA?.et(function(h,p,m,y,b){var N,R,O,U,F,H;let ve={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},G=p.unchangedNames;return G&&(ve.bloomFilter={applied:b===0,hashCount:(N=G?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(U=(O=(R=G?.bits)===null||R===void 0?void 0:R.bitmap)===null||O===void 0?void 0:O.length)!==null&&U!==void 0?U:0,padding:(H=(F=G?.bits)===null||F===void 0?void 0:F.padding)!==null&&H!==void 0?H:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),ve}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Or(r).toUint8Array()}catch(u){if(u instanceof Vd)return to("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new mv(o,i,s)}catch(u){return to(u instanceof _i?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&cv(a.target)){let u=new K(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,tn.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=le();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new $d(e,n,this.Qe,this.ke,r);return this.ke=nr(),this.qe=cA(),this.Qe=new xe(ge),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new zd,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ot(ge),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new zd),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function cA(){return new xe(K.comparator)}function uA(){return new xe(K.comparator)}var bB={asc:"ASCENDING",desc:"DESCENDING"},CB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SB={and:"AND",or:"OR"},vv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function _v(t,e){return t.useProto3Json||ph(e)?e:{value:e}}function Gd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AB(t,e){return Gd(t,e.toTimestamp())}function En(t){return we(!!t),ee.fromTimestamp(function(n){let r=tr(n);return new Qe(r.seconds,r.nanos)}(t))}function D_(t,e){return Iv(t,e).canonicalString()}function Iv(t,e){let n=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function GA(t){let e=Pe.fromString(t);return we(ZA(e)),e}function wv(t,e){return D_(t.databaseId,e.path)}function Fy(t,e){let n=GA(e);if(n.get(1)!==t.databaseId.projectId)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(KA(n))}function WA(t,e){return D_(t.databaseId,e)}function RB(t){let e=GA(t);return e.length===4?Pe.emptyPath():KA(e)}function Ev(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function KA(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function lA(t,e,n){return{name:wv(t,e),fields:n.value.mapValue.fields}}function NB(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(we(h===void 0||typeof h=="string"),at.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array),at.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?M.UNKNOWN:qA(l.code);return new B(h,l.message||"")}(o);n=new qd(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Fy(t,r.document.name),s=En(r.document.updateTime),o=r.document.createTime?En(r.document.createTime):ee.min(),a=new Pt({mapValue:{fields:r.document.fields}}),u=tn.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Xs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Fy(t,r.document),s=r.readTime?En(r.readTime):ee.min(),o=tn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Xs([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Fy(t,r.document),s=r.removedTargetIds||[];n=new Xs([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new gv(i,s),a=r.targetId;n=new Hd(a,o)}}return n}function MB(t,e){let n;if(e instanceof Ci)n={update:lA(t,e.key,e.value)};else if(e instanceof Bd)n={delete:wv(t,e.key)};else if(e instanceof bn)n={update:lA(t,e.key,e.data),updateMask:jB(e.fieldMask)};else{if(!(e instanceof dv))return Y();n={verify:wv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof uo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Di)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof lo)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:AB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(t,e.precondition)),n}function PB(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?En(i.updateTime):En(s);return o.isEqual(ee.min())&&(o=En(s)),new lv(o,i.transformResults||[])}(n,e))):[]}function xB(t,e){return{documents:[WA(t,e.path)]}}function kB(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=WA(t,i);let s=function(l){if(l.length!==0)return YA(Dn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Ys(m.field),direction:FB(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=_v(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function OB(t){let e=RB(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){we(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=QA(p);return m instanceof Dn&&AA(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(b){return new oo(Zs(b.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,ph(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new so(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new so(y,m)}(n.endAt)),oB(e,i,o,s,a,"F",u,l)}function LB(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function QA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Zs(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Zs(n.unaryFilter.field);return He.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Zs(n.unaryFilter.field);return He.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Zs(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return He.create(Zs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Dn.create(n.compositeFilter.filters.map(r=>QA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function FB(t){return bB[t]}function VB(t){return CB[t]}function UB(t){return SB[t]}function Ys(t){return{fieldPath:t.canonicalString()}}function Zs(t){return xt.fromServerFormat(t.fieldPath)}function YA(t){return t instanceof He?function(n){if(n.op==="=="){if(YS(n.value))return{unaryFilter:{field:Ys(n.field),op:"IS_NAN"}};if(QS(n.value))return{unaryFilter:{field:Ys(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(YS(n.value))return{unaryFilter:{field:Ys(n.field),op:"IS_NOT_NAN"}};if(QS(n.value))return{unaryFilter:{field:Ys(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ys(n.field),op:VB(n.op),value:n.value}}}(t):t instanceof Dn?function(n){let r=n.getFilters().map(i=>YA(i));return r.length===1?r[0]:{compositeFilter:{op:UB(n.op),filters:r}}}(t):Y()}function jB(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var fc=class t{constructor(e,n,r,i,s=ee.min(),o=ee.min(),a=at.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Tv=class{constructor(e){this.ct=e}};function BB(t){let e=OB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?uv(e,e.limit,"L"):e}var Wd=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Se(e.integerValue));else if("doubleValue"in e){let r=Se(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),uc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=tr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Or(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?bA(e)?this.dt(n,Number.MAX_SAFE_INTEGER):DA(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Y()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Se(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),K.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Wd.vt=new Wd;var Dv=class{constructor(){this.un=new bv}addToCollectionParentIndex(e,n){return this.un.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Ei.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Ei.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},bv=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ot(Pe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ot(Pe.comparator)).toArray()}};var GK=new Uint8Array(0);var _n=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(41943040,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);var pc=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var Cv=class{constructor(){this.changes=new Lr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Sv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Av=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&cc(r.mutation,i,zt.empty(),Qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){let i=vi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ic();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=vi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=nr(),o=ac(),a=function(){return ac()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof bn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),cc(h.mutation,l,h.mutation.getFieldMask(),Qe.now())):o.set(l.key,zt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new Sv(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=ac(),i=new xe((o,a)=>o-a),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||zt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||le()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=LA();h.forEach(m=>{if(!s.has(m)){let y=$A(n.get(m),r.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):aB(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):P.resolve(vi()),a=-1,u=s;return o.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,le())).next(h=>({batchId:a,changes:OA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=ic();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=ic();return this.indexManager.getCollectionParents(e,s).next(a=>P.forEach(a,u=>{let l=function(p,m){return new ao(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,tn.newInvalidDocument(h)))});let a=ic();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&cc(h.mutation,l,zt.empty(),Qe.now()),mh(n,l)&&(a=a.insert(u,l))}),a})}};var Rv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return P.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:En(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:BB(i.bundledQuery),readTime:En(i.readTime)}}(n)),P.resolve()}};var Nv=class{constructor(){this.overlays=new xe(K.comparator),this.Ir=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=vi();return P.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=vi(),s=n.length+1,o=new K(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new xe((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=vi(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=vi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new pv(n,r));let s=this.Ir.get(n);s===void 0&&(s=le(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var Mv=class{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var gc=class{constructor(){this.Tr=new ot(Ue.Er),this.dr=new ot(Ue.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Ue(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ue(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new K(new Pe([])),r=new Ue(n,e),i=new Ue(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new K(new Pe([])),r=new Ue(n,e),i=new Ue(n,e+1),s=le();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Ue(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ue=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||K.comparator(e.key,n.key)}};var Pv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ot(Ue.Er)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new hv(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Ue(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,n){return P.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ue(n,0),i=new Ue(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ot(ge);return n.forEach(i=>{let s=new Ue(i,0),o=new Ue(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),P.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;K.isDocumentKey(s)||(s=s.child(""));let o=new Ue(new K(s),0),a=new ot(ge);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),P.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return P.forEach(n.mutations,i=>{let s=new Ue(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Ue(n,0),i=this.br.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var xv=class{constructor(e){this.Mr=e,this.docs=function(){return new xe(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let r=nr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():tn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=nr(),o=n.path,a=new K(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Q2(K2(h),r)<=0||(i.has(h.key)||mh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Y()}Or(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new kv(this)}getSize(e){return P.resolve(this.size)}},kv=class extends Cv{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Ov=class{constructor(e){this.persistence=e,this.Nr=new Lr(n=>I_(n),w_),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new gc,this.targetCount=0,this.kr=pc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),P.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new pc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.Kn(n),P.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.Br.containsKey(n))}};var Lv=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new EA(0),this.Kr=!1,this.Kr=!0,this.$r=new Mv,this.referenceDelegate=e(this),this.Ur=new Ov(this),this.indexManager=new Dv,this.remoteDocumentCache=function(i){return new xv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Tv(n),this.Gr=new Rv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Nv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Pv(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new Fv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return P.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Fv=class extends Qy{constructor(e){super(),this.currentSequenceNumber=e}},Vv=class t{constructor(e){this.persistence=e,this.Jr=new gc,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),P.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Xr,r=>{let i=K.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return P.or([()=>P.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Uv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=le(),i=le();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var jv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Bv=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return TC()?8:Z2(ze())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new jv;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(rc()<=se.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),P.resolve()):(rc()<=se.DEBUG&&V("QueryEngine","Query:",Qs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(rc()<=se.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wn(n))):P.resolve())}Yi(e,n){if(eA(n))return P.resolve(null);let r=wn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=uv(n,null,"F"),r=wn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=le(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,o,u.readTime)?this.Yi(e,uv(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return eA(n)||i.isEqual(ee.min())?P.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?P.resolve(null):(rc()<=se.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qs(n)),this.rs(e,o,n,W2(i,-1)).next(a=>a))})}ts(e,n){let r=new ot(xA(e));return n.forEach((i,s)=>{mh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return rc()<=se.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Qs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ei.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var $v=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new xe(ge),this._s=new Lr(s=>I_(s),w_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Av(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function $B(t,e,n,r){return new $v(t,e,n,r)}function JA(t,e){return _(this,null,function*(){let n=J(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=le();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function HB(t,e){let n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=P.resolve();return m.forEach(b=>{y=y.next(()=>h.getEntry(u,b)).next(N=>{let R=l.docVersions.get(b);we(R!==null),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=le();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function XA(t){let e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function qB(t,e){let n=J(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(at.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(N,R,O){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(s,y))});let u=nr(),l=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(zB(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(ee.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function zB(t,e,n){let r=le(),i=le();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=nr();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):V("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function GB(t,e){let n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function WB(t,e){let n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new fc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function Hv(t,e,n){return _(this,null,function*(){let r=J(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!wc(o))throw o;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function dA(t,e,n){let r=J(t),i=ee.min(),s=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=J(u),m=p._s.get(h);return m!==void 0?P.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,wn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ee.min(),n?s:le())).next(a=>(KB(r,uB(e),a),{documents:a,Ts:s})))}function KB(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var Kd=class{constructor(){this.activeTargetIds=gB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var qv=class{constructor(){this.so=new Kd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Kd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var zv=class{_o(e){}shutdown(){}};var Qd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Md=null;function Vy(){return Md===null?Md=function(){return 268435456+Math.round(2147483648*Math.random())}():Md++,"0x"+Md.toString(16)}var QB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Gv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var st="WebChannelConnection",Wv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=Vy(),u=this.xo(n,r.toUriEncodedString());V("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(V("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw to("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=QB[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=Vy();return new Promise((o,a)=>{let u=new Py;u.setWithCredentials(!0),u.listenOnce(xy.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case nc.NO_ERROR:let h=u.getResponseJson();V(st,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case nc.TIMEOUT:V(st,`RPC '${e}' ${s} timed out`),a(new B(M.DEADLINE_EXCEEDED,"Request time out"));break;case nc.HTTP_ERROR:let p=u.getStatus();if(V(st,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let b=function(R){let O=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(O)>=0?O:M.UNKNOWN}(y.status);a(new B(b,y.message))}else a(new B(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new B(M.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{V(st,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);V(st,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Vy(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ly(),a=Oy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");V(st,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,y=!1,b=new Gv({Io:R=>{y?V(st,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(V(st,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),V(st,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),N=(R,O,U)=>{R.listen(O,F=>{try{U(F)}catch(H){setTimeout(()=>{throw H},0)}})};return N(p,Ks.EventType.OPEN,()=>{y||(V(st,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),N(p,Ks.EventType.CLOSE,()=>{y||(y=!0,V(st,`RPC '${e}' stream ${i} transport closed`),b.So())}),N(p,Ks.EventType.ERROR,R=>{y||(y=!0,to(st,`RPC '${e}' stream ${i} transport errored:`,R),b.So(new B(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,Ks.EventType.MESSAGE,R=>{var O;if(!y){let U=R.data[0];we(!!U);let F=U,H=F.error||((O=F[0])===null||O===void 0?void 0:O.error);if(H){V(st,`RPC '${e}' stream ${i} received error:`,H);let ve=H.status,G=function(I){let T=Ve[I];if(T!==void 0)return qA(T)}(ve),E=H.message;G===void 0&&(G=M.INTERNAL,E="Unknown error status: "+ve+" with message "+H.message),y=!0,b.So(new B(G,E)),p.close()}else V(st,`RPC '${e}' stream ${i} received:`,U),b.bo(U)}}),N(a,ky.STAT_EVENT,R=>{R.stat===Rd.PROXY?V(st,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Rd.NOPROXY&&V(st,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function Uy(){return typeof document<"u"?document:null}function yh(t){return new vv(t,!0)}var Yd=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Zd=class{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Yd(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(er(n.toString()),er("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new B(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Kv=class extends Zd{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=NB(this.serializer,e),r=function(s){if(!("targetChange"in s))return ee.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?En(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=Ev(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=cv(u)?{documents:xB(s,u)}:{query:kB(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=zA(s,o.resumeToken);let l=_v(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=Gd(s,o.snapshotVersion.toTimestamp());let l=_v(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=LB(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=Ev(this.serializer),n.removeTarget=e,this.a_(n)}},Qv=class extends Zd{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return we(!!e.streamToken),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=PB(e.writeResults,e.commitTime),r=En(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=Ev(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>MB(this.serializer,r))};this.a_(n)}};var Yv=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Iv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Iv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Zv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(er(n),this.D_=!1):V("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Jv=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>_(this,null,function*(){Ri(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=J(u);l.L_.add(4),yield Ec(l),l.q_.set("Unknown"),l.L_.delete(4),yield vh(l)})}(this))}))}),this.q_=new Zv(r,i)}};function vh(t){return _(this,null,function*(){if(Ri(t))for(let e of t.B_)yield e(!0)})}function Ec(t){return _(this,null,function*(){for(let e of t.B_)yield e(!1)})}function e0(t,e){let n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),A_(n)?S_(n):yo(n).r_()&&C_(n,e))}function b_(t,e){let n=J(t),r=yo(n);n.N_.delete(e),r.r_()&&t0(n,e),n.N_.size===0&&(r.r_()?r.o_():Ri(n)&&n.q_.set("Unknown"))}function C_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yo(t).A_(e)}function t0(t,e){t.Q_.xe(e),yo(t).R_(e)}function S_(t){t.Q_=new yv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),yo(t).start(),t.q_.v_()}function A_(t){return Ri(t)&&!yo(t).n_()&&t.N_.size>0}function Ri(t){return J(t).L_.size===0}function n0(t){t.Q_=void 0}function YB(t){return _(this,null,function*(){t.q_.set("Online")})}function ZB(t){return _(this,null,function*(){t.N_.forEach((e,n)=>{C_(t,e)})})}function JB(t,e){return _(this,null,function*(){n0(t),A_(t)?(t.q_.M_(e),S_(t)):t.q_.set("Unknown")})}function XB(t,e,n){return _(this,null,function*(){if(t.q_.set("Online"),e instanceof qd&&e.state===2&&e.cause)try{yield function(i,s){return _(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Jd(t,r)}else if(e instanceof Xs?t.Q_.Ke(e):e instanceof Hd?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{let r=yield XA(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(at.EMPTY_BYTE_STRING,h.snapshotVersion)),t0(s,u);let p=new fc(h.target,u,l,h.sequenceNumber);C_(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield Jd(t,r)}})}function Jd(t,e,n){return _(this,null,function*(){if(!wc(e))throw e;t.L_.add(1),yield Ec(t),t.q_.set("Offline"),n||(n=()=>XA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield vh(t)}))})}function r0(t,e){return e().catch(n=>Jd(t,n,e))}function _h(t){return _(this,null,function*(){let e=J(t),n=Fr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;e$(e);)try{let i=yield GB(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,t$(e,i)}catch(i){yield Jd(e,i)}i0(e)&&s0(e)})}function e$(t){return Ri(t)&&t.O_.length<10}function t$(t,e){t.O_.push(e);let n=Fr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function i0(t){return Ri(t)&&!Fr(t).n_()&&t.O_.length>0}function s0(t){Fr(t).start()}function n$(t){return _(this,null,function*(){Fr(t).p_()})}function r$(t){return _(this,null,function*(){let e=Fr(t);for(let n of t.O_)e.m_(n.mutations)})}function i$(t,e,n){return _(this,null,function*(){let r=t.O_.shift(),i=fv.from(r,e,n);yield r0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield _h(t)})}function s$(t,e){return _(this,null,function*(){e&&Fr(t).V_&&(yield function(r,i){return _(this,null,function*(){if(function(o){return EB(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();Fr(r).s_(),yield r0(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield _h(r)}})}(t,e)),i0(t)&&s0(t)})}function hA(t,e){return _(this,null,function*(){let n=J(t);n.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=Ri(n);n.L_.add(3),yield Ec(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield vh(n)})}function o$(t,e){return _(this,null,function*(){let n=J(t);e?(n.L_.delete(2),yield vh(n)):e||(n.L_.add(2),yield Ec(n),n.q_.set("Unknown"))})}function yo(t){return t.K_||(t.K_=function(n,r,i){let s=J(n);return s.w_(),new Kv(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:YB.bind(null,t),Ro:ZB.bind(null,t),mo:JB.bind(null,t),d_:XB.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.K_.s_(),A_(t)?S_(t):t.q_.set("Unknown")):(yield t.K_.stop(),n0(t))}))),t.K_}function Fr(t){return t.U_||(t.U_=function(n,r,i){let s=J(n);return s.w_(),new Qv(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:n$.bind(null,t),mo:s$.bind(null,t),f_:r$.bind(null,t),g_:i$.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.U_.s_(),yield _h(t)):(yield t.U_.stop(),t.O_.length>0&&(V("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var Xv=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new en,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function R_(t,e){if(er("AsyncQueue",`${e}: ${t}`),wc(t))return new B(M.UNAVAILABLE,`${e}: ${t}`);throw t}var Xd=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=ic(),this.sortedSet=new xe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var eh=class{constructor(){this.W_=new xe(K.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},fo=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Xd.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var e_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},t_=class{constructor(){this.queries=fA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=J(n),s=i.queries;i.queries=fA(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new B(M.ABORTED,"Firestore shutting down"))}};function fA(){return new Lr(t=>PA(t),gh)}function o0(t,e){return _(this,null,function*(){let n=J(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new e_,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=R_(o,`Initialization of query '${Qs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&N_(n)})}function a0(t,e){return _(this,null,function*(){let n=J(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function a$(t,e){let n=J(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&N_(n)}function c$(t,e,n){let r=J(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function N_(t){t.Y_.forEach(e=>{e.next()})}var n_,pA;(pA=n_||(n_={})).ea="default",pA.Cache="cache";var th=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new fo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==n_.Cache}};var nh=class{constructor(e){this.key=e}},rh=class{constructor(e){this.key=e}},r_=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=le(),this.mutatedKeys=le(),this.Aa=xA(e),this.Ra=new Xd(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new eh,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=mh(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?b!==N&&(r.track({type:3,doc:y}),R=!0):this.ga(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(o=o.add(y),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(y,b){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return N(y)-N(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new fo(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new eh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=le(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new rh(r))}),this.da.forEach(r=>{e.has(r)||n.push(new nh(r))}),n}ba(e){this.Ta=e.Ts,this.da=le();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return fo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},i_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},s_=class{constructor(e){this.key=e,this.va=!1}},o_=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Lr(a=>PA(a),gh),this.Ma=new Map,this.xa=new Set,this.Oa=new xe(K.comparator),this.Na=new Map,this.La=new gc,this.Ba={},this.ka=new Map,this.qa=pc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function u$(t,e,n=!0){return _(this,null,function*(){let r=f0(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield c0(r,e,n,!0),i})}function l$(t,e){return _(this,null,function*(){let n=f0(t);yield c0(n,e,!0,!1)})}function c0(t,e,n,r){return _(this,null,function*(){let i=yield WB(t.localStore,wn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield d$(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&e0(t.remoteStore,i),a})}function d$(t,e,n,r,i){return _(this,null,function*(){t.Ka=(p,m,y)=>function(N,R,O,U){return _(this,null,function*(){let F=R.view.ma(O);F.ns&&(F=yield dA(N.localStore,R.query,!1).then(({documents:E})=>R.view.ma(E,F)));let H=U&&U.targetChanges.get(R.targetId),ve=U&&U.targetMismatches.get(R.targetId)!=null,G=R.view.applyChanges(F,N.isPrimaryClient,H,ve);return mA(N,R.targetId,G.wa),G.snapshot})}(t,p,m,y);let s=yield dA(t.localStore,e,!0),o=new r_(e,s.Ts),a=o.ma(s.documents),u=hc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);mA(t,n,l.wa);let h=new i_(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function h$(t,e,n){return _(this,null,function*(){let r=J(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!gh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Hv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&b_(r.remoteStore,i.targetId),a_(r,i.targetId)}).catch(Ic))):(a_(r,i.targetId),yield Hv(r.localStore,i.targetId,!0))})}function f$(t,e){return _(this,null,function*(){let n=J(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),b_(n.remoteStore,r.targetId))})}function p$(t,e,n){return _(this,null,function*(){let r=w$(t);try{let i=yield function(o,a){let u=J(o),l=Qe.now(),h=a.reduce((y,b)=>y.add(b.key),le()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=nr(),N=le();return u.cs.getEntries(y,h).next(R=>{b=R,b.forEach((O,U)=>{U.isValidDocument()||(N=N.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(R=>{p=R;let O=[];for(let U of a){let F=wB(U,p.get(U.key).overlayedDocument);F!=null&&O.push(new bn(U.key,F,CA(F.value.mapValue),xr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,O,a)}).next(R=>{m=R;let O=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,O)})}).then(()=>({batchId:m.batchId,changes:OA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new xe(ge)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Tc(r,i.changes),yield _h(r.remoteStore)}catch(i){let s=R_(i,"Failed to persist write");n.reject(s)}})}function u0(t,e){return _(this,null,function*(){let n=J(t);try{let r=yield qB(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?we(o.va):i.removedDocuments.size>0&&(we(o.va),o.va=!1))}),yield Tc(n,r,e)}catch(r){yield Ic(r)}})}function gA(t,e,n){let r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=J(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&N_(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function g$(t,e,n){return _(this,null,function*(){let r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new xe(K.comparator);o=o.insert(s,tn.newNoDocument(s,ee.min()));let a=le().add(s),u=new $d(ee.min(),new Map,new xe(ge),o,a);yield u0(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),M_(r)}else yield Hv(r.localStore,e,!1).then(()=>a_(r,e,n)).catch(Ic)})}function m$(t,e){return _(this,null,function*(){let n=J(t),r=e.batch.batchId;try{let i=yield HB(n.localStore,e);d0(n,r,null),l0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Tc(n,i)}catch(i){yield Ic(i)}})}function y$(t,e,n){return _(this,null,function*(){let r=J(t);try{let i=yield function(o,a){let u=J(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(we(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);d0(r,e,n),l0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Tc(r,i)}catch(i){yield Ic(i)}})}function l0(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function d0(t,e,n){let r=J(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function a_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||h0(t,r)})}function h0(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(b_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),M_(t))}function mA(t,e,n){for(let r of n)r instanceof nh?(t.La.addReference(r.key,e),v$(t,r)):r instanceof rh?(V("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||h0(t,r.key)):Y()}function v$(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(V("SyncEngine","New document in limbo: "+n),t.xa.add(r),M_(t))}function M_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new K(Pe.fromString(e)),r=t.qa.next();t.Na.set(r,new s_(n)),t.Oa=t.Oa.insert(n,r),e0(t.remoteStore,new fc(wn(E_(n.path)),r,"TargetPurposeLimboResolution",EA.oe))}}function Tc(t,e,n){return _(this,null,function*(){let r=J(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Uv.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return _(this,null,function*(){let h=J(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!wc(p))throw p;V("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),b=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,N)}}})}(r.localStore,s))})}function _$(t,e){return _(this,null,function*(){let n=J(t);if(!n.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield JA(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new B(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Tc(n,r.hs)}})}function I$(t,e){let n=J(t),r=n.Na.get(e);if(r&&r.va)return le().add(r.key);{let i=le(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function f0(t){let e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=u0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g$.bind(null,e),e.Ca.d_=a$.bind(null,e.eventManager),e.Ca.$a=c$.bind(null,e.eventManager),e}function w$(t){let e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y$.bind(null,e),e}var yA=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=yh(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return $B(this.persistence,new Bv,n.initialUser,this.serializer)}Ga(n){return new Lv(Vv.Zr,this.serializer)}Wa(n){return new qv}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var E$=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>gA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_$.bind(null,this.syncEngine),yield o$(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new t_}()}createDatastore(n){let r=yh(n.databaseInfo.databaseId),i=function(o){return new Wv(o)}(n.databaseInfo);return function(o,a,u,l){return new Yv(o,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,u){return new Jv(i,s,o,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>gA(this.syncEngine,r,0),function(){return Qd.D()?new Qd:new zv}())}createSyncEngine(n,r){return function(s,o,a,u,l,h,p){let m=new o_(s,o,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield function(s){return _(this,null,function*(){let o=J(s);V("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Ec(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var ih=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):er("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var c_=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ge.UNAUTHENTICATED,this.clientId=Od.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>_(this,null,function*(){V("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(V("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new en;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=R_(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function jy(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield JA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function vA(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield T$(t);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>hA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>hA(e.remoteStore,i)),t._onlineComponents=e})}function T$(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield jy(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;to("Error using user provided cache. Falling back to memory cache: "+n),yield jy(t,new yA)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield jy(t,new yA);return t._offlineComponents})}function p0(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield vA(t,t._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield vA(t,new E$))),t._onlineComponents})}function D$(t){return p0(t).then(e=>e.syncEngine)}function g0(t){return _(this,null,function*(){let e=yield p0(t),n=e.eventManager;return n.onListen=u$.bind(null,e.syncEngine),n.onUnlisten=h$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=l$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=f$.bind(null,e.syncEngine),n})}function b$(t,e,n={}){let r=new en;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,a,u,l){let h=new ih({next:m=>{h.Za(),o.enqueueAndForget(()=>a0(s,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new B(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new B(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new th(E_(a.path),h,{includeMetadataChanges:!0,_a:!0});return o0(s,p)}(yield g0(t),t.asyncQueue,e,n,r)})),r.promise}function C$(t,e,n={}){let r=new en;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,a,u,l){let h=new ih({next:m=>{h.Za(),o.enqueueAndForget(()=>a0(s,p)),m.fromCache&&u.source==="server"?l.reject(new B(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new th(a,h,{includeMetadataChanges:!0,_a:!0});return o0(s,p)}(yield g0(t),t.asyncQueue,e,n,r)})),r.promise}function m0(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var _A=new Map;function y0(t,e,n){if(!n)throw new B(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function S$(t,e,n,r){if(e===!0&&r===!0)throw new B(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function IA(t){if(!K.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wA(t){if(K.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function P_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function rr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=P_(t);throw new B(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var sh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}S$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=m0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},po=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new By;switch(r.type){case"firstParty":return new zy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=_A.get(n);r&&(V("ComponentProvider","Removing Datastore"),_A.delete(n),r.terminate())}(this),Promise.resolve()}};function v0(t,e,n,r={}){var i;let s=(t=rr(t,po))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&to("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ge.MOCK_USER;else{a=ed(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new B(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ge(l)}t._authCredentials=new $y(new kd(a,u))}}var oh=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Et=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},kr=class t extends oh{constructor(e,n,r){super(e,n,E_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new K(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function _0(t,e,...n){if(t=Ie(t),y0("collection","path",e),t instanceof po){let r=Pe.fromString(e,...n);return wA(r),new kr(t,null,r)}{if(!(t instanceof Et||t instanceof kr))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Pe.fromString(e,...n));return wA(r),new kr(t.firestore,null,r)}}function I0(t,e,...n){if(t=Ie(t),arguments.length===1&&(e=Od.newId()),y0("doc","path",e),t instanceof po){let r=Pe.fromString(e,...n);return IA(r),new Et(t,null,new K(r))}{if(!(t instanceof Et||t instanceof kr))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Pe.fromString(e,...n));return IA(r),new Et(t.firestore,t instanceof kr?t.converter:null,new K(r))}}var ah=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Yd(this,"async_queue_retry"),this.Vu=()=>{let r=Uy();r&&V("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=Uy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=Uy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new en;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return _(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!wc(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw er("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=Xv.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Y()}verifyOperationInProgress(){}wu(){return _(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};var Si=class extends po{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ah,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ah(e),this._firestoreClient=void 0,yield e}})}};function w0(t,e){let n=typeof t=="object"?t:zn(),r=typeof t=="string"?t:e||"(default)",i=qn(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Em("firestore");s&&v0(i,...s)}return i}function x_(t){if(t._terminated)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||A$(t),t._firestoreClient}function A$(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new Yy(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,m0(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new c_(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var mc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(at.fromBase64String(e))}catch(n){throw new B(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var go=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var yc=class{constructor(e){this._methodName=e}};var vc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}};var _c=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var R$=/^__.*__$/,u_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new bn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ci(e,this.data,n,this.fieldTransforms)}},ch=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new bn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function E0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}var l_=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return lh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(E0(this.Cu)&&R$.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},d_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yh(e)}Qu(e,n,r,i=!1){return new l_({Cu:e,methodName:n,qu:r,path:xt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function T0(t){let e=t._freezeSettings(),n=yh(t._databaseId);return new d_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function N$(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);k_("Data must be an object, but it was:",o,r);let a=D0(r,o),u,l;if(s.merge)u=new zt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=h_(e,p,n);if(!o.contains(m))throw new B(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);C0(h,m)||h.push(m)}u=new zt(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new u_(new Pt(a),u,l)}var uh=class t extends yc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function M$(t,e,n,r){let i=t.Qu(1,e,n);k_("Data must be an object, but it was:",i,r);let s=[],o=Pt.empty();Ai(r,(u,l)=>{let h=O_(e,u,n);l=Ie(l);let p=i.Nu(h);if(l instanceof uh)s.push(h);else{let m=Ih(l,p);m!=null&&(s.push(h),o.set(h,m))}});let a=new zt(s);return new ch(o,a,i.fieldTransforms)}function P$(t,e,n,r,i,s){let o=t.Qu(1,e,n),a=[h_(e,r,n)],u=[i];if(s.length%2!=0)throw new B(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(h_(e,s[m])),u.push(s[m+1]);let l=[],h=Pt.empty();for(let m=a.length-1;m>=0;--m)if(!C0(l,a[m])){let y=a[m],b=u[m];b=Ie(b);let N=o.Nu(y);if(b instanceof uh)l.push(y);else{let R=Ih(b,N);R!=null&&(l.push(y),h.set(y,R))}}let p=new zt(l);return new ch(h,p,o.fieldTransforms)}function Ih(t,e){if(b0(t=Ie(t)))return k_("Unsupported field value:",e,t),D0(t,e);if(t instanceof yc)return function(r,i){if(!E0(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=Ih(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Qe.fromDate(r);return{timestampValue:Gd(i.serializer,s)}}if(r instanceof Qe){let s=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gd(i.serializer,s)}}if(r instanceof vc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mc)return{bytesValue:zA(i.serializer,r._byteString)};if(r instanceof Et){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:D_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof _c)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return T_(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${P_(r)}`)}(t,e)}function D0(t,e){let n={};return TA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ai(t,(r,i)=>{let s=Ih(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function b0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof vc||t instanceof mc||t instanceof Et||t instanceof yc||t instanceof _c)}function k_(t,e,n){if(!b0(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=P_(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function h_(t,e,n){if((e=Ie(e))instanceof go)return e._internalPath;if(typeof e=="string")return O_(t,e);throw lh("Field path arguments must be of type string or ",t,!1,void 0,n)}var x$=new RegExp("[~\\*/\\[\\]]");function O_(t,e,n){if(e.search(x$)>=0)throw lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new go(...e.split("."))._internalPath}catch{throw lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lh(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new B(M.INVALID_ARGUMENT,a+t+u)}function C0(t,e){return t.some(n=>n.isEqual(e))}var dh=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new f_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(S0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},f_=class extends dh{data(){return super.data()}};function S0(t,e){return typeof e=="string"?O_(t,e):e instanceof go?e._internalPath:e._delegate._internalPath}function k$(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var p_=class{convertValue(e,n="none"){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ai(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Se(o.doubleValue));return new _c(s)}convertGeoPoint(e){return new vc(Se(e.latitude),Se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=v_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(lc(e));default:return null}}convertTimestamp(e){let n=tr(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Pe.fromString(e);we(ZA(r));let i=new Ud(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||er(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function O$(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ii=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},hh=class extends dh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new eo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(S0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},eo=class extends hh{data(e={}){return super.data(e)}},g_=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ii(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new eo(this._firestore,this._userDataWriter,r.key,r,new Ii(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new eo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ii(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new eo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ii(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:L$(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function L$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}function A0(t){t=rr(t,Et);let e=rr(t.firestore,Si);return b$(x_(e),t._key).then(n=>F$(e,t,n))}var fh=class extends p_{constructor(e){super(),this.firestore=e}convertBytes(e){return new mc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}};function R0(t){t=rr(t,oh);let e=rr(t.firestore,Si),n=x_(e),r=new fh(e);return k$(t._query),C$(n,t._query).then(i=>new g_(e,r,t,i))}function N0(t,e,n){t=rr(t,Et);let r=rr(t.firestore,Si),i=O$(t.converter,e,n);return P0(r,[N$(T0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,xr.none())])}function M0(t,e,n,...r){t=rr(t,Et);let i=rr(t.firestore,Si),s=T0(i),o;return o=typeof(e=Ie(e))=="string"||e instanceof go?P$(s,"updateDoc",t._key,e,n,r):M$(s,"updateDoc",t._key,e),P0(i,[o.toMutation(t._key,xr.exists(!0))])}function P0(t,e){return function(r,i){let s=new en;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return p$(yield D$(r),i,s)})),s.promise}(x_(t),e)}function F$(t,e,n){let r=n.docs.get(e._key),i=new fh(t);return new hh(t,i,e._key,r,new Ii(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){mo=i})(Mt),rt(new ke("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Si(new Hy(r.getProvider("auth-internal")),new Wy(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ud(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),me(zS,"4.7.3",e),me(zS,"4.7.3","esm2017")})();var Ni=class{constructor(e){return e}},x0="firestore",L_=class{constructor(){return za(x0)}};var F_=new $("angularfire2.firestore-instances");function V$(t,e){let n=cd(x0,t,e);return n&&new Ni(n)}function U$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ni(r)}}var j$={provide:L_,deps:[[new Ke,F_]]},B$={provide:Ni,useFactory:V$,deps:[[new Ke,F_],Wn]};function hQ(t,...e){return me("angularfire",Ar.full,"fst"),hn([B$,j$,{provide:F_,useFactory:U$(t),multi:!0,deps:[fe,tt,Rr,hi,[new Ke,tc],[new Ke,Gn],...e]}])}var k0=it(_0,!0);var Dc=it(I0,!0);var O0=it(A0,!0);var L0=it(R0,!0);var fQ=it(w0,!0);var F0=it(N0,!0);var V_=it(M0,!0);var H$=new Map,q$={activated:!1,tokenObservers:[]},z$={initialized:!1,enabled:!1};function nn(t){return H$.get(t)||Object.assign({},q$)}function $0(){return z$}var G$="https://content-firebaseappcheck.googleapis.com/v1";var W$="exchangeDebugToken",V0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},EQ=24*60*60*1e3;var j_=class{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new ci,this.pending.promise.catch(n=>{}),yield K$(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ci,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function K$(t){return new Promise(e=>{setTimeout(e,t)})}var Q$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Vr=new wt("appCheck","AppCheck",Q$);function H0(t){if(!nn(t).activated)throw Vr.create("use-before-activation",{appName:t.name})}function q0(r,i){return _(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let y=yield o.getHeartbeatsHeader();y&&(s["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:s},u;try{u=yield fetch(t,a)}catch(y){throw Vr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Vr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Vr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Vr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function z0(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${G$}/projects/${n}/apps/${r}:${W$}?key=${i}`,body:{debug_token:e}}}var Y$="firebase-app-check-database",Z$=1,B_="firebase-app-check-store";var wh=null;function J$(){return wh||(wh=new Promise((t,e)=>{try{let n=indexedDB.open(Y$,Z$);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Vr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(B_,{keyPath:"compositeKey"})}}}catch(n){e(Vr.create("storage-open",{originalErrorMessage:n?.message}))}}),wh)}function X$(t,e){return eH(tH(t),e)}function eH(t,e){return _(this,null,function*(){let r=(yield J$()).transaction(B_,"readwrite"),s=r.objectStore(B_).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Vr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function tH(t){return`${t.options.appId}-${t.name}`}var $_=new $t("@firebase/app-check");function U_(t,e){return Ua()?X$(t,e).catch(n=>{$_.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function G0(){return $0().enabled}function W0(){return _(this,null,function*(){let t=$0();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var nH={error:"UNKNOWN_ERROR"};function rH(t){return Zl.encodeString(JSON.stringify(t),!1)}function H_(t,e=!1){return _(this,null,function*(){let n=t.app;H0(n);let r=nn(n),i=r.token,s;if(i&&!bc(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(bc(u)?i=u:yield U_(n,void 0))}if(!e&&i&&bc(i))return{token:i.token};let o=!1;if(G0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=q0(z0(n,yield W0()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let u=yield r.exchangeTokenPromise;return yield U_(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield nn(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?$_.warn(u.message):$_.error(u),s=u}let a;return i?s?bc(i)?a={token:i.token,internalError:s}:a=j0(s):(a={token:i.token},r.token=i,yield U_(n,i)):a=j0(s),o&&aH(n,a),a})}function iH(t){return _(this,null,function*(){let e=t.app;H0(e);let{provider:n}=nn(e);if(G0()){let r=yield W0(),{token:i}=yield q0(z0(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function sH(t,e,n,r){let{app:i}=t,s=nn(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&bc(s.token)){let a=s.token;Promise.resolve().then(()=>{n({token:a.token}),U0(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>U0(t))}function K0(t,e){let n=nn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function U0(t){let{app:e}=t,n=nn(e),r=n.tokenRefresher;r||(r=oH(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function oH(t){let{app:e}=t;return new j_(()=>_(this,null,function*(){let n=nn(e),r;if(n.token?r=yield H_(t,!0):r=yield H_(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=nn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},V0.RETRIAL_MIN_WAIT,V0.RETRIAL_MAX_WAIT)}function aH(t,e){let n=nn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function bc(t){return t.expireTimeMillis-Date.now()>0}function j0(t){return{token:rH(nH),error:t}}var q_=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=nn(this.app);for(let n of e)K0(this.app,n.next);return Promise.resolve()}};function cH(t,e){return new q_(t,e)}function uH(t){return{getToken:e=>H_(t,e),getLimitedUseToken:()=>iH(t),addTokenListener:e=>sH(t,"INTERNAL",e),removeTokenListener:e=>K0(t.app,e)}}var lH="@firebase/app-check",dH="0.8.8";var hH="app-check",B0="app-check-internal";function fH(){rt(new ke(hH,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return cH(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(B0).initialize()})),rt(new ke(B0,t=>{let e=t.getProvider("app-check").getImmediate();return uH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),me(lH,dH)}fH();var pH=["localhost","0.0.0.0","127.0.0.1"],kQ=typeof window<"u"&&pH.includes(window.location.hostname);var z_=class{constructor(e,n){this._delegate=e,this.firebase=n,Hs(e,new ke("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),qa(this._delegate)))}_getService(e,n=mn){var r;this._delegate.checkDestroyed();let i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=mn){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Hs(this._delegate,e)}_addOrOverwriteComponent(e){jm(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}};var mH={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Q0=new wt("app-compat","Firebase",mH);function yH(t){let e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:me,setLogLevel:od,onLog:sd,apps:null,SDK_VERSION:Mt,INTERNAL:{registerComponent:a,removeApp:r,useAsService:u,modularAPIs:Bm}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(l){delete e[l]}function i(l){if(l=l||mn,!Cm(e,l))throw Q0.create("no-app",{appName:l});return e[l]}i.App=t;function s(l,h={}){let p=qs(l,h);if(Cm(e,p.name))return e[p.name];let m=new t(p,n);return e[p.name]=m,m}function o(){return Object.keys(e).map(l=>e[l])}function a(l){let h=l.name,p=h.replace("-compat","");if(rt(l)&&l.type==="PUBLIC"){let m=(y=i())=>{if(typeof y[p]!="function")throw Q0.create("invalid-app-argument",{appName:h});return y[p]()};l.serviceProps!==void 0&&Va(m,l.serviceProps),n[p]=m,t.prototype[p]=function(...y){return this._getService.bind(this,h).apply(this,l.multipleInstances?y:[])}}return l.type==="PUBLIC"?n[p]:null}function u(l,h){return h==="serverAuth"?null:h}return n}function Z0(){let t=yH(z_);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:Z0,extendNamespace:e,createSubscribe:td,ErrorFactory:wt,deepExtend:Va});function e(n){Va(t,n)}return t}var vH=Z0();var Y0=new $t("@firebase/app-compat"),_H="@firebase/app-compat",IH="0.2.43";function wH(t){me(_H,IH,t)}try{let t=Jl();if(t.firebase!==void 0){Y0.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);let e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Y0.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}var ir=vH;wH();var EH="firebase",TH="10.14.1";ir.registerVersion(EH,TH,"app-compat");var G_=class{constructor(e){return e}},X0=new $("angularfire2.app.options"),eR=new $("angularfire2.app.name");function tR(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let o=ir.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>ir.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;DH("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new G_(o)}var DH=(t,...e)=>{yg()&&typeof console<"u"&&console[t](...e)};function nR(t,e,n,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return bH(i,o)||(J0("error",`${e} was already initialized on the ${n} Firebase App with different settings.${CH?" You may need to reload as Firebase is not HMR aware.":""}`),J0("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function bH(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var CH=typeof module<"u"&&!!module.hot,J0=(t,...e)=>{yg()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var dR="firebasestorage.googleapis.com",hR="storageBucket",SH=2*60*1e3,AH=10*60*1e3,RH=1e3;var Re=class t extends nt{constructor(e,n,r=0){super(W_(e),`Firebase Storage: ${n} (${W_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return W_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Ae=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Ae||{});function W_(t){return"storage/"+t}function tI(){let t="An unknown error occurred, please check the error payload for server response.";return new Re(Ae.UNKNOWN,t)}function NH(t){return new Re(Ae.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function MH(t){return new Re(Ae.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function PH(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Re(Ae.UNAUTHENTICATED,t)}function xH(){return new Re(Ae.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function kH(t){return new Re(Ae.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function fR(){return new Re(Ae.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pR(){return new Re(Ae.CANCELED,"User canceled the upload/download.")}function OH(t){return new Re(Ae.INVALID_URL,"Invalid URL '"+t+"'.")}function LH(t){return new Re(Ae.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function FH(){return new Re(Ae.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+hR+"' property when initializing the app?")}function gR(){return new Re(Ae.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function VH(){return new Re(Ae.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function UH(){return new Re(Ae.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function jH(t){return new Re(Ae.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Mi(t){return new Re(Ae.INVALID_ARGUMENT,t)}function mR(){return new Re(Ae.APP_DELETED,"The Firebase app was deleted.")}function nI(t){return new Re(Ae.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Sc(t,e){return new Re(Ae.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Cc(t){throw new Re(Ae.INTERNAL_ERROR,"Internal error: "+t)}var yt=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw LH(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(H){H.path_=decodeURIComponent(H.path)}let h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${h}/b/${i}/o${m}`,"i"),b={bucket:1,path:3},N=n===dR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",O=new RegExp(`^https?://${N}/${i}/${R}`,"i"),F=[{regex:a,indices:u,postModify:s},{regex:y,indices:b,postModify:l},{regex:O,indices:{bucket:1,path:2},postModify:l}];for(let H=0;H<F.length;H++){let ve=F[H],G=ve.regex.exec(e);if(G){let E=G[ve.indices.bucket],v=G[ve.indices.path];v||(v=""),r=new t(E,v),ve.postModify(r);break}}if(r==null)throw OH(e);return r}},Q_=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function BH(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function h(...R){l||(l=!0,e.apply(null,R))}function p(R){i=setTimeout(()=>{i=null,t(y,u())},R)}function m(){s&&clearTimeout(s)}function y(R,...O){if(l){m();return}if(R){m(),h.call(null,R,...O);return}if(u()||o){m(),h.call(null,R,...O);return}r<64&&(r*=2);let F;a===1?(a=2,F=0):F=(r+Math.random())*1e3,p(F)}let b=!1;function N(R){b||(b=!0,m(),!l&&(i!==null?(R||(a=2),clearTimeout(i),p(0)):R||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,N(!0)},n),N}function $H(t){t(!1)}function HH(t){return t!==void 0}function qH(t){return typeof t=="function"}function zH(t){return typeof t=="object"&&!Array.isArray(t)}function Dh(t){return typeof t=="string"||t instanceof String}function rR(t){return rI()&&t instanceof Blob}function rI(){return typeof Blob<"u"}function Y_(t,e,n,r){if(r<e)throw Mi(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Mi(`Invalid value for '${t}'. Expected ${n} or less.`)}function Ur(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function yR(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Io=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Io||{});function vR(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var Z_=class{constructor(e,n,r,i,s,o,a,u,l,h,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,b)=>{this.resolve_=y,this.reject_=b,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new _o(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Io.NO_ERROR,u=s.getStatus();if(!a||vR(u,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===Io.ABORT;r(!1,new _o(!1,null,h));return}let l=this.successCodes_.indexOf(u)!==-1;r(!0,new _o(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(a,a.getResponse());HH(u)?s(u):s()}catch(u){o(u)}else if(a!==null){let u=tI();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){let u=this.appDelete_?mR():pR();o(u)}else{let u=fR();o(u)}};this.canceled_?n(!1,new _o(!1,null,!0)):this.backoffId_=BH(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$H(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},_o=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function GH(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function WH(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function KH(t,e){e&&(t["X-Firebase-GMPID"]=e)}function QH(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function YH(t,e,n,r,i,s,o=!0){let a=yR(t.urlParams),u=t.url+a,l=Object.assign({},t.headers);return KH(l,e),GH(l,n),WH(l,s),QH(l,r),new Z_(u,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function ZH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function JH(...t){let e=ZH();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(rI())return new Blob(t);throw new Re(Ae.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function XH(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function eq(t){if(typeof atob>"u")throw jH("base-64");return atob(t)}var kt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ac=class{constructor(e,n){this.data=e,this.contentType=n||null}};function iI(t,e){switch(t){case kt.RAW:return new Ac(_R(e));case kt.BASE64:case kt.BASE64URL:return new Ac(IR(t,e));case kt.DATA_URL:return new Ac(nq(e),rq(e))}throw tI()}function _R(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function tq(t){let e;try{e=decodeURIComponent(t)}catch{throw Sc(kt.DATA_URL,"Malformed data URL.")}return _R(e)}function IR(t,e){switch(t){case kt.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Sc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case kt.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Sc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=eq(e)}catch(i){throw i.message.includes("polyfill")?i:Sc(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var Th=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw Sc(kt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=iq(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function nq(t){let e=new Th(t);return e.base64?IR(kt.BASE64,e.rest):tq(e.rest)}function rq(t){return new Th(t).contentType}function iq(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var wo=class t{constructor(e,n){let r=0,i="";rR(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(rR(this.data_)){let r=this.data_,i=XH(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(rI()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(JH.apply(null,n))}else{let n=e.map(o=>Dh(o)?iI(kt.RAW,o).data:o.data_),r=0;n.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new t(i,!0)}}uploadData(){return this.data_}};function sI(t){let e;try{e=JSON.parse(t)}catch{return null}return zH(e)?e:null}function sq(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function oq(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function wR(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function aq(t,e){return e}var Ye=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||aq}},Eh=null;function cq(t){return!Dh(t)||t.length<2?t:wR(t)}function bh(){if(Eh)return Eh;let t=[];t.push(new Ye("bucket")),t.push(new Ye("generation")),t.push(new Ye("metageneration")),t.push(new Ye("name","fullPath",!0));function e(s,o){return cq(o)}let n=new Ye("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}let i=new Ye("size");return i.xform=r,t.push(i),t.push(new Ye("timeCreated")),t.push(new Ye("updated")),t.push(new Ye("md5Hash",null,!0)),t.push(new Ye("cacheControl",null,!0)),t.push(new Ye("contentDisposition",null,!0)),t.push(new Ye("contentEncoding",null,!0)),t.push(new Ye("contentLanguage",null,!0)),t.push(new Ye("contentType",null,!0)),t.push(new Ye("metadata","customMetadata",!0)),Eh=t,Eh}function uq(t,e){function n(){let r=t.bucket,i=t.fullPath,s=new yt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function lq(t,e,n){let r={};r.type="file";let i=n.length;for(let s=0;s<i;s++){let o=n[s];r[o.local]=o.xform(r,e[o.server])}return uq(r,t),r}function ER(t,e,n){let r=sI(e);return r===null?null:lq(t,r,n)}function dq(t,e,n,r){let i=sI(e);if(i===null||!Dh(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(l=>{let h=t.bucket,p=t.fullPath,m="/b/"+o(h)+"/o/"+o(p),y=Ur(m,n,r),b=yR({alt:"media",token:l});return y+b})[0]}function oI(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}var iR="prefixes",sR="items";function hq(t,e,n){let r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[iR])for(let i of n[iR]){let s=i.replace(/\/$/,""),o=t._makeStorageReference(new yt(e,s));r.prefixes.push(o)}if(n[sR])for(let i of n[sR]){let s=t._makeStorageReference(new yt(e,i.name));r.items.push(s)}return r}function fq(t,e,n){let r=sI(n);return r===null?null:hq(t,e,r)}var rn=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Sn(t){if(!t)throw tI()}function Ch(t,e){function n(r,i){let s=ER(t,i,e);return Sn(s!==null),s}return n}function pq(t,e){function n(r,i){let s=fq(t,e,i);return Sn(s!==null),s}return n}function gq(t,e){function n(r,i){let s=ER(t,i,e);return Sn(s!==null),dq(s,i,t.host,t._protocol)}return n}function Do(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=xH():i=PH():n.getStatus()===402?i=MH(t.bucket):n.getStatus()===403?i=kH(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Sh(t){let e=Do(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=NH(t.path)),s.serverResponse=i.serverResponse,s}return n}function TR(t,e,n){let r=e.fullServerUrl(),i=Ur(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new rn(i,s,Ch(t,n),o);return a.errorHandler=Sh(e),a}function mq(t,e,n,r,i){let s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);let o=e.bucketOnlyServerUrl(),a=Ur(o,t.host,t._protocol),u="GET",l=t.maxOperationRetryTime,h=new rn(a,u,pq(t,e.bucket),l);return h.urlParams=s,h.errorHandler=Do(e),h}function yq(t,e,n){let r=e.fullServerUrl(),i=Ur(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new rn(i,s,gq(t,n),o);return a.errorHandler=Sh(e),a}function vq(t,e,n,r){let i=e.fullServerUrl(),s=Ur(i,t.host,t._protocol),o="PATCH",a=oI(n,r),u={"Content-Type":"application/json; charset=utf-8"},l=t.maxOperationRetryTime,h=new rn(s,o,Ch(t,r),l);return h.headers=u,h.body=a,h.errorHandler=Sh(e),h}function _q(t,e){let n=e.fullServerUrl(),r=Ur(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(u,l){}let a=new rn(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Sh(e),a}function Iq(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function DR(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Iq(null,e)),r}function wq(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let F="";for(let H=0;H<2;H++)F=F+Math.random().toString().slice(2);return F}let u=a();o["Content-Type"]="multipart/related; boundary="+u;let l=DR(e,r,i),h=oI(l,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,m=`\r
--`+u+"--",y=wo.getBlob(p,r,m);if(y===null)throw gR();let b={name:l.fullPath},N=Ur(s,t.host,t._protocol),R="POST",O=t.maxUploadRetryTime,U=new rn(N,R,Ch(t,n),O);return U.urlParams=b,U.headers=o,U.body=y.uploadData(),U.errorHandler=Do(e),U}var Eo=class{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}};function aI(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Sn(!1)}return Sn(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Eq(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o=DR(e,r,i),a={name:o.fullPath},u=Ur(s,t.host,t._protocol),l="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},p=oI(o,n),m=t.maxUploadRetryTime;function y(N){aI(N);let R;try{R=N.getResponseHeader("X-Goog-Upload-URL")}catch{Sn(!1)}return Sn(Dh(R)),R}let b=new rn(u,l,y,m);return b.urlParams=a,b.headers=h,b.body=p,b.errorHandler=Do(e),b}function Tq(t,e,n,r){let i={"X-Goog-Upload-Command":"query"};function s(l){let h=aI(l,["active","final"]),p=null;try{p=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Sn(!1)}p||Sn(!1);let m=Number(p);return Sn(!isNaN(m)),new Eo(m,r.size(),h==="final")}let o="POST",a=t.maxUploadRetryTime,u=new rn(n,o,s,a);return u.headers=i,u.errorHandler=Do(e),u}var oR=256*1024;function Dq(t,e,n,r,i,s,o,a){let u=new Eo(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw VH();let l=u.total-u.current,h=l;i>0&&(h=Math.min(h,i));let p=u.current,m=p+h,y="";h===0?y="finalize":l===h?y="upload, finalize":y="upload";let b={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":`${u.current}`},N=r.slice(p,m);if(N===null)throw gR();function R(H,ve){let G=aI(H,["active","final"]),E=u.current+h,v=r.size(),I;return G==="final"?I=Ch(e,s)(H,ve):I=null,new Eo(E,v,G==="final",I)}let O="POST",U=e.maxUploadRetryTime,F=new rn(n,O,R,U);return F.headers=b,F.body=N.uploadData(),F.progressCallback=a||null,F.errorHandler=Do(t),F}var bR={STATE_CHANGED:"state_changed"},ct={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function K_(t){switch(t){case"running":case"pausing":case"canceling":return ct.RUNNING;case"paused":return ct.PAUSED;case"success":return ct.SUCCESS;case"canceled":return ct.CANCELED;case"error":return ct.ERROR;default:return ct.ERROR}}var J_=class{constructor(e,n,r){if(qH(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{let s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};function vo(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var aR=null,X_=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Io.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Io.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Io.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Cc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Cc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Cc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Cc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Cc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},eI=class extends X_{initXhr(){this.xhr_.responseType="text"}};function Cn(){return aR?aR():new eI}var Rc=class{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=bh(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Ae.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let s=this.isExponentialBackoffExpired();if(vR(i.status,[]))if(s)i=fR();else{this.sleepTime=Math.max(this.sleepTime*2,RH),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Ae.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let r=Eq(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Cn,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,r)=>{let i=Tq(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Cn,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=oR*this._chunkMultiplier,n=new Eo(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=Dq(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}let a=this._ref.storage._makeRequest(o,Cn,i,s,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){oR*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let r=TR(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Cn,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let r=wq(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Cn,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=pR(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=K_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){let s=new J_(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(K_(this._state)){case ct.SUCCESS:vo(this._resolve.bind(null,this.snapshot))();break;case ct.CANCELED:case ct.ERROR:let n=this._reject;vo(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(K_(this._state)){case ct.RUNNING:case ct.PAUSED:e.next&&vo(e.next.bind(e,this.snapshot))();break;case ct.SUCCESS:e.complete&&vo(e.complete.bind(e))();break;case ct.CANCELED:case ct.ERROR:e.error&&vo(e.error.bind(e,this._error))();break;default:e.error&&vo(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var To=class t{constructor(e,n){this._service=e,n instanceof yt?this._location=n:this._location=yt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new yt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wR(this._location.path)}get storage(){return this._service}get parent(){let e=sq(this._location.path);if(e===null)return null;let n=new yt(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw nI(e)}};function bq(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Rc(t,new wo(e),n)}function Cq(t){let e={prefixes:[],items:[]};return CR(t,e).then(()=>e)}function CR(t,e,n){return _(this,null,function*(){let i=yield SR(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield CR(t,e,i.nextPageToken))})}function SR(t,e){e!=null&&typeof e.maxResults=="number"&&Y_("options.maxResults",1,1e3,e.maxResults);let n=e||{},r=mq(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Cn)}function Sq(t){t._throwIfRoot("getMetadata");let e=TR(t.storage,t._location,bh());return t.storage.makeRequestWithTokens(e,Cn)}function Aq(t,e){t._throwIfRoot("updateMetadata");let n=vq(t.storage,t._location,e,bh());return t.storage.makeRequestWithTokens(n,Cn)}function Rq(t){t._throwIfRoot("getDownloadURL");let e=yq(t.storage,t._location,bh());return t.storage.makeRequestWithTokens(e,Cn).then(n=>{if(n===null)throw UH();return n})}function Nq(t){t._throwIfRoot("deleteObject");let e=_q(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Cn)}function AR(t,e){let n=oq(t._location.path,e),r=new yt(t._location.bucket,n);return new To(t.storage,r)}function Mq(t){return/^[A-Za-z]+:\/\//.test(t)}function Pq(t,e){return new To(t,e)}function RR(t,e){if(t instanceof Nc){let n=t;if(n._bucket==null)throw FH();let r=new To(n,n._bucket);return e!=null?RR(r,e):r}else return e!==void 0?AR(t,e):t}function xq(t,e){if(e&&Mq(e)){if(t instanceof Nc)return Pq(t,e);throw Mi("To use ref(service, url), the first argument must be a Storage instance.")}else return RR(t,e)}function cR(t,e){let n=e?.[hR];return n==null?null:yt.makeFromBucketSpec(n,t)}function kq(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:ed(i,t.app.options.projectId))}var Nc=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=dR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=SH,this._maxUploadRetryTime=AH,this._requests=new Set,i!=null?this._bucket=yt.makeFromBucketSpec(i,this._host):this._bucket=cR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yt.makeFromBucketSpec(this._url,e):this._bucket=cR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Y_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Y_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return _(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return _(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new To(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Q_(mR());{let o=YH(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return _(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},uR="@firebase/storage",lR="0.13.2";var Oq="storage";function NR(t,e,n){return t=Ie(t),bq(t,e,n)}function MR(t){return t=Ie(t),Sq(t)}function PR(t,e){return t=Ie(t),Aq(t,e)}function xR(t,e){return t=Ie(t),SR(t,e)}function kR(t){return t=Ie(t),Cq(t)}function OR(t){return t=Ie(t),Rq(t)}function LR(t){return t=Ie(t),Nq(t)}function cI(t,e){return t=Ie(t),xq(t,e)}function FR(t,e){return AR(t,e)}function VR(t,e,n,r={}){kq(t,e,n,r)}function Lq(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Nc(n,r,i,e,Mt)}function Fq(){rt(new ke(Oq,Lq,"PUBLIC").setMultipleInstances(!0)),me(uR,lR,""),me(uR,lR,"esm2017")}Fq();var bo=class{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var Ah=class{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new bo(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new bo(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new bo(o,this,this._ref)):s={next:n.next?o=>n.next(new bo(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}},Rh=class{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Pi(e,this._service))}get items(){return this._delegate.items.map(e=>new Pi(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var Pi=class t{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let n=FR(this._delegate,e);return new t(n,this.storage)}get root(){return new t(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new t(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new Ah(NR(this._delegate,e,n),this)}putString(e,n=kt.RAW,r){this._throwIfRoot("putString");let i=iI(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new Ah(new Rc(this._delegate,new wo(i.data,!0),s),this)}listAll(){return kR(this._delegate).then(e=>new Rh(e,this.storage))}list(e){return xR(this._delegate,e||void 0).then(n=>new Rh(n,this.storage))}getMetadata(){return MR(this._delegate)}updateMetadata(e){return PR(this._delegate,e)}getDownloadURL(){return OR(this._delegate)}delete(){return this._throwIfRoot("delete"),LR(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw nI(e)}};var Nh=class{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(UR(e))throw Mi("ref() expected a child path but got a URL, use refFromURL instead.");return new Pi(cI(this._delegate,e),this)}refFromURL(e){if(!UR(e))throw Mi("refFromURL() expected a full URL but got a child path, use ref() instead.");try{yt.makeFromUrl(e,this._delegate.host)}catch{throw Mi("refFromUrl() expected a valid full URL but got an invalid one.")}return new Pi(cI(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){VR(this._delegate,e,n,r)}};function UR(t){return/^[A-Za-z]+:\/\//.test(t)}var Vq="@firebase/storage-compat",Uq="0.3.12";var jq="storage-compat";function Bq(t,{instanceIdentifier:e}){let n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new Nh(n,r)}function $q(t){let e={TaskState:ct,TaskEvent:bR,StringFormat:kt,Storage:Nh,Reference:Pi};t.INTERNAL.registerComponent(new ke(jq,Bq,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(Vq,Uq)}$q(ir);function Hq(t){return new oe(e=>{let n=o=>e.next(o),r=o=>e.error(o),i=()=>e.complete();n(t.snapshot);let s=t.on("state_changed",n);return t.then(o=>{n(o),i()},o=>{n(t.snapshot),r(o)}),function(){s()}}).pipe(Df(0))}function jR(t){let e=Hq(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(ie(n=>n.bytesTransferred/n.totalBytes*100))}}function Mh(t){return{getDownloadURL:()=>Q(void 0).pipe(Hm,ht(()=>t.getDownloadURL()),ud),getMetadata:()=>Q(void 0).pipe(Hm,ht(()=>t.getMetadata()),ud),delete:()=>De(t.delete()),child:e=>Mh(t.child(e)),updateMetadata:e=>De(t.updateMetadata(e)),put:(e,n)=>{let r=t.put(e,n);return jR(r)},putString:(e,n,r)=>{let i=t.putString(e,n,r);return jR(i)},list:e=>De(t.list(e)),listAll:()=>De(t.listAll())}}var qq=new $("angularfire2.storageBucket"),zq=new $("angularfire2.storage.maxUploadRetryTime"),Gq=new $("angularfire2.storage.maxOperationRetryTime"),Wq=new $("angularfire2.storage.use-emulator"),BR=(()=>{class t{storage;constructor(n,r,i,s,o,a,u,l,h,p){let m=tR(n,o,r);this.storage=nR(`${m.name}.storage.${i}`,"AngularFireStorage",m.name,()=>{let y=o.runOutsideAngular(()=>m.storage(i||void 0)),b=h;return b&&y.useEmulator(...b),u&&y.setMaxUploadRetryTime(u),l&&y.setMaxOperationRetryTime(l),y},[u,l])}ref(n){return Mh(this.storage.ref(n))}refFromURL(n){return Mh(this.storage.refFromURL(n))}upload(n,r,i){let s=this.storage.ref(n);return Mh(s).put(r,i)}static \u0275fac=function(r){return new(r||t)(j(X0),j(eR,8),j(qq,8),j(At),j(fe),j(Rr),j(zq,8),j(Gq,8),j(Wq,8),j(Gn,8))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var $R=class t{constructor(e,n,r){this.auth=e;this.firestore=n;this.storage=r}userSubject=new Be(null);getStorageRef(){return this.storage.ref("images")}registerUser(e,n,r,i){return _(this,null,function*(){try{let s=yield US(this.auth,e,n);yield jS(s.user);let o=i!=="especialista",a=_e(L({uid:s.user.uid},r),{role:i,createdAt:new Date,habilitado:o,emailVerificado:!1});return yield F0(Dc(this.firestore,"users",s.user.uid),a),_e(L({},s.user),{role:i})}catch(s){throw console.error(`Error al registrar el ${i}:`,s),s}})}login(e,n){return _(this,null,function*(){try{let r=yield BS(this.auth,e,n),i=yield this.getUserData(r.user.uid);if(i.role==="especialista"){if(!i.habilitado)throw new Error("Tu cuenta debe ser aprobada por un administrador antes de poder iniciar sesi\xF3n.");if(!i.emailVerificado)throw new Error("Debes verificar tu correo electr\xF3nico para ingresar.")}else if(!i.emailVerificado)throw new Error("Debes verificar tu correo electr\xF3nico para ingresar.");return this.userSubject.next(L(L({},r.user),i)),L(L({},r.user),i)}catch(r){throw console.error("Error en el login:",r),r}})}getUserData(e){return _(this,null,function*(){let n=Dc(this.firestore,`users/${e}`),r=yield O0(n);if(r.exists())return r.data();throw new Error("No se encontr\xF3 el documento del usuario")})}logout(){return $S(this.auth).then(()=>{this.userSubject.next(null)})}habilitarUsuario(e){return _(this,null,function*(){let n=Dc(this.firestore,"users",e);yield V_(n,{habilitado:!0})})}inhabilitarUsuario(e){return _(this,null,function*(){let n=Dc(this.firestore,"users",e);yield V_(n,{habilitado:!1})})}obtenerUsuarios(){return _(this,null,function*(){let e=k0(this.firestore,"users");return(yield L0(e)).docs.map(r=>L({id:r.id},r.data()))})}getUser(){return this.userSubject.asObservable()}static \u0275fac=function(n){return new(n||t)(j(yi),j(Ni),j(BR))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})};export{L as a,_e as b,Qq as c,Yq as d,_ as e,dt as f,De as g,ie as h,iM as i,W as j,UE as k,q as l,ms as m,$ as n,j as o,XE as p,ys as q,ca as r,ll as s,I3 as t,w3 as u,Qp as v,pt as w,gl as x,E3 as y,T3 as z,Jt as A,hg as B,S3 as C,Zk as D,cO as E,$D as F,wO as G,EO as H,HD as I,qD as J,pg as K,A3 as L,zD as M,R3 as N,N3 as O,jO as P,WD as Q,BO as R,M3 as S,$O as T,P3 as U,QD as V,da as W,x3 as X,Ds as Y,nb as Z,k3 as _,h1 as $,Cs as aa,o8 as ba,a8 as ca,I1 as da,k8 as ea,_L as fa,br as ga,n5 as ha,r5 as ia,L5 as ja,F5 as ka,NK as la,MK as ma,hQ as na,fQ as oa,$R as pa};
