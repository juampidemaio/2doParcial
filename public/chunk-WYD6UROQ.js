import{a as A,b as $,c as G,d as j,e as B}from"./chunk-QUS4MVYV.js";import{A as V,E as m,G as s,I as o,J as i,K as g,L as E,M as C,N as c,O as r,P as p,Q as d,W as D,ca as L,d as q,da as P,e as F,ea as x,fa as R,ka as N,m as M,p as _,q as S,t as h,u as v,w as T,y as O,ya as z,z as a}from"./chunk-GZGA3RPY.js";var u=q(G());var J=(t,n)=>({habilitado:t,inhabilitado:n}),Q=(t,n)=>({inhabilitar:t,habilitar:n});function W(t,n){if(t&1){let e=E();o(0,"button",4),C("click",function(){h(e);let f=c().$implicit,b=c();return v(b.alternarEstadoUsuario(f))}),r(1),i()}if(t&2){let e=c().$implicit;s("ngClass",D(2,Q,e.habilitado,!e.habilitado)),a(),d(" ",e.habilitado?"Inhabilitar":"Habilitar"," ")}}function X(t,n){if(t&1){let e=E();o(0,"tr",1),C("click",function(){let f=h(e).$implicit,b=c();return v(b.seleccionarUsuario(f))}),o(1,"td"),r(2),i(),o(3,"td"),r(4),i(),o(5,"td"),r(6),i(),o(7,"td"),r(8),i(),o(9,"td",2),r(10),i(),o(11,"td"),m(12,W,2,5,"button",3),i()()}if(t&2){let e=n.$implicit;a(2),p(e.nombre),a(2),p(e.apellido),a(2),p(e.email),a(2),p(e.role),a(),s("ngClass",D(7,J,e.habilitado,!e.habilitado)),a(),d(" ",e.habilitado?"Habilitado":"Inhabilitado"," "),a(2),s("ngIf",e.role==="especialista")}}var y=class t{constructor(n){this.authService=n}usuarioSeleccionado=new T;usuarios=[];ngOnInit(){this.cargarUsuarios()}seleccionarUsuario(n){this.usuarioSeleccionado.emit(n)}cargarUsuarios(){return F(this,null,function*(){try{u.default.fire({title:"Cargando usuarios...",html:"Por favor, espere un momento...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{u.default.showLoading()}}),this.usuarios=yield this.authService.obtenerUsuarios()}catch(n){console.error("Error al cargar usuarios:",n),u.default.fire({icon:"error",title:"Error",text:"Error al cargar usuarios."})}finally{u.default.close()}})}alternarEstadoUsuario(n){return F(this,null,function*(){if(n.role!=="especialista"){u.default.fire({icon:"error",title:"Error",text:"Solo se puede modificar el estado de un especialista."});return}try{n.habilitado?(yield this.authService.inhabilitarUsuario(n.uid),u.default.fire({icon:"success",title:"\xC9xito",text:"El usuario ha sido inhabilitado correctamente."})):(yield this.authService.habilitarUsuario(n.uid),u.default.fire({icon:"success",title:"\xC9xito",text:"El usuario ha sido habilitado correctamente."})),n.habilitado=!n.habilitado}catch(e){console.error("Error al modificar el estado del usuario:",e),u.default.fire({icon:"error",title:"Error",text:"No se pudo modificar el estado del usuario."})}})}static \u0275fac=function(e){return new(e||t)(V(z))};static \u0275cmp=_({type:t,selectors:[["app-listado-usuarios"]],outputs:{usuarioSeleccionado:"usuarioSeleccionado"},decls:19,vars:1,consts:[[3,"click",4,"ngFor","ngForOf"],[3,"click"],[3,"ngClass"],[3,"ngClass","click",4,"ngIf"],[3,"click","ngClass"]],template:function(e,l){e&1&&(o(0,"h2"),r(1,"Listado de Usuarios"),i(),o(2,"table")(3,"thead")(4,"tr")(5,"th"),r(6,"Nombre"),i(),o(7,"th"),r(8,"Apellido"),i(),o(9,"th"),r(10,"Email"),i(),o(11,"th"),r(12,"Rol"),i(),o(13,"th"),r(14,"Estado"),i(),o(15,"th"),r(16,"Cambiar Estado"),i()()(),o(17,"tbody"),m(18,X,13,10,"tr",0),i()()),e&2&&(a(18),s("ngForOf",l.usuarios))},dependencies:[L,P,x],styles:['@charset "UTF-8";h2[_ngcontent-%COMP%]{color:#154360;text-align:center;margin-bottom:1rem;font-weight:700;font-size:1.5rem}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff;box-shadow:0 4px 8px #0000001a;margin:0 auto;border-radius:8px;overflow:hidden}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:1rem;text-align:left}thead[_ngcontent-%COMP%]{background-color:#154360;color:#fff}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;text-transform:uppercase;letter-spacing:.05em}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .3s ease,transform .2s ease}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f3f4}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#d5e8e8;transform:scale(1.01)}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #F2F3F4}button[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.9rem;border:none;border-radius:4px;color:#fff;cursor:pointer;transition:background-color .3s ease,transform .2s ease;width:100%}button.habilitar[_ngcontent-%COMP%]{background-color:#1e8449}button.habilitar[_ngcontent-%COMP%]:hover{background-color:#1E8449,10%;transform:scale(1.05)}button.inhabilitar[_ngcontent-%COMP%]{background-color:#c0392b}button.inhabilitar[_ngcontent-%COMP%]:hover{background-color:#C0392B,10%;transform:scale(1.05)}td.habilitado[_ngcontent-%COMP%]{color:#1e8449}td.inhabilitado[_ngcontent-%COMP%]{color:#c0392b}']})};function ee(t,n){if(t&1&&g(0,"img",7),t&2){let e=n.$implicit;s("src",e,O)}}function te(t,n){if(t&1&&(o(0,"div",5)(1,"p")(2,"strong"),r(3,"Obra Social:"),i(),r(4),i(),o(5,"div")(6,"strong"),r(7,"Im\xE1genes de Perfil:"),i(),m(8,ee,1,1,"img",6),i()()),t&2){let e=c(2);a(4),d(" ",e.usuario.obraSocial,""),a(4),s("ngForOf",e.usuario.imagenes)}}function ie(t,n){if(t&1&&(o(0,"li"),r(1),i()),t&2){let e=n.$implicit;a(),p(e)}}function ne(t,n){if(t&1&&(o(0,"div",8)(1,"p")(2,"strong"),r(3,"Especialidades:"),i()(),o(4,"p"),r(5),i(),o(6,"ul"),m(7,ie,2,1,"li",9),i(),o(8,"strong"),r(9,"Im\xE1gen de Perfil:"),i(),g(10,"img",7),i()),t&2){let e=c(2);a(5),p(e.usuario.especialidad),a(2),s("ngForOf",e.usuario.especialidades),a(3),s("src",e.usuario.imageUrl,O)}}function oe(t,n){if(t&1&&(o(0,"div",10)(1,"div")(2,"strong"),r(3,"Im\xE1gen de Perfil:"),i(),g(4,"img",7),i()()),t&2){let e=c(2);a(4),s("src",e.usuario.imageUrl,O)}}function re(t,n){if(t&1&&(o(0,"div",1)(1,"h3"),r(2,"Detalles del Usuario"),i(),o(3,"p")(4,"strong"),r(5,"Nombre:"),i(),r(6),i(),o(7,"p")(8,"strong"),r(9,"Apellido:"),i(),r(10),i(),o(11,"p")(12,"strong"),r(13,"Edad:"),i(),r(14),i(),o(15,"p")(16,"strong"),r(17,"DNI:"),i(),r(18),i(),o(19,"p")(20,"strong"),r(21,"Mail:"),i(),r(22),i(),m(23,te,9,2,"div",2)(24,ne,11,3,"div",3)(25,oe,5,1,"div",4),i()),t&2){let e=c();a(6),d(" ",e.usuario.nombre,""),a(4),d(" ",e.usuario.apellido,""),a(4),d(" ",e.usuario.edad,""),a(4),d(" ",e.usuario.dni,""),a(4),d(" ",e.usuario.email,""),a(),s("ngIf",e.esPaciente),a(),s("ngIf",e.esEspecialista),a(),s("ngIf",e.esAdministrador)}}var I=class t{usuario;get esPaciente(){return this.usuario?.role==="paciente"}get esEspecialista(){return this.usuario?.role==="especialista"}get esAdministrador(){return this.usuario?.role==="administrador"}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-detalle-usuarios"]],inputs:{usuario:"usuario"},decls:1,vars:1,consts:[["class","details-container",4,"ngIf"],[1,"details-container"],["class","paciente",4,"ngIf"],["class","especialista",4,"ngIf"],["class","administrador",4,"ngIf"],[1,"paciente"],["alt","Imagen de Perfil","width","100",3,"src",4,"ngFor","ngForOf"],["alt","Imagen de Perfil","width","100",3,"src"],[1,"especialista"],[4,"ngFor","ngForOf"],[1,"administrador"]],template:function(e,l){e&1&&m(0,re,26,8,"div",0),e&2&&s("ngIf",l.usuario)},dependencies:[P,x],styles:[".details-container[_ngcontent-%COMP%]{background-color:#eaeded;border-radius:10px;padding:2rem;box-shadow:0 6px 14px #0003;margin-top:2rem;width:95%}.details-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1e8449;text-align:center;margin-bottom:1.5rem;font-size:1.8rem}.details-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;margin:.75rem 0;color:#333}.details-container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#154360}.details-container[_ngcontent-%COMP%]   .paciente[_ngcontent-%COMP%], .details-container[_ngcontent-%COMP%]   .especialista[_ngcontent-%COMP%], .details-container[_ngcontent-%COMP%]   .administrador[_ngcontent-%COMP%]{margin-top:1.5rem;border:2px solid #1E8449;padding:1.5rem;border-radius:8px;background-color:#1e84491a;transition:background-color .3s ease,transform .2s ease}.details-container[_ngcontent-%COMP%]   .paciente[_ngcontent-%COMP%]:hover, .details-container[_ngcontent-%COMP%]   .especialista[_ngcontent-%COMP%]:hover, .details-container[_ngcontent-%COMP%]   .administrador[_ngcontent-%COMP%]:hover{background-color:#1e84494d;transform:translateY(-2px)}.details-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:1rem;border-radius:8px;border:2px solid #1E8449}"]})};function se(t,n){if(t&1){let e=E();o(0,"app-listado-usuarios",5),C("usuarioSeleccionado",function(f){h(e);let b=c();return v(b.mostrarDetalles(f))}),i()}}function le(t,n){if(t&1&&g(0,"app-detalle-usuarios",6),t&2){let e=c();s("usuario",e.usuarioSeleccionado)}}function ce(t,n){t&1&&g(0,"app-registro")}var w=class t{usuarioSeleccionado=null;registroVisible=!1;mostrarDetalles(n){this.usuarioSeleccionado=n}toggleRegistro(){this.registroVisible=!this.registroVisible}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-seccion-usuarios"]],decls:8,vars:4,consts:[[1,"usuarios-container"],[3,"usuarioSeleccionado",4,"ngIf"],[3,"usuario",4,"ngIf"],[4,"ngIf"],[3,"click"],[3,"usuarioSeleccionado"],[3,"usuario"]],template:function(e,l){e&1&&(o(0,"h2"),r(1," Bienvenido a la secci\xF3n de Usuarios"),i(),o(2,"div",0),m(3,se,1,0,"app-listado-usuarios",1)(4,le,1,1,"app-detalle-usuarios",2)(5,ce,1,0,"app-registro",3),i(),o(6,"button",4),C("click",function(){return l.toggleRegistro()}),r(7),i()),e&2&&(a(3),s("ngIf",!l.registroVisible),a(),s("ngIf",!l.registroVisible&&l.usuarioSeleccionado),a(),s("ngIf",l.registroVisible),a(2),d(" ",l.registroVisible?"Ocultar Registro":"Crear Usuario",`
`))},dependencies:[x,j,y,I],styles:['@charset "UTF-8";h2[_ngcontent-%COMP%]{color:#154360;text-align:center;margin-bottom:1rem;font-weight:700}.usuarios-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:1rem}app-listado-usuarios[_ngcontent-%COMP%], app-detalle-usuarios[_ngcontent-%COMP%], app-registro[_ngcontent-%COMP%]{width:85%;margin-bottom:1rem}button[_ngcontent-%COMP%]{display:block;margin:1rem auto;padding:.5rem 1rem;border:none;border-radius:4px;background-color:#1e8449;color:#fff;font-size:1rem;cursor:pointer;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#155a32}']})};var de=[{path:"seccion-usuarios",component:w}],k=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=S({type:t});static \u0275inj=M({imports:[N.forChild(de),N]})};var Y=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=S({type:t});static \u0275inj=M({imports:[R,k,A,$,B]})};export{Y as UsuariosModule};
