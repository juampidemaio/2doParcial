var j0=Object.create;var Jd=Object.defineProperty,B0=Object.defineProperties,$0=Object.getOwnPropertyDescriptor,H0=Object.getOwnPropertyDescriptors,q0=Object.getOwnPropertyNames,M_=Object.getOwnPropertySymbols,P_=Object.getPrototypeOf,O_=Object.prototype.hasOwnProperty,z0=Object.prototype.propertyIsEnumerable,G0=Reflect.get;var x_=(t,e,n)=>e in t?Jd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k=(t,e)=>{for(var n in e||={})O_.call(e,n)&&x_(t,n,e[n]);if(M_)for(var n of M_(e))z0.call(e,n)&&x_(t,n,e[n]);return t},ye=(t,e)=>B0(t,H0(e));var o2=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var W0=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of q0(e))!O_.call(t,i)&&i!==n&&Jd(t,i,{get:()=>e[i],enumerable:!(r=$0(e,i))||r.enumerable});return t};var a2=(t,e,n)=>(n=t!=null?j0(P_(t)):{},W0(e||!t||!t.__esModule?Jd(n,"default",{value:t,enumerable:!0}):n,t));var Hn=(t,e,n)=>G0(P_(t),n,e);var v=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});function k_(t,e){return Object.is(t,e)}var Oe=null,oc=!1,ac=1,gn=Symbol("SIGNAL");function he(t){let e=Oe;return Oe=t,e}function L_(){return Oe}var lo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function th(t){if(oc)throw new Error("");if(Oe===null)return;Oe.consumerOnSignalRead(t);let e=Oe.nextProducerIndex++;if(dc(Oe),e<Oe.producerNode.length&&Oe.producerNode[e]!==t&&uo(Oe)){let n=Oe.producerNode[e];lc(n,Oe.producerIndexOfThis[e])}Oe.producerNode[e]!==t&&(Oe.producerNode[e]=t,Oe.producerIndexOfThis[e]=uo(Oe)?j_(t,Oe,e):0),Oe.producerLastReadVersion[e]=t.version}function K0(){ac++}function F_(t){if(!(uo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ac)){if(!t.producerMustRecompute(t)&&!rh(t)){t.dirty=!1,t.lastCleanEpoch=ac;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ac}}function V_(t){if(t.liveConsumerNode===void 0)return;let e=oc;oc=!0;try{for(let n of t.liveConsumerNode)n.dirty||Q0(n)}finally{oc=e}}function U_(){return Oe?.consumerAllowSignalWrites!==!1}function Q0(t){t.dirty=!0,V_(t),t.consumerMarkedDirty?.(t)}function uc(t){return t&&(t.nextProducerIndex=0),he(t)}function nh(t,e){if(he(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(uo(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)lc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function rh(t){dc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(F_(n),r!==n.version))return!0}return!1}function ih(t){if(dc(t),uo(t))for(let e=0;e<t.producerNode.length;e++)lc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function j_(t,e,n){if(B_(t),t.liveConsumerNode.length===0&&$_(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=j_(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function lc(t,e){if(B_(t),t.liveConsumerNode.length===1&&$_(t))for(let r=0;r<t.producerNode.length;r++)lc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];dc(i),i.producerIndexOfThis[r]=e}}function uo(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function dc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function B_(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function $_(t){return t.producerNode!==void 0}function H_(t){let e=Object.create(Y0);e.computation=t;let n=()=>{if(F_(e),th(e),e.value===cc)throw e.error;return e.value};return n[gn]=e,n}var Xd=Symbol("UNSET"),eh=Symbol("COMPUTING"),cc=Symbol("ERRORED"),Y0=ye(k({},lo),{value:Xd,dirty:!0,error:null,equal:k_,producerMustRecompute(t){return t.value===Xd||t.value===eh},producerRecomputeValue(t){if(t.value===eh)throw new Error("Detected cycle in computations.");let e=t.value;t.value=eh;let n=uc(t),r;try{r=t.computation()}catch(i){r=cc,t.error=i}finally{nh(t,n)}if(e!==Xd&&e!==cc&&r!==cc&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function Z0(){throw new Error}var q_=Z0;function z_(){q_()}function G_(t){q_=t}var J0=null;function W_(t){let e=Object.create(Q_);e.value=t;let n=()=>(th(e),e.value);return n[gn]=e,n}function sh(t,e){U_()||z_(),t.equal(t.value,e)||(t.value=e,X0(t))}function K_(t,e){U_()||z_(),sh(t,e(t.value))}var Q_=ye(k({},lo),{equal:k_,value:void 0});function X0(t){t.version++,K0(),V_(t),J0?.()}function J(t){return typeof t=="function"}function gi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var hc=gi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Tr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ce=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(J(r))try{r()}catch(s){e=s instanceof hc?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Y_(s)}catch(o){e=e??[],o instanceof hc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new hc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Y_(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Tr(n,e)}remove(e){let{_finalizers:n}=this;n&&Tr(n,e),e instanceof t&&e._removeParent(this)}};Ce.EMPTY=(()=>{let t=new Ce;return t.closed=!0,t})();var oh=Ce.EMPTY;function fc(t){return t instanceof Ce||t&&"closed"in t&&J(t.remove)&&J(t.add)&&J(t.unsubscribe)}function Y_(t){J(t)?t():t.unsubscribe()}var Ot={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var mi={setTimeout(t,e,...n){let{delegate:r}=mi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=mi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function pc(t){mi.setTimeout(()=>{let{onUnhandledError:e}=Ot;if(e)e(t);else throw t})}function ho(){}var Z_=ah("C",void 0,void 0);function J_(t){return ah("E",void 0,t)}function X_(t){return ah("N",t,void 0)}function ah(t,e,n){return{kind:t,value:e,error:n}}var br=null;function yi(t){if(Ot.useDeprecatedSynchronousErrorHandling){let e=!br;if(e&&(br={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=br;if(br=null,n)throw r}}else t()}function eI(t){Ot.useDeprecatedSynchronousErrorHandling&&br&&(br.errorThrown=!0,br.error=t)}var Cr=class extends Ce{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,fc(e)&&e.add(this)):this.destination=nA}static create(e,n,r){return new vi(e,n,r)}next(e){this.isStopped?uh(X_(e),this):this._next(e)}error(e){this.isStopped?uh(J_(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?uh(Z_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},eA=Function.prototype.bind;function ch(t,e){return eA.call(t,e)}var lh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){gc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){gc(r)}else gc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){gc(n)}}},vi=class extends Cr{constructor(e,n,r){super();let i;if(J(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ot.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ch(e.next,s),error:e.error&&ch(e.error,s),complete:e.complete&&ch(e.complete,s)}):i=e}this.destination=new lh(i)}};function gc(t){Ot.useDeprecatedSynchronousErrorHandling?eI(t):pc(t)}function tA(t){throw t}function uh(t,e){let{onStoppedNotification:n}=Ot;n&&mi.setTimeout(()=>n(t,e))}var nA={closed:!0,next:ho,error:tA,complete:ho};var _i=typeof Symbol=="function"&&Symbol.observable||"@@observable";function pt(t){return t}function dh(...t){return hh(t)}function hh(t){return t.length===0?pt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ue=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=iA(n)?n:new vi(n,r,i);return yi(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=tI(r),new r((i,s)=>{let o=new vi({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[_i](){return this}pipe(...n){return hh(n)(this)}toPromise(n){return n=tI(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function tI(t){var e;return(e=t??Ot.Promise)!==null&&e!==void 0?e:Promise}function rA(t){return t&&J(t.next)&&J(t.error)&&J(t.complete)}function iA(t){return t&&t instanceof Cr||rA(t)&&fc(t)}function fh(t){return J(t?.lift)}function le(t){return e=>{if(fh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function re(t,e,n,r,i){return new ph(t,e,n,r,i)}var ph=class extends Cr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ii(){return le((t,e)=>{let n=null;t._refCount++;let r=re(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var wi=class extends ue{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,fh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ce;let n=this.getSubject();e.add(this.source.subscribe(re(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ce.EMPTY)}return e}refCount(){return Ii()(this)}};var nI=gi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var it=(()=>{class t extends ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new mc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new nI}next(n){yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?oh:(this.currentObservers=null,s.push(n),new Ce(()=>{this.currentObservers=null,Tr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ue;return n.source=this,n}}return t.create=(e,n)=>new mc(e,n),t})(),mc=class extends it{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:oh}};var ke=class extends it{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var gh={now(){return(gh.delegate||Date).now()},delegate:void 0};var yc=class extends Ce{constructor(e,n){super()}schedule(e,n=0){return this}};var fo={setInterval(t,e,...n){let{delegate:r}=fo;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=fo;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ei=class extends yc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return fo.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&fo.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Tr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Di=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Di.now=gh.now;var Ti=class extends Di{constructor(e,n=Di.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var mh=new Ti(Ei);var vc=class extends Ei{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var _c=class extends Ti{};var yh=new _c(vc);var gt=new ue(t=>t.complete());function rI(t){return t&&J(t.schedule)}function iI(t){return t[t.length-1]}function Ic(t){return J(iI(t))?t.pop():void 0}function qn(t){return rI(iI(t))?t.pop():void 0}function vh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function oI(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function sI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sr(t){return this instanceof Sr?(this.v=t,this):new Sr(t)}function aI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(S){return Promise.resolve(S).then(_,p)}}function a(_,S){r[_]&&(i[_]=function(N){return new Promise(function(R,L){s.push([_,N,R,L])>1||u(_,N)})},S&&(i[_]=S(i[_])))}function u(_,S){try{l(r[_](S))}catch(N){m(s[0][3],N)}}function l(_){_.value instanceof Sr?Promise.resolve(_.value.v).then(h,p):m(s[0][2],_)}function h(_){u("next",_)}function p(_){u("throw",_)}function m(_,S){_(S),s.shift(),s.length&&u(s[0][0],s[0][1])}}function cI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof sI=="function"?sI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var wc=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ec(t){return J(t?.then)}function Dc(t){return J(t[_i])}function Tc(t){return Symbol.asyncIterator&&J(t?.[Symbol.asyncIterator])}function bc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function sA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Cc=sA();function Sc(t){return J(t?.[Cc])}function Ac(t){return aI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Sr(n.read());if(i)return yield Sr(void 0);yield yield Sr(r)}}finally{n.releaseLock()}})}function Rc(t){return J(t?.getReader)}function Ne(t){if(t instanceof ue)return t;if(t!=null){if(Dc(t))return oA(t);if(wc(t))return aA(t);if(Ec(t))return cA(t);if(Tc(t))return uI(t);if(Sc(t))return uA(t);if(Rc(t))return lA(t)}throw bc(t)}function oA(t){return new ue(e=>{let n=t[_i]();if(J(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function aA(t){return new ue(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function cA(t){return new ue(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,pc)})}function uA(t){return new ue(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function uI(t){return new ue(e=>{dA(t,e).catch(n=>e.error(n))})}function lA(t){return uI(Ac(t))}function dA(t,e){var n,r,i,s;return oI(this,void 0,void 0,function*(){try{for(n=cI(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function ut(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function zn(t,e=0){return le((n,r)=>{n.subscribe(re(r,i=>ut(r,t,()=>r.next(i),e),()=>ut(r,t,()=>r.complete(),e),i=>ut(r,t,()=>r.error(i),e)))})}function Gn(t,e=0){return le((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function lI(t,e){return Ne(t).pipe(Gn(e),zn(e))}function dI(t,e){return Ne(t).pipe(Gn(e),zn(e))}function hI(t,e){return new ue(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function fI(t,e){return new ue(n=>{let r;return ut(n,e,()=>{r=t[Cc](),ut(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>J(r?.return)&&r.return()})}function Nc(t,e){if(!t)throw new Error("Iterable cannot be null");return new ue(n=>{ut(n,e,()=>{let r=t[Symbol.asyncIterator]();ut(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function pI(t,e){return Nc(Ac(t),e)}function gI(t,e){if(t!=null){if(Dc(t))return lI(t,e);if(wc(t))return hI(t,e);if(Ec(t))return dI(t,e);if(Tc(t))return Nc(t,e);if(Sc(t))return fI(t,e);if(Rc(t))return pI(t,e)}throw bc(t)}function Re(t,e){return e?gI(t,e):Ne(t)}function K(...t){let e=qn(t);return Re(t,e)}function bi(t,e){let n=J(t)?t:()=>t,r=i=>i.error(n());return new ue(e?i=>e.schedule(r,0,i):r)}function _h(t){return!!t&&(t instanceof ue||J(t.lift)&&J(t.subscribe))}var mn=gi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ie(t,e){return le((n,r)=>{let i=0;n.subscribe(re(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:hA}=Array;function fA(t,e){return hA(e)?t(...e):t(e)}function Mc(t){return ie(e=>fA(t,e))}var{isArray:pA}=Array,{getPrototypeOf:gA,prototype:mA,keys:yA}=Object;function xc(t){if(t.length===1){let e=t[0];if(pA(e))return{args:e,keys:null};if(vA(e)){let n=yA(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function vA(t){return t&&typeof t=="object"&&gA(t)===mA}function Pc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function po(...t){let e=qn(t),n=Ic(t),{args:r,keys:i}=xc(t);if(r.length===0)return Re([],e);let s=new ue(_A(r,e,i?o=>Pc(i,o):pt));return n?s.pipe(Mc(n)):s}function _A(t,e,n=pt){return r=>{mI(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)mI(e,()=>{let l=Re(t[u],e),h=!1;l.subscribe(re(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function mI(t,e,n){t?ut(n,t,e):e()}function yI(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},_=N=>l<r?S(N):u.push(N),S=N=>{s&&e.next(N),l++;let R=!1;Ne(n(N,h++)).subscribe(re(e,L=>{i?.(L),s?_(L):e.next(L)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let L=u.shift();o?ut(e,o,()=>S(L)):S(L)}m()}catch(L){e.error(L)}}))};return t.subscribe(re(e,_,()=>{p=!0,m()})),()=>{a?.()}}function Me(t,e,n=1/0){return J(e)?Me((r,i)=>ie((s,o)=>e(r,s,i,o))(Ne(t(r,i))),n):(typeof e=="number"&&(n=e),le((r,i)=>yI(r,i,t,n)))}function Ci(t=1/0){return Me(pt,t)}function vI(){return Ci(1)}function Si(...t){return vI()(Re(t,qn(t)))}function Oc(t){return new ue(e=>{Ne(t()).subscribe(e)})}function IA(...t){let e=Ic(t),{args:n,keys:r}=xc(t),i=new ue(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Ne(n[h]).subscribe(re(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?Pc(r,a):a),s.complete())}))}});return e?i.pipe(Mc(e)):i}function Dt(t,e){return le((n,r)=>{let i=0;n.subscribe(re(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Wn(t){return le((e,n)=>{let r=null,i=!1,s;r=e.subscribe(re(n,void 0,void 0,o=>{s=Ne(t(o,Wn(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function _I(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(re(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function Ar(t,e){return J(e)?Me(t,e,1):Me(t,1)}function Kn(t){return le((e,n)=>{let r=!1;e.subscribe(re(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function yn(t){return t<=0?()=>gt:le((e,n)=>{let r=0;e.subscribe(re(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ih(t){return ie(()=>t)}function kc(t=wA){return le((e,n)=>{let r=!1;e.subscribe(re(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function wA(){return new mn}function go(t){return le((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Ht(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Dt((i,s)=>t(i,s,r)):pt,yn(1),n?Kn(e):kc(()=>new mn))}function Ai(t){return t<=0?()=>gt:le((e,n)=>{let r=[];e.subscribe(re(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function wh(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Dt((i,s)=>t(i,s,r)):pt,Ai(1),n?Kn(e):kc(()=>new mn))}function Eh(t,e){return le(_I(t,e,arguments.length>=2,!0))}function Dh(...t){let e=qn(t);return le((n,r)=>{(e?Si(t,n,e):Si(t,n)).subscribe(r)})}function Tt(t,e){return le((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(re(r,u=>{i?.unsubscribe();let l=0,h=s++;Ne(t(u,h)).subscribe(i=re(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Th(t){return le((e,n)=>{Ne(t).subscribe(re(n,()=>n.complete(),ho)),!n.closed&&e.subscribe(n)})}function Le(t,e,n){let r=J(t)||e||n?{next:t,error:e,complete:n}:t;return r?le((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(re(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):pt}var iw="https://g.co/ng/security#xss",$=class extends Error{constructor(e,n){super(Rf(e,n)),this.code=e}};function Rf(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function To(t){return{toString:t}.toString()}var Lc="__parameters__";function EA(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function sw(t,e,n){return To(()=>{let r=EA(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(Lc)?u[Lc]:Object.defineProperty(u,Lc,{value:[]})[Lc];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Ie(t){for(let e in t)if(t[e]===Ie)return e;throw Error("Could not find renamed property on target object.")}function DA(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function at(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(at).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function II(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var TA=Ie({__forward_ref__:Ie});function ow(t){return t.__forward_ref__=ow,t.toString=function(){return at(this())},t}function st(t){return aw(t)?t():t}function aw(t){return typeof t=="function"&&t.hasOwnProperty(TA)&&t.__forward_ref__===ow}function U(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function bo(t){return{providers:t.providers||[],imports:t.imports||[]}}function gu(t){return wI(t,uw)||wI(t,lw)}function cw(t){return gu(t)!==null}function wI(t,e){return t.hasOwnProperty(e)?t[e]:null}function bA(t){let e=t&&(t[uw]||t[lw]);return e||null}function EI(t){return t&&(t.hasOwnProperty(DI)||t.hasOwnProperty(CA))?t[DI]:null}var uw=Ie({\u0275prov:Ie}),DI=Ie({\u0275inj:Ie}),lw=Ie({ngInjectableDef:Ie}),CA=Ie({ngInjectorDef:Ie}),H=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=U({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function dw(t){return t&&!!t.\u0275providers}var SA=Ie({\u0275cmp:Ie}),AA=Ie({\u0275dir:Ie}),RA=Ie({\u0275pipe:Ie}),NA=Ie({\u0275mod:Ie}),zc=Ie({\u0275fac:Ie}),yo=Ie({__NG_ELEMENT_ID__:Ie}),TI=Ie({__NG_ENV_ID__:Ie});function mu(t){return typeof t=="string"?t:t==null?"":String(t)}function MA(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():mu(t)}function xA(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new $(-200,t)}function Nf(t,e){throw new $(-201,!1)}var te=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(te||{}),Vh;function hw(){return Vh}function bt(t){let e=Vh;return Vh=t,e}function fw(t,e,n){let r=gu(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&te.Optional)return null;if(e!==void 0)return e;Nf(t,"Injector")}var PA={},vo=PA,Uh="__NG_DI_FLAG__",Gc="ngTempTokenPath",OA="ngTokenPath",kA=/\n/gm,LA="\u0275",bI="__source",Pi;function FA(){return Pi}function Qn(t){let e=Pi;return Pi=t,e}function VA(t,e=te.Default){if(Pi===void 0)throw new $(-203,!1);return Pi===null?fw(t,void 0,e):Pi.get(t,e&te.Optional?null:void 0,e)}function G(t,e=te.Default){return(hw()||VA)(st(t),e)}function O(t,e=te.Default){return G(t,yu(e))}function yu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function jh(t){let e=[];for(let n=0;n<t.length;n++){let r=st(t[n]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,s=te.Default;for(let o=0;o<r.length;o++){let a=r[o],u=UA(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(G(i,s))}else e.push(G(r))}return e}function pw(t,e){return t[Uh]=e,t.prototype[Uh]=e,t}function UA(t){return t[Uh]}function jA(t,e,n,r){let i=t[Gc];throw e[bI]&&i.unshift(e[bI]),t.message=BA(`
`+t.message,i,n,r),t[OA]=i,t[Gc]=null,t}function BA(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==LA?t.slice(2):t;let i=at(e);if(Array.isArray(e))i=e.map(at).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):at(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(kA,`
  `)}`}var Ze=pw(sw("Optional"),8);var Mf=pw(sw("SkipSelf"),4);function ki(t,e){let n=t.hasOwnProperty(zc);return n?t[zc]:null}function xf(t,e){t.forEach(n=>Array.isArray(n)?xf(n,e):e(n))}function gw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Wc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function $A(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function HA(t,e,n){let r=Co(t,e);return r>=0?t[r|1]=n:(r=~r,$A(t,r,e,n)),r}function bh(t,e){let n=Co(t,e);if(n>=0)return t[n|1]}function Co(t,e){return qA(t,e,1)}function qA(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Li={},Ct=[],Fi=new H(""),mw=new H("",-1),yw=new H(""),Kc=class{get(e,n=vo){if(n===vo){let r=new Error(`NullInjectorError: No provider for ${at(e)}!`);throw r.name="NullInjectorError",r}return n}},vw=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(vw||{}),Gt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Gt||{}),Jn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Jn||{});function zA(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Bh(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];WA(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function GA(t){return t===3||t===4||t===6}function WA(t){return t.charCodeAt(0)===64}function _o(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?CI(t,n,i,null,e[++r]):CI(t,n,i,null,null))}}return t}function CI(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var _w="ng-template";function KA(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&zA(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Pf(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Pf(t){return t.type===4&&t.value!==_w}function QA(t,e,n){let r=t.type===4&&!n?_w:t.value;return e===r}function YA(t,e,n){let r=4,i=t.attrs,s=i!==null?XA(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!kt(r)&&!kt(u))return!1;if(o&&kt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!QA(t,u,n)||u===""&&e.length===1){if(kt(r))return!1;o=!0}}else if(r&8){if(i===null||!KA(t,i,u,n)){if(kt(r))return!1;o=!0}}else{let l=e[++a],h=ZA(u,i,Pf(t),n);if(h===-1){if(kt(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(kt(r))return!1;o=!0}}}}return kt(r)||o}function kt(t){return(t&1)===0}function ZA(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return eR(e,t)}function JA(t,e,n=!1){for(let r=0;r<e.length;r++)if(YA(t,e[r],n))return!0;return!1}function XA(t){for(let e=0;e<t.length;e++){let n=t[e];if(GA(n))return e}return t.length}function eR(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function SI(t,e){return t?":not("+e.trim()+")":e}function tR(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!kt(o)&&(e+=SI(s,i),i=""),r=o,s=s||!kt(r);n++}return i!==""&&(e+=SI(s,i)),e}function nR(t){return t.map(tR).join(",")}function rR(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!kt(i))break;i=s}r++}return{attrs:e,classes:n}}function Iw(t){return To(()=>{let e=bw(t),n=ye(k({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===vw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Gt.Emulated,styles:t.styles||Ct,_:null,schemas:t.schemas||null,tView:null,id:""});Cw(n);let r=t.dependencies;return n.directiveDefs=RI(r,!1),n.pipeDefs=RI(r,!0),n.id=oR(n),n})}function iR(t){return Xn(t)||ww(t)}function sR(t){return t!==null}function So(t){return To(()=>({type:t.type,bootstrap:t.bootstrap||Ct,declarations:t.declarations||Ct,imports:t.imports||Ct,exports:t.exports||Ct,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function AI(t,e){if(t==null)return Li;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Jn.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Jn.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Ao(t){return To(()=>{let e=bw(t);return Cw(e),e})}function Xn(t){return t[SA]||null}function ww(t){return t[AA]||null}function Ew(t){return t[RA]||null}function Dw(t){let e=Xn(t)||ww(t)||Ew(t);return e!==null?e.standalone:!1}function Tw(t,e){let n=t[NA]||null;if(!n&&e===!0)throw new Error(`Type ${at(t)} does not have '\u0275mod' property.`);return n}function bw(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Li,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ct,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:AI(t.inputs,e),outputs:AI(t.outputs),debugInfo:null}}function Cw(t){t.features?.forEach(e=>e(t))}function RI(t,e){if(!t)return null;let n=e?Ew:iR;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(sR)}function oR(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Yt(t){return{\u0275providers:t}}function aR(...t){return{\u0275providers:Sw(!0,t),\u0275fromNgModule:!0}}function Sw(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return xf(e,o=>{let a=o;$h(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Aw(i,s),n}function Aw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Of(i,s=>{e(s,r)})}}function $h(t,e,n,r){if(t=st(t),!t)return!1;let i=null,s=EI(t),o=!s&&Xn(t);if(!s&&!o){let u=t.ngModule;if(s=EI(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)$h(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{xf(s.imports,h=>{$h(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Aw(l,e)}if(!a){let l=ki(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ct},i),e({provide:yw,useValue:i,multi:!0},i),e({provide:Fi,useValue:()=>G(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;Of(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Of(t,e){for(let n of t)dw(n)&&(n=n.\u0275providers),Array.isArray(n)?Of(n,e):e(n)}var cR=Ie({provide:String,useValue:Ie});function Rw(t){return t!==null&&typeof t=="object"&&cR in t}function uR(t){return!!(t&&t.useExisting)}function lR(t){return!!(t&&t.useFactory)}function Vi(t){return typeof t=="function"}function dR(t){return!!t.useClass}var vu=new H(""),jc={},hR={},Ch;function kf(){return Ch===void 0&&(Ch=new Kc),Ch}var mt=class{},Io=class extends mt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qh(e,o=>this.processProvider(o)),this.records.set(mw,Ri(void 0,this)),i.has("environment")&&this.records.set(mt,Ri(void 0,this));let s=this.records.get(vu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(yw,Ct,te.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=he(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),he(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Qn(this),r=bt(void 0),i;try{return e()}finally{Qn(n),bt(r)}}get(e,n=vo,r=te.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(TI))return e[TI](this);r=yu(r);let i,s=Qn(this),o=bt(void 0);try{if(!(r&te.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=yR(e)&&gu(e);l&&this.injectableDefInScope(l)?u=Ri(Hh(e),jc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&te.Self?kf():this.parent;return n=r&te.Optional&&n===vo?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Gc]=a[Gc]||[]).unshift(at(e)),s)throw a;return jA(a,e,"R3InjectorError",this.source)}else throw a}finally{bt(o),Qn(s)}}resolveInjectorInitializers(){let e=he(null),n=Qn(this),r=bt(void 0),i;try{let s=this.get(Fi,Ct,te.Self);for(let o of s)o()}finally{Qn(n),bt(r),he(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(at(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(e){e=st(e);let n=Vi(e)?e:st(e&&e.provide),r=pR(e);if(!Vi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ri(void 0,jc,!0),i.factory=()=>jh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=he(null);try{return n.value===jc&&(n.value=hR,n.value=n.factory()),typeof n.value=="object"&&n.value&&mR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{he(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=st(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Hh(t){let e=gu(t),n=e!==null?e.factory:ki(t);if(n!==null)return n;if(t instanceof H)throw new $(204,!1);if(t instanceof Function)return fR(t);throw new $(204,!1)}function fR(t){if(t.length>0)throw new $(204,!1);let n=bA(t);return n!==null?()=>n.factory(t):()=>new t}function pR(t){if(Rw(t))return Ri(void 0,t.useValue);{let e=Nw(t);return Ri(e,jc)}}function Nw(t,e,n){let r;if(Vi(t)){let i=st(t);return ki(i)||Hh(i)}else if(Rw(t))r=()=>st(t.useValue);else if(lR(t))r=()=>t.useFactory(...jh(t.deps||[]));else if(uR(t))r=()=>G(st(t.useExisting));else{let i=st(t&&(t.useClass||t.provide));if(gR(t))r=()=>new i(...jh(t.deps));else return ki(i)||Hh(i)}return r}function Ri(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function gR(t){return!!t.deps}function mR(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function yR(t){return typeof t=="function"||typeof t=="object"&&t instanceof H}function qh(t,e){for(let n of t)Array.isArray(n)?qh(n,e):n&&dw(n)?qh(n.\u0275providers,e):e(n)}function Zt(t,e){t instanceof Io&&t.assertNotDestroyed();let n,r=Qn(t),i=bt(void 0);try{return e()}finally{Qn(r),bt(i)}}function Mw(){return hw()!==void 0||FA()!=null}function vR(t){if(!Mw())throw new $(-203,!1)}function _R(t){return typeof t=="function"}var In=0,se=1,Q=2,ct=3,Lt=4,Vt=5,Qc=6,Yc=7,Ft=8,Ui=9,Wt=10,Fe=11,wo=12,NI=13,Ki=14,Kt=15,ji=16,Ni=17,Bi=18,_u=19,xw=20,Yn=21,Sh=22,St=23,er=25,Pw=1;var Nr=7,Zc=8,Jc=9,At=10,Xc=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Xc||{});function Zn(t){return Array.isArray(t)&&typeof t[Pw]=="object"}function wn(t){return Array.isArray(t)&&t[Pw]===!0}function Ow(t){return(t.flags&4)!==0}function Iu(t){return t.componentOffset>-1}function Lf(t){return(t.flags&1)===1}function tr(t){return!!t.template}function zh(t){return(t[Q]&512)!==0}var Gh=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function kw(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function wu(){return Lw}function Lw(t){return t.type.prototype.ngOnChanges&&(t.setInput=wR),IR}wu.ngInherit=!0;function IR(){let t=Vw(this),e=t?.current;if(e){let n=t.previous;if(n===Li)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function wR(t,e,n,r,i){let s=this.declaredInputs[r],o=Vw(t)||ER(t,{previous:Li,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new Gh(l&&l.currentValue,n,u===Li),kw(t,e,i,n)}var Fw="__ngSimpleChanges__";function Vw(t){return t[Fw]||null}function ER(t,e){return t[Fw]=e}var MI=null;var qt=function(t,e,n){MI?.(t,e,n)},DR="svg",TR="math";function Qt(t){for(;Array.isArray(t);)t=t[In];return t}function Uw(t,e){return Qt(e[t])}function Rt(t,e){return Qt(e[t.index])}function jw(t,e){return t.data[e]}function ir(t,e){let n=e[t];return Zn(n)?n:n[In]}function Ff(t){return(t[Q]&128)===128}function bR(t){return wn(t[ct])}function eu(t,e){return e==null?null:t[e]}function Bw(t){t[Ni]=0}function $w(t){t[Q]&1024||(t[Q]|=1024,Ff(t)&&Du(t))}function CR(t,e){for(;t>0;)e=e[Ki],t--;return e}function Eu(t){return!!(t[Q]&9216||t[St]?.dirty)}function Wh(t){t[Wt].changeDetectionScheduler?.notify(8),t[Q]&64&&(t[Q]|=1024),Eu(t)&&Du(t)}function Du(t){t[Wt].changeDetectionScheduler?.notify(0);let e=Mr(t);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!Ff(e)));)e=Mr(e)}function Hw(t,e){if((t[Q]&256)===256)throw new $(911,!1);t[Yn]===null&&(t[Yn]=[]),t[Yn].push(e)}function SR(t,e){if(t[Yn]===null)return;let n=t[Yn].indexOf(e);n!==-1&&t[Yn].splice(n,1)}function Mr(t){let e=t[ct];return wn(e)?e[ct]:e}var oe={lFrame:Jw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var qw=!1;function AR(){return oe.lFrame.elementDepthCount}function RR(){oe.lFrame.elementDepthCount++}function NR(){oe.lFrame.elementDepthCount--}function zw(){return oe.bindingsEnabled}function MR(){return oe.skipHydrationRootTNode!==null}function xR(t){return oe.skipHydrationRootTNode===t}function PR(){oe.skipHydrationRootTNode=null}function Ee(){return oe.lFrame.lView}function yt(){return oe.lFrame.tView}function C4(t){return oe.lFrame.contextLView=t,t[Ft]}function S4(t){return oe.lFrame.contextLView=null,t}function lt(){let t=Gw();for(;t!==null&&t.type===64;)t=t.parent;return t}function Gw(){return oe.lFrame.currentTNode}function OR(){let t=oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ro(t,e){let n=oe.lFrame;n.currentTNode=t,n.isParent=e}function Ww(){return oe.lFrame.isParent}function kR(){oe.lFrame.isParent=!1}function Kw(){return qw}function xI(t){qw=t}function LR(t){return oe.lFrame.bindingIndex=t}function Tu(){return oe.lFrame.bindingIndex++}function FR(t){let e=oe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function VR(){return oe.lFrame.inI18n}function UR(t,e){let n=oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Kh(e)}function jR(){return oe.lFrame.currentDirectiveIndex}function Kh(t){oe.lFrame.currentDirectiveIndex=t}function BR(t){let e=oe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Qw(t){oe.lFrame.currentQueryIndex=t}function $R(t){let e=t[se];return e.type===2?e.declTNode:e.type===1?t[Vt]:null}function Yw(t,e,n){if(n&te.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&te.Host);)if(i=$R(s),i===null||(s=s[Ki],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=oe.lFrame=Zw();return r.currentTNode=e,r.lView=t,!0}function Vf(t){let e=Zw(),n=t[se];oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Zw(){let t=oe.lFrame,e=t===null?null:t.child;return e===null?Jw(t):e}function Jw(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Xw(){let t=oe.lFrame;return oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var eE=Xw;function Uf(){let t=Xw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function HR(t){return(oe.lFrame.contextLView=CR(t,oe.lFrame.contextLView))[Ft]}function Qi(){return oe.lFrame.selectedIndex}function xr(t){oe.lFrame.selectedIndex=t}function jf(){let t=oe.lFrame;return jw(t.tView,t.selectedIndex)}function qR(){return oe.lFrame.currentNamespace}var tE=!0;function Bf(){return tE}function $f(t){tE=t}function zR(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Lw(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Hf(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Bc(t,e,n){nE(t,e,3,n)}function $c(t,e,n,r){(t[Q]&3)===n&&nE(t,e,n,r)}function Ah(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function nE(t,e,n,r){let i=r!==void 0?t[Ni]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Ni]+=65536),(a<s||s==-1)&&(GR(t,n,e,u),t[Ni]=(t[Ni]&4294901760)+u+2),u++}function PI(t,e){qt(4,t,e);let n=he(null);try{e.call(t)}finally{he(n),qt(5,t,e)}}function GR(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[Q]>>14<t[Ni]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,PI(a,s)):PI(a,s)}var Oi=-1,Pr=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function WR(t){return t instanceof Pr}function KR(t){return(t.flags&8)!==0}function QR(t){return(t.flags&16)!==0}var Rh={},Qh=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=yu(r);let i=this.injector.get(e,Rh,r);return i!==Rh||n===Rh?i:this.parentInjector.get(e,n,r)}};function rE(t){return t!==Oi}function tu(t){return t&32767}function YR(t){return t>>16}function nu(t,e){let n=YR(t),r=e;for(;n>0;)r=r[Ki],n--;return r}var Yh=!0;function OI(t){let e=Yh;return Yh=t,e}var ZR=256,iE=ZR-1,sE=5,JR=0,zt={};function XR(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(yo)&&(r=n[yo]),r==null&&(r=n[yo]=JR++);let i=r&iE,s=1<<i;e.data[t+(i>>sE)]|=s}function ru(t,e){let n=oE(t,e);if(n!==-1)return n;let r=e[se];r.firstCreatePass&&(t.injectorIndex=e.length,Nh(r.data,t),Nh(e,null),Nh(r.blueprint,null));let i=qf(t,e),s=t.injectorIndex;if(rE(i)){let o=tu(i),a=nu(i,e),u=a[se].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Nh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function oE(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function qf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=dE(i),r===null)return Oi;if(n++,i=i[Ki],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Oi}function Zh(t,e,n){XR(t,e,n)}function aE(t,e,n){if(n&te.Optional||t!==void 0)return t;Nf(e,"NodeInjector")}function cE(t,e,n,r){if(n&te.Optional&&r===void 0&&(r=null),!(n&(te.Self|te.Host))){let i=t[Ui],s=bt(void 0);try{return i?i.get(e,r,n&te.Optional):fw(e,r,n&te.Optional)}finally{bt(s)}}return aE(r,e,n)}function uE(t,e,n,r=te.Default,i){if(t!==null){if(e[Q]&2048&&!(r&te.Self)){let o=iN(t,e,n,r,zt);if(o!==zt)return o}let s=lE(t,e,n,r,zt);if(s!==zt)return s}return cE(e,n,r,i)}function lE(t,e,n,r,i){let s=nN(n);if(typeof s=="function"){if(!Yw(e,t,r))return r&te.Host?aE(i,n,r):cE(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&te.Optional))Nf(n);else return o}finally{eE()}}else if(typeof s=="number"){let o=null,a=oE(t,e),u=Oi,l=r&te.Host?e[Kt][Vt]:null;for((a===-1||r&te.SkipSelf)&&(u=a===-1?qf(t,e):e[a+8],u===Oi||!LI(r,!1)?a=-1:(o=e[se],a=tu(u),e=nu(u,e)));a!==-1;){let h=e[se];if(kI(s,a,h.data)){let p=eN(a,e,n,o,r,l);if(p!==zt)return p}u=e[a+8],u!==Oi&&LI(r,e[se].data[a+8]===l)&&kI(s,a,e)?(o=h,a=tu(u),e=nu(u,e)):a=-1}}return i}function eN(t,e,n,r,i,s){let o=e[se],a=o.data[t+8],u=r==null?Iu(a)&&Yh:r!=o&&(a.type&3)!==0,l=i&te.Host&&s===a,h=tN(a,o,n,u,l);return h!==null?$i(e,o,h,a):zt}function tN(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let _=p;_<m;_++){let S=o[_];if(_<u&&n===S||_>=u&&S.type===n)return _}if(i){let _=o[u];if(_&&tr(_)&&_.type===n)return u}return null}function $i(t,e,n,r){let i=t[n],s=e.data;if(WR(i)){let o=i;o.resolving&&xA(MA(s[n]));let a=OI(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?bt(o.injectImpl):null,h=Yw(t,r,te.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&zR(n,s[n],e)}finally{l!==null&&bt(l),OI(a),o.resolving=!1,eE()}}return i}function nN(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(yo)?t[yo]:void 0;return typeof e=="number"?e>=0?e&iE:rN:e}function kI(t,e,n){let r=1<<t;return!!(n[e+(t>>sE)]&r)}function LI(t,e){return!(t&te.Self)&&!(t&te.Host&&e)}var Rr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return uE(this._tNode,this._lView,e,yu(r),n)}};function rN(){return new Rr(lt(),Ee())}function zf(t){return To(()=>{let e=t.prototype.constructor,n=e[zc]||Jh(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[zc]||Jh(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Jh(t){return aw(t)?()=>{let e=Jh(st(t));return e&&e()}:ki(t)}function iN(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Q]&2048&&!(o[Q]&512);){let a=lE(s,o,n,r|te.Self,zt);if(a!==zt)return a;let u=s.parent;if(!u){let l=o[xw];if(l){let h=l.get(n,zt,r);if(h!==zt)return h}u=dE(o),o=o[Ki]}s=u}return i}function dE(t){let e=t[se],n=e.type;return n===2?e.declTNode:n===1?t[Vt]:null}function FI(t,e=null,n=null,r){let i=hE(t,e,n,r);return i.resolveInjectorInitializers(),i}function hE(t,e=null,n=null,r,i=new Set){let s=[n||Ct,aR(t)];return r=r||(typeof t=="object"?void 0:at(t)),new Io(s,e||kf(),r||null,i)}var Ye=class t{static{this.THROW_IF_NOT_FOUND=vo}static{this.NULL=new Kc}static create(e,n){if(Array.isArray(e))return FI({name:""},n,e,"");{let r=e.name??"";return FI({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=U({token:t,providedIn:"any",factory:()=>G(mw)})}static{this.__NG_ELEMENT_ID__=-1}};var sN=new H("");sN.__NG_ELEMENT_ID__=t=>{let e=lt();if(e===null)throw new $(204,!1);if(e.type&2)return e.value;if(t&te.Optional)return null;throw new $(204,!1)};var oN="ngOriginalError";function Mh(t){return t[oN]}var fE=!0,Gf=(()=>{class t{static{this.__NG_ELEMENT_ID__=aN}static{this.__NG_ENV_ID__=n=>n}}return t})(),Xh=class extends Gf{constructor(e){super(),this._lView=e}onDestroy(e){return Hw(this._lView,e),()=>SR(this._lView,e)}};function aN(){return new Xh(Ee())}var Yi=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ke(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}}return t})();var ef=class extends it{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,Mw()&&(this.destroyRef=O(Gf,{optional:!0})??void 0,this.pendingTasks=O(Yi,{optional:!0})??void 0)}emit(e){let n=he(null);try{super.next(e)}finally{he(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ce&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ot=ef;function iu(...t){}function pE(t){let e,n;function r(){t=iu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function VI(t){return queueMicrotask(()=>t()),()=>{t=iu}}var Wf="isAngularZone",su=Wf+"_ID",cN=0,ge=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ot(!1),this.onMicrotaskEmpty=new ot(!1),this.onStable=new ot(!1),this.onError=new ot(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=fE}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,dN(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Wf)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new $(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,uN,iu,iu);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},uN={};function Kf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function lN(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){pE(()=>{t.callbackScheduled=!1,tf(t),t.isCheckStableRunning=!0,Kf(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),tf(t)}function dN(t){let e=()=>{lN(t)},n=cN++;t._inner=t._inner.fork({name:"angular",properties:{[Wf]:!0,[su]:n,[su+n]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(hN(u))return r.invokeTask(s,o,a,u);try{return UI(t),r.invokeTask(s,o,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),jI(t)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return UI(t),r.invoke(s,o,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!fN(u)&&e(),jI(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,tf(t),Kf(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function tf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function UI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function jI(t){t._nesting--,Kf(t)}var nf=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ot,this.onMicrotaskEmpty=new ot,this.onStable=new ot,this.onError=new ot}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function hN(t){return gE(t,"__ignore_ng_zone__")}function fN(t){return gE(t,"__scheduler_tick__")}function gE(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var vn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Mh(e);for(;n&&Mh(n);)n=Mh(n);return n||null}},pN=new H("",{providedIn:"root",factory:()=>{let t=O(ge),e=O(vn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function gN(){return bu(lt(),Ee())}function bu(t,e){return new Cu(Rt(t,e))}var Cu=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=gN}}return t})();function mE(t){return(t.flags&128)===128}var yE=new Map,mN=0;function yN(){return mN++}function vN(t){yE.set(t[_u],t)}function rf(t){yE.delete(t[_u])}var BI="__ngContext__";function Or(t,e){Zn(e)?(t[BI]=e[_u],vN(e)):t[BI]=e}function vE(t){return IE(t[wo])}function _E(t){return IE(t[Lt])}function IE(t){for(;t!==null&&!wn(t);)t=t[Lt];return t}var sf;function wE(t){sf=t}function _N(){if(sf!==void 0)return sf;if(typeof document<"u")return document;throw new $(210,!1)}var Qf=new H("",{providedIn:"root",factory:()=>IN}),IN="ng",Yf=new H(""),Jt=new H("",{providedIn:"platform",factory:()=>"unknown"});var Zf=new H("",{providedIn:"root",factory:()=>_N().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var wN="h",EN="b";var DN=()=>null;function Jf(t,e,n=!1){return DN(t,e,n)}var EE=!1,TN=new H("",{providedIn:"root",factory:()=>EE});var ou=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${iw})`}};function Su(t){return t instanceof ou?t.changingThisBreaksApplicationSecurity:t}function DE(t,e){let n=bN(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${iw})`)}return n===e}function bN(t){return t instanceof ou&&t.getTypeName()||null}var CN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function TE(t){return t=String(t),t.match(CN)?t:"unsafe:"+t}var Xf=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Xf||{});function A4(t){let e=SN();return e?e.sanitize(Xf.URL,t)||"":DE(t,"URL")?Su(t):TE(mu(t))}function SN(){let t=Ee();return t&&t[Wt].sanitizer}function bE(t){return t instanceof Function?t():t}function AN(t){return(t??O(Ye)).get(Jt)==="browser"}var _n=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(_n||{}),RN;function ep(t,e){return RN(t,e)}function Mi(t,e,n,r,i){if(r!=null){let s,o=!1;wn(r)?s=r:Zn(r)&&(o=!0,r=r[In]);let a=Qt(r);t===0&&n!==null?i==null?NE(e,n,a):au(e,n,a,i||null,!0):t===1&&n!==null?au(e,n,a,i||null,!0):t===2?qN(e,a,o):t===3&&e.destroyNode(a),s!=null&&GN(e,t,s,n,i)}}function NN(t,e){return t.createText(e)}function MN(t,e,n){t.setValue(e,n)}function CE(t,e,n){return t.createElement(e,n)}function xN(t,e){SE(t,e),e[In]=null,e[Vt]=null}function PN(t,e,n,r,i,s){r[In]=i,r[Vt]=e,Au(t,r,n,1,i,s)}function SE(t,e){e[Wt].changeDetectionScheduler?.notify(9),Au(t,e,e[Fe],2,null,null)}function ON(t){let e=t[wo];if(!e)return xh(t[se],t);for(;e;){let n=null;if(Zn(e))n=e[wo];else{let r=e[At];r&&(n=r)}if(!n){for(;e&&!e[Lt]&&e!==t;)Zn(e)&&xh(e[se],e),e=e[ct];e===null&&(e=t),Zn(e)&&xh(e[se],e),n=e&&e[Lt]}e=n}}function kN(t,e,n,r){let i=At+r,s=n.length;r>0&&(n[i-1][Lt]=e),r<s-At?(e[Lt]=n[i],gw(n,At+r,e)):(n.push(e),e[Lt]=null),e[ct]=n;let o=e[ji];o!==null&&n!==o&&AE(o,e);let a=e[Bi];a!==null&&a.insertView(t),Wh(e),e[Q]|=128}function AE(t,e){let n=t[Jc],r=e[ct];if(Zn(r))t[Q]|=Xc.HasTransplantedViews;else{let i=r[ct][Kt];e[Kt]!==i&&(t[Q]|=Xc.HasTransplantedViews)}n===null?t[Jc]=[e]:n.push(e)}function tp(t,e){let n=t[Jc],r=n.indexOf(e);n.splice(r,1)}function of(t,e){if(t.length<=At)return;let n=At+e,r=t[n];if(r){let i=r[ji];i!==null&&i!==t&&tp(i,r),e>0&&(t[n-1][Lt]=r[Lt]);let s=Wc(t,At+e);xN(r[se],r);let o=s[Bi];o!==null&&o.detachView(s[se]),r[ct]=null,r[Lt]=null,r[Q]&=-129}return r}function RE(t,e){if(!(e[Q]&256)){let n=e[Fe];n.destroyNode&&Au(t,e,n,3,null,null),ON(e)}}function xh(t,e){if(e[Q]&256)return;let n=he(null);try{e[Q]&=-129,e[Q]|=256,e[St]&&ih(e[St]),FN(t,e),LN(t,e),e[se].type===1&&e[Fe].destroy();let r=e[ji];if(r!==null&&wn(e[ct])){r!==e[ct]&&tp(r,e);let i=e[Bi];i!==null&&i.detachView(t)}rf(e)}finally{he(n)}}function LN(t,e){let n=t.cleanup,r=e[Yc];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Yc]=null);let i=e[Yn];if(i!==null){e[Yn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function FN(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Pr)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];qt(4,a,u);try{u.call(a)}finally{qt(5,a,u)}}else{qt(4,i,s);try{s.call(i)}finally{qt(5,i,s)}}}}}function VN(t,e,n){return UN(t,e.parent,n)}function UN(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[In];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Gt.None||s===Gt.Emulated)return null}return Rt(r,n)}}function au(t,e,n,r,i){t.insertBefore(e,n,r,i)}function NE(t,e,n){t.appendChild(e,n)}function $I(t,e,n,r,i){r!==null?au(t,e,n,r,i):NE(t,e,n)}function ME(t,e){return t.parentNode(e)}function jN(t,e){return t.nextSibling(e)}function BN(t,e,n){return HN(t,e,n)}function $N(t,e,n){return t.type&40?Rt(t,n):null}var HN=$N,HI;function np(t,e,n,r){let i=VN(t,r,e),s=e[Fe],o=r.parent||e[Vt],a=BN(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)$I(s,i,n[u],a,!1);else $I(s,i,n,a,!1);HI!==void 0&&HI(s,r,e,n,i)}function mo(t,e){if(e!==null){let n=e.type;if(n&3)return Rt(e,t);if(n&4)return af(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return mo(t,r);{let i=t[e.index];return wn(i)?af(-1,i):Qt(i)}}else{if(n&128)return mo(t,e.next);if(n&32)return ep(e,t)()||Qt(t[e.index]);{let r=xE(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Mr(t[Kt]);return mo(i,r)}else return mo(t,e.next)}}}return null}function xE(t,e){if(e!==null){let r=t[Kt][Vt],i=e.projection;return r.projection[i]}return null}function af(t,e){let n=At+t+1;if(n<e.length){let r=e[n],i=r[se].firstChild;if(i!==null)return mo(r,i)}return e[Nr]}function qN(t,e,n){t.removeChild(null,e,n)}function rp(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(o&&e===0&&(a&&Or(Qt(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)rp(t,e,n.child,r,i,s,!1),Mi(e,t,i,a,s);else if(u&32){let l=ep(n,r),h;for(;h=l();)Mi(e,t,i,h,s);Mi(e,t,i,a,s)}else u&16?zN(t,e,r,n,i,s):Mi(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Au(t,e,n,r,i,s){rp(n,r,t.firstChild,e,i,s,!1)}function zN(t,e,n,r,i,s){let o=n[Kt],u=o[Vt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Mi(e,t,i,h,s)}else{let l=u,h=o[ct];mE(r)&&(l.flags|=128),rp(t,e,l,h,i,s,!0)}}function GN(t,e,n,r,i){let s=n[Nr],o=Qt(n);s!==o&&Mi(e,t,r,s,i);for(let a=At;a<n.length;a++){let u=n[a];Au(u[se],u,t,e,r,s)}}function WN(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:_n.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=_n.Important),t.setStyle(n,r,i,s))}}function KN(t,e,n){t.setAttribute(e,"style",n)}function PE(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function OE(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Bh(t,e,r),i!==null&&PE(t,e,i),s!==null&&KN(t,e,s)}var Zi={};function R4(t=1){kE(yt(),Ee(),Qi()+t,!1)}function kE(t,e,n,r){if(!r)if((e[Q]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Bc(e,s,n)}else{let s=t.preOrderHooks;s!==null&&$c(e,s,0,n)}xr(n)}function Xt(t,e=te.Default){let n=Ee();if(n===null)return G(t,e);let r=lt();return uE(r,n,st(t),e)}function LE(){let t="invalid";throw new Error(t)}function FE(t,e,n,r,i,s){let o=he(null);try{let a=null;i&Jn.SignalBased&&(a=e[r][gn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Jn.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):kw(e,a,r,s)}finally{he(o)}}function QN(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)xr(~i);else{let s=i,o=n[++r],a=n[++r];UR(o,s);let u=e[s];a(2,u)}}}finally{xr(-1)}}function Ru(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[In]=i,p[Q]=r|4|128|8|64,(l!==null||t&&t[Q]&2048)&&(p[Q]|=2048),Bw(p),p[ct]=p[Ki]=t,p[Ft]=n,p[Wt]=o||t&&t[Wt],p[Fe]=a||t&&t[Fe],p[Ui]=u||t&&t[Ui]||null,p[Vt]=s,p[_u]=yN(),p[Qc]=h,p[xw]=l,p[Kt]=e.type==2?t[Kt]:p,p}function Nu(t,e,n,r,i){let s=t.data[e];if(s===null)s=YN(t,e,n,r,i),VR()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=OR();s.injectorIndex=o===null?-1:o.injectorIndex}return Ro(s,!0),s}function YN(t,e,n,r,i){let s=Gw(),o=Ww(),a=o?s:s&&s.parent,u=t.data[e]=tM(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function VE(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function UE(t,e,n,r,i){let s=Qi(),o=r&2;try{xr(-1),o&&e.length>er&&kE(t,e,er,!1),qt(o?2:0,i),n(r,i)}finally{xr(s),qt(o?3:1,i)}}function jE(t,e,n){if(Ow(e)){let r=he(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{he(r)}}}function BE(t,e,n){zw()&&(aM(t,e,n,Rt(n,e)),(n.flags&64)===64&&WE(t,e,n))}function $E(t,e,n=Rt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function HE(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=ip(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function ip(t,e,n,r,i,s,o,a,u,l,h){let p=er+r,m=p+i,_=ZN(p,m),S=typeof l=="function"?l():l;return _[se]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function ZN(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Zi);return n}function JN(t,e,n,r){let s=r.get(TN,EE)||n===Gt.ShadowDom,o=t.selectRootElement(e,s);return XN(o),o}function XN(t){eM(t)}var eM=()=>null;function tM(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return MR()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function qI(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=Jn.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?zI(r,n,l,a,u):zI(r,n,l,a)}return r}function zI(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function nM(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,_=m?m.inputs:null,S=m?m.outputs:null;u=qI(0,p.inputs,h,u,_),l=qI(1,p.outputs,h,l,S);let N=u!==null&&o!==null&&!Pf(e)?vM(u,h,o):null;a.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function rM(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function qE(t,e,n,r,i,s,o,a){let u=Rt(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(sp(t,n,h,r,i),Iu(e)&&iM(n,e.index)):e.type&3?(r=rM(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function iM(t,e){let n=ir(e,t);n[Q]&16||(n[Q]|=64)}function zE(t,e,n,r){if(zw()){let i=r===null?null:{"":-1},s=uM(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&GE(t,e,n,o,i,a),i&&lM(n,r,i)}n.mergedAttrs=_o(n.mergedAttrs,n.attrs)}function GE(t,e,n,r,i,s){for(let l=0;l<r.length;l++)Zh(ru(n,e),t,r[l].type);hM(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=VE(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=_o(n.mergedAttrs,h.hostAttrs),fM(t,n,e,u,h),dM(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}nM(t,n,s)}function sM(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;oM(o)!=a&&o.push(a),o.push(n,r,s)}}function oM(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function aM(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Iu(n)&&pM(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||ru(n,e),Or(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=$i(e,t,a,n);if(Or(l,e),o!==null&&yM(e,a-i,l,u,n,o),tr(u)){let h=ir(n.index,e);h[Ft]=$i(e,t,a,n)}}}function WE(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=jR();try{xr(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Kh(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&cM(u,l)}}finally{xr(-1),Kh(o)}}function cM(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function uM(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(JA(e,o.selectors,!1))if(r||(r=[]),tr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;cf(t,e,u)}else r.unshift(o),cf(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function cf(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function lM(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new $(-301,!1);r.push(e[i],s)}}}function dM(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;tr(e)&&(n[""]=t)}}function hM(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function fM(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=ki(i.type,!0)),o=new Pr(s,tr(i),Xt);t.blueprint[r]=o,n[r]=o,sM(t,e,r,VE(t,n,i.hostVars,Zi),i)}function pM(t,e,n){let r=Rt(e,t),i=HE(n),s=t[Wt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Mu(t,Ru(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function gM(t,e,n,r,i,s){let o=Rt(t,e);mM(e[Fe],o,s,t.value,n,r,i)}function mM(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?mu(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function yM(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];FE(r,n,u,l,h,p)}}function vM(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function KE(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function QE(t,e){let n=t.contentQueries;if(n!==null){let r=he(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Qw(s),a.contentQueries(2,e[o],o)}}}finally{he(r)}}}function Mu(t,e){return t[wo]?t[NI][Lt]=e:t[wo]=e,t[NI]=e,e}function uf(t,e,n){Qw(0);let r=he(null);try{e(t,n)}finally{he(r)}}function _M(t){return t[Yc]??=[]}function IM(t){return t.cleanup??=[]}function YE(t,e){let n=t[Ui],r=n?n.get(vn,null):null;r&&r.handleError(e)}function sp(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];FE(h,l,r,a,u,i)}}function wM(t,e,n){let r=Uw(e,t);MN(t[Fe],r,n)}function EM(t,e){let n=ir(e,t),r=n[se];DM(r,n);let i=n[In];i!==null&&n[Qc]===null&&(n[Qc]=Jf(i,n[Ui])),op(r,n,n[Ft])}function DM(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function op(t,e,n){Vf(e);try{let r=t.viewQuery;r!==null&&uf(1,r,n);let i=t.template;i!==null&&UE(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Bi]?.finishViewCreation(t),t.staticContentQueries&&QE(t,e),t.staticViewQueries&&uf(2,t.viewQuery,n);let s=t.components;s!==null&&TM(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Q]&=-5,Uf()}}function TM(t,e){for(let n=0;n<e.length;n++)EM(t,e[n])}function bM(t,e,n,r){let i=he(null);try{let s=e.tView,a=t[Q]&4096?4096:16,u=Ru(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[ji]=l;let h=t[Bi];return h!==null&&(u[Bi]=h.createEmbeddedView(s)),op(s,u,n),u}finally{he(i)}}function GI(t,e){return!e||e.firstChild===null||mE(t)}function CM(t,e,n,r=!0){let i=e[se];if(kN(i,e,t,n),r){let o=af(n,t),a=e[Fe],u=ME(a,t[Nr]);u!==null&&PN(i,t[Vt],a,e,u,o)}let s=e[Qc];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function cu(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Qt(s)),wn(s)&&SM(s,r);let o=n.type;if(o&8)cu(t,e,n.child,r);else if(o&32){let a=ep(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=xE(e,n);if(Array.isArray(a))r.push(...a);else{let u=Mr(e[Kt]);cu(u[se],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function SM(t,e){for(let n=At;n<t.length;n++){let r=t[n],i=r[se].firstChild;i!==null&&cu(r[se],r,i,e)}t[Nr]!==t[In]&&e.push(t[Nr])}var ZE=[];function AM(t){return t[St]??RM(t)}function RM(t){let e=ZE.pop()??Object.create(MM);return e.lView=t,e}function NM(t){t.lView[St]!==t&&(t.lView=null,ZE.push(t))}var MM=ye(k({},lo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Du(t.lView)},consumerOnSignalRead(){this.lView[St]=this}});function xM(t){let e=t[St]??Object.create(PM);return e.lView=t,e}var PM=ye(k({},lo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Mr(t.lView);for(;e&&!JE(e[se]);)e=Mr(e);e&&$w(e)},consumerOnSignalRead(){this.lView[St]=this}});function JE(t){return t.type!==2}var OM=100;function XE(t,e=!0,n=0){let r=t[Wt],i=r.rendererFactory,s=!1;s||i.begin?.();try{kM(t,n)}catch(o){throw e&&YE(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function kM(t,e){let n=Kw();try{xI(!0),lf(t,e);let r=0;for(;Eu(t);){if(r===OM)throw new $(103,!1);r++,lf(t,1)}}finally{xI(n)}}function LM(t,e,n,r){let i=e[Q];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Wt].inlineEffectRunner?.flush(),Vf(e);let a=!0,u=null,l=null;s||(JE(t)?(l=AM(e),u=uc(l)):L_()===null?(a=!1,l=xM(e),u=uc(l)):e[St]&&(ih(e[St]),e[St]=null));try{Bw(e),LR(t.bindingStartIndex),n!==null&&UE(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let _=t.preOrderCheckHooks;_!==null&&Bc(e,_,null)}else{let _=t.preOrderHooks;_!==null&&$c(e,_,0,null),Ah(e,0)}if(o||FM(e),eD(e,0),t.contentQueries!==null&&QE(t,e),!s)if(h){let _=t.contentCheckHooks;_!==null&&Bc(e,_)}else{let _=t.contentHooks;_!==null&&$c(e,_,1),Ah(e,1)}QN(t,e);let p=t.components;p!==null&&nD(e,p,0);let m=t.viewQuery;if(m!==null&&uf(2,m,r),!s)if(h){let _=t.viewCheckHooks;_!==null&&Bc(e,_)}else{let _=t.viewHooks;_!==null&&$c(e,_,2),Ah(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Sh]){for(let _ of e[Sh])_();e[Sh]=null}s||(e[Q]&=-73)}catch(h){throw s||Du(e),h}finally{l!==null&&(nh(l,u),a&&NM(l)),Uf()}}function eD(t,e){for(let n=vE(t);n!==null;n=_E(n))for(let r=At;r<n.length;r++){let i=n[r];tD(i,e)}}function FM(t){for(let e=vE(t);e!==null;e=_E(e)){if(!(e[Q]&Xc.HasTransplantedViews))continue;let n=e[Jc];for(let r=0;r<n.length;r++){let i=n[r];$w(i)}}}function VM(t,e,n){let r=ir(e,t);tD(r,n)}function tD(t,e){Ff(t)&&lf(t,e)}function lf(t,e){let r=t[se],i=t[Q],s=t[St],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&rh(s)),o||=!1,s&&(s.dirty=!1),t[Q]&=-9217,o)LM(r,t,r.template,t[Ft]);else if(i&8192){eD(t,1);let a=r.components;a!==null&&nD(t,a,1)}}function nD(t,e,n){for(let r=0;r<e.length;r++)VM(t,e[r],n)}function ap(t,e){let n=Kw()?64:1088;for(t[Wt].changeDetectionScheduler?.notify(e);t;){t[Q]|=n;let r=Mr(t);if(zh(t)&&!r)return t;t=r}return null}var kr=class{get rootNodes(){let e=this._lView,n=e[se];return cu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ft]}set context(e){this._lView[Ft]=e}get destroyed(){return(this._lView[Q]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ct];if(wn(e)){let n=e[Zc],r=n?n.indexOf(this):-1;r>-1&&(of(e,r),Wc(n,r))}this._attachedToViewContainer=!1}RE(this._lView[se],this._lView)}onDestroy(e){Hw(this._lView,e)}markForCheck(){ap(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Q]&=-129}reattach(){Wh(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,XE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=zh(this._lView),n=this._lView[ji];n!==null&&!e&&tp(n,this._lView),SE(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let n=zh(this._lView),r=this._lView[ji];r!==null&&!n&&AE(r,this._lView),Wh(this._lView)}},xu=(()=>{class t{static{this.__NG_ELEMENT_ID__=BM}}return t})(),UM=xu,jM=class extends UM{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=bM(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new kr(i)}};function BM(){return $M(lt(),Ee())}function $M(t,e){return t.type&4?new jM(e,t,bu(t,e)):null}var M4=new RegExp(`^(\\d+)*(${EN}|${wN})*(.*)`);var HM=()=>null;function WI(t,e){return HM(t,e)}var Hi=class{},Pu=new H("",{providedIn:"root",factory:()=>!1});var rD=new H(""),iD=new H(""),df=class{},uu=class{};function qM(t){let e=Error(`No component factory found for ${at(t)}.`);return e[zM]=t,e}var zM="ngComponent";var hf=class{resolveComponentFactory(e){throw qM(e)}},qi=class{static{this.NULL=new hf}},zi=class{},cp=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>GM()}}return t})();function GM(){let t=Ee(),e=lt(),n=ir(e.index,t);return(Zn(n)?n:t)[Fe]}var WM=(()=>{class t{static{this.\u0275prov=U({token:t,providedIn:"root",factory:()=>null})}}return t})();function ff(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=II(i,a);else if(s==2){let u=a,l=e[++o];r=II(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var lu=class extends qi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Xn(e);return new Gi(n,this.ngModule)}};function KI(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Jn.None;e?n.push({propName:o,templateName:r,isSignal:(a&Jn.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function KM(t){let e=t.toLowerCase();return e==="svg"?DR:e==="math"?TR:null}var Gi=class extends uu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=KI(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return KI(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=nR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=he(null);try{i=i||this.ngModule;let o=i instanceof mt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Qh(e,o):e,u=a.get(zi,null);if(u===null)throw new $(407,!1);let l=a.get(WM,null),h=a.get(Hi,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",S=r?JN(m,r,this.componentDef.encapsulation,a):CE(m,_,KM(_)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let R=null;S!==null&&(R=Jf(S,a,!0));let L=ip(0,null,null,1,0,null,null,null,null,null,null),B=Ru(null,L,null,N,null,null,p,m,a,null,R);Vf(B);let z,ne,Te=null;try{let Z=this.componentDef,D,y=null;Z.findHostDirectiveDefs?(D=[],y=new Map,Z.findHostDirectiveDefs(Z,D,y),D.push(Z)):D=[Z];let I=QM(B,S);Te=YM(I,S,Z,D,B,p,m),ne=jw(L,er),S&&XM(m,Z,S,r),n!==void 0&&ex(ne,this.ngContentSelectors,n),z=JM(Te,Z,D,y,B,[tx]),op(L,B,null)}catch(Z){throw Te!==null&&rf(Te),rf(B),Z}finally{Uf()}return new pf(this.componentType,z,bu(ne,B),B,ne)}finally{he(s)}}},pf=class extends df{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new kr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;sp(s[se],s,i,e,n),this.previousInputValues.set(e,n);let o=ir(this._tNode.index,s);ap(o,1)}}get injector(){return new Rr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function QM(t,e){let n=t[se],r=er;return t[r]=e,Nu(n,r,2,"#host",null)}function YM(t,e,n,r,i,s,o){let a=i[se];ZM(r,t,e,o);let u=null;e!==null&&(u=Jf(e,i[Ui]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=Ru(i,HE(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&cf(a,t,r.length-1),Mu(i,p),i[t.index]=p}function ZM(t,e,n,r){for(let i of t)e.mergedAttrs=_o(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(ff(e,e.mergedAttrs,!0),n!==null&&OE(r,n,e))}function JM(t,e,n,r,i,s){let o=lt(),a=i[se],u=Rt(o,i);GE(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=$i(i,a,p,o);Or(m,i)}WE(a,i,o),u&&Or(u,i);let l=$i(i,a,o.directiveStart+o.componentOffset,o);if(t[Ft]=i[Ft]=l,s!==null)for(let h of s)h(l,e);return jE(a,o,i),l}function XM(t,e,n,r){if(r)Bh(t,n,["ng-version","18.2.9"]);else{let{attrs:i,classes:s}=rR(e.selectors[0]);i&&Bh(t,n,i),s&&s.length>0&&PE(t,n,s.join(" "))}}function ex(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function tx(){let t=lt();Hf(Ee()[se],t)}var Ji=(()=>{class t{static{this.__NG_ELEMENT_ID__=nx}}return t})();function nx(){let t=lt();return ix(t,Ee())}var rx=Ji,sD=class extends rx{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return bu(this._hostTNode,this._hostLView)}get injector(){return new Rr(this._hostTNode,this._hostLView)}get parentInjector(){let e=qf(this._hostTNode,this._hostLView);if(rE(e)){let n=nu(e,this._hostLView),r=tu(e),i=n[se].data[r+8];return new Rr(i,n)}else return new Rr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=QI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-At}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=WI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,GI(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!_R(e),a;if(o)a=n;else{let S=n||{};a=S.index,r=S.injector,i=S.projectableNodes,s=S.environmentInjector||S.ngModuleRef}let u=o?e:new Gi(Xn(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(mt,null);N&&(s=N)}let h=Xn(u.componentType??{}),p=WI(this._lContainer,h?.id??null),m=p?.firstChild??null,_=u.create(l,i,m,s);return this.insertImpl(_.hostView,a,GI(this._hostTNode,p)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(bR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ct],l=new sD(u,u[Vt],u[ct]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return CM(o,i,s,r),e.attachToViewContainerRef(),gw(Ph(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=QI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=of(this._lContainer,n);r&&(Wc(Ph(this._lContainer),n),RE(r[se],r))}detach(e){let n=this._adjustIndex(e,-1),r=of(this._lContainer,n);return r&&Wc(Ph(this._lContainer),n)!=null?new kr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function QI(t){return t[Zc]}function Ph(t){return t[Zc]||(t[Zc]=[])}function ix(t,e){let n,r=e[t.index];return wn(r)?n=r:(n=KE(r,e,null,t),e[t.index]=n,Mu(e,n)),ox(n,e,t,r),new sD(n,t,e)}function sx(t,e){let n=t[Fe],r=n.createComment(""),i=Rt(e,t),s=ME(n,i);return au(n,s,r,jN(n,i),!1),r}var ox=ux,ax=()=>!1;function cx(t,e,n){return ax(t,e,n)}function ux(t,e,n,r){if(t[Nr])return;let i;n.type&8?i=Qt(r):i=sx(e,n),t[Nr]=i}var YI=new Set;function Xi(t){YI.has(t)||(YI.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function lx(t){return typeof t=="function"&&t[gn]!==void 0}function P4(t,e){Xi("NgSignals");let n=W_(t),r=n[gn];return e?.equal&&(r.equal=e.equal),n.set=i=>sh(r,i),n.update=i=>K_(r,i),n.asReadonly=dx.bind(n),n}function dx(){let t=this[gn];if(t.readonlyFn===void 0){let e=()=>this();e[gn]=t,t.readonlyFn=e}return t.readonlyFn}function oD(t){return lx(t)&&typeof t.set=="function"}function hx(t){return Object.getPrototypeOf(t.prototype).constructor}function fx(t){let e=hx(t.type),n=!0,r=[t];for(;e;){let i;if(tr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Fc(t.inputs),o.inputTransforms=Fc(t.inputTransforms),o.declaredInputs=Fc(t.declaredInputs),o.outputs=Fc(t.outputs);let a=i.hostBindings;a&&vx(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&mx(t,u),l&&yx(t,l),px(t,i),DA(t.outputs,i.outputs),tr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===fx&&(n=!1)}}e=Object.getPrototypeOf(e)}gx(r)}function px(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function gx(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=_o(i.hostAttrs,n=_o(n,i.hostAttrs))}}function Fc(t){return t===Li?{}:t===Ct?[]:t}function mx(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function yx(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function vx(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var nr=class{},Eo=class{};var gf=class extends nr{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new lu(this);let s=Tw(e);this._bootstrapComponents=bE(s.bootstrap),this._r3Injector=hE(e,n,[{provide:nr,useValue:this},{provide:qi,useValue:this.componentFactoryResolver},...r],at(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},mf=class extends Eo{constructor(e){super(),this.moduleType=e}create(e){return new gf(this.moduleType,e,[])}};var du=class extends nr{constructor(e){super(),this.componentFactoryResolver=new lu(this),this.instance=null;let n=new Io([...e.providers,{provide:nr,useValue:this},{provide:qi,useValue:this.componentFactoryResolver}],e.parent||kf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ou(t,e,n=null){return new du({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function aD(t){return Ix(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function _x(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function Ix(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function No(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function wx(t){return(t.flags&32)===32}function Ex(t,e,n,r,i,s,o,a,u){let l=e.consts,h=Nu(e,t,4,o||null,a||null);zE(e,n,h,eu(l,u)),Hf(e,h);let p=h.tView=ip(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function Dx(t,e,n,r,i,s,o,a,u,l){let h=n+er,p=e.firstCreatePass?Ex(h,e,t,r,i,s,o,a,u):e.data[h];Ro(p,!1);let m=bx(e,t,p,n);Bf()&&np(e,t,m,p),Or(m,t);let _=KE(m,t,m,p);return t[h]=_,Mu(t,_),cx(_,p,t),Lf(p)&&BE(e,t,p),u!=null&&$E(t,p,l),p}function Tx(t,e,n,r,i,s,o,a){let u=Ee(),l=yt(),h=eu(l.consts,s);return Dx(u,l,t,e,n,r,i,h,o,a),Tx}var bx=Cx;function Cx(t,e,n,r){return $f(!0),e[Fe].createComment("")}var xi=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(xi||{}),cD=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}}return t})(),yf=class t{constructor(){this.ngZone=O(ge),this.scheduler=O(Hi),this.errorHandler=O(vn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[xi.EarlyRead,xi.Write,xi.MixedReadWrite,xi.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}},vf=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function up(t,e){!e?.injector&&vR(up);let n=e?.injector??O(Ye);return AN(n)?(Xi("NgAfterNextRender"),Ax(t,n,e,!0)):Rx}function Sx(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function Ax(t,e,n,r){let i=e.get(cD);i.impl??=e.get(yf);let s=n?.phase??xi.MixedReadWrite,o=n?.manualCleanup!==!0?e.get(Gf):null,a=new vf(i.impl,Sx(t,s),r,o);return i.impl.register(a),a}var Rx={destroy(){}};function uD(t,e,n,r){let i=Ee(),s=Tu();if(No(i,s,e)){let o=yt(),a=jf();gM(a,i,t,e,n,r)}return uD}function Nx(t,e,n,r){return No(t,Tu(),n)?e+mu(n)+r:Zi}function Vc(t,e){return t<<17|e<<2}function Lr(t){return t>>17&32767}function Mx(t){return(t&2)==2}function xx(t,e){return t&131071|e<<17}function _f(t){return t|2}function Wi(t){return(t&131068)>>2}function Oh(t,e){return t&-131069|e<<2}function Px(t){return(t&1)===1}function If(t){return t|1}function Ox(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Lr(o),u=Wi(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Co(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=Lr(t[a+1]);t[r+1]=Vc(m,a),m!==0&&(t[m+1]=Oh(t[m+1],r)),t[a+1]=xx(t[a+1],r)}else t[r+1]=Vc(a,0),a!==0&&(t[a+1]=Oh(t[a+1],r)),a=r;else t[r+1]=Vc(u,0),a===0?a=r:t[u+1]=Oh(t[u+1],r),u=r;l&&(t[r+1]=_f(t[r+1])),ZI(t,h,r,!0),ZI(t,h,r,!1),kx(e,h,t,r,s),o=Vc(a,u),s?e.classBindings=o:e.styleBindings=o}function kx(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Co(s,e)>=0&&(n[r+1]=If(n[r+1]))}function ZI(t,e,n,r){let i=t[n+1],s=e===null,o=r?Lr(i):Wi(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];Lx(u,e)&&(a=!0,t[o+1]=r?If(l):_f(l)),o=r?Lr(l):Wi(l)}a&&(t[n+1]=r?_f(i):If(i))}function Lx(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Co(t,e)>=0:!1}function Fx(t,e,n){let r=Ee(),i=Tu();if(No(r,i,e)){let s=yt(),o=jf();qE(s,o,r,t,e,r[Fe],n,!1)}return Fx}function JI(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";sp(t,n,s[o],o,r)}function Vx(t,e){return Ux(t,e,null,!0),Vx}function Ux(t,e,n,r){let i=Ee(),s=yt(),o=FR(2);if(s.firstUpdatePass&&Bx(s,t,o,r),e!==Zi&&No(i,o,e)){let a=s.data[Qi()];Gx(s,a,i,i[Fe],t,i[o+1]=Wx(e,n),r,o)}}function jx(t,e){return e>=t.expandoStartIndex}function Bx(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Qi()],o=jx(t,n);Kx(s,r)&&e===null&&!o&&(e=!1),e=$x(i,s,e,r),Ox(i,s,e,n,o,r)}}function $x(t,e,n,r){let i=BR(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=kh(null,t,e,n,r),n=Do(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=kh(i,t,e,n,r),s===null){let u=Hx(t,e,r);u!==void 0&&Array.isArray(u)&&(u=kh(null,t,e,u[1],r),u=Do(u,e.attrs,r),qx(t,e,r,u))}else s=zx(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function Hx(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Wi(r)!==0)return t[Lr(r)]}function qx(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Lr(i)]=r}function zx(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Do(r,o,n)}return Do(r,e.attrs,n)}function kh(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Do(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Do(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),HA(t,o,n?!0:e[++s]))}return t===void 0?null:t}function Gx(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=Px(l)?XI(u,e,n,i,Wi(l),o):void 0;if(!hu(h)){hu(s)||Mx(l)&&(s=XI(u,null,n,i,a,o));let p=Uw(Qi(),n);WN(r,o,p,i,s)}}function XI(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===Zi&&(m=p?Ct:void 0);let _=p?bh(m,r):h===r?m:void 0;if(l&&!hu(_)&&(_=bh(u,r)),hu(_)&&(a=_,o))return a;let S=t[i+1];i=o?Lr(S):Wi(S)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=bh(u,r))}return a}function hu(t){return t!==void 0}function Wx(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=at(Su(t)))),t}function Kx(t,e){return(t.flags&(e?8:16))!==0}function Qx(t,e,n,r,i,s){let o=e.consts,a=eu(o,i),u=Nu(e,t,2,r,a);return zE(e,n,u,eu(o,s)),u.attrs!==null&&ff(u,u.attrs,!1),u.mergedAttrs!==null&&ff(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function lD(t,e,n,r){let i=Ee(),s=yt(),o=er+t,a=i[Fe],u=s.firstCreatePass?Qx(o,s,i,e,n,r):s.data[o],l=Yx(s,i,u,a,e,t);i[o]=l;let h=Lf(u);return Ro(u,!0),OE(a,l,u),!wx(u)&&Bf()&&np(s,i,l,u),AR()===0&&Or(l,i),RR(),h&&(BE(s,i,u),jE(s,u,i)),r!==null&&$E(i,u),lD}function dD(){let t=lt();Ww()?kR():(t=t.parent,Ro(t,!1));let e=t;xR(e)&&PR(),NR();let n=yt();return n.firstCreatePass&&(Hf(n,t),Ow(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&KR(e)&&JI(n,e,Ee(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&QR(e)&&JI(n,e,Ee(),e.stylesWithoutHost,!1),dD}function lp(t,e,n,r){return lD(t,e,n,r),dD(),lp}var Yx=(t,e,n,r,i,s)=>($f(!0),CE(r,i,qR()));function O4(){return Ee()}var fu="en-US";var Zx=fu;function Jx(t){typeof t=="string"&&(Zx=t.toLowerCase().replace(/_/g,"-"))}var Xx=(t,e,n)=>{};function hD(t,e,n,r){let i=Ee(),s=yt(),o=lt();return fD(s,i,i[Fe],o,t,e,r),hD}function eP(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Yc],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function fD(t,e,n,r,i,s,o){let a=Lf(r),l=t.firstCreatePass&&IM(t),h=e[Ft],p=_M(e),m=!0;if(r.type&3||o){let N=Rt(r,e),R=o?o(N):N,L=p.length,B=o?ne=>o(Qt(ne[r.index])):r.index,z=null;if(!o&&a&&(z=eP(t,e,i,r.index)),z!==null){let ne=z.__ngLastListenerFn__||z;ne.__ngNextListenerFn__=s,z.__ngLastListenerFn__=s,m=!1}else{s=tw(r,e,h,s),Xx(N,i,s);let ne=n.listen(R,i,s);p.push(s,ne),l&&l.push(i,B,L,L+1)}}else s=tw(r,e,h,s);let _=r.outputs,S;if(m&&_!==null&&(S=_[i])){let N=S.length;if(N)for(let R=0;R<N;R+=2){let L=S[R],B=S[R+1],Te=e[L][B].subscribe(s),Z=p.length;p.push(s,Te),l&&l.push(i,r.index,Z,-(Z+1))}}}function ew(t,e,n,r){let i=he(null);try{return qt(6,e,n),n(r)!==!1}catch(s){return YE(t,s),!1}finally{qt(7,e,n),he(i)}}function tw(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?ir(t.index,e):e;ap(o,5);let a=ew(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)a=ew(e,n,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function k4(t=1){return HR(t)}function L4(t,e=""){let n=Ee(),r=yt(),i=t+er,s=r.firstCreatePass?Nu(r,i,1,e,null):r.data[i],o=tP(r,n,s,e,t);n[i]=o,Bf()&&np(r,n,o,s),Ro(s,!1)}var tP=(t,e,n,r,i)=>($f(!0),NN(e[Fe],r));function nP(t){return pD("",t,""),nP}function pD(t,e,n){let r=Ee(),i=Nx(r,t,e,n);return i!==Zi&&wM(r,Qi(),i),pD}function rP(t,e,n){oD(e)&&(e=e());let r=Ee(),i=Tu();if(No(r,i,e)){let s=yt(),o=jf();qE(s,o,r,t,e,r[Fe],n,!1)}return rP}function F4(t,e){let n=oD(t);return n&&t.set(e),n}function iP(t,e){let n=Ee(),r=yt(),i=lt();return fD(r,n,n[Fe],i,t,e),iP}function sP(t,e,n){let r=yt();if(r.firstCreatePass){let i=tr(t);wf(n,r.data,r.blueprint,i,!0),wf(e,r.data,r.blueprint,i,!1)}}function wf(t,e,n,r,i){if(t=st(t),Array.isArray(t))for(let s=0;s<t.length;s++)wf(t[s],e,n,r,i);else{let s=yt(),o=Ee(),a=lt(),u=Vi(t)?t:st(t.provide),l=Nw(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Vi(t)||!t.multi){let _=new Pr(l,i,Xt),S=Fh(u,e,i?h:h+m,p);S===-1?(Zh(ru(a,o),s,u),Lh(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(_),o.push(_)):(n[S]=_,o[S]=_)}else{let _=Fh(u,e,h+m,p),S=Fh(u,e,h,h+m),N=_>=0&&n[_],R=S>=0&&n[S];if(i&&!R||!i&&!N){Zh(ru(a,o),s,u);let L=cP(i?aP:oP,n.length,i,r,l);!i&&R&&(n[S].providerFactory=L),Lh(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(L),o.push(L)}else{let L=gD(n[i?S:_],l,!i&&r);Lh(s,t,_>-1?_:S,L)}!i&&r&&R&&n[S].componentProviders++}}}function Lh(t,e,n,r){let i=Vi(e),s=dR(e);if(i||s){let u=(s?st(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function gD(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Fh(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function oP(t,e,n,r){return Ef(this.multi,[])}function aP(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=$i(n,n[se],this.providerFactory.index,r);s=a.slice(0,o),Ef(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Ef(i,s);return s}function Ef(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function cP(t,e,n,r,i){let s=new Pr(t,n,Xt);return s.multi=[],s.index=e,s.componentProviders=0,gD(s,i,r&&!n),s}function V4(t,e=[]){return n=>{n.providersResolver=(r,i)=>sP(r,i?i(t):t,e)}}var uP=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Sw(!1,n.type),i=r.length>0?Ou([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=U({token:t,providedIn:"environment",factory:()=>new t(G(mt))})}}return t})();function mD(t){Xi("NgStandalone"),t.getStandaloneInjector=e=>e.get(uP).getOrCreateStandaloneInjector(t)}var rr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},yD=new rr("18.2.9");var ku=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var vD=new H("");function Mo(t){return!!t&&typeof t.then=="function"}function _D(t){return!!t&&typeof t.subscribe=="function"}var Lu=new H(""),ID=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=O(Lu,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(Mo(s))n.push(s);else if(_D(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Fu=new H("");function lP(){G_(()=>{throw new $(600,!1)})}function dP(t){return t.isBoundToModule}var hP=10;function fP(t,e,n){try{let r=n();return Mo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Fr=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=O(pN),this.afterRenderManager=O(cD),this.zonelessEnabled=O(Pu),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new it,this.afterTick=new it,this.componentTypes=[],this.components=[],this.isStable=O(Yi).hasPendingTasks.pipe(ie(n=>!n)),this._injector=O(mt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof uu;if(!this._injector.get(ID).done){let m=!i&&Dw(n),_=!1;throw new $(405,_)}let o;i?o=n:o=this._injector.get(qi).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=dP(o)?void 0:this._injector.get(nr),u=r||o.selector,l=o.create(Ye.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(vD,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Hc(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new $(101,!1);let n=he(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,he(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(zi,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<hP;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)pP(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Eu(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Hc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Fu,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Hc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new $(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Hc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function pP(t,e,n,r){if(!n&&!Eu(t))return;XE(t,e,n&&!r?0:1)}var Df=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Vu=(()=>{class t{compileModuleSync(n){return new mf(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Tw(n),s=bE(i.declarations).reduce((o,a)=>{let u=Xn(a);return u&&o.push(new Gi(u)),o},[]);return new Df(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var gP=(()=>{class t{constructor(){this.zone=O(ge),this.changeDetectionScheduler=O(Hi),this.applicationRef=O(Fr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),mP=new H("",{factory:()=>!1});function wD({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ge(ye(k({},ED()),{scheduleInRootZone:n})),[{provide:ge,useFactory:t},{provide:Fi,multi:!0,useFactory:()=>{let r=O(gP,{optional:!0});return()=>r.initialize()}},{provide:Fi,multi:!0,useFactory:()=>{let r=O(yP);return()=>{r.initialize()}}},e===!0?{provide:rD,useValue:!0}:[],{provide:iD,useValue:n??fE}]}function U4(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=wD({ngZoneFactory:()=>{let i=ED(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Xi("NgZone_CoalesceEvent"),new ge(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Yt([{provide:mP,useValue:!0},{provide:Pu,useValue:!1},r])}function ED(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var yP=(()=>{class t{constructor(){this.subscription=new Ce,this.initialized=!1,this.zone=O(ge),this.pendingTasks=O(Yi)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ge.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ge.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var vP=(()=>{class t{constructor(){this.appRef=O(Fr),this.taskService=O(Yi),this.ngZone=O(ge),this.zonelessEnabled=O(Pu),this.disableScheduling=O(rD,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ce,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(su):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(iD,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof nf||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?VI:pE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(su+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,VI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function _P(){return typeof $localize<"u"&&$localize.locale||fu}var dp=new H("",{providedIn:"root",factory:()=>O(dp,te.Optional|te.SkipSelf)||_P()});var Tf=new H("");function Uc(t){return!t.moduleRef}function IP(t){let e=Uc(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ge);return n.run(()=>{Uc(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(vn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),Uc(t)){let s=()=>e.destroy(),o=t.platformInjector.get(Tf);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(Tf);o.add(s),t.moduleRef.onDestroy(()=>{Hc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return fP(r,n,()=>{let s=e.get(ID);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(dp,fu);if(Jx(o||fu),Uc(t)){let a=e.get(Fr);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return wP(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function wP(t,e){let n=t.injector.get(Fr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new $(-403,!1);e.push(t)}var qc=null;function EP(t=[],e){return Ye.create({name:e,providers:[{provide:vu,useValue:"platform"},{provide:Tf,useValue:new Set([()=>qc=null])},...t]})}function DP(t=[]){if(qc)return qc;let e=EP(t);return qc=e,lP(),TP(e),e}function TP(t){t.get(Yf,null)?.forEach(n=>n())}var xo=(()=>{class t{static{this.__NG_ELEMENT_ID__=bP}}return t})();function bP(t){return CP(lt(),Ee(),(t&16)===16)}function CP(t,e,n){if(Iu(t)&&!n){let r=ir(t.index,e);return new kr(r,r)}else if(t.type&175){let r=e[Kt];return new kr(r,e)}return null}var bf=class{constructor(){}supports(e){return aD(e)}create(e){return new Cf(e)}},SP=(t,e)=>e,Cf=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||SP}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<nw(r,i,s)?n:r,a=nw(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let _=m<s.length?s[m]:s[m]=0,S=_+m;h<=S&&S<l&&(s[m]=_+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!aD(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,_x(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Sf(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new pu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new pu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Sf=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Af=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},pu=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Af,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function nw(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function rw(){return new hp([new bf])}var hp=(()=>{class t{static{this.\u0275prov=U({token:t,providedIn:"root",factory:rw})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||rw()),deps:[[t,new Mf,new Ze]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new $(901,!1)}}return t})();function DD(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=DP(r),s=[wD({}),{provide:Hi,useExisting:vP},...n||[]],o=new du({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return IP({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function TD(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function j4(t,e){Xi("NgSignals");let n=H_(t);return e?.equal&&(n[gn].equal=e.equal),n}function AP(t){let e=he(null);try{return t()}finally{he(e)}}function bD(t){let e=Xn(t);if(!e)return null;let n=new Gi(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var ND=null;function es(){return ND}function MD(t){ND??=t}var Uu=class{};var dt=new H(""),yp=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:()=>O(MP),providedIn:"platform"})}}return t})(),xD=new H(""),MP=(()=>{class t extends yp{constructor(){super(),this._doc=O(dt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return es().getBaseHref(this._doc)}onPopState(n){let r=es().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=es().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function vp(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function CD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function En(t){return t&&t[0]!=="?"?"?"+t:t}var Vr=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:()=>O(_p),providedIn:"root"})}}return t})(),PD=new H(""),_p=(()=>{class t extends Vr{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return vp(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+En(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+En(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+En(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(G(yp),G(PD,8))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),OD=(()=>{class t extends Vr{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=vp(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+En(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+En(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(G(yp),G(PD,8))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac})}}return t})(),ts=(()=>{class t{constructor(n){this._subject=new ot,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=OP(CD(SD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+En(r))}normalize(n){return t.stripTrailingSlash(PP(this._basePath,SD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+En(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+En(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=En}static{this.joinWithSlash=vp}static{this.stripTrailingSlash=CD}static{this.\u0275fac=function(r){return new(r||t)(G(Vr))}}static{this.\u0275prov=U({token:t,factory:()=>xP(),providedIn:"root"})}}return t})();function xP(){return new ts(G(Vr))}function PP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function SD(t){return t.replace(/\/index.html$/,"")}function OP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function kD(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var fp=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},fG=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new fp(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),AD(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);AD(s,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Xt(Ji),Xt(xu),Xt(hp))}}static{this.\u0275dir=Ao({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function AD(t,e){t.context.$implicit=e.item}var pG=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new pp,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){RD("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){RD("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Xt(Ji),Xt(xu))}}static{this.\u0275dir=Ao({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),pp=class{constructor(){this.$implicit=null,this.ngIf=null}};function RD(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${at(e)}'.`)}var kP=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=So({type:t})}static{this.\u0275inj=bo({})}}return t})(),Ip="browser",LP="server";function FP(t){return t===Ip}function wp(t){return t===LP}var LD=(()=>{class t{static{this.\u0275prov=U({token:t,providedIn:"root",factory:()=>FP(O(Jt))?new gp(O(dt),window):new mp})}}return t})(),gp=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=VP(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function VP(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var mp=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ju=class{};var Tp=class extends Uu{constructor(){super(...arguments),this.supportsDOMEvents=!0}},bp=class t extends Tp{static makeCurrent(){MD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=UP();return n==null?null:jP(n)}resetBaseElement(){Oo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return kD(document.cookie,e)}},Oo=null;function UP(){return Oo=Oo||document.querySelector("base"),Oo?Oo.getAttribute("href"):null}function jP(t){return new URL(t,document.baseURI).pathname}var BP=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac})}}return t})(),Cp=new H(""),jD=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(G(Cp),G(ge))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac})}}return t})(),Bu=class{constructor(e){this._doc=e}},Ep="ng-app-id",BD=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=wp(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Ep}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Ep),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Ep,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(G(dt),G(Qf),G(Zf,8),G(Jt))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac})}}return t})(),Dp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ap=/%COMP%/g,$D="%COMP%",$P=`_nghost-${$D}`,HP=`_ngcontent-${$D}`,qP=!0,zP=new H("",{providedIn:"root",factory:()=>qP});function GP(t){return HP.replace(Ap,t)}function WP(t){return $P.replace(Ap,t)}function HD(t,e){return e.map(n=>n.replace(Ap,t))}var FD=(()=>{class t{constructor(n,r,i,s,o,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=wp(a),this.defaultRenderer=new ko(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Gt.ShadowDom&&(r=ye(k({},r),{encapsulation:Gt.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof $u?i.applyToHost(n):i instanceof Lo&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Gt.Emulated:s=new $u(u,l,r,this.appId,h,o,a,p);break;case Gt.ShadowDom:return new Sp(u,l,n,r,o,a,this.nonce,p);default:s=new Lo(u,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(G(jD),G(BD),G(Qf),G(zP),G(dt),G(Jt),G(ge),G(Zf))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac})}}return t})(),ko=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Dp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(VD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(VD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Dp[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Dp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(_n.DashCase|_n.Important)?e.style.setProperty(n,r,i&_n.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&_n.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=es().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function VD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Sp=class extends ko{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=HD(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Lo=class extends ko{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?HD(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},$u=class extends Lo{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=GP(l),this.hostAttr=WP(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},KP=(()=>{class t extends Bu{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(G(dt))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac})}}return t})(),UD=["alt","control","meta","shift"],QP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},YP={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},ZP=(()=>{class t extends Bu{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>es().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),UD.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=QP[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),UD.forEach(o=>{if(o!==i){let a=YP[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(G(dt))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac})}}return t})();function BG(t,e){return DD(k({rootComponent:t},JP(e)))}function JP(t){return{appProviders:[...rO,...t?.providers??[]],platformProviders:nO}}function XP(){bp.makeCurrent()}function eO(){return new vn}function tO(){return wE(document),document}var nO=[{provide:Jt,useValue:Ip},{provide:Yf,useValue:XP,multi:!0},{provide:dt,useFactory:tO,deps:[]}];var rO=[{provide:vu,useValue:"root"},{provide:vn,useFactory:eO,deps:[]},{provide:Cp,useClass:KP,multi:!0,deps:[dt,ge,Jt]},{provide:Cp,useClass:ZP,multi:!0,deps:[dt]},FD,BD,jD,{provide:zi,useExisting:FD},{provide:ju,useClass:BP,deps:[]},[]];var qD=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(G(dt))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ee="primary",Jo=Symbol("RouteTitle"),Pp=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function as(t){return new Pp(t)}function sO(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function oO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!en(t[n],e[n]))return!1;return!0}function en(t,e){let n=t?Op(t):void 0,r=e?Op(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!tT(t[i],e[i]))return!1;return!0}function Op(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function tT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function nT(t){return t.length>0?t[t.length-1]:null}function ar(t){return _h(t)?t:Mo(t)?Re(Promise.resolve(t)):K(t)}var aO={exact:iT,subset:sT},rT={exact:cO,subset:uO,ignored:()=>!0};function zD(t,e,n){return aO[n.paths](t.root,e.root,n.matrixParams)&&rT[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function cO(t,e){return en(t,e)}function iT(t,e,n){if(!jr(t.segments,e.segments)||!zu(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!iT(t.children[r],e.children[r],n))return!1;return!0}function uO(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>tT(t[n],e[n]))}function sT(t,e,n){return oT(t,e,e.segments,n)}function oT(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!jr(i,n)||e.hasChildren()||!zu(i,n,r))}else if(t.segments.length===n.length){if(!jr(t.segments,n)||!zu(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!sT(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!jr(t.segments,i)||!zu(t.segments,i,r)||!t.children[ee]?!1:oT(t.children[ee],e,s,r)}}function zu(t,e,n){return e.every((r,i)=>rT[n](t[i].parameters,r.parameters))}var Tn=class{constructor(e=new me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=as(this.queryParams),this._queryParamMap}toString(){return hO.serialize(this)}},me=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gu(this)}},Ur=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=as(this.parameters),this._parameterMap}toString(){return cT(this)}};function lO(t,e){return jr(t,e)&&t.every((n,r)=>en(n.parameters,e[r].parameters))}function jr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function dO(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ee&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ee&&(n=n.concat(e(i,r)))}),n}var Xo=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:()=>new cs,providedIn:"root"})}}return t})(),cs=class{parse(e){let n=new Lp(e);return new Tn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Fo(e.root,!0)}`,r=gO(e.queryParams),i=typeof e.fragment=="string"?`#${fO(e.fragment)}`:"";return`${n}${r}${i}`}},hO=new cs;function Gu(t){return t.segments.map(e=>cT(e)).join("/")}function Fo(t,e){if(!t.hasChildren())return Gu(t);if(e){let n=t.children[ee]?Fo(t.children[ee],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ee&&r.push(`${i}:${Fo(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=dO(t,(r,i)=>i===ee?[Fo(t.children[ee],!1)]:[`${i}:${Fo(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ee]!=null?`${Gu(t)}/${n[0]}`:`${Gu(t)}/(${n.join("//")})`}}function aT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hu(t){return aT(t).replace(/%3B/gi,";")}function fO(t){return encodeURI(t)}function kp(t){return aT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wu(t){return decodeURIComponent(t)}function GD(t){return Wu(t.replace(/\+/g,"%20"))}function cT(t){return`${kp(t.path)}${pO(t.parameters)}`}function pO(t){return Object.entries(t).map(([e,n])=>`;${kp(e)}=${kp(n)}`).join("")}function gO(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Hu(n)}=${Hu(i)}`).join("&"):`${Hu(n)}=${Hu(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var mO=/^[^\/()?;#]+/;function Rp(t){let e=t.match(mO);return e?e[0]:""}var yO=/^[^\/()?;=#]+/;function vO(t){let e=t.match(yO);return e?e[0]:""}var _O=/^[^=?&#]+/;function IO(t){let e=t.match(_O);return e?e[0]:""}var wO=/^[^&#]+/;function EO(t){let e=t.match(wO);return e?e[0]:""}var Lp=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ee]=new me(e,n)),r}parseSegment(){let e=Rp(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new Ur(Wu(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=vO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Rp(this.remaining);i&&(r=i,this.capture(r))}e[Wu(n)]=Wu(r)}parseQueryParam(e){let n=IO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=EO(this.remaining);o&&(r=o,this.capture(r))}let i=GD(n),s=GD(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Rp(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ee);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ee]:new me([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function uT(t){return t.segments.length>0?new me([],{[ee]:t}):t}function lT(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=lT(i);if(r===ee&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new me(t.segments,e);return DO(n)}function DO(t){if(t.numberOfChildren===1&&t.children[ee]){let e=t.children[ee];return new me(t.segments.concat(e.segments),e.children)}return t}function Ho(t){return t instanceof Tn}function TO(t,e,n=null,r=null){let i=dT(t);return hT(i,e,n,r)}function dT(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new me(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=uT(r);return e??i}function hT(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Np(i,i,i,n,r);let s=bO(e);if(s.toRoot())return Np(i,i,new me([],{}),n,r);let o=CO(s,i,t),a=o.processChildren?jo(o.segmentGroup,o.index,s.commands):pT(o.segmentGroup,o.index,s.commands);return Np(i,o.segmentGroup,a,n,r)}function Ku(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function qo(t){return typeof t=="object"&&t!=null&&t.outlets}function Np(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=fT(t,e,n);let a=uT(lT(o));return new Tn(a,s,i)}function fT(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=fT(s,e,n)}),new me(t.segments,r)}var Qu=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ku(r[0]))throw new $(4003,!1);let i=r.find(qo);if(i&&i!==nT(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function bO(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Qu(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Qu(n,e,r)}var is=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function CO(t,e,n){if(t.isAbsolute)return new is(e,!0,0);if(!n)return new is(e,!1,NaN);if(n.parent===null)return new is(n,!0,0);let r=Ku(t.commands[0])?0:1,i=n.segments.length-1+r;return SO(n,i,t.numberOfDoubleDots)}function SO(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new is(r,!1,i-s)}function AO(t){return qo(t[0])?t[0].outlets:{[ee]:t}}function pT(t,e,n){if(t??=new me([],{}),t.segments.length===0&&t.hasChildren())return jo(t,e,n);let r=RO(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new me(t.segments.slice(0,r.pathIndex),{});return s.children[ee]=new me(t.segments.slice(r.pathIndex),t.children),jo(s,0,i)}else return r.match&&i.length===0?new me(t.segments,{}):r.match&&!t.hasChildren()?Fp(t,e,n):r.match?jo(t,0,i):Fp(t,e,n)}function jo(t,e,n){if(n.length===0)return new me(t.segments,{});{let r=AO(n),i={};if(Object.keys(r).some(s=>s!==ee)&&t.children[ee]&&t.numberOfChildren===1&&t.children[ee].segments.length===0){let s=jo(t.children[ee],e,n);return new me(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=pT(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new me(t.segments,i)}}function RO(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(qo(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!KD(u,l,o))return s;r+=2}else{if(!KD(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Fp(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(qo(s)){let u=NO(s.outlets);return new me(r,u)}if(i===0&&Ku(n[0])){let u=t.segments[e];r.push(new Ur(u.path,WD(n[0]))),i++;continue}let o=qo(s)?s.outlets[ee]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Ku(a)?(r.push(new Ur(o,WD(a))),i+=2):(r.push(new Ur(o,{})),i++)}return new me(r,{})}function NO(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Fp(new me([],{}),0,r))}),e}function WD(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function KD(t,e,n){return t==n.path&&en(e,n.parameters)}var Bo="imperative",Be=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Be||{}),Nt=class{constructor(e,n){this.id=e,this.url=n}},us=class extends Nt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Be.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},bn=class extends Nt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Be.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},_t=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(_t||{}),Yu=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Yu||{}),Dn=class extends Nt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Be.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},sr=class extends Nt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Be.NavigationSkipped}},zo=class extends Nt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Be.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Zu=class extends Nt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Be.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vp=class extends Nt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Be.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Up=class extends Nt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Be.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},jp=class extends Nt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Be.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bp=class extends Nt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Be.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$p=class{constructor(e){this.route=e,this.type=Be.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Hp=class{constructor(e){this.route=e,this.type=Be.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},qp=class{constructor(e){this.snapshot=e,this.type=Be.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zp=class{constructor(e){this.snapshot=e,this.type=Be.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gp=class{constructor(e){this.snapshot=e,this.type=Be.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wp=class{constructor(e){this.snapshot=e,this.type=Be.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ju=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Be.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Go=class{},ls=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function MO(t,e){return t.providers&&!t._injector&&(t._injector=Ou(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Ut(t){return t.outlet||ee}function xO(t,e){let n=t.filter(r=>Ut(r)===e);return n.push(...t.filter(r=>Ut(r)!==e)),n}function ea(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Kp=class{get injector(){return ea(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ta(this.rootInjector),this.attachRef=null}},ta=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Kp(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(G(mt))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Xu=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Qp(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Qp(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Yp(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Yp(e,this._root).map(n=>n.value)}};function Qp(t,e){if(t===e.value)return e;for(let n of e.children){let r=Qp(t,n);if(r)return r}return null}function Yp(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Yp(t,n);if(r.length)return r.unshift(e),r}return[]}var vt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function rs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var el=class extends Xu{constructor(e,n){super(e),this.snapshot=n,sg(this,e)}toString(){return this.snapshot.toString()}};function gT(t){let e=PO(t),n=new ke([new Ur("",{})]),r=new ke({}),i=new ke({}),s=new ke({}),o=new ke(""),a=new Br(n,r,s,o,i,ee,t,e.root);return a.snapshot=e.root,new el(new vt(a,[]),e)}function PO(t){let e={},n={},r={},i="",s=new ss([],e,r,i,n,ee,t,null,{});return new nl("",new vt(s,[]))}var Br=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ie(l=>l[Jo]))??K(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(e=>as(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(e=>as(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function tl(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:k(k({},e.params),t.params),data:k(k({},e.data),t.data),resolve:k(k(k(k({},t.data),e.data),i?.data),t._resolvedData)}:r={params:k({},t.params),data:k({},t.data),resolve:k(k({},t.data),t._resolvedData??{})},i&&yT(i)&&(r.resolve[Jo]=i.title),r}var ss=class{get title(){return this.data?.[Jo]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=as(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=as(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},nl=class extends Xu{constructor(e,n){super(n),this.url=e,sg(this,n)}toString(){return mT(this._root)}};function sg(t,e){e.value._routerState=t,e.children.forEach(n=>sg(t,n))}function mT(t){let e=t.children.length>0?` { ${t.children.map(mT).join(", ")} } `:"";return`${t.value}${e}`}function Mp(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,en(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),en(e.params,n.params)||t.paramsSubject.next(n.params),oO(e.url,n.url)||t.urlSubject.next(n.url),en(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Zp(t,e){let n=en(t.params,e.params)&&lO(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Zp(t.parent,e.parent))}function yT(t){return typeof t.title=="string"||t.title===null}var OO=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=ee,this.activateEvents=new ot,this.deactivateEvents=new ot,this.attachEvents=new ot,this.detachEvents=new ot,this.parentContexts=O(ta),this.location=O(Ji),this.changeDetector=O(xo),this.inputBinder=O(ol,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Jp(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Ao({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[wu]})}}return t})(),Jp=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Br?this.route:e===ta?this.childContexts:this.parent.get(e,n)}},ol=new H(""),QD=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=po([r.queryParams,r.params,r.data]).pipe(Tt(([s,o,a],u)=>(a=k(k(k({},s),o),a),u===0?K(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let o=bD(r.component);if(!o){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(n,i)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac})}}return t})();function kO(t,e,n){let r=Wo(t,e._root,n?n._root:void 0);return new el(r,e)}function Wo(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=LO(t,e,n);return new vt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Wo(t,a)),o}}let r=FO(e.value),i=e.children.map(s=>Wo(t,s));return new vt(r,i)}}function LO(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Wo(t,r,i);return Wo(t,r)})}function FO(t){return new Br(new ke(t.url),new ke(t.params),new ke(t.queryParams),new ke(t.fragment),new ke(t.data),t.outlet,t.component,t)}var Ko=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},vT="ngNavigationCancelingError";function rl(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ho(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=_T(!1,_t.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function _T(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[vT]=!0,n.cancellationCode=e,n}function VO(t){return IT(t)&&Ho(t.url)}function IT(t){return!!t&&t[vT]}var UO=(t,e,n,r)=>ie(i=>(new Xp(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Xp=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Mp(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=rs(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=rs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=rs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=rs(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Wp(s.value.snapshot))}),e.children.length&&this.forwardEvent(new zp(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Mp(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Mp(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},il=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},os=class{constructor(e,n){this.component=e,this.route=n}};function jO(t,e,n){let r=t._root,i=e?e._root:null;return Vo(r,i,n,[r.value])}function BO(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function hs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!cw(t)?t:e.get(t):r}function Vo(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=rs(e);return t.children.forEach(o=>{$O(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>$o(a,n.getContext(o),i)),i}function $O(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=HO(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new il(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Vo(t,e,a?a.children:null,r,i):Vo(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new os(a.outlet.component,o))}else o&&$o(e,a,i),i.canActivateChecks.push(new il(r)),s.component?Vo(t,null,a?a.children:null,r,i):Vo(t,null,n,r,i);return i}function HO(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!jr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!jr(t.url,e.url)||!en(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zp(t,e)||!en(t.queryParams,e.queryParams);case"paramsChange":default:return!Zp(t,e)}}function $o(t,e,n){let r=rs(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?$o(o,e.children.getContext(s),n):$o(o,null,n):$o(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new os(e.outlet.component,i)):n.canDeactivateChecks.push(new os(null,i)):n.canDeactivateChecks.push(new os(null,i))}function na(t){return typeof t=="function"}function qO(t){return typeof t=="boolean"}function zO(t){return t&&na(t.canLoad)}function GO(t){return t&&na(t.canActivate)}function WO(t){return t&&na(t.canActivateChild)}function KO(t){return t&&na(t.canDeactivate)}function QO(t){return t&&na(t.canMatch)}function wT(t){return t instanceof mn||t?.name==="EmptyError"}var qu=Symbol("INITIAL_VALUE");function ds(){return Tt(t=>po(t.map(e=>e.pipe(yn(1),Dh(qu)))).pipe(ie(e=>{for(let n of e)if(n!==!0){if(n===qu)return qu;if(n===!1||YO(n))return n}return!0}),Dt(e=>e!==qu),yn(1)))}function YO(t){return Ho(t)||t instanceof Ko}function ZO(t,e){return Me(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?K(ye(k({},n),{guardsResult:!0})):JO(o,r,i,t).pipe(Me(a=>a&&qO(a)?XO(r,s,t,e):K(a)),ie(a=>ye(k({},n),{guardsResult:a})))})}function JO(t,e,n,r){return Re(t).pipe(Me(i=>ik(i.component,i.route,n,e,r)),Ht(i=>i!==!0,!0))}function XO(t,e,n,r){return Re(e).pipe(Ar(i=>Si(tk(i.route.parent,r),ek(i.route,r),rk(t,i.path,n),nk(t,i.route,n))),Ht(i=>i!==!0,!0))}function ek(t,e){return t!==null&&e&&e(new Gp(t)),K(!0)}function tk(t,e){return t!==null&&e&&e(new qp(t)),K(!0)}function nk(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return K(!0);let i=r.map(s=>Oc(()=>{let o=ea(e)??n,a=hs(s,o),u=GO(a)?a.canActivate(e,t):Zt(o,()=>a(e,t));return ar(u).pipe(Ht())}));return K(i).pipe(ds())}function rk(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>BO(o)).filter(o=>o!==null).map(o=>Oc(()=>{let a=o.guards.map(u=>{let l=ea(o.node)??n,h=hs(u,l),p=WO(h)?h.canActivateChild(r,t):Zt(l,()=>h(r,t));return ar(p).pipe(Ht())});return K(a).pipe(ds())}));return K(s).pipe(ds())}function ik(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return K(!0);let o=s.map(a=>{let u=ea(e)??i,l=hs(a,u),h=KO(l)?l.canDeactivate(t,e,n,r):Zt(u,()=>l(t,e,n,r));return ar(h).pipe(Ht())});return K(o).pipe(ds())}function sk(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return K(!0);let s=i.map(o=>{let a=hs(o,t),u=zO(a)?a.canLoad(e,n):Zt(t,()=>a(e,n));return ar(u)});return K(s).pipe(ds(),ET(r))}function ET(t){return dh(Le(e=>{if(typeof e!="boolean")throw rl(t,e)}),ie(e=>e===!0))}function ok(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return K(!0);let s=i.map(o=>{let a=hs(o,t),u=QO(a)?a.canMatch(e,n):Zt(t,()=>a(e,n));return ar(u)});return K(s).pipe(ds(),ET(r))}var Qo=class{constructor(e){this.segmentGroup=e||null}},Yo=class extends Error{constructor(e){super(),this.urlTree=e}};function ns(t){return bi(new Qo(t))}function ak(t){return bi(new $(4e3,!1))}function ck(t){return bi(_T(!1,_t.GuardRejected))}var eg=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return K(r);if(i.numberOfChildren>1||!i.children[ee])return ak(`${e.redirectTo}`);i=i.children[ee]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:_,data:S,title:N}=i,R=Zt(s,()=>a({params:_,data:S,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:N}));if(R instanceof Tn)throw new Yo(R);n=R}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Yo(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Tn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new me(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},tg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function uk(t,e,n,r,i){let s=DT(t,e,n);return s.matched?(r=MO(e,r),ok(r,e,n,i).pipe(ie(o=>o===!0?s:k({},tg)))):K(s)}function DT(t,e,n){if(e.path==="**")return lk(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?k({},tg):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||sO)(n,t,e);if(!i)return k({},tg);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?k(k({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function lk(t){return{matched:!0,parameters:t.length>0?nT(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function YD(t,e,n,r){return n.length>0&&fk(t,n,r)?{segmentGroup:new me(e,hk(r,new me(n,t.children))),slicedSegments:[]}:n.length===0&&pk(t,n,r)?{segmentGroup:new me(t.segments,dk(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new me(t.segments,t.children),slicedSegments:n}}function dk(t,e,n,r){let i={};for(let s of n)if(al(t,e,s)&&!r[Ut(s)]){let o=new me([],{});i[Ut(s)]=o}return k(k({},r),i)}function hk(t,e){let n={};n[ee]=e;for(let r of t)if(r.path===""&&Ut(r)!==ee){let i=new me([],{});n[Ut(r)]=i}return n}function fk(t,e,n){return n.some(r=>al(t,e,r)&&Ut(r)!==ee)}function pk(t,e,n){return n.some(r=>al(t,e,r))}function al(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function gk(t,e,n){return e.length===0&&!t.children[n]}var ng=class{};function mk(t,e,n,r,i,s,o="emptyOnly"){return new rg(t,e,n,r,i,o,s).recognize()}var yk=31,rg=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new eg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=YD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ie(({children:n,rootSnapshot:r})=>{let i=new vt(r,n),s=new nl("",i),o=TO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new ss([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ee,n).pipe(ie(r=>({children:r,rootSnapshot:n})),Wn(r=>{if(r instanceof Yo)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Qo?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(ie(o=>o instanceof vt?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Re(s).pipe(Ar(o=>{let a=r.children[o],u=xO(n,o);return this.processSegmentGroup(e,u,a,o,i)}),Eh((o,a)=>(o.push(...a),o)),Kn(null),wh(),Me(o=>{if(o===null)return ns(r);let a=TT(o);return vk(a),K(a)}))}processSegment(e,n,r,i,s,o,a){return Re(n).pipe(Ar(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,s,o,a).pipe(Wn(l=>{if(l instanceof Qo)return K(null);throw l}))),Ht(u=>!!u),Wn(u=>{if(wT(u))return gk(r,i,s)?K(new ng):ns(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,u){return Ut(r)!==o&&(o===ee||!al(i,s,r))?ns(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,u):ns(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=DT(n,i,s);if(!u)return ns(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>yk&&(this.allowRedirects=!1));let _=new ss(s,l,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,ZD(i),Ut(i),i.component??i._loadedComponent??null,i,JD(i)),S=tl(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(S.params),_.data=Object.freeze(S.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,_,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(Me(R=>this.processSegment(e,r,n,R.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=uk(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Tt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Tt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:_}=u,S=new ss(m,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,ZD(r),Ut(r),r.component??r._loadedComponent??null,r,JD(r)),N=tl(S,o,this.paramsInheritanceStrategy);S.params=Object.freeze(N.params),S.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:L}=YD(n,m,_,l);if(L.length===0&&R.hasChildren())return this.processChildren(h,l,R,S).pipe(ie(z=>new vt(S,z)));if(l.length===0&&L.length===0)return K(new vt(S,[]));let B=Ut(r)===s;return this.processSegment(h,l,R,L,B?ee:s,!0,S).pipe(ie(z=>new vt(S,z instanceof vt?[z]:[])))}))):ns(n)))}getChildConfig(e,n,r){return n.children?K({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?K({routes:n._loadedRoutes,injector:n._loadedInjector}):sk(e,n,r,this.urlSerializer).pipe(Me(i=>i?this.configLoader.loadChildren(e,n).pipe(Le(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):ck(n))):K({routes:[],injector:e})}};function vk(t){t.sort((e,n)=>e.value.outlet===ee?-1:n.value.outlet===ee?1:e.value.outlet.localeCompare(n.value.outlet))}function _k(t){let e=t.value.routeConfig;return e&&e.path===""}function TT(t){let e=[],n=new Set;for(let r of t){if(!_k(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=TT(r.children);e.push(new vt(r.value,i))}return e.filter(r=>!n.has(r))}function ZD(t){return t.data||{}}function JD(t){return t.resolve||{}}function Ik(t,e,n,r,i,s){return Me(o=>mk(t,e,n,r,o.extractedUrl,i,s).pipe(ie(({state:a,tree:u})=>ye(k({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function wk(t,e){return Me(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return K(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of bT(u))o.add(l);let a=0;return Re(o).pipe(Ar(u=>s.has(u)?Ek(u,r,t,e):(u.data=tl(u,u.parent,t).resolve,K(void 0))),Le(()=>a++),Ai(1),Me(u=>a===o.size?K(n):gt))})}function bT(t){let e=t.children.map(n=>bT(n)).flat();return[t,...e]}function Ek(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!yT(i)&&(s[Jo]=i.title),Dk(s,t,e,r).pipe(ie(o=>(t._resolvedData=o,t.data=tl(t,t.parent,n).resolve,null)))}function Dk(t,e,n,r){let i=Op(t);if(i.length===0)return K({});let s={};return Re(i).pipe(Me(o=>Tk(t[o],e,n,r).pipe(Ht(),Le(a=>{if(a instanceof Ko)throw rl(new cs,a);s[o]=a}))),Ai(1),Ih(s),Wn(o=>wT(o)?gt:bi(o)))}function Tk(t,e,n,r){let i=ea(e)??r,s=hs(t,i),o=s.resolve?s.resolve(e,n):Zt(i,()=>s(e,n));return ar(o)}function xp(t){return Tt(e=>{let n=t(e);return n?Re(n).pipe(ie(()=>e)):K(e)})}var CT=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ee);return r}getResolvedTitleForRoute(n){return n.data[Jo]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:()=>O(bk),providedIn:"root"})}}return t})(),bk=(()=>{class t extends CT{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(G(qD))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ra=new H("",{providedIn:"root",factory:()=>({})}),Ck=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Iw({type:t,selectors:[["ng-component"]],standalone:!0,features:[mD],decls:1,vars:0,template:function(r,i){r&1&&lp(0,"router-outlet")},dependencies:[OO],encapsulation:2})}}return t})();function og(t){let e=t.children&&t.children.map(og),n=e?ye(k({},t),{children:e}):k({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ee&&(n.component=Ck),n}var Zo=new H(""),ag=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(Vu)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return K(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=ar(n.loadComponent()).pipe(ie(ST),Le(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),go(()=>{this.componentLoaders.delete(n)})),i=new wi(r,()=>new it).pipe(Ii());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return K({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Sk(r,this.compiler,n,this.onLoadEndListener).pipe(go(()=>{this.childrenLoaders.delete(r)})),o=new wi(s,()=>new it).pipe(Ii());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Sk(t,e,n,r){return ar(t.loadChildren()).pipe(ie(ST),Me(i=>i instanceof Eo||Array.isArray(i)?K(i):Re(e.compileModuleAsync(i))),ie(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Zo,[],{optional:!0,self:!0}).flat()),{routes:o.map(og),injector:s}}))}function Ak(t){return t&&typeof t=="object"&&"default"in t}function ST(t){return Ak(t)?t.default:t}var cg=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:()=>O(Rk),providedIn:"root"})}}return t})(),Rk=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),AT=new H(""),RT=new H("");function Nk(t,e,n){let r=t.get(RT),i=t.get(dt);return t.get(ge).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),Mk(t))),{onViewTransitionCreated:u}=r;return u&&Zt(t,()=>u({transition:a,from:e,to:n})),o})}function Mk(t){return new Promise(e=>{up({read:()=>setTimeout(e)},{injector:t})})}var xk=new H(""),ug=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new it,this.transitionAbortSubject=new it,this.configLoader=O(ag),this.environmentInjector=O(mt),this.urlSerializer=O(Xo),this.rootContexts=O(ta),this.location=O(ts),this.inputBindingEnabled=O(ol,{optional:!0})!==null,this.titleStrategy=O(CT),this.options=O(ra,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(cg),this.createViewTransition=O(AT,{optional:!0}),this.navigationErrorHandler=O(xk,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>K(void 0),this.rootComponentType=null;let n=i=>this.events.next(new $p(i)),r=i=>this.events.next(new Hp(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ye(k(k({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new ke({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Bo,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Dt(s=>s.id!==0),ie(s=>ye(k({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Tt(s=>{let o=!1,a=!1;return K(s).pipe(Tt(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",_t.SupersededByNewNavigation),gt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ye(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new sr(u.id,this.urlSerializer.serialize(u.rawUrl),p,Yu.IgnoredSameUrlNavigation)),u.resolve(!1),gt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return K(u).pipe(Tt(p=>{let m=this.transitions?.getValue();return this.events.next(new us(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?gt:Promise.resolve(p)}),Ik(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Le(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ye(k({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Zu(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:_,restoredState:S,extras:N}=u,R=new us(p,this.urlSerializer.serialize(m),_,S);this.events.next(R);let L=gT(this.rootComponentType).snapshot;return this.currentTransition=s=ye(k({},u),{targetSnapshot:L,urlAfterRedirects:m,extras:ye(k({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,K(s)}else{let p="";return this.events.next(new sr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Yu.IgnoredByUrlHandlingStrategy)),u.resolve(!1),gt}}),Le(u=>{let l=new Vp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ie(u=>(this.currentTransition=s=ye(k({},u),{guards:jO(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),ZO(this.environmentInjector,u=>this.events.next(u)),Le(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw rl(this.urlSerializer,u.guardsResult);let l=new Up(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Dt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",_t.GuardRejected),!1)),xp(u=>{if(u.guards.canActivateChecks.length)return K(u).pipe(Le(l=>{let h=new jp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Tt(l=>{let h=!1;return K(l).pipe(wk(this.paramsInheritanceStrategy,this.environmentInjector),Le({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",_t.NoDataFromResolver)}}))}),Le(l=>{let h=new Bp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),xp(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Le(m=>{h.component=m}),ie(()=>{})));for(let m of h.children)p.push(...l(m));return p};return po(l(u.targetSnapshot.root)).pipe(Kn(null),yn(1))}),xp(()=>this.afterPreactivation()),Tt(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Re(h).pipe(ie(()=>s)):K(s)}),ie(u=>{let l=kO(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=ye(k({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Le(()=>{this.events.next(new Go)}),UO(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),yn(1),Le({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new bn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),Th(this.transitionAbortSubject.pipe(Le(u=>{throw u}))),go(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",_t.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Wn(u=>{if(a=!0,IT(u))this.events.next(new Dn(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),VO(u)?this.events.next(new ls(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let l=new zo(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let h=Zt(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Ko){let{message:p,cancellationCode:m}=rl(this.urlSerializer,h);this.events.next(new Dn(s.id,this.urlSerializer.serialize(s.extractedUrl),p,m)),this.events.next(new ls(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=n.errorHandler(u);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return gt}))}))}cancelNavigationTransition(n,r,i){let s=new Dn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Pk(t){return t!==Bo}var Ok=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:()=>O(kk),providedIn:"root"})}}return t})(),ig=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},kk=(()=>{class t extends ig{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=zf(t)))(i||t)}})()}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),NT=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:()=>O(Lk),providedIn:"root"})}}return t})(),Lk=(()=>{class t extends NT{constructor(){super(...arguments),this.location=O(ts),this.urlSerializer=O(Xo),this.options=O(ra,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(cg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Tn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=gT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof us)this.stateMemento=this.createStateMemento();else if(n instanceof sr)this.rawUrlTree=r.initialUrl;else if(n instanceof Zu){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof Go?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Dn&&(n.code===_t.GuardRejected||n.code===_t.NoDataFromResolver)?this.restoreHistory(r):n instanceof zo?this.restoreHistory(r,!0):n instanceof bn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Tn?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=k(k({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=k(k({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=zf(t)))(i||t)}})()}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Uo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Uo||{});function MT(t,e){t.events.pipe(Dt(n=>n instanceof bn||n instanceof Dn||n instanceof zo||n instanceof sr),ie(n=>n instanceof bn||n instanceof sr?Uo.COMPLETE:(n instanceof Dn?n.code===_t.Redirect||n.code===_t.SupersededByNewNavigation:!1)?Uo.REDIRECTING:Uo.FAILED),Dt(n=>n!==Uo.REDIRECTING),yn(1)).subscribe(()=>{e()})}function Fk(t){throw t}var Vk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Uk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},or=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=O(ku),this.stateManager=O(NT),this.options=O(ra,{optional:!0})||{},this.pendingTasks=O(Yi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O(ug),this.urlSerializer=O(Xo),this.location=O(ts),this.urlHandlingStrategy=O(cg),this._events=new it,this.errorHandler=this.options.errorHandler||Fk,this.navigated=!1,this.routeReuseStrategy=O(Ok),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O(Zo,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(ol,{optional:!0}),this.eventsSubscription=new Ce,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Dn&&r.code!==_t.Redirect&&r.code!==_t.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof bn)this.navigated=!0;else if(r instanceof ls){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=k({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Pk(i.source)},o);this.scheduleNavigation(a,Bo,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Bk(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Bo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=k({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(og),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=k(k({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=dT(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return hT(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Ho(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Bo,null,r)}navigate(n,r={skipLocationChange:!1}){return jk(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=k({},Vk):r===!1?i=k({},Uk):i=r,Ho(n))return zD(this.currentUrlTree,n,i);let s=this.parseUrl(n);return zD(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return MT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function jk(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new $(4008,!1)}function Bk(t){return!(t instanceof Go)&&!(t instanceof ls)}var sl=class{};var $k=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Dt(n=>n instanceof bn),Ar(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Ou(s.providers,n,`Route: ${s.path}`));let o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Re(i).pipe(Ci())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=K(null);let s=i.pipe(Me(o=>o===null?K(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Re([s,o]).pipe(Ci())}else return s})}static{this.\u0275fac=function(r){return new(r||t)(G(or),G(Vu),G(mt),G(sl),G(ag))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),xT=new H(""),Hk=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof us?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof bn?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof sr&&n.code===Yu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Ju&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ju(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){LE()}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac})}}return t})();function u9(t,...e){return Yt([{provide:Zo,multi:!0,useValue:t},[],{provide:Br,useFactory:PT,deps:[or]},{provide:Fu,multi:!0,useFactory:OT},e.map(n=>n.\u0275providers)])}function PT(t){return t.routerState.root}function ia(t,e){return{\u0275kind:t,\u0275providers:e}}function OT(){let t=O(Ye);return e=>{let n=t.get(Fr);if(e!==n.components[0])return;let r=t.get(or),i=t.get(kT);t.get(lg)===1&&r.initialNavigation(),t.get(LT,null,te.Optional)?.setUpPreloading(),t.get(xT,null,te.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var kT=new H("",{factory:()=>new it}),lg=new H("",{providedIn:"root",factory:()=>1});function qk(){return ia(2,[{provide:lg,useValue:0},{provide:Lu,multi:!0,deps:[Ye],useFactory:e=>{let n=e.get(xD,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(or),s=e.get(kT);MT(i,()=>{r(!0)}),e.get(ug).afterPreactivation=()=>(r(!0),s.closed?K(void 0):s),i.initialNavigation()}))}}])}function zk(){return ia(3,[{provide:Lu,multi:!0,useFactory:()=>{let e=O(or);return()=>{e.setUpLocationChangeListener()}}},{provide:lg,useValue:2}])}var LT=new H("");function Gk(t){return ia(0,[{provide:LT,useExisting:$k},{provide:sl,useExisting:t}])}function Wk(){return ia(8,[QD,{provide:ol,useExisting:QD}])}function Kk(t){let e=[{provide:AT,useValue:Nk},{provide:RT,useValue:k({skipNextTransition:!!t?.skipInitialTransition},t)}];return ia(9,e)}var XD=new H("ROUTER_FORROOT_GUARD"),Qk=[ts,{provide:Xo,useClass:cs},or,ta,{provide:Br,useFactory:PT,deps:[or]},ag,[]],l9=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[Qk,[],{provide:Zo,multi:!0,useValue:n},{provide:XD,useFactory:Xk,deps:[[or,new Ze,new Mf]]},{provide:ra,useValue:r||{}},r?.useHash?Zk():Jk(),Yk(),r?.preloadingStrategy?Gk(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?e1(r):[],r?.bindToComponentInputs?Wk().\u0275providers:[],r?.enableViewTransitions?Kk().\u0275providers:[],t1()]}}static forChild(n){return{ngModule:t,providers:[{provide:Zo,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||t)(G(XD,8))}}static{this.\u0275mod=So({type:t})}static{this.\u0275inj=bo({})}}return t})();function Yk(){return{provide:xT,useFactory:()=>{let t=O(LD),e=O(ge),n=O(ra),r=O(ug),i=O(Xo);return n.scrollOffset&&t.setOffset(n.scrollOffset),new Hk(i,r,t,e,n)}}}function Zk(){return{provide:Vr,useClass:OD}}function Jk(){return{provide:Vr,useClass:_p}}function Xk(t){return"guarded"}function e1(t){return[t.initialNavigation==="disabled"?zk().\u0275providers:[],t.initialNavigation==="enabledBlocking"?qk().\u0275providers:[]]}var eT=new H("");function t1(){return[{provide:eT,useFactory:OT},{provide:Fu,multi:!0,useExisting:eT}]}var VT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},n1=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},UT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,_=l&63;u||(_=64,o||(m=64)),r.push(n[h],n[p],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):n1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new hg;let m=s<<2|a>>4;if(r.push(m),l!==64){let _=a<<4&240|l>>2;if(r.push(_),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},hg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},r1=function(t){let e=VT(t);return UT.encodeByteArray(e,!0)},sa=function(t){return r1(t).replace(/\./g,"")},pg=function(t){try{return UT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function i1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var s1=()=>i1().__FIREBASE_DEFAULTS__,o1=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},a1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&pg(t[1]);return e&&JSON.parse(e)},ul=()=>{try{return s1()||o1()||a1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gg=t=>{var e,n;return(n=(e=ul())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},jT=t=>{let e=gg(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mg=()=>{var t;return(t=ul())===null||t===void 0?void 0:t.config},yg=t=>{var e;return(e=ul())===null||e===void 0?void 0:e[`_${t}`]};var cl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function BT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[sa(JSON.stringify(n)),sa(JSON.stringify(o)),""].join(".")}function $e(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $T(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function c1(){var t;let e=(t=ul())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qT(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GT(){let t=$e();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function WT(){return!c1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vg(){try{return typeof indexedDB=="object"}catch{return!1}}function KT(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var u1="FirebaseError",It=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=u1,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cn.prototype.create)}},Cn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?l1(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new It(i,a,r)}};function l1(t,e){return t.replace(d1,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var d1=/\{\$([^}]+)}/g;function QT(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $r(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(FT(s)&&FT(o)){if(!$r(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function FT(t){return t!==null&&typeof t=="object"}function oa(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fs(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ps(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function YT(t,e){let n=new fg(t,e);return n.subscribe.bind(n)}var fg=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");h1(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=dg),i.error===void 0&&(i.error=dg),i.complete===void 0&&(i.complete=dg);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function h1(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dg(){}var f9=4*60*60*1e3;function Ve(t){return t&&t._delegate?t._delegate:t}var Mt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Hr="[DEFAULT]";var _g=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new cl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(p1(e))try{this.getOrInitializeService({instanceIdentifier:Hr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Hr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Hr){return this.instances.has(e)}getOptions(e=Hr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:f1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hr){return this.component?this.component.multipleInstances?e:Hr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function f1(t){return t===Hr?void 0:t}function p1(t){return t.instantiationMode==="EAGER"}var ll=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new _g(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var g1=[],ae=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ae||{}),m1={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},y1=ae.INFO,v1={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},_1=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=v1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},cr=class{constructor(e){this.name=e,this._logLevel=y1,this._logHandler=_1,this._userLogHandler=null,g1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?m1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}};var I1=(t,e)=>e.some(n=>t instanceof n),ZT,JT;function w1(){return ZT||(ZT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E1(){return JT||(JT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var XT=new WeakMap,wg=new WeakMap,eb=new WeakMap,Ig=new WeakMap,Dg=new WeakMap;function D1(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(tn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&XT.set(n,t)}).catch(()=>{}),Dg.set(e,t),e}function T1(t){if(wg.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});wg.set(t,e)}var Eg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||eb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tb(t){Eg=t(Eg)}function b1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(dl(this),e,...n);return eb.set(r,e.sort?e.sort():[e]),tn(r)}:E1().includes(t)?function(...e){return t.apply(dl(this),e),tn(XT.get(this))}:function(...e){return tn(t.apply(dl(this),e))}}function C1(t){return typeof t=="function"?b1(t):(t instanceof IDBTransaction&&T1(t),I1(t,w1())?new Proxy(t,Eg):t)}function tn(t){if(t instanceof IDBRequest)return D1(t);if(Ig.has(t))return Ig.get(t);let e=C1(t);return e!==t&&(Ig.set(t,e),Dg.set(e,t)),e}var dl=t=>Dg.get(t);function rb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=tn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(tn(o.result),u.oldVersion,u.newVersion,tn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var S1=["get","getKey","getAll","getAllKeys","count"],A1=["put","add","delete","clear"],Tg=new Map;function nb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tg.get(e))return Tg.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=A1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||S1.includes(n)))return;let s=function(o,...a){return v(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Tg.set(e,s),s}tb(t=>ye(k({},t),{get:(e,n,r)=>nb(e,n)||t.get(e,n,r),has:(e,n)=>!!nb(e,n)||t.has(e,n)}));var Cg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(R1(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function R1(t){let e=t.getComponent();return e?.type==="VERSION"}var Sg="@firebase/app",ib="0.10.13";var Sn=new cr("@firebase/app"),N1="@firebase/app-compat",M1="@firebase/analytics-compat",x1="@firebase/analytics",P1="@firebase/app-check-compat",O1="@firebase/app-check",k1="@firebase/auth",L1="@firebase/auth-compat",F1="@firebase/database",V1="@firebase/data-connect",U1="@firebase/database-compat",j1="@firebase/functions",B1="@firebase/functions-compat",$1="@firebase/installations",H1="@firebase/installations-compat",q1="@firebase/messaging",z1="@firebase/messaging-compat",G1="@firebase/performance",W1="@firebase/performance-compat",K1="@firebase/remote-config",Q1="@firebase/remote-config-compat",Y1="@firebase/storage",Z1="@firebase/storage-compat",J1="@firebase/firestore",X1="@firebase/vertexai-preview",eL="@firebase/firestore-compat",tL="firebase",nL="10.14.1";var Ag="[DEFAULT]",rL={[Sg]:"fire-core",[N1]:"fire-core-compat",[x1]:"fire-analytics",[M1]:"fire-analytics-compat",[O1]:"fire-app-check",[P1]:"fire-app-check-compat",[k1]:"fire-auth",[L1]:"fire-auth-compat",[F1]:"fire-rtdb",[V1]:"fire-data-connect",[U1]:"fire-rtdb-compat",[j1]:"fire-fn",[B1]:"fire-fn-compat",[$1]:"fire-iid",[H1]:"fire-iid-compat",[q1]:"fire-fcm",[z1]:"fire-fcm-compat",[G1]:"fire-perf",[W1]:"fire-perf-compat",[K1]:"fire-rc",[Q1]:"fire-rc-compat",[Y1]:"fire-gcs",[Z1]:"fire-gcs-compat",[J1]:"fire-fst",[eL]:"fire-fst-compat",[X1]:"fire-vertex","fire-js":"fire-js",[tL]:"fire-js-all"};var aa=new Map,iL=new Map,Rg=new Map;function sb(t,e){try{t.container.addComponent(e)}catch(n){Sn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function lr(t){let e=t.name;if(Rg.has(e))return Sn.debug(`There were multiple attempts to register component ${e}.`),!1;Rg.set(e,t);for(let n of aa.values())sb(n,t);for(let n of iL.values())sb(n,t);return!0}function ua(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jt(t){return t.settings!==void 0}var sL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ur=new Cn("app","Firebase",sL);var Ng=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ur.create("app-deleted",{appName:this._name})}};var dr=nL;function Pg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ag,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ur.create("bad-app-name",{appName:String(i)});if(n||(n=mg()),!n)throw ur.create("no-options");let s=aa.get(i);if(s){if($r(n,s.options)&&$r(r,s.config))return s;throw ur.create("duplicate-app",{appName:i})}let o=new ll(i);for(let u of Rg.values())o.addComponent(u);let a=new Ng(n,r,o);return aa.set(i,a),a}function gs(t=Ag){let e=aa.get(t);if(!e&&t===Ag&&mg())return Pg();if(!e)throw ur.create("no-app",{appName:t});return e}function hl(){return Array.from(aa.values())}function Ue(t,e,n){var r;let i=(r=rL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sn.warn(a.join(" "));return}lr(new Mt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var oL="firebase-heartbeat-database",aL=1,ca="firebase-heartbeat-store",bg=null;function ub(){return bg||(bg=rb(oL,aL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ca)}catch(n){console.warn(n)}}}}).catch(t=>{throw ur.create("idb-open",{originalErrorMessage:t.message})})),bg}function cL(t){return v(this,null,function*(){try{let n=(yield ub()).transaction(ca),r=yield n.objectStore(ca).get(lb(t));return yield n.done,r}catch(e){if(e instanceof It)Sn.warn(e.message);else{let n=ur.create("idb-get",{originalErrorMessage:e?.message});Sn.warn(n.message)}}})}function ob(t,e){return v(this,null,function*(){try{let r=(yield ub()).transaction(ca,"readwrite");yield r.objectStore(ca).put(e,lb(t)),yield r.done}catch(n){if(n instanceof It)Sn.warn(n.message);else{let r=ur.create("idb-set",{originalErrorMessage:n?.message});Sn.warn(r.message)}}})}function lb(t){return`${t.name}!${t.options.appId}`}var uL=1024,lL=30*24*60*60*1e3,Mg=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new xg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ab();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=lL}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Sn.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=ab(),{heartbeatsToSend:r,unsentEntries:i}=dL(this._heartbeatsCache.heartbeats),s=sa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Sn.warn(n),""}})}};function ab(){return new Date().toISOString().substring(0,10)}function dL(t,e=uL){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),cb(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),cb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var xg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return vg()?KT().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield cL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ob(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ob(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function cb(t){return sa(JSON.stringify({version:2,heartbeats:t})).length}function hL(t){lr(new Mt("platform-logger",e=>new Cg(e),"PRIVATE")),lr(new Mt("heartbeat",e=>new Mg(e),"PRIVATE")),Ue(Sg,ib,t),Ue(Sg,ib,"esm2017"),Ue("fire-js","")}hL("");var fL="firebase",pL="10.14.1";Ue(fL,pL,"app");var zr=new rr("ANGULARFIRE2_VERSION");function pl(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var la=(t,e)=>{let n=e?[e]:hl(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ys=class{constructor(){return la(gL)}},gL="app-check";function ms(){}var fl=class{zone;delegate;constructor(e,n=yh){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Og=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ms,{},ms,ms)),n.pipe(Le({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},vs=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new fl(Zone.current)),this.insideAngular=n.run(()=>new fl(Zone.current,mh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(G(ge))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function gl(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function mL(t){return gl().ngZone.runOutsideAngular(()=>t())}function qr(t){return gl().ngZone.run(()=>t())}function yL(t){return vL(gl())(t)}function vL(t){return function(n){return n=n.lift(new Og(t.ngZone)),n.pipe(Gn(t.outsideAngular),zn(t.insideAngular))}}var _L=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),qr(()=>t.apply(void 0,r))},Je=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=qr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ms,{},ms,ms))),r[s]=_L(r[s],n));let i=mL(()=>t.apply(this,r));if(!e)if(i instanceof ue){let s=gl();return i.pipe(Gn(s.outsideAngular),zn(s.insideAngular))}else return qr(()=>i);return i instanceof ue?i.pipe(yL):i instanceof Promise?qr(()=>new Promise((s,o)=>i.then(a=>qr(()=>s(a)),a=>qr(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:qr(()=>i)};var An=class{constructor(e){return e}},Gr=class{constructor(){return hl()}};function IL(t){return t&&t.length===1?t[0]:new An(gs())}var kg=new H("angularfire2._apps"),wL={provide:An,useFactory:IL,deps:[[new Ze,kg]]},EL={provide:Gr,deps:[[new Ze,kg]]};function DL(t){return(e,n)=>{let r=n.get(Jt);Ue("angularfire",zr.full,"core"),Ue("angularfire",zr.full,"app"),Ue("angular",yD.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new An(i)}}function X9(t,...e){return Yt([wL,EL,{provide:kg,useFactory:DL(t),multi:!0,deps:[ge,Ye,vs,...e]}])}var eW=Je(Pg,!0);function Sb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Ab=Sb,Rb=new Cn("auth","Firebase",Sb());var wl=new cr("@firebase/auth");function TL(t,...e){wl.logLevel<=ae.WARN&&wl.warn(`Auth (${dr}): ${t}`,...e)}function yl(t,...e){wl.logLevel<=ae.ERROR&&wl.error(`Auth (${dr}): ${t}`,...e)}function rn(t,...e){throw im(t,...e)}function Wr(t,...e){return im(t,...e)}function Nb(t,e,n){let r=Object.assign(Object.assign({},Ab()),{[e]:n});return new Cn("auth","Firebase",r).create(e,{appName:t.name})}function Mn(t){return Nb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function im(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Rb.create(t,...e)}function j(t,e,...n){if(!t)throw im(e,...n)}function Rn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw yl(e),new Error(e)}function fr(t,e){t||Rn(e)}function Ug(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function bL(){return db()==="http:"||db()==="https:"}function db(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function CL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bL()||qT()||"connection"in navigator)?navigator.onLine:!0}function SL(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Kr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,fr(n>e,"Short delay should be less than long delay!"),this.isMobile=$T()||zT()}get(){return CL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function sm(t,e){fr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var El=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var AL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var RL=new Kr(3e4,6e4);function xn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Pn(s,o,a,u){return v(this,arguments,function*(t,e,n,r,i={}){return Mb(t,i,()=>v(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=oa(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let _=Object.assign({method:e,headers:m},l);return HT()||(_.referrerPolicy="no-referrer"),El.fetch()(xb(t,t.config.apiHost,n,p),_)}))})}function Mb(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},AL),e);try{let i=new jg(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw ml(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ml(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw ml(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw ml(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Nb(t,h,l);rn(t,h)}}catch(i){if(i instanceof It)throw i;rn(t,"network-request-failed",{message:String(i)})}})}function va(s,o,a,u){return v(this,arguments,function*(t,e,n,r,i={}){let l=yield Pn(t,e,n,r,i);return"mfaPendingCredential"in l&&rn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function xb(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?sm(t.config,i):`${t.config.apiScheme}://${i}`}function NL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var jg=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Wr(this.auth,"network-request-failed")),RL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ml(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Wr(t,e,r);return i.customData._tokenResponse=n,i}function hb(t){return t!==void 0&&t.enterprise!==void 0}var Bg=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return NL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function ML(t,e){return v(this,null,function*(){return Pn(t,"GET","/v2/recaptchaConfig",xn(t,e))})}function xL(t,e){return v(this,null,function*(){return Pn(t,"POST","/v1/accounts:delete",e)})}function Pb(t,e){return v(this,null,function*(){return Pn(t,"POST","/v1/accounts:lookup",e)})}function da(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function om(t,e=!1){return v(this,null,function*(){let n=Ve(t),r=yield n.getIdToken(e),i=am(r);j(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:da(Lg(i.auth_time)),issuedAtTime:da(Lg(i.iat)),expirationTime:da(Lg(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Lg(t){return Number(t)*1e3}function am(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return yl("JWT malformed, contained fewer than 3 sections"),null;try{let i=pg(n);return i?JSON.parse(i):(yl("Failed to decode base64 JWT payload"),null)}catch(i){return yl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function fb(t){let e=am(t);return j(e,"internal-error"),j(typeof e.exp<"u","internal-error"),j(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function fa(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof It&&PL(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function PL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var $g=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var pa=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=da(this.lastLoginAt),this.creationTime=da(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Dl(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield fa(t,Pb(n,{idToken:r}));j(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Ob(s.providerUserInfo):[],a=OL(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new pa(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function cm(t){return v(this,null,function*(){let e=Ve(t);yield Dl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function OL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Ob(t){return t.map(e=>{var{providerId:n}=e,r=vh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function kL(t,e){return v(this,null,function*(){let n=yield Mb(t,{},()=>v(this,null,function*(){let r=oa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=xb(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",El.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function LL(t,e){return v(this,null,function*(){return Pn(t,"POST","/v2/accounts:revokeToken",xn(t,e))})}var ha=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,"internal-error"),j(typeof e.idToken<"u","internal-error"),j(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){j(e.length!==0,"internal-error");let n=fb(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(j(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield kL(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(j(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(j(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(j(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Rn("not implemented")}};function hr(t,e){j(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var _s=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=vh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $g(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new pa(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield fa(this,this.stsTokenManager.getToken(this.auth,e));return j(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return om(this,e)}reload(){return cm(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Dl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(jt(this.auth.app))return Promise.reject(Mn(this.auth));let e=yield this.getIdToken();return yield fa(this,xL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,L=(l=n.createdAt)!==null&&l!==void 0?l:void 0,B=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:z,emailVerified:ne,isAnonymous:Te,providerData:Z,stsTokenManager:D}=n;j(z&&D,e,"internal-error");let y=ha.fromJSON(this.name,D);j(typeof z=="string",e,"internal-error"),hr(p,e.name),hr(m,e.name),j(typeof ne=="boolean",e,"internal-error"),j(typeof Te=="boolean",e,"internal-error"),hr(_,e.name),hr(S,e.name),hr(N,e.name),hr(R,e.name),hr(L,e.name),hr(B,e.name);let I=new t({uid:z,auth:e,email:m,emailVerified:ne,displayName:p,isAnonymous:Te,photoURL:S,phoneNumber:_,tenantId:N,stsTokenManager:y,createdAt:L,lastLoginAt:B});return Z&&Array.isArray(Z)&&(I.providerData=Z.map(E=>Object.assign({},E))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new ha;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Dl(s),s})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];j(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Ob(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ha;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new pa(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var pb=new Map;function Nn(t){fr(t instanceof Function,"Expected a class definition");let e=pb.get(t);return e?(fr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pb.set(t,e),e)}var FL=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Hg=FL;function vl(t,e,n){return`firebase:${t}:${e}:${n}`}var Tl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=vl(this.userKey,i.apiKey,s),this.fullPersistenceKey=vl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?_s._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(Nn(Hg),e,r);let i=(yield Promise.all(n.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Nn(Hg),o=vl(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=_s._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>v(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function gb(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jb(e))return"Blackberry";if(Bb(e))return"Webos";if(Lb(e))return"Safari";if((e.includes("chrome/")||Fb(e))&&!e.includes("edge/"))return"Chrome";if(Ub(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function kb(t=$e()){return/firefox\//i.test(t)}function Lb(t=$e()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fb(t=$e()){return/crios\//i.test(t)}function Vb(t=$e()){return/iemobile/i.test(t)}function Ub(t=$e()){return/android/i.test(t)}function jb(t=$e()){return/blackberry/i.test(t)}function Bb(t=$e()){return/webos/i.test(t)}function um(t=$e()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function VL(t=$e()){var e;return um(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UL(){return GT()&&document.documentMode===10}function $b(t=$e()){return um(t)||Ub(t)||Bb(t)||jb(t)||/windows phone/i.test(t)||Vb(t)}function Hb(t,e=[]){let n;switch(t){case"Browser":n=gb($e());break;case"Worker":n=`${gb($e())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${dr}/${r}`}var qg=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function jL(n){return v(this,arguments,function*(t,e={}){return Pn(t,"GET","/v2/passwordPolicy",xn(t,e))})}var BL=6,zg=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:BL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Gg=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bl(this),this.idTokenSubscription=new bl(this),this.beforeStateQueue=new qg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Nn(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Tl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield Pb(this,{idToken:e}),r=yield _s._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(jt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return j(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Dl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=SL()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(jt(this.app))return Promise.reject(Mn(this));let n=e?Ve(e):null;return n&&j(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&j(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return jt(this.app)?Promise.reject(Mn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return jt(this.app)?Promise.reject(Mn(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Nn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield jL(this),n=new zg(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Cn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield LL(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Nn(e)||this._popupRedirectResolver;j(n,this,"argument-error"),this.redirectPersistenceManager=yield Tl.create(this,[Nn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(j(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&TL(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Yr(t){return Ve(t)}var bl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=YT(n=>this.observer=n)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var xl={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $L(t){xl=t}function qb(t){return xl.loadJS(t)}function HL(){return xl.recaptchaEnterpriseScript}function qL(){return xl.gapiScript}function zb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var zL="recaptcha-enterprise",GL="NO_RECAPTCHA",Wg=class{constructor(e){this.type=zL,this.auth=Yr(e)}verify(e="verify",n=!1){return v(this,null,function*(){function r(s){return v(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>v(this,null,function*(){ML(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Bg(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;hb(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(GL)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&hb(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=HL();u.length!==0&&(u+=a),qb(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function mb(t,e,n,r=!1){return v(this,null,function*(){let i=new Wg(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Kg(t,e,n,r){return v(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield mb(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>v(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield mb(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function lm(t,e){let n=ua(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if($r(s,e??{}))return i;rn(i,"already-initialized")}return n.initialize({options:e})}function WL(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Nn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function dm(t,e,n){let r=Yr(t);j(r._canInitEmulator,r,"emulator-config-failed"),j(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=Gb(e),{host:o,port:a}=KL(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||QL()}function Gb(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function KL(t){let e=Gb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:yb(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:yb(o)}}}function yb(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function QL(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var ga=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Rn("not implemented")}_getIdTokenResponse(e){return Rn("not implemented")}_linkToIdToken(e,n){return Rn("not implemented")}_getReauthenticationResolver(e){return Rn("not implemented")}};function YL(t,e){return v(this,null,function*(){return Pn(t,"POST","/v1/accounts:signUp",e)})}function ZL(t,e){return v(this,null,function*(){return va(t,"POST","/v1/accounts:signInWithPassword",xn(t,e))})}function JL(t,e){return v(this,null,function*(){return Pn(t,"POST","/v1/accounts:sendOobCode",xn(t,e))})}function XL(t,e){return v(this,null,function*(){return JL(t,e)})}function eF(t,e){return v(this,null,function*(){return va(t,"POST","/v1/accounts:signInWithEmailLink",xn(t,e))})}function tF(t,e){return v(this,null,function*(){return va(t,"POST","/v1/accounts:signInWithEmailLink",xn(t,e))})}var ma=class t extends ga{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kg(e,n,"signInWithPassword",ZL);case"emailLink":return eF(e,{email:this._email,oobCode:this._password});default:rn(e,"internal-error")}})}_linkToIdToken(e,n){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kg(e,r,"signUpPassword",YL);case"emailLink":return tF(e,{idToken:n,email:this._email,oobCode:this._password});default:rn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Fg(t,e){return v(this,null,function*(){return va(t,"POST","/v1/accounts:signInWithIdp",xn(t,e))})}function nF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rF(t){let e=fs(ps(t)).link,n=e?fs(ps(e)).deep_link_id:null,r=fs(ps(t)).deep_link_id;return(r?fs(ps(r)).link:null)||r||n||e||t}var Cl=class t{constructor(e){var n,r,i,s,o,a;let u=fs(ps(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=nF((i=u.mode)!==null&&i!==void 0?i:null);j(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=rF(e);try{return new t(n)}catch{return null}}};var Wb=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return ma._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Cl.parseLink(r);return j(i,"argument-error"),ma._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Sl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Qg=class extends Sl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function iF(t,e){return v(this,null,function*(){return va(t,"POST","/v1/accounts:signUp",xn(t,e))})}var Is=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return v(this,null,function*(){let s=yield _s._fromIdTokenResponse(e,r,i),o=vb(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=vb(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function vb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Yg=class t extends It{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function Kb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Yg._fromErrorAndOperation(t,s,e,r):s})}function sF(t,e,n=!1){return v(this,null,function*(){let r=yield fa(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Is._forOperation(t,"link",r)})}function oF(t,e,n=!1){return v(this,null,function*(){let{auth:r}=t;if(jt(r.app))return Promise.reject(Mn(r));let i="reauthenticate";try{let s=yield fa(t,Kb(r,i,e,t),n);j(s.idToken,r,"internal-error");let o=am(s.idToken);j(o,r,"internal-error");let{sub:a}=o;return j(t.uid===a,r,"user-mismatch"),Is._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&rn(r,"user-mismatch"),s}})}function Qb(t,e,n=!1){return v(this,null,function*(){if(jt(t.app))return Promise.reject(Mn(t));let r="signIn",i=yield Kb(t,r,e),s=yield Is._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function hm(t,e){return v(this,null,function*(){return Qb(Yr(t),e)})}function aF(t,e,n){var r;j(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),j(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(j(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(j(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}function Yb(t){return v(this,null,function*(){let e=Yr(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function fm(t,e,n){return v(this,null,function*(){if(jt(t.app))return Promise.reject(Mn(t));let r=Yr(t),o=yield Kg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iF).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Yb(t),u}),a=yield Is._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function pm(t,e,n){return jt(t.app)?Promise.reject(Mn(t)):hm(Ve(t),Wb.credential(e,n)).catch(r=>v(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Yb(t),r}))}function gm(t,e){return v(this,null,function*(){let n=Ve(t),i={requestType:"VERIFY_EMAIL",idToken:yield t.getIdToken()};e&&aF(n.auth,i,e);let{email:s}=yield XL(n.auth,i);s!==t.email&&(yield t.reload())})}function mm(t,e,n,r){return Ve(t).onIdTokenChanged(e,n,r)}function ym(t,e,n){return Ve(t).beforeAuthStateChanged(e,n)}function vm(t){return Ve(t).signOut()}var Al="__sak";var Rl=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Al,"1"),this.storage.removeItem(Al),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var cF=1e3,uF=10,lF=(()=>{class t extends Rl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$b(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);UL()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,uF):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},cF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return v(this,null,function*(){yield Hn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return v(this,null,function*(){let r=yield Hn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return v(this,null,function*(){yield Hn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),Zb=lF;var dF=(()=>{class t extends Rl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),_m=dF;function hF(t){return Promise.all(t.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var fF=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return v(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,o)})),l=yield hF(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function Jb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Zg=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=Jb("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function nn(){return window}function pF(t){nn().location.href=t}function Xb(){return typeof nn().WorkerGlobalScope<"u"&&typeof nn().importScripts=="function"}function gF(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function mF(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function yF(){return Xb()?self:null}var eC="firebaseLocalStorageDb",vF=1,Nl="firebaseLocalStorage",tC="fbase_key",Qr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Pl(t,e){return t.transaction([Nl],e?"readwrite":"readonly").objectStore(Nl)}function _F(){let t=indexedDB.deleteDatabase(eC);return new Qr(t).toPromise()}function Jg(){let t=indexedDB.open(eC,vF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Nl,{keyPath:tC})}catch(i){n(i)}}),t.addEventListener("success",()=>v(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Nl)?e(r):(r.close(),yield _F(),e(yield Jg()))}))})}function _b(t,e,n){return v(this,null,function*(){let r=Pl(t,!0).put({[tC]:e,value:n});return new Qr(r).toPromise()})}function IF(t,e){return v(this,null,function*(){let n=Pl(t,!1).get(e),r=yield new Qr(n).toPromise();return r===void 0?null:r.value})}function Ib(t,e){let n=Pl(t,!0).delete(e);return new Qr(n).toPromise()}var wF=800,EF=3,DF=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield Jg(),this.db)})}_withRetries(n){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>EF)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return Xb()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=fF._getInstance(yF()),this.receiver._subscribe("keyChanged",(n,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var n,r;if(this.activeServiceWorker=yield gF(),!this.activeServiceWorker)return;this.sender=new Zg(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||mF()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Jg();return yield _b(n,Al,"1"),yield Ib(n,Al),!0}catch{}return!1})}_withPendingWrite(n){return v(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>_b(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return v(this,null,function*(){let r=yield this._withRetries(i=>IF(i,n));return this.localCache[n]=r,r})}_remove(n){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>Ib(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return v(this,null,function*(){let n=yield this._withRetries(s=>{let o=Pl(s,!1).getAll();return new Qr(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),wF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),nC=DF;var cW=zb("rcb"),uW=new Kr(3e4,6e4);function TF(t,e){return e?Nn(e):(j(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var ya=class extends ga{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fg(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fg(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fg(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function bF(t){return Qb(t.auth,new ya(t),t.bypassAuthState)}function CF(t){let{auth:e,user:n}=t;return j(n,e,"internal-error"),oF(n,new ya(t),t.bypassAuthState)}function SF(t){return v(this,null,function*(){let{auth:e,user:n}=t;return j(n,e,"internal-error"),sF(n,new ya(t),t.bypassAuthState)})}var Xg=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bF;case"linkViaPopup":case"linkViaRedirect":return SF;case"reauthViaPopup":case"reauthViaRedirect":return CF;default:rn(this.auth,"internal-error")}}resolve(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var lW=new Kr(2e3,1e4);var AF="pendingRedirect",_l=new Map,em=class t extends Xg{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=_l.get(this.auth._key());if(!e){try{let r=(yield RF(this.resolver,this.auth))?yield Hn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_l.set(this.auth._key(),e)}return this.bypassAuthState||_l.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Hn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Hn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function RF(t,e){return v(this,null,function*(){let n=xF(e),r=MF(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function NF(t,e){_l.set(t._key(),e)}function MF(t){return Nn(t._redirectPersistence)}function xF(t){return vl(AF,t.config.apiKey,t.name)}function PF(t,e,n=!1){return v(this,null,function*(){if(jt(t.app))return Promise.reject(Mn(t));let r=Yr(t),i=TF(r,e),o=yield new em(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var OF=10*60*1e3,tm=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!rC(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Wr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OF&&this.cachedEventUids.clear(),this.cachedEventUids.has(wb(e))}saveEventToCache(e){this.cachedEventUids.add(wb(e)),this.lastProcessedEventTime=Date.now()}};function wb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function rC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function kF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rC(t);default:return!1}}function LF(n){return v(this,arguments,function*(t,e={}){return Pn(t,"GET","/v1/projects",e)})}var FF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VF=/^https?/;function UF(t){return v(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield LF(t);for(let n of e)try{if(jF(n))return}catch{}rn(t,"unauthorized-domain")})}function jF(t){let e=Ug(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!VF.test(n))return!1;if(FF.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var BF=new Kr(3e4,6e4);function Eb(){let t=nn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $F(t){return new Promise((e,n)=>{var r,i,s;function o(){Eb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Eb(),n(Wr(t,"network-request-failed"))},timeout:BF.get()})}if(!((i=(r=nn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=nn().gapi)===null||s===void 0)&&s.load)o();else{let a=zb("iframefcb");return nn()[a]=()=>{gapi.load?o():n(Wr(t,"network-request-failed"))},qb(`${qL()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Il=null,e})}var Il=null;function HF(t){return Il=Il||$F(t),Il}var qF=new Kr(5e3,15e3),zF="__/auth/iframe",GF="emulator/auth/iframe",WF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QF(t){let e=t.config;j(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?sm(e,GF):`https://${t.config.authDomain}/${zF}`,r={apiKey:e.apiKey,appName:t.name,v:dr},i=KF.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${oa(r).slice(1)}`}function YF(t){return v(this,null,function*(){let e=yield HF(t),n=nn().gapi;return j(n,t,"internal-error"),e.open({where:document.body,url:QF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WF,dontclear:!0},r=>new Promise((i,s)=>v(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Wr(t,"network-request-failed"),a=nn().setTimeout(()=>{s(o)},qF.get());function u(){nn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var ZF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JF=500,XF=600,eV="_blank",tV="http://localhost",Ml=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function nV(t,e,n,r=JF,i=XF){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},ZF),{width:r.toString(),height:i.toString(),top:s,left:o}),l=$e().toLowerCase();n&&(a=Fb(l)?eV:n),kb(l)&&(e=e||tV,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[_,S])=>`${m}${_}=${S},`,"");if(VL(l)&&a!=="_self")return rV(e||"",a),new Ml(null);let p=window.open(e||"",a,h);j(p,t,"popup-blocked");try{p.focus()}catch{}return new Ml(p)}function rV(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var iV="__/auth/handler",sV="emulator/auth/handler",oV=encodeURIComponent("fac");function Db(t,e,n,r,i,s){return v(this,null,function*(){j(t.config.authDomain,t,"auth-domain-config-required"),j(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:dr,eventId:i};if(e instanceof Sl){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",QT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof Qg){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${oV}=${encodeURIComponent(u)}`:"";return`${aV(t)}?${oa(a).slice(1)}${l}`})}function aV({config:t}){return t.emulator?sm(t,sV):`https://${t.authDomain}/${iV}`}var Vg="webStorageSupport",nm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_m,this._completeRedirectFn=PF,this._overrideRedirectResult=NF}_openPopup(e,n,r,i){return v(this,null,function*(){var s;fr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield Db(e,n,r,Ug(),i);return nV(e,o,Jb())})}_openRedirect(e,n,r,i){return v(this,null,function*(){yield this._originValidation(e);let s=yield Db(e,n,r,Ug(),i);return pF(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(fr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return v(this,null,function*(){let n=yield YF(e),r=new tm(e);return n.register("authEvent",i=>(j(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vg,{type:Vg},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Vg];o!==void 0&&n(!!o),rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=UF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $b()||Lb()||um()}},iC=nm;var Tb="@firebase/auth",bb="1.7.9";var rm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function cV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uV(t){lr(new Mt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;j(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hb(t)},l=new Gg(r,i,s,u);return WL(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),lr(new Mt("auth-internal",e=>{let n=Yr(e.getProvider("auth").getImmediate());return(r=>new rm(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ue(Tb,bb,cV(t)),Ue(Tb,bb,"esm2017")}var lV=5*60,dV=yg("authIdTokenMaxAge")||lV,Cb=null,hV=t=>e=>v(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>dV)return;let i=n?.token;Cb!==i&&(Cb=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Im(t=gs()){let e=ua(t,"auth");if(e.isInitialized())return e.getImmediate();let n=lm(t,{popupRedirectResolver:iC,persistence:[nC,Zb,_m]}),r=yg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=hV(s.toString());ym(n,o,()=>o(n.currentUser)),mm(n,a=>o(a))}}let i=gg("auth");return i&&dm(n,`http://${i}`),n}function fV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$L({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Wr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",fV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uV("Browser");var sC="auth",Zr=class{constructor(e){return e}},_a=class{constructor(){return la(sC)}};var wm=new H("angularfire2.auth-instances");function nU(t,e){let n=pl(sC,t,e);return n&&new Zr(n)}function rU(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Zr(r)}}var iU={provide:_a,deps:[[new Ze,wm]]},sU={provide:Zr,useFactory:nU,deps:[[new Ze,wm],An]};function WW(t,...e){return Ue("angularfire",zr.full,"auth"),Yt([sU,iU,{provide:wm,useFactory:rU(t),multi:!0,deps:[ge,Ye,vs,Gr,[new Ze,ys],...e]}])}var oC=Je(fm,!0);var KW=Je(Im,!0);var aC=Je(gm,!0);var cC=Je(pm,!0);var uC=Je(vm,!0);var lC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dC={};var pr,Em;(function(){var t;function e(D,y){function I(){}I.prototype=y.prototype,D.D=y.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(E,T,C){for(var w=Array(arguments.length-2),hn=2;hn<arguments.length;hn++)w[hn-2]=arguments[hn];return y.prototype[T].apply(E,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,y,I){I||(I=0);var E=Array(16);if(typeof y=="string")for(var T=0;16>T;++T)E[T]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(T=0;16>T;++T)E[T]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=D.g[0],I=D.g[1],T=D.g[2];var C=D.g[3],w=y+(C^I&(T^C))+E[0]+3614090360&4294967295;y=I+(w<<7&4294967295|w>>>25),w=C+(T^y&(I^T))+E[1]+3905402710&4294967295,C=y+(w<<12&4294967295|w>>>20),w=T+(I^C&(y^I))+E[2]+606105819&4294967295,T=C+(w<<17&4294967295|w>>>15),w=I+(y^T&(C^y))+E[3]+3250441966&4294967295,I=T+(w<<22&4294967295|w>>>10),w=y+(C^I&(T^C))+E[4]+4118548399&4294967295,y=I+(w<<7&4294967295|w>>>25),w=C+(T^y&(I^T))+E[5]+1200080426&4294967295,C=y+(w<<12&4294967295|w>>>20),w=T+(I^C&(y^I))+E[6]+2821735955&4294967295,T=C+(w<<17&4294967295|w>>>15),w=I+(y^T&(C^y))+E[7]+4249261313&4294967295,I=T+(w<<22&4294967295|w>>>10),w=y+(C^I&(T^C))+E[8]+1770035416&4294967295,y=I+(w<<7&4294967295|w>>>25),w=C+(T^y&(I^T))+E[9]+2336552879&4294967295,C=y+(w<<12&4294967295|w>>>20),w=T+(I^C&(y^I))+E[10]+4294925233&4294967295,T=C+(w<<17&4294967295|w>>>15),w=I+(y^T&(C^y))+E[11]+2304563134&4294967295,I=T+(w<<22&4294967295|w>>>10),w=y+(C^I&(T^C))+E[12]+1804603682&4294967295,y=I+(w<<7&4294967295|w>>>25),w=C+(T^y&(I^T))+E[13]+4254626195&4294967295,C=y+(w<<12&4294967295|w>>>20),w=T+(I^C&(y^I))+E[14]+2792965006&4294967295,T=C+(w<<17&4294967295|w>>>15),w=I+(y^T&(C^y))+E[15]+1236535329&4294967295,I=T+(w<<22&4294967295|w>>>10),w=y+(T^C&(I^T))+E[1]+4129170786&4294967295,y=I+(w<<5&4294967295|w>>>27),w=C+(I^T&(y^I))+E[6]+3225465664&4294967295,C=y+(w<<9&4294967295|w>>>23),w=T+(y^I&(C^y))+E[11]+643717713&4294967295,T=C+(w<<14&4294967295|w>>>18),w=I+(C^y&(T^C))+E[0]+3921069994&4294967295,I=T+(w<<20&4294967295|w>>>12),w=y+(T^C&(I^T))+E[5]+3593408605&4294967295,y=I+(w<<5&4294967295|w>>>27),w=C+(I^T&(y^I))+E[10]+38016083&4294967295,C=y+(w<<9&4294967295|w>>>23),w=T+(y^I&(C^y))+E[15]+3634488961&4294967295,T=C+(w<<14&4294967295|w>>>18),w=I+(C^y&(T^C))+E[4]+3889429448&4294967295,I=T+(w<<20&4294967295|w>>>12),w=y+(T^C&(I^T))+E[9]+568446438&4294967295,y=I+(w<<5&4294967295|w>>>27),w=C+(I^T&(y^I))+E[14]+3275163606&4294967295,C=y+(w<<9&4294967295|w>>>23),w=T+(y^I&(C^y))+E[3]+4107603335&4294967295,T=C+(w<<14&4294967295|w>>>18),w=I+(C^y&(T^C))+E[8]+1163531501&4294967295,I=T+(w<<20&4294967295|w>>>12),w=y+(T^C&(I^T))+E[13]+2850285829&4294967295,y=I+(w<<5&4294967295|w>>>27),w=C+(I^T&(y^I))+E[2]+4243563512&4294967295,C=y+(w<<9&4294967295|w>>>23),w=T+(y^I&(C^y))+E[7]+1735328473&4294967295,T=C+(w<<14&4294967295|w>>>18),w=I+(C^y&(T^C))+E[12]+2368359562&4294967295,I=T+(w<<20&4294967295|w>>>12),w=y+(I^T^C)+E[5]+4294588738&4294967295,y=I+(w<<4&4294967295|w>>>28),w=C+(y^I^T)+E[8]+2272392833&4294967295,C=y+(w<<11&4294967295|w>>>21),w=T+(C^y^I)+E[11]+1839030562&4294967295,T=C+(w<<16&4294967295|w>>>16),w=I+(T^C^y)+E[14]+4259657740&4294967295,I=T+(w<<23&4294967295|w>>>9),w=y+(I^T^C)+E[1]+2763975236&4294967295,y=I+(w<<4&4294967295|w>>>28),w=C+(y^I^T)+E[4]+1272893353&4294967295,C=y+(w<<11&4294967295|w>>>21),w=T+(C^y^I)+E[7]+4139469664&4294967295,T=C+(w<<16&4294967295|w>>>16),w=I+(T^C^y)+E[10]+3200236656&4294967295,I=T+(w<<23&4294967295|w>>>9),w=y+(I^T^C)+E[13]+681279174&4294967295,y=I+(w<<4&4294967295|w>>>28),w=C+(y^I^T)+E[0]+3936430074&4294967295,C=y+(w<<11&4294967295|w>>>21),w=T+(C^y^I)+E[3]+3572445317&4294967295,T=C+(w<<16&4294967295|w>>>16),w=I+(T^C^y)+E[6]+76029189&4294967295,I=T+(w<<23&4294967295|w>>>9),w=y+(I^T^C)+E[9]+3654602809&4294967295,y=I+(w<<4&4294967295|w>>>28),w=C+(y^I^T)+E[12]+3873151461&4294967295,C=y+(w<<11&4294967295|w>>>21),w=T+(C^y^I)+E[15]+530742520&4294967295,T=C+(w<<16&4294967295|w>>>16),w=I+(T^C^y)+E[2]+3299628645&4294967295,I=T+(w<<23&4294967295|w>>>9),w=y+(T^(I|~C))+E[0]+4096336452&4294967295,y=I+(w<<6&4294967295|w>>>26),w=C+(I^(y|~T))+E[7]+1126891415&4294967295,C=y+(w<<10&4294967295|w>>>22),w=T+(y^(C|~I))+E[14]+2878612391&4294967295,T=C+(w<<15&4294967295|w>>>17),w=I+(C^(T|~y))+E[5]+4237533241&4294967295,I=T+(w<<21&4294967295|w>>>11),w=y+(T^(I|~C))+E[12]+1700485571&4294967295,y=I+(w<<6&4294967295|w>>>26),w=C+(I^(y|~T))+E[3]+2399980690&4294967295,C=y+(w<<10&4294967295|w>>>22),w=T+(y^(C|~I))+E[10]+4293915773&4294967295,T=C+(w<<15&4294967295|w>>>17),w=I+(C^(T|~y))+E[1]+2240044497&4294967295,I=T+(w<<21&4294967295|w>>>11),w=y+(T^(I|~C))+E[8]+1873313359&4294967295,y=I+(w<<6&4294967295|w>>>26),w=C+(I^(y|~T))+E[15]+4264355552&4294967295,C=y+(w<<10&4294967295|w>>>22),w=T+(y^(C|~I))+E[6]+2734768916&4294967295,T=C+(w<<15&4294967295|w>>>17),w=I+(C^(T|~y))+E[13]+1309151649&4294967295,I=T+(w<<21&4294967295|w>>>11),w=y+(T^(I|~C))+E[4]+4149444226&4294967295,y=I+(w<<6&4294967295|w>>>26),w=C+(I^(y|~T))+E[11]+3174756917&4294967295,C=y+(w<<10&4294967295|w>>>22),w=T+(y^(C|~I))+E[2]+718787259&4294967295,T=C+(w<<15&4294967295|w>>>17),w=I+(C^(T|~y))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+y&4294967295,D.g[1]=D.g[1]+(T+(w<<21&4294967295|w>>>11))&4294967295,D.g[2]=D.g[2]+T&4294967295,D.g[3]=D.g[3]+C&4294967295}r.prototype.u=function(D,y){y===void 0&&(y=D.length);for(var I=y-this.blockSize,E=this.B,T=this.h,C=0;C<y;){if(T==0)for(;C<=I;)i(this,D,C),C+=this.blockSize;if(typeof D=="string"){for(;C<y;)if(E[T++]=D.charCodeAt(C++),T==this.blockSize){i(this,E),T=0;break}}else for(;C<y;)if(E[T++]=D[C++],T==this.blockSize){i(this,E),T=0;break}}this.h=T,this.o+=y},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var y=1;y<D.length-8;++y)D[y]=0;var I=8*this.o;for(y=D.length-8;y<D.length;++y)D[y]=I&255,I/=256;for(this.u(D),D=Array(16),y=I=0;4>y;++y)for(var E=0;32>E;E+=8)D[I++]=this.g[y]>>>E&255;return D};function s(D,y){var I=a;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=y(D)}function o(D,y){this.h=y;for(var I=[],E=!0,T=D.length-1;0<=T;T--){var C=D[T]|0;E&&C==y||(I[T]=C,E=!1)}this.g=I}var a={};function u(D){return-128<=D&&128>D?s(D,function(y){return new o([y|0],0>y?-1:0)}):new o([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(l(-D));for(var y=[],I=1,E=0;D>=I;E++)y[E]=D/I|0,I*=4294967296;return new o(y,0)}function h(D,y){if(D.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(D.charAt(0)=="-")return R(h(D.substring(1),y));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(y,8)),E=p,T=0;T<D.length;T+=8){var C=Math.min(8,D.length-T),w=parseInt(D.substring(T,T+C),y);8>C?(C=l(Math.pow(y,C)),E=E.j(C).add(l(w))):(E=E.j(I),E=E.add(l(w)))}return E}var p=u(0),m=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var D=0,y=1,I=0;I<this.g.length;I++){var E=this.i(I);D+=(0<=E?E:4294967296+E)*y,y*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(N(this))return"-"+R(this).toString(D);for(var y=l(Math.pow(D,6)),I=this,E="";;){var T=ne(I,y).g;I=L(I,T.j(y));var C=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=T,S(I))return C+E;for(;6>C.length;)C="0"+C;E=C+E}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var y=0;y<D.g.length;y++)if(D.g[y]!=0)return!1;return!0}function N(D){return D.h==-1}t.l=function(D){return D=L(this,D),N(D)?-1:S(D)?0:1};function R(D){for(var y=D.g.length,I=[],E=0;E<y;E++)I[E]=~D.g[E];return new o(I,~D.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(D){for(var y=Math.max(this.g.length,D.g.length),I=[],E=0,T=0;T<=y;T++){var C=E+(this.i(T)&65535)+(D.i(T)&65535),w=(C>>>16)+(this.i(T)>>>16)+(D.i(T)>>>16);E=w>>>16,C&=65535,w&=65535,I[T]=w<<16|C}return new o(I,I[I.length-1]&-2147483648?-1:0)};function L(D,y){return D.add(R(y))}t.j=function(D){if(S(this)||S(D))return p;if(N(this))return N(D)?R(this).j(R(D)):R(R(this).j(D));if(N(D))return R(this.j(R(D)));if(0>this.l(_)&&0>D.l(_))return l(this.m()*D.m());for(var y=this.g.length+D.g.length,I=[],E=0;E<2*y;E++)I[E]=0;for(E=0;E<this.g.length;E++)for(var T=0;T<D.g.length;T++){var C=this.i(E)>>>16,w=this.i(E)&65535,hn=D.i(T)>>>16,qs=D.i(T)&65535;I[2*E+2*T]+=w*qs,B(I,2*E+2*T),I[2*E+2*T+1]+=C*qs,B(I,2*E+2*T+1),I[2*E+2*T+1]+=w*hn,B(I,2*E+2*T+1),I[2*E+2*T+2]+=C*hn,B(I,2*E+2*T+2)}for(E=0;E<y;E++)I[E]=I[2*E+1]<<16|I[2*E];for(E=y;E<2*y;E++)I[E]=0;return new o(I,0)};function B(D,y){for(;(D[y]&65535)!=D[y];)D[y+1]+=D[y]>>>16,D[y]&=65535,y++}function z(D,y){this.g=D,this.h=y}function ne(D,y){if(S(y))throw Error("division by zero");if(S(D))return new z(p,p);if(N(D))return y=ne(R(D),y),new z(R(y.g),R(y.h));if(N(y))return y=ne(D,R(y)),new z(R(y.g),y.h);if(30<D.g.length){if(N(D)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var I=m,E=y;0>=E.l(D);)I=Te(I),E=Te(E);var T=Z(I,1),C=Z(E,1);for(E=Z(E,2),I=Z(I,2);!S(E);){var w=C.add(E);0>=w.l(D)&&(T=T.add(I),C=w),E=Z(E,1),I=Z(I,1)}return y=L(D,T.j(y)),new z(T,y)}for(T=p;0<=D.l(y);){for(I=Math.max(1,Math.floor(D.m()/y.m())),E=Math.ceil(Math.log(I)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),C=l(I),w=C.j(y);N(w)||0<w.l(D);)I-=E,C=l(I),w=C.j(y);S(C)&&(C=m),T=T.add(C),D=L(D,w)}return new z(T,D)}t.A=function(D){return ne(this,D).h},t.and=function(D){for(var y=Math.max(this.g.length,D.g.length),I=[],E=0;E<y;E++)I[E]=this.i(E)&D.i(E);return new o(I,this.h&D.h)},t.or=function(D){for(var y=Math.max(this.g.length,D.g.length),I=[],E=0;E<y;E++)I[E]=this.i(E)|D.i(E);return new o(I,this.h|D.h)},t.xor=function(D){for(var y=Math.max(this.g.length,D.g.length),I=[],E=0;E<y;E++)I[E]=this.i(E)^D.i(E);return new o(I,this.h^D.h)};function Te(D){for(var y=D.g.length+1,I=[],E=0;E<y;E++)I[E]=D.i(E)<<1|D.i(E-1)>>>31;return new o(I,D.h)}function Z(D,y){var I=y>>5;y%=32;for(var E=D.g.length-I,T=[],C=0;C<E;C++)T[C]=0<y?D.i(C+I)>>>y|D.i(C+I+1)<<32-y:D.i(C+I);return new o(T,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Em=dC.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,pr=dC.Integer=o}).apply(typeof lC<"u"?lC:typeof self<"u"?self:typeof window<"u"?window:{});var Ol=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},On={};var Dm,aU,ws,Tm,Ia,kl,bm,Cm,Sm;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ol=="object"&&Ol];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function _(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,A){for(var P=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)P[_e-2]=arguments[_e];return d.prototype[b].apply(g,P)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,A=g.length||0;c.length=b+A;for(let P=0;P<A;P++)c[b+P]=g[P]}else c.push(g)}}class L{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function B(c){return/^[\s\xa0]*$/.test(c)}function z(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ne(c){return ne[" "](c),c}ne[" "]=function(){};var Te=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function Z(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function T(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function C(c){a.setTimeout(()=>{throw c},0)}function w(){var c=Sd;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class hn{constructor(){this.h=this.g=null}add(d,f){let g=qs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var qs=new L(()=>new o0,c=>c.reset());class o0{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let zs,Gs=!1,Sd=new hn,Nv=()=>{let c=a.Promise.resolve(void 0);zs=()=>{c.then(a0)}};var a0=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){C(f)}var d=qs;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Gs=!1};function Un(){this.s=this.s,this.C=this.C}Un.prototype.s=!1,Un.prototype.ma=function(){this.s||(this.s=!0,this.N())},Un.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ge(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Ge.prototype.h=function(){this.defaultPrevented=!0};var c0=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ws(c,d){if(Ge.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Te){e:{try{ne(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:u0[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ws.aa.h.call(this)}}S(Ws,Ge);var u0={2:"touch",3:"pen",4:"mouse"};Ws.prototype.h=function(){Ws.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ks="closure_listenable_"+(1e6*Math.random()|0),l0=0;function d0(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++l0,this.da=this.fa=!1}function Ha(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function qa(c){this.src=c,this.g={},this.h=0}qa.prototype.add=function(c,d,f,g,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var P=Rd(c,d,g,b);return-1<P?(d=c[P],f||(d.fa=!1)):(d=new d0(d,this.src,A,!!g,b),d.fa=f,c.push(d)),d};function Ad(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(Ha(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Rd(c,d,f,g){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var Nd="closure_lm_"+(1e6*Math.random()|0),Md={};function Mv(c,d,f,g,b){if(g&&g.once)return Pv(c,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)Mv(c,d[A],f,g,b);return null}return f=kd(f),c&&c[Ks]?c.K(d,f,l(g)?!!g.capture:!!g,b):xv(c,d,f,!1,g,b)}function xv(c,d,f,g,b,A){if(!d)throw Error("Invalid event type");var P=l(b)?!!b.capture:!!b,_e=Pd(c);if(_e||(c[Nd]=_e=new qa(c)),f=_e.add(d,f,g,P,A),f.proxy)return f;if(g=h0(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)c0||(b=P),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(kv(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function h0(){function c(f){return d.call(c.src,c.listener,f)}let d=f0;return c}function Pv(c,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)Pv(c,d[A],f,g,b);return null}return f=kd(f),c&&c[Ks]?c.L(d,f,l(g)?!!g.capture:!!g,b):xv(c,d,f,!0,g,b)}function Ov(c,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)Ov(c,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=kd(f),c&&c[Ks]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Rd(A,f,g,b),-1<f&&(Ha(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Pd(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Rd(d,f,g,b)),(f=-1<c?d[c]:null)&&xd(f))}function xd(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ks])Ad(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(kv(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Pd(d))?(Ad(f,c),f.h==0&&(f.src=null,d[Nd]=null)):Ha(c)}}}function kv(c){return c in Md?Md[c]:Md[c]="on"+c}function f0(c,d){if(c.da)c=!0;else{d=new Ws(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&xd(c),c=f.call(g,d)}return c}function Pd(c){return c=c[Nd],c instanceof qa?c:null}var Od="__closure_events_fn_"+(1e9*Math.random()>>>0);function kd(c){return typeof c=="function"?c:(c[Od]||(c[Od]=function(d){return c.handleEvent(d)}),c[Od])}function We(){Un.call(this),this.i=new qa(this),this.M=this,this.F=null}S(We,Un),We.prototype[Ks]=!0,We.prototype.removeEventListener=function(c,d,f,g){Ov(this,c,d,f,g)};function nt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Ge(d,c);else if(d instanceof Ge)d.target=d.target||c;else{var b=d;d=new Ge(g,c),E(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var P=d.g=f[A];b=za(P,g,!0,d)&&b}if(P=d.g=c,b=za(P,g,!0,d)&&b,b=za(P,g,!1,d)&&b,f)for(A=0;A<f.length;A++)P=d.g=f[A],b=za(P,g,!1,d)&&b}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Ha(f[g]);delete c.g[d],c.h--}}this.F=null},We.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},We.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function za(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var P=d[A];if(P&&!P.da&&P.capture==f){var _e=P.listener,qe=P.ha||P.src;P.fa&&Ad(c.i,P),b=_e.call(qe,g)!==!1&&b}}return b&&!g.defaultPrevented}function Lv(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Fv(c){c.g=Lv(()=>{c.g=null,c.i&&(c.i=!1,Fv(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class p0 extends Un{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Fv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qs(c){Un.call(this),this.h=c,this.g={}}S(Qs,Un);var Vv=[];function Uv(c){Z(c.g,function(d,f){this.g.hasOwnProperty(f)&&xd(d)},c),c.g={}}Qs.prototype.N=function(){Qs.aa.N.call(this),Uv(this)},Qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ld=a.JSON.stringify,g0=a.JSON.parse,m0=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Fd(){}Fd.prototype.h=null;function jv(c){return c.h||(c.h=c.i())}function Bv(){}var Ys={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vd(){Ge.call(this,"d")}S(Vd,Ge);function Ud(){Ge.call(this,"c")}S(Ud,Ge);var Ir={},$v=null;function Ga(){return $v=$v||new We}Ir.La="serverreachability";function Hv(c){Ge.call(this,Ir.La,c)}S(Hv,Ge);function Zs(c){let d=Ga();nt(d,new Hv(d))}Ir.STAT_EVENT="statevent";function qv(c,d){Ge.call(this,Ir.STAT_EVENT,c),this.stat=d}S(qv,Ge);function rt(c){let d=Ga();nt(d,new qv(d,c))}Ir.Ma="timingevent";function zv(c,d){Ge.call(this,Ir.Ma,c),this.size=d}S(zv,Ge);function Js(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Xs(){this.g=!0}Xs.prototype.xa=function(){this.g=!1};function y0(c,d,f,g,b,A){c.info(function(){if(c.g)if(A)for(var P="",_e=A.split("&"),qe=0;qe<_e.length;qe++){var fe=_e[qe].split("=");if(1<fe.length){var Ke=fe[0];fe=fe[1];var Qe=Ke.split("_");P=2<=Qe.length&&Qe[1]=="type"?P+(Ke+"="+fe+"&"):P+(Ke+"=redacted&")}}else P=null;else P=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+P})}function v0(c,d,f,g,b,A,P){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+P})}function di(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+I0(c,f)+(g?" "+g:"")})}function _0(c,d){c.info(function(){return"TIMEOUT: "+d})}Xs.prototype.info=function(){};function I0(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var P=1;P<b.length;P++)b[P]=""}}}}return Ld(f)}catch{return d}}var Wa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},jd;function Ka(){}S(Ka,Fd),Ka.prototype.g=function(){return new XMLHttpRequest},Ka.prototype.i=function(){return{}},jd=new Ka;function jn(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Qs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wv}function Wv(){this.i=null,this.g="",this.h=!1}var Kv={},Bd={};function $d(c,d,f){c.L=1,c.v=Ja(fn(d)),c.m=f,c.P=!0,Qv(c,null)}function Qv(c,d){c.F=Date.now(),Qa(c),c.A=fn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),u_(f.i,"t",g),c.C=0,f=c.j.J,c.h=new Wv,c.g=S_(c.j,f?d:null,!c.m),0<c.O&&(c.M=new p0(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(Vv[0]=b.toString()),b=Vv);for(var A=0;A<b.length;A++){var P=Mv(f,b[A],g||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Zs(),y0(c.i,c.u,c.A,c.l,c.R,c.m)}jn.prototype.ca=function(c){c=c.target;let d=this.M;d&&pn(c)==3?d.j():this.Y(c)},jn.prototype.Y=function(c){try{if(c==this.g)e:{let Qe=pn(this.g);var d=this.g.Ba();let pi=this.g.Z();if(!(3>Qe)&&(Qe!=3||this.g&&(this.h.h||this.g.oa()||m_(this.g)))){this.J||Qe!=4||d==7||(d==8||0>=pi?Zs(3):Zs(2)),Hd(this);var f=this.g.Z();this.X=f;t:if(Yv(this)){var g=m_(this.g);c="";var b=g.length,A=pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wr(this),eo(this);var P="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=f==200,v0(this.i,this.u,this.A,this.l,this.R,Qe,f),this.o){if(this.T&&!this.K){t:{if(this.g){var _e,qe=this.g;if((_e=qe.g?qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(_e)){var fe=_e;break t}}fe=null}if(f=fe)di(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qd(this,f);else{this.o=!1,this.s=3,rt(12),wr(this),eo(this);break e}}if(this.P){f=!0;let Pt;for(;!this.J&&this.C<P.length;)if(Pt=w0(this,P),Pt==Bd){Qe==4&&(this.s=4,rt(14),f=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==Kv){this.s=4,rt(15),di(this.i,this.l,P,"[Invalid Chunk]"),f=!1;break}else di(this.i,this.l,Pt,null),qd(this,Pt);if(Yv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qe!=4||P.length!=0||this.h.h||(this.s=1,rt(16),f=!1),this.o=this.o&&f,!f)di(this.i,this.l,P,"[Invalid Chunked Response]"),wr(this),eo(this);else if(0<P.length&&!this.W){this.W=!0;var Ke=this.j;Ke.g==this&&Ke.ba&&!Ke.M&&(Ke.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),Yd(Ke),Ke.M=!0,rt(11))}}else di(this.i,this.l,P,null),qd(this,P);Qe==4&&wr(this),this.o&&!this.J&&(Qe==4?D_(this.j,this):(this.o=!1,Qa(this)))}else V0(this.g),f==400&&0<P.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),wr(this),eo(this)}}}catch{}finally{}};function Yv(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function w0(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Bd:(f=Number(d.substring(f,g)),isNaN(f)?Kv:(g+=1,g+f>d.length?Bd:(d=d.slice(g,g+f),c.C=g+f,d)))}jn.prototype.cancel=function(){this.J=!0,wr(this)};function Qa(c){c.S=Date.now()+c.I,Zv(c,c.I)}function Zv(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Js(m(c.ba,c),d)}function Hd(c){c.B&&(a.clearTimeout(c.B),c.B=null)}jn.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(_0(this.i,this.A),this.L!=2&&(Zs(),rt(17)),wr(this),this.s=2,eo(this)):Zv(this,this.S-c)};function eo(c){c.j.G==0||c.J||D_(c.j,c)}function wr(c){Hd(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Uv(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function qd(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||zd(f.h,c))){if(!c.K&&zd(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)rc(f),tc(f);else break e;Qd(f),rt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Js(m(f.Za,f),6e3));if(1>=e_(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Dr(f,11)}else if((c.K||f.g==c)&&rc(f),!B(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let fe=b[d];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];let Ke=fe[3];Ke!=null&&(f.la=Ke,f.j.info("VER="+f.la));let Qe=fe[4];Qe!=null&&(f.Aa=Qe,f.j.info("SVER="+f.Aa));let pi=fe[5];pi!=null&&typeof pi=="number"&&0<pi&&(g=1.5*pi,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Pt=c.g;if(Pt){let sc=Pt.g?Pt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sc){var A=g.h;A.g||sc.indexOf("spdy")==-1&&sc.indexOf("quic")==-1&&sc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Gd(A,A.h),A.h=null))}if(g.D){let Zd=Pt.g?Pt.g.getResponseHeader("X-HTTP-Session-Id"):null;Zd&&(g.ya=Zd,we(g.I,g.D,Zd))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var P=c;if(g.qa=C_(g,g.J?g.ia:null,g.W),P.K){t_(g.h,P);var _e=P,qe=g.L;qe&&(_e.I=qe),_e.B&&(Hd(_e),Qa(_e)),g.g=P}else w_(g);0<f.i.length&&nc(f)}else fe[0]!="stop"&&fe[0]!="close"||Dr(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Dr(f,7):Kd(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}Zs(4)}catch{}}var E0=class{constructor(c,d){this.g=c,this.map=d}};function Jv(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xv(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function e_(c){return c.h?1:c.g?c.g.size:0}function zd(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Gd(c,d){c.g?c.g.add(d):c.h=d}function t_(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Jv.prototype.cancel=function(){if(this.i=n_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function n_(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function D0(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function T0(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function r_(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=T0(c),g=D0(c),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],c)}var i_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function b0(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var A=c[f].substring(0,g);b=c[f].substring(g+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Er(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Er){this.h=c.h,Ya(this,c.j),this.o=c.o,this.g=c.g,Za(this,c.s),this.l=c.l;var d=c.i,f=new ro;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),s_(this,f),this.m=c.m}else c&&(d=String(c).match(i_))?(this.h=!1,Ya(this,d[1]||"",!0),this.o=to(d[2]||""),this.g=to(d[3]||"",!0),Za(this,d[4]),this.l=to(d[5]||"",!0),s_(this,d[6]||"",!0),this.m=to(d[7]||"")):(this.h=!1,this.i=new ro(null,this.h))}Er.prototype.toString=function(){var c=[],d=this.j;d&&c.push(no(d,o_,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(no(d,o_,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(no(f,f.charAt(0)=="/"?A0:S0,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",no(f,N0)),c.join("")};function fn(c){return new Er(c)}function Ya(c,d,f){c.j=f?to(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Za(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function s_(c,d,f){d instanceof ro?(c.i=d,M0(c.i,c.h)):(f||(d=no(d,R0)),c.i=new ro(d,c.h))}function we(c,d,f){c.i.set(d,f)}function Ja(c){return we(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function to(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function no(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,C0),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function C0(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var o_=/[#\/\?@]/g,S0=/[#\?:]/g,A0=/[#\?]/g,R0=/[#\?@]/g,N0=/#/g;function ro(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Bn(c){c.g||(c.g=new Map,c.h=0,c.i&&b0(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=ro.prototype,t.add=function(c,d){Bn(this),this.i=null,c=hi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function a_(c,d){Bn(c),d=hi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function c_(c,d){return Bn(c),d=hi(c,d),c.g.has(d)}t.forEach=function(c,d){Bn(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},t.na=function(){Bn(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},t.V=function(c){Bn(this);let d=[];if(typeof c=="string")c_(this,c)&&(d=d.concat(this.g.get(hi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Bn(this),this.i=null,c=hi(this,c),c_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function u_(c,d,f){a_(c,d),0<f.length&&(c.i=null,c.g.set(hi(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),P=this.V(g);for(g=0;g<P.length;g++){var b=A;P[g]!==""&&(b+="="+encodeURIComponent(String(P[g]))),c.push(b)}}return this.i=c.join("&")};function hi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function M0(c,d){d&&!c.j&&(Bn(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(a_(this,g),u_(this,b,f))},c)),c.j=d}function x0(c,d){let f=new Xs;if(a.Image){let g=new Image;g.onload=_($n,f,"TestLoadImage: loaded",!0,d,g),g.onerror=_($n,f,"TestLoadImage: error",!1,d,g),g.onabort=_($n,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=_($n,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function P0(c,d){let f=new Xs,g=new AbortController,b=setTimeout(()=>{g.abort(),$n(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?$n(f,"TestPingServer: ok",!0,d):$n(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),$n(f,"TestPingServer: error",!1,d)})}function $n(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function O0(){this.g=new m0}function k0(c,d,f){let g=f||"";try{r_(c,function(b,A){let P=b;l(b)&&(P=Ld(b)),d.push(g+A+"="+encodeURIComponent(P))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function io(c){this.l=c.Ub||null,this.j=c.eb||!1}S(io,Fd),io.prototype.g=function(){return new Xa(this.l,this.j)},io.prototype.i=function(c){return function(){return c}}({});function Xa(c,d){We.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Xa,We),t=Xa.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,oo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,so(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,oo(this)),this.g&&(this.readyState=3,oo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;l_(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function l_(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?so(this):oo(this),this.readyState==3&&l_(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,so(this))},t.Qa=function(c){this.g&&(this.response=c,so(this))},t.ga=function(){this.g&&so(this)};function so(c){c.readyState=4,c.l=null,c.j=null,c.v=null,oo(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function oo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Xa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function d_(c){let d="";return Z(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Wd(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=d_(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):we(c,d,f))}function be(c){We.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(be,We);var L0=/^https?$/i,F0=["POST","PUT"];t=be.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():jd.g(),this.v=this.o?jv(this.o):jv(jd),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){h_(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(F0,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of f)this.g.setRequestHeader(A,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{g_(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){h_(this,A)}};function h_(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,f_(c),ec(c)}function f_(c){c.A||(c.A=!0,nt(c,"complete"),nt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,nt(this,"complete"),nt(this,"abort"),ec(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ec(this,!0)),be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?p_(this):this.bb())},t.bb=function(){p_(this)};function p_(c){if(c.h&&typeof o<"u"&&(!c.v[1]||pn(c)!=4||c.Z()!=2)){if(c.u&&pn(c)==4)Lv(c.Ea,0,c);else if(nt(c,"readystatechange"),pn(c)==4){c.h=!1;try{let P=c.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=P===0){var b=String(c.D).match(i_)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!L0.test(b?b.toLowerCase():"")}f=g}if(f)nt(c,"complete"),nt(c,"success");else{c.m=6;try{var A=2<pn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",f_(c)}}finally{ec(c)}}}}function ec(c,d){if(c.g){g_(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||nt(c,"ready");try{f.onreadystatechange=g}catch{}}}function g_(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function pn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<pn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),g0(d)}};function m_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function V0(c){let d={};c=(c.g&&2<=pn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(B(c[g]))continue;var f=T(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}D(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ao(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function y_(c){this.Aa=0,this.i=[],this.j=new Xs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ao("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ao("baseRetryDelayMs",5e3,c),this.cb=ao("retryDelaySeedMs",1e4,c),this.Wa=ao("forwardChannelMaxRetries",2,c),this.wa=ao("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Jv(c&&c.concurrentRequestLimit),this.Da=new O0,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=y_.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){rt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=C_(this,null,this.W),nc(this)};function Kd(c){if(v_(c),c.G==3){var d=c.U++,f=fn(c.I);if(we(f,"SID",c.K),we(f,"RID",d),we(f,"TYPE","terminate"),co(c,f),d=new jn(c,c.j,d),d.L=2,d.v=Ja(fn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=S_(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Qa(d)}b_(c)}function tc(c){c.g&&(Yd(c),c.g.cancel(),c.g=null)}function v_(c){tc(c),c.u&&(a.clearTimeout(c.u),c.u=null),rc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function nc(c){if(!Xv(c.h)&&!c.s){c.s=!0;var d=c.Ga;zs||Nv(),Gs||(zs(),Gs=!0),Sd.add(d,c),c.B=0}}function U0(c,d){return e_(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Js(m(c.Ga,c,d),T_(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new jn(this,this.j,c),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=I_(this,b,d),f=fn(this.I),we(f,"RID",c),we(f,"CVER",22),this.D&&we(f,"X-HTTP-Session-Id",this.D),co(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(d_(A)))+"&"+d:this.m&&Wd(f,this.m,A)),Gd(this.h,b),this.Ua&&we(f,"TYPE","init"),this.P?(we(f,"$req",d),we(f,"SID","null"),b.T=!0,$d(b,f,null)):$d(b,f,d),this.G=2}}else this.G==3&&(c?__(this,c):this.i.length==0||Xv(this.h)||__(this))};function __(c,d){var f;d?f=d.l:f=c.U++;let g=fn(c.I);we(g,"SID",c.K),we(g,"RID",f),we(g,"AID",c.T),co(c,g),c.m&&c.o&&Wd(g,c.m,c.o),f=new jn(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=I_(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Gd(c.h,f),$d(f,g,d)}function co(c,d){c.H&&Z(c.H,function(f,g){we(d,g,f)}),c.l&&r_({},function(f,g){we(d,g,f)})}function I_(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let P=["count="+f];A==-1?0<f?(A=b[0].g,P.push("ofs="+A)):A=0:P.push("ofs="+A);let _e=!0;for(let qe=0;qe<f;qe++){let fe=b[qe].g,Ke=b[qe].map;if(fe-=A,0>fe)A=Math.max(0,b[qe].g-100),_e=!1;else try{k0(Ke,P,"req"+fe+"_")}catch{g&&g(Ke)}}if(_e){g=P.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function w_(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;zs||Nv(),Gs||(zs(),Gs=!0),Sd.add(d,c),c.v=0}}function Qd(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Js(m(c.Fa,c),T_(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,E_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Js(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),tc(this),E_(this))};function Yd(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function E_(c){c.g=new jn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=fn(c.qa);we(d,"RID","rpc"),we(d,"SID",c.K),we(d,"AID",c.T),we(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&we(d,"TO",c.ja),we(d,"TYPE","xmlhttp"),co(c,d),c.m&&c.o&&Wd(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Ja(fn(d)),f.m=null,f.P=!0,Qv(f,c)}t.Za=function(){this.C!=null&&(this.C=null,tc(this),Qd(this),rt(19))};function rc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function D_(c,d){var f=null;if(c.g==d){rc(c),Yd(c),c.g=null;var g=2}else if(zd(c.h,d))f=d.D,t_(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=Ga(),nt(g,new zv(g,f)),nc(c)}else w_(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&U0(c,d)||g==2&&Qd(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:Dr(c,5);break;case 4:Dr(c,10);break;case 3:Dr(c,6);break;default:Dr(c,2)}}}function T_(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Dr(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let b=!g;g=new Er(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ya(g,"https"),Ja(g),b?x0(g.toString(),f):P0(g.toString(),f)}else rt(2);c.G=0,c.l&&c.l.sa(d),b_(c),v_(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function b_(c){if(c.G=0,c.ka=[],c.l){let d=n_(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function C_(c,d,f){var g=f instanceof Er?fn(f):new Er(f);if(g.g!="")d&&(g.g=d+"."+g.g),Za(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new Er(null);g&&Ya(A,g),d&&(A.g=d),b&&Za(A,b),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&we(g,f,d),we(g,"VER",c.la),co(c,g),g}function S_(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new be(new io({eb:f})):new be(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function A_(){}t=A_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ic(){}ic.prototype.g=function(c,d){return new ft(c,d)};function ft(c,d){We.call(this),this.g=new y_(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!B(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!B(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new fi(this)}S(ft,We),ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ft.prototype.close=function(){Kd(this.g)},ft.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Ld(c),c=f);d.i.push(new E0(d.Ya++,c)),d.G==3&&nc(d)},ft.prototype.N=function(){this.g.l=null,delete this.j,Kd(this.g),delete this.g,ft.aa.N.call(this)};function R_(c){Vd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(R_,Vd);function N_(){Ud.call(this),this.status=1}S(N_,Ud);function fi(c){this.g=c}S(fi,A_),fi.prototype.ua=function(){nt(this.g,"a")},fi.prototype.ta=function(c){nt(this.g,new R_(c))},fi.prototype.sa=function(c){nt(this.g,new N_)},fi.prototype.ra=function(){nt(this.g,"b")},ic.prototype.createWebChannel=ic.prototype.g,ft.prototype.send=ft.prototype.o,ft.prototype.open=ft.prototype.m,ft.prototype.close=ft.prototype.close,Sm=On.createWebChannelTransport=function(){return new ic},Cm=On.getStatEventTarget=function(){return Ga()},bm=On.Event=Ir,kl=On.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wa.NO_ERROR=0,Wa.TIMEOUT=8,Wa.HTTP_ERROR=6,Ia=On.ErrorCode=Wa,Gv.COMPLETE="complete",Tm=On.EventType=Gv,Bv.EventType=Ys,Ys.OPEN="a",Ys.CLOSE="b",Ys.ERROR="c",Ys.MESSAGE="d",We.prototype.listen=We.prototype.K,ws=On.WebChannel=Bv,aU=On.FetchXmlHttpFactory=io,be.prototype.listenOnce=be.prototype.L,be.prototype.getLastError=be.prototype.Ka,be.prototype.getLastErrorCode=be.prototype.Ba,be.prototype.getStatus=be.prototype.Z,be.prototype.getResponseJson=be.prototype.Oa,be.prototype.getResponseText=be.prototype.oa,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Ha,Dm=On.XhrIo=be}).apply(typeof Ol<"u"?Ol:typeof self<"u"?self:typeof window<"u"?window:{});var hC="@firebase/firestore";var He=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");var $s="10.14.0";var ti=new cr("@firebase/firestore");function wa(){return ti.logLevel}function F(t,...e){if(ti.logLevel<=ae.DEBUG){let n=e.map(av);ti.debug(`Firestore (${$s}): ${t}`,...n)}}function kn(t,...e){if(ti.logLevel<=ae.ERROR){let n=e.map(av);ti.error(`Firestore (${$s}): ${t}`,...n)}}function As(t,...e){if(ti.logLevel<=ae.WARN){let n=e.map(av);ti.warn(`Firestore (${$s}): ${t}`,...n)}}function av(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function W(t="Unexpected state"){let e=`FIRESTORE (${$s}) INTERNAL ASSERTION FAILED: `+t;throw kn(e),new Error(e)}function ve(t,e){t||W()}function Y(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends It{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Bt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var jl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},xm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(He.UNAUTHENTICATED))}shutdown(){}},Pm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Om=class{constructor(e){this.t=e,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new Bt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Bt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Bt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new jl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new He(e)}},km=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=He.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Lm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new km(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Fm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Vm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ve(this.o===void 0);let r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new Fm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function cU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Bl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=cU(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function pe(t,e){return t<e?-1:t>e?1:0}function Rs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var ze=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new ze(0,0))}static max(){return new t(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var $l=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&W(),r===void 0?r=e.length-n:r>e.length-n&&W(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Se=class t extends $l{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},uU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Et=class t extends $l{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return uU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new V(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new V(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var q=class t{constructor(e){this.path=e}static fromPath(e){return new t(Se.fromString(e))}static fromName(e){return new t(Se.fromString(e).popFirst(5))}static empty(){return new t(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Se(e.slice()))}};var Um=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Um.UNKNOWN_ID=-1;function lU(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new ni(i,q.empty(),e)}function dU(t){return new ni(t.readTime,t.key,-1)}var ni=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(X.min(),q.empty(),-1)}static max(){return new t(X.max(),q.empty(),-1)}};function hU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}var fU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Va(t){return v(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==fU)throw t;F("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function pU(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ua(t){return t.name==="IndexedDbTransactionError"}var HC=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Id(t){return t==null}function Sa(t){return t===0&&1/t==-1/0}function gU(t){return typeof t=="number"&&Number.isInteger(t)&&!Sa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var mU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],a3=[...mU,"documentOverlays"],yU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vU=yU,_U=[...vU,"indexConfiguration","indexState","indexEntries"];var c3=[..._U,"globals"];function fC(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ci(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qC(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ae=class t{constructor(e,n){this.comparator=e,this.root=n||on.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bs(this.root,e,this.comparator,!1)}getReverseIterator(){return new bs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bs(this.root,e,this.comparator,!0)}},bs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},on=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw W();let e=this.left.check();if(e!==this.right.check())throw W();return e+(this.isRed()?0:1)}};on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw W()}get value(){throw W()}get color(){throw W()}get left(){throw W()}get right(){throw W()}copy(e,n,r,i,s){return this}insert(e,n,r){return new on(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var et=class t{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hl(this.data.getIterator())}getIteratorFrom(e){return new Hl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Hl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var xt=class t{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new t([])}unionWith(e){let n=new et(Et.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Rs(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var ql=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var tt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ql("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};tt.EMPTY_BYTE_STRING=new tt("");var IU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ln(t){if(ve(!!t),typeof t=="string"){let e=0,n=IU.exec(t);if(ve(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yr(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}function cv(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function uv(t){let e=t.mapValue.fields.__previous_value__;return cv(e)?uv(e):e}function Aa(t){let e=Ln(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}var Bm=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},zl=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Ll={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ri(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cv(t)?4:GC(t)?9007199254740991:zC(t)?10:11:W()}function un(t,e){if(t===e)return!0;let n=ri(t);if(n!==ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Aa(t).isEqual(Aa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Ln(i.timestampValue),a=Ln(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return yr(i.bytesValue).isEqual(yr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return De(i.geoPointValue.latitude)===De(s.geoPointValue.latitude)&&De(i.geoPointValue.longitude)===De(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return De(i.integerValue)===De(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=De(i.doubleValue),a=De(s.doubleValue);return o===a?Sa(o)===Sa(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Rs(t.arrayValue.values||[],e.arrayValue.values||[],un);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(fC(o)!==fC(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!un(o[u],a[u])))return!1;return!0}(t,e);default:return W()}}function Ra(t,e){return(t.values||[]).find(n=>un(n,e))!==void 0}function Ns(t,e){if(t===e)return 0;let n=ri(t),r=ri(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=De(s.integerValue||s.doubleValue),u=De(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return pC(t.timestampValue,e.timestampValue);case 4:return pC(Aa(t),Aa(e));case 5:return pe(t.stringValue,e.stringValue);case 6:return function(s,o){let a=yr(s),u=yr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=pe(a[l],u[l]);if(h!==0)return h}return pe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=pe(De(s.latitude),De(o.latitude));return a!==0?a:pe(De(s.longitude),De(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gC(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},m=o.fields||{},_=(a=p.value)===null||a===void 0?void 0:a.arrayValue,S=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=pe(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:gC(_,S)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ll.mapValue&&o===Ll.mapValue)return 0;if(s===Ll.mapValue)return 1;if(o===Ll.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=pe(u[p],h[p]);if(m!==0)return m;let _=Ns(a[u[p]],l[h[p]]);if(_!==0)return _}return pe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw W()}}function pC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);let n=Ln(t),r=Ln(e),i=pe(n.seconds,r.seconds);return i!==0?i:pe(n.nanos,r.nanos)}function gC(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=Ns(n[i],r[i]);if(s)return s}return pe(n.length,r.length)}function Ms(t){return $m(t)}function $m(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Ln(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return yr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=$m(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${$m(n.fields[o])}`;return i+"}"}(t.mapValue):W()}function Hm(t){return!!t&&"integerValue"in t}function lv(t){return!!t&&"arrayValue"in t}function mC(t){return!!t&&"nullValue"in t}function yC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vl(t){return!!t&&"mapValue"in t}function zC(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Da(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ci(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Da(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Da(t.arrayValue.values[n]);return e}return Object.assign({},t)}function GC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var wt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Da(n)}setAll(e){let n=Et.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Da(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Vl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Vl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ci(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Da(this.value))}};function WC(t){let e=[];return ci(t.fields,(n,r)=>{let i=new Et([n]);if(Vl(r)){let s=WC(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new xt(e)}var $t=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,X.min(),X.min(),X.min(),wt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,X.min(),X.min(),wt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,X.min(),X.min(),wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var xs=class{constructor(e,n){this.position=e,this.inclusive=n}};function vC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=Ns(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function _C(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!un(t.position[n],e.position[n]))return!1;return!0}var Ps=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function wU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Gl=class{},je=class t extends Gl{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new zm(e,n,r):n==="array-contains"?new Km(e,r):n==="in"?new Qm(e,r):n==="not-in"?new Ym(e,r):n==="array-contains-any"?new Zm(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Gm(e,r):new Wm(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ns(n,this.value)):n!==null&&ri(this.value)===ri(n)&&this.matchesComparison(Ns(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ln=class t extends Gl{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return KC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function KC(t){return t.op==="and"}function QC(t){return EU(t)&&KC(t)}function EU(t){for(let e of t.filters)if(e instanceof ln)return!1;return!0}function qm(t){if(t instanceof je)return t.field.canonicalString()+t.op.toString()+Ms(t.value);if(QC(t))return t.filters.map(e=>qm(e)).join(",");{let e=t.filters.map(n=>qm(n)).join(",");return`${t.op}(${e})`}}function YC(t,e){return t instanceof je?function(r,i){return i instanceof je&&r.op===i.op&&r.field.isEqual(i.field)&&un(r.value,i.value)}(t,e):t instanceof ln?function(r,i){return i instanceof ln&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&YC(o,i.filters[a]),!0):!1}(t,e):void W()}function ZC(t){return t instanceof je?function(n){return`${n.field.canonicalString()} ${n.op} ${Ms(n.value)}`}(t):t instanceof ln?function(n){return n.op.toString()+" {"+n.getFilters().map(ZC).join(" ,")+"}"}(t):"Filter"}var zm=class extends je{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){let n=q.comparator(e.key,this.key);return this.matchesComparison(n)}},Gm=class extends je{constructor(e,n){super(e,"in",n),this.keys=JC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Wm=class extends je{constructor(e,n){super(e,"not-in",n),this.keys=JC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function JC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}var Km=class extends je{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return lv(n)&&Ra(n.arrayValue,this.value)}},Qm=class extends je{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ra(this.value.arrayValue,n)}},Ym=class extends je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ra(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Ra(this.value.arrayValue,n)}},Zm=class extends je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!lv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ra(this.value.arrayValue,r))}};var Jm=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function IC(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Jm(t,e,n,r,i,s,o)}function dv(t){let e=Y(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Id(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ms(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ms(r)).join(",")),e.ue=n}return e.ue}function hv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!YC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_C(t.startAt,e.startAt)&&_C(t.endAt,e.endAt)}function Xm(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Os=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function DU(t,e,n,r,i,s,o,a){return new Os(t,e,n,r,i,s,o,a)}function fv(t){return new Os(t)}function wC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function TU(t){return t.collectionGroup!==null}function Ta(t){let e=Y(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new et(Et.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ps(s,r))}),n.has(Et.keyField().canonicalString())||e.ce.push(new Ps(Et.keyField(),r))}return e.ce}function an(t){let e=Y(t);return e.le||(e.le=bU(e,Ta(t))),e.le}function bU(t,e){if(t.limitType==="F")return IC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ps(i.field,s)});let n=t.endAt?new xs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new xs(t.startAt.position,t.startAt.inclusive):null;return IC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ey(t,e,n){return new Os(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wd(t,e){return hv(an(t),an(e))&&t.limitType===e.limitType}function XC(t){return`${dv(an(t))}|lt:${t.limitType}`}function Es(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ZC(i)).join(", ")}]`),Id(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ms(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ms(i)).join(",")),`Target(${r})`}(an(t))}; limitType=${t.limitType})`}function Ed(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Ta(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=vC(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Ta(r),i)||r.endAt&&!function(o,a,u){let l=vC(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Ta(r),i))}(t,e)}function CU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function eS(t){return(e,n)=>{let r=!1;for(let i of Ta(t)){let s=SU(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function SU(t,e,n){let r=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Ns(u,l):W()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return W()}}var vr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ci(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return qC(this.inner)}size(){return this.innerSize}};var AU=new Ae(q.comparator);function Fn(){return AU}var tS=new Ae(q.comparator);function Ea(...t){let e=tS;for(let n of t)e=e.insert(n.key,n);return e}function nS(t){let e=tS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Jr(){return ba()}function rS(){return ba()}function ba(){return new vr(t=>t.toString(),(t,e)=>t.isEqual(e))}var RU=new Ae(q.comparator),NU=new et(q.comparator);function ce(...t){let e=NU;for(let n of t)e=e.add(n);return e}var MU=new et(pe);function xU(){return MU}function pv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sa(e)?"-0":e}}function iS(t){return{integerValue:""+t}}function PU(t,e){return gU(e)?iS(e):pv(t,e)}var ks=class{constructor(){this._=void 0}};function OU(t,e,n){return t instanceof Ls?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&cv(s)&&(s=uv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ii?oS(t,e):t instanceof si?aS(t,e):function(i,s){let o=sS(i,s),a=EC(o)+EC(i.Pe);return Hm(o)&&Hm(i.Pe)?iS(a):pv(i.serializer,a)}(t,e)}function kU(t,e,n){return t instanceof ii?oS(t,e):t instanceof si?aS(t,e):n}function sS(t,e){return t instanceof Fs?function(r){return Hm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ls=class extends ks{},ii=class extends ks{constructor(e){super(),this.elements=e}};function oS(t,e){let n=cS(e);for(let r of t.elements)n.some(i=>un(i,r))||n.push(r);return{arrayValue:{values:n}}}var si=class extends ks{constructor(e){super(),this.elements=e}};function aS(t,e){let n=cS(e);for(let r of t.elements)n=n.filter(i=>!un(i,r));return{arrayValue:{values:n}}}var Fs=class extends ks{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function EC(t){return De(t.integerValue||t.doubleValue)}function cS(t){return lv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function LU(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ii&&i instanceof ii||r instanceof si&&i instanceof si?Rs(r.elements,i.elements,un):r instanceof Fs&&i instanceof Fs?un(r.Pe,i.Pe):r instanceof Ls&&i instanceof Ls}(t.transform,e.transform)}var ty=class{constructor(e,n){this.version=e,this.transformResults=n}},gr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ul(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Vs=class{};function uS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wl(t.key,gr.none()):new oi(t.key,t.data,gr.none());{let n=t.data,r=wt.empty(),i=new et(Et.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new dn(t.key,r,new xt(i.toArray()),gr.none())}}function FU(t,e,n){t instanceof oi?function(i,s,o){let a=i.value.clone(),u=TC(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof dn?function(i,s,o){if(!Ul(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=TC(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(lS(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ca(t,e,n,r){return t instanceof oi?function(s,o,a,u){if(!Ul(s.precondition,o))return a;let l=s.value.clone(),h=bC(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof dn?function(s,o,a,u){if(!Ul(s.precondition,o))return a;let l=bC(s.fieldTransforms,u,o),h=o.data;return h.setAll(lS(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Ul(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function VU(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=sS(r.transform,i||null);s!=null&&(n===null&&(n=wt.empty()),n.set(r.field,s))}return n||null}function DC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Rs(r,i,(s,o)=>LU(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var oi=class extends Vs{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},dn=class extends Vs{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function lS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function TC(t,e,n){let r=new Map;ve(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,kU(o,a,n[i]))}return r}function bC(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,OU(s,o,e))}return r}var Wl=class extends Vs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ny=class extends Vs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ry=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&FU(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ca(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ca(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=rS();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=uS(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Rs(this.mutations,e.mutations,(n,r)=>DC(n,r))&&Rs(this.baseMutations,e.baseMutations,(n,r)=>DC(n,r))}},iy=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ve(e.mutations.length===r.length);let i=function(){return RU}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var sy=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var oy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var xe,de;function UU(t){switch(t){default:return W();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function dS(t){if(t===void 0)return kn("GRPC error has no .code"),M.UNKNOWN;switch(t){case xe.OK:return M.OK;case xe.CANCELLED:return M.CANCELLED;case xe.UNKNOWN:return M.UNKNOWN;case xe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case xe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case xe.INTERNAL:return M.INTERNAL;case xe.UNAVAILABLE:return M.UNAVAILABLE;case xe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case xe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case xe.NOT_FOUND:return M.NOT_FOUND;case xe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case xe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case xe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case xe.ABORTED:return M.ABORTED;case xe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case xe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case xe.DATA_LOSS:return M.DATA_LOSS;default:return W()}}(de=xe||(xe={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var CC=null;function jU(){return new TextEncoder}var BU=new pr([4294967295,4294967295],0);function SC(t){let e=jU().encode(t),n=new Em;return n.update(e),new Uint8Array(n.digest())}function AC(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new pr([n,r],0),new pr([i,s],0)]}var ay=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xr(`Invalid padding: ${n}`);if(r<0)throw new Xr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xr(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=pr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(pr.fromNumber(r)));return i.compare(BU)===1&&(i=new pr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=SC(e),[r,i]=AC(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=SC(e),[r,i]=AC(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Xr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Kl=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Na.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(X.min(),i,new Ae(pe),Fn(),ce())}},Na=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ce(),ce(),ce())}};var Cs=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Ql=class{constructor(e,n){this.targetId=e,this.me=n}},Yl=class{constructor(e,n,r=tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Zl=class{constructor(){this.fe=0,this.ge=NC(),this.pe=tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:W()}}),new Na(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=NC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},cy=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fn(),this.qe=RC(),this.Qe=new Ae(pe)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:W()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Xm(s))if(r===0){let o=new q(s.path);this.Ue(n,o,$t.newNoDocument(o,X.min()))}else ve(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}CC?.et(function(h,p,m,_,S){var N,R,L,B,z,ne;let Te={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Z=p.unchangedNames;return Z&&(Te.bloomFilter={applied:S===0,hashCount:(N=Z?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(B=(L=(R=Z?.bits)===null||R===void 0?void 0:R.bitmap)===null||L===void 0?void 0:L.length)!==null&&B!==void 0?B:0,padding:(ne=(z=Z?.bits)===null||z===void 0?void 0:z.padding)!==null&&ne!==void 0?ne:0,mightContain:D=>{var y;return(y=_?.mightContain(D))!==null&&y!==void 0&&y}}),Te}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=yr(r).toUint8Array()}catch(u){if(u instanceof ql)return As("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new ay(o,i,s)}catch(u){return As(u instanceof Xr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Xm(a.target)){let u=new q(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,$t.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ce();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Kl(e,n,this.Qe,this.ke,r);return this.ke=Fn(),this.qe=RC(),this.Qe=new Ae(pe),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Zl,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new et(pe),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Zl),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function RC(){return new Ae(q.comparator)}function NC(){return new Ae(q.comparator)}var $U={asc:"ASCENDING",desc:"DESCENDING"},HU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qU={and:"AND",or:"OR"},uy=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function ly(t,e){return t.useProto3Json||Id(e)?e:{value:e}}function Jl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zU(t,e){return Jl(t,e.toTimestamp())}function cn(t){return ve(!!t),X.fromTimestamp(function(n){let r=Ln(n);return new ze(r.seconds,r.nanos)}(t))}function gv(t,e){return dy(t,e).canonicalString()}function dy(t,e){let n=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fS(t){let e=Se.fromString(t);return ve(vS(e)),e}function hy(t,e){return gv(t.databaseId,e.path)}function Am(t,e){let n=fS(e);if(n.get(1)!==t.databaseId.projectId)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(gS(n))}function pS(t,e){return gv(t.databaseId,e)}function GU(t){let e=fS(t);return e.length===4?Se.emptyPath():gS(e)}function fy(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gS(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function MC(t,e,n){return{name:hy(t,e),fields:n.value.mapValue.fields}}function WU(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:W()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(ve(h===void 0||typeof h=="string"),tt.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array),tt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?M.UNKNOWN:dS(l.code);return new V(h,l.message||"")}(o);n=new Yl(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Am(t,r.document.name),s=cn(r.document.updateTime),o=r.document.createTime?cn(r.document.createTime):X.min(),a=new wt({mapValue:{fields:r.document.fields}}),u=$t.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Cs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Am(t,r.document),s=r.readTime?cn(r.readTime):X.min(),o=$t.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Cs([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Am(t,r.document),s=r.removedTargetIds||[];n=new Cs([],s,i,null)}else{if(!("filter"in e))return W();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new oy(i,s),a=r.targetId;n=new Ql(a,o)}}return n}function KU(t,e){let n;if(e instanceof oi)n={update:MC(t,e.key,e.value)};else if(e instanceof Wl)n={delete:hy(t,e.key)};else if(e instanceof dn)n={update:MC(t,e.key,e.data),updateMask:rj(e.fieldMask)};else{if(!(e instanceof ny))return W();n={verify:hy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Ls)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ii)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof si)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Fs)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw W()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:zU(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:W()}(t,e.precondition)),n}function QU(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?cn(i.updateTime):cn(s);return o.isEqual(X.min())&&(o=cn(s)),new ty(o,i.transformResults||[])}(n,e))):[]}function YU(t,e){return{documents:[pS(t,e.path)]}}function ZU(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pS(t,i);let s=function(l){if(l.length!==0)return yS(ln.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Ds(m.field),direction:ej(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=ly(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function JU(t){let e=GU(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ve(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=mS(p);return m instanceof ln&&QC(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(S){return new Ps(Ts(S.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Id(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,_=p.values||[];return new xs(_,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,_=p.values||[];return new xs(_,m)}(n.endAt)),DU(e,i,o,s,a,"F",u,l)}function XU(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ts(n.unaryFilter.field);return je.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ts(n.unaryFilter.field);return je.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ts(n.unaryFilter.field);return je.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ts(n.unaryFilter.field);return je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return W()}}(t):t.fieldFilter!==void 0?function(n){return je.create(Ts(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return W()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ln.create(n.compositeFilter.filters.map(r=>mS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W()}}(n.compositeFilter.op))}(t):W()}function ej(t){return $U[t]}function tj(t){return HU[t]}function nj(t){return qU[t]}function Ds(t){return{fieldPath:t.canonicalString()}}function Ts(t){return Et.fromServerFormat(t.fieldPath)}function yS(t){return t instanceof je?function(n){if(n.op==="=="){if(yC(n.value))return{unaryFilter:{field:Ds(n.field),op:"IS_NAN"}};if(mC(n.value))return{unaryFilter:{field:Ds(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yC(n.value))return{unaryFilter:{field:Ds(n.field),op:"IS_NOT_NAN"}};if(mC(n.value))return{unaryFilter:{field:Ds(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ds(n.field),op:tj(n.op),value:n.value}}}(t):t instanceof ln?function(n){let r=n.getFilters().map(i=>yS(i));return r.length===1?r[0]:{compositeFilter:{op:nj(n.op),filters:r}}}(t):W()}function rj(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ma=class t{constructor(e,n,r,i,s=X.min(),o=X.min(),a=tt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var py=class{constructor(e){this.ct=e}};function ij(t){let e=JU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ey(e,e.limit,"L"):e}var Xl=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(De(e.integerValue));else if("doubleValue"in e){let r=De(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Sa(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Ln(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(yr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?GC(e)?this.dt(n,Number.MAX_SAFE_INTEGER):zC(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):W()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(De(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),q.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Xl.vt=new Xl;var gy=class{constructor(){this.un=new my}addToCollectionParentIndex(e,n){return this.un.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(ni.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},my=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new et(Se.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new et(Se.comparator)).toArray()}};var l3=new Uint8Array(0);var sn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(41943040,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);var xa=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var yy=class{constructor(){this.changes=new vr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var vy=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var _y=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ca(r.mutation,i,xt.empty(),ze.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){let i=Jr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ea();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Jr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Fn(),o=ba(),a=function(){return ba()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof dn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Ca(h.mutation,l,h.mutation.getFieldMask(),ze.now())):o.set(l.key,xt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new vy(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=ba(),i=new Ae((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||xt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ce()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=rS();h.forEach(m=>{if(!s.has(m)){let _=uS(n.get(m),r.get(m));_!==null&&p.set(m,_),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):TU(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):x.resolve(Jr()),a=-1,u=s;return o.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,ce())).next(h=>({batchId:a,changes:nS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=Ea();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Ea();return this.indexManager.getCollectionParents(e,s).next(a=>x.forEach(a,u=>{let l=function(p,m){return new Os(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,$t.newInvalidDocument(h)))});let a=Ea();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&Ca(h.mutation,l,xt.empty(),ze.now()),Ed(n,l)&&(a=a.insert(u,l))}),a})}};var Iy=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return x.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:cn(i.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:ij(i.bundledQuery),readTime:cn(i.readTime)}}(n)),x.resolve()}};var wy=class{constructor(){this.overlays=new Ae(q.comparator),this.Ir=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Jr();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=Jr(),s=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ae((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Jr(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Jr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sy(n,r));let s=this.Ir.get(n);s===void 0&&(s=ce(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var Ey=class{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var Pa=class{constructor(){this.Tr=new et(Pe.Er),this.dr=new et(Pe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Pe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Pe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new q(new Se([])),r=new Pe(n,e),i=new Pe(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new q(new Se([])),r=new Pe(n,e),i=new Pe(n,e+1),s=ce();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Pe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Pe=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return q.comparator(e.key,n.key)||pe(e.wr,n.wr)}static Ar(e,n){return pe(e.wr,n.wr)||q.comparator(e.key,n.key)}};var Dy=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new et(Pe.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new ry(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Pe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Pe(n,0),i=new Pe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(pe);return n.forEach(i=>{let s=new Pe(i,0),o=new Pe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;q.isDocumentKey(s)||(s=s.child(""));let o=new Pe(new q(s),0),a=new et(pe);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),x.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(n.mutations,i=>{let s=new Pe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Pe(n,0),i=this.br.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Ty=class{constructor(e){this.Mr=e,this.docs=function(){return new Ae(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let r=Fn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():$t.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Fn(),o=n.path,a=new q(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||hU(dU(h),r)<=0||(i.has(h.key)||Ed(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,n,r,i){W()}Or(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new by(this)}getSize(e){return x.resolve(this.size)}},by=class extends yy{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Cy=class{constructor(e){this.persistence=e,this.Nr=new vr(n=>dv(n),hv),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pa,this.targetCount=0,this.kr=xa.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),x.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new xa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.Kn(n),x.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Br.containsKey(n))}};var Sy=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new HC(0),this.Kr=!1,this.Kr=!0,this.$r=new Ey,this.referenceDelegate=e(this),this.Ur=new Cy(this),this.indexManager=new gy,this.remoteDocumentCache=function(i){return new Ty(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new py(n),this.Gr=new Iy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Dy(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new Ay(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Ay=class extends jm{constructor(e){super(),this.currentSequenceNumber=e}},Ry=class t{constructor(e){this.persistence=e,this.Jr=new Pa,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw W()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),x.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return x.or([()=>x.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Ny=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ce(),i=ce();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var My=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var xy=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return WT()?8:pU($e())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new My;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(wa()<=ae.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Es(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(wa()<=ae.DEBUG&&F("QueryEngine","Query:",Es(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(wa()<=ae.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Es(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,an(n))):x.resolve())}Yi(e,n){if(wC(n))return x.resolve(null);let r=an(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ey(n,null,"F"),r=an(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ce(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,o,u.readTime)?this.Yi(e,ey(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return wC(n)||i.isEqual(X.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?x.resolve(null):(wa()<=ae.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Es(n)),this.rs(e,o,n,lU(i,-1)).next(a=>a))})}ts(e,n){let r=new et(eS(e));return n.forEach((i,s)=>{Ed(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return wa()<=ae.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Es(n)),this.Ji.getDocumentsMatchingQuery(e,n,ni.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Py=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ae(pe),this._s=new vr(s=>dv(s),hv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _y(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function sj(t,e,n,r){return new Py(t,e,n,r)}function _S(t,e){return v(this,null,function*(){let n=Y(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=ce();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function oj(t,e){let n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),_=x.resolve();return m.forEach(S=>{_=_.next(()=>h.getEntry(u,S)).next(N=>{let R=l.docVersions.get(S);ve(R!==null),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ce();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function IS(t){let e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function aj(t,e){let n=Y(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let _=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(tt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(N,R,L){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(m,_,h)&&a.push(n.Ur.updateTargetData(s,_))});let u=Fn(),l=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(cj(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(X.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function cj(t,e,n){let r=ce(),i=ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Fn();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function uj(t,e){let n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lj(t,e){let n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ma(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function Oy(t,e,n){return v(this,null,function*(){let r=Y(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ua(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function xC(t,e,n){let r=Y(t),i=X.min(),s=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=Y(u),m=p._s.get(h);return m!==void 0?x.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,an(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:X.min(),n?s:ce())).next(a=>(dj(r,CU(e),a),{documents:a,Ts:s})))}function dj(t,e,n){let r=t.us.get(e)||X.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var ed=class{constructor(){this.activeTargetIds=xU()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var ky=class{constructor(){this.so=new ed,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ed,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Ly=class{_o(e){}shutdown(){}};var td=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Fl=null;function Rm(){return Fl===null?Fl=function(){return 268435456+Math.round(2147483648*Math.random())}():Fl++,"0x"+Fl.toString(16)}var hj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Fy=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Xe="WebChannelConnection",Vy=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=Rm(),u=this.xo(n,r.toUriEncodedString());F("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(F("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw As("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$s}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=hj[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=Rm();return new Promise((o,a)=>{let u=new Dm;u.setWithCredentials(!0),u.listenOnce(Tm.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ia.NO_ERROR:let h=u.getResponseJson();F(Xe,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Ia.TIMEOUT:F(Xe,`RPC '${e}' ${s} timed out`),a(new V(M.DEADLINE_EXCEEDED,"Request time out"));break;case Ia.HTTP_ERROR:let p=u.getStatus();if(F(Xe,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let _=m?.error;if(_&&_.status&&_.message){let S=function(R){let L=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(L)>=0?L:M.UNKNOWN}(_.status);a(new V(S,_.message))}else a(new V(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new V(M.UNAVAILABLE,"Connection failed."));break;default:W()}}finally{F(Xe,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);F(Xe,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Rm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Sm(),a=Cm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");F(Xe,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,_=!1,S=new Fy({Io:R=>{_?F(Xe,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(F(Xe,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),F(Xe,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),N=(R,L,B)=>{R.listen(L,z=>{try{B(z)}catch(ne){setTimeout(()=>{throw ne},0)}})};return N(p,ws.EventType.OPEN,()=>{_||(F(Xe,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),N(p,ws.EventType.CLOSE,()=>{_||(_=!0,F(Xe,`RPC '${e}' stream ${i} transport closed`),S.So())}),N(p,ws.EventType.ERROR,R=>{_||(_=!0,As(Xe,`RPC '${e}' stream ${i} transport errored:`,R),S.So(new V(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,ws.EventType.MESSAGE,R=>{var L;if(!_){let B=R.data[0];ve(!!B);let z=B,ne=z.error||((L=z[0])===null||L===void 0?void 0:L.error);if(ne){F(Xe,`RPC '${e}' stream ${i} received error:`,ne);let Te=ne.status,Z=function(I){let E=xe[I];if(E!==void 0)return dS(E)}(Te),D=ne.message;Z===void 0&&(Z=M.INTERNAL,D="Unknown error status: "+Te+" with message "+ne.message),_=!0,S.So(new V(Z,D)),p.close()}else F(Xe,`RPC '${e}' stream ${i} received:`,B),S.bo(B)}}),N(a,bm.STAT_EVENT,R=>{R.stat===kl.PROXY?F(Xe,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===kl.NOPROXY&&F(Xe,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function Nm(){return typeof document<"u"?document:null}function Dd(t){return new uy(t,!0)}var nd=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var rd=class{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new nd(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return v(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return v(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return v(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(kn(n.toString()),kn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new V(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>v(this,null,function*(){this.state=0,this.start()}))}I_(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Uy=class extends rd{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=WU(this.serializer,e),r=function(s){if(!("targetChange"in s))return X.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?cn(o.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=fy(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=Xm(u)?{documents:YU(s,u)}:{query:ZU(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=hS(s,o.resumeToken);let l=ly(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(X.min())>0){a.readTime=Jl(s,o.snapshotVersion.toTimestamp());let l=ly(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=XU(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=fy(this.serializer),n.removeTarget=e,this.a_(n)}},jy=class extends rd{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=QU(e.writeResults,e.commitTime),r=cn(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=fy(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>KU(this.serializer,r))};this.a_(n)}};var By=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,dy(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,dy(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},$y=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(kn(n),this.D_=!1):F("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Hy=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>v(this,null,function*(){ui(this)&&(F("RemoteStore","Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let l=Y(u);l.L_.add(4),yield ja(l),l.q_.set("Unknown"),l.L_.delete(4),yield Td(l)})}(this))}))}),this.q_=new $y(r,i)}};function Td(t){return v(this,null,function*(){if(ui(t))for(let e of t.B_)yield e(!0)})}function ja(t){return v(this,null,function*(){for(let e of t.B_)yield e(!1)})}function wS(t,e){let n=Y(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),_v(n)?vv(n):Hs(n).r_()&&yv(n,e))}function mv(t,e){let n=Y(t),r=Hs(n);n.N_.delete(e),r.r_()&&ES(n,e),n.N_.size===0&&(r.r_()?r.o_():ui(n)&&n.q_.set("Unknown"))}function yv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hs(t).A_(e)}function ES(t,e){t.Q_.xe(e),Hs(t).R_(e)}function vv(t){t.Q_=new cy({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Hs(t).start(),t.q_.v_()}function _v(t){return ui(t)&&!Hs(t).n_()&&t.N_.size>0}function ui(t){return Y(t).L_.size===0}function DS(t){t.Q_=void 0}function fj(t){return v(this,null,function*(){t.q_.set("Online")})}function pj(t){return v(this,null,function*(){t.N_.forEach((e,n)=>{yv(t,e)})})}function gj(t,e){return v(this,null,function*(){DS(t),_v(t)?(t.q_.M_(e),vv(t)):t.q_.set("Unknown")})}function mj(t,e,n){return v(this,null,function*(){if(t.q_.set("Online"),e instanceof Yl&&e.state===2&&e.cause)try{yield function(i,s){return v(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield id(t,r)}else if(e instanceof Cs?t.Q_.Ke(e):e instanceof Ql?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{let r=yield IS(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(tt.EMPTY_BYTE_STRING,h.snapshotVersion)),ES(s,u);let p=new Ma(h.target,u,l,h.sequenceNumber);yv(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){F("RemoteStore","Failed to raise snapshot:",r),yield id(t,r)}})}function id(t,e,n){return v(this,null,function*(){if(!Ua(e))throw e;t.L_.add(1),yield ja(t),t.q_.set("Offline"),n||(n=()=>IS(t.localStore)),t.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){F("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Td(t)}))})}function TS(t,e){return e().catch(n=>id(t,n,e))}function bd(t){return v(this,null,function*(){let e=Y(t),n=_r(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;yj(e);)try{let i=yield uj(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,vj(e,i)}catch(i){yield id(e,i)}bS(e)&&CS(e)})}function yj(t){return ui(t)&&t.O_.length<10}function vj(t,e){t.O_.push(e);let n=_r(t);n.r_()&&n.V_&&n.m_(e.mutations)}function bS(t){return ui(t)&&!_r(t).n_()&&t.O_.length>0}function CS(t){_r(t).start()}function _j(t){return v(this,null,function*(){_r(t).p_()})}function Ij(t){return v(this,null,function*(){let e=_r(t);for(let n of t.O_)e.m_(n.mutations)})}function wj(t,e,n){return v(this,null,function*(){let r=t.O_.shift(),i=iy.from(r,e,n);yield TS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield bd(t)})}function Ej(t,e){return v(this,null,function*(){e&&_r(t).V_&&(yield function(r,i){return v(this,null,function*(){if(function(o){return UU(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();_r(r).s_(),yield TS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield bd(r)}})}(t,e)),bS(t)&&CS(t)})}function PC(t,e){return v(this,null,function*(){let n=Y(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");let r=ui(n);n.L_.add(3),yield ja(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Td(n)})}function Dj(t,e){return v(this,null,function*(){let n=Y(t);e?(n.L_.delete(2),yield Td(n)):e||(n.L_.add(2),yield ja(n),n.q_.set("Unknown"))})}function Hs(t){return t.K_||(t.K_=function(n,r,i){let s=Y(n);return s.w_(),new Uy(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:fj.bind(null,t),Ro:pj.bind(null,t),mo:gj.bind(null,t),d_:mj.bind(null,t)}),t.B_.push(e=>v(this,null,function*(){e?(t.K_.s_(),_v(t)?vv(t):t.q_.set("Unknown")):(yield t.K_.stop(),DS(t))}))),t.K_}function _r(t){return t.U_||(t.U_=function(n,r,i){let s=Y(n);return s.w_(),new jy(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_j.bind(null,t),mo:Ej.bind(null,t),f_:Ij.bind(null,t),g_:wj.bind(null,t)}),t.B_.push(e=>v(this,null,function*(){e?(t.U_.s_(),yield bd(t)):(yield t.U_.stop(),t.O_.length>0&&(F("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var qy=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Bt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Iv(t,e){if(kn("AsyncQueue",`${e}: ${t}`),Ua(t))return new V(M.UNAVAILABLE,`${e}: ${t}`);throw t}var sd=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=Ea(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var od=class{constructor(){this.W_=new Ae(q.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):W():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},Us=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,sd.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var zy=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Gy=class{constructor(){this.queries=OC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=Y(n),s=i.queries;i.queries=OC(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new V(M.ABORTED,"Firestore shutting down"))}};function OC(){return new vr(t=>XC(t),wd)}function SS(t,e){return v(this,null,function*(){let n=Y(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new zy,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=Iv(o,`Initialization of query '${Es(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&wv(n)})}function AS(t,e){return v(this,null,function*(){let n=Y(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Tj(t,e){let n=Y(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&wv(n)}function bj(t,e,n){let r=Y(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function wv(t){t.Y_.forEach(e=>{e.next()})}var Wy,kC;(kC=Wy||(Wy={})).ea="default",kC.Cache="cache";var ad=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Us(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Us.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Wy.Cache}};var cd=class{constructor(e){this.key=e}},ud=class{constructor(e){this.key=e}},Ky=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=eS(e),this.Ra=new sd(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new od,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),_=Ed(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),N=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),R=!1;m&&_?m.data.isEqual(_.data)?S!==N&&(r.track({type:3,doc:_}),R=!0):this.ga(m,_)||(r.track({type:2,doc:_}),R=!0,(u&&this.Aa(_,u)>0||l&&this.Aa(_,l)<0)&&(a=!0)):!m&&_?(r.track({type:0,doc:_}),R=!0):m&&!_&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(_?(o=o.add(_),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(_,S){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W()}};return N(_)-N(S)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new Us(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new od,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new ud(r))}),this.da.forEach(r=>{e.has(r)||n.push(new cd(r))}),n}ba(e){this.Ta=e.Ts,this.da=ce();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Us.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Qy=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Yy=class{constructor(e){this.key=e,this.va=!1}},Zy=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new vr(a=>XC(a),wd),this.Ma=new Map,this.xa=new Set,this.Oa=new Ae(q.comparator),this.Na=new Map,this.La=new Pa,this.Ba={},this.ka=new Map,this.qa=xa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Cj(t,e,n=!0){return v(this,null,function*(){let r=OS(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield RS(r,e,n,!0),i})}function Sj(t,e){return v(this,null,function*(){let n=OS(t);yield RS(n,e,!0,!1)})}function RS(t,e,n,r){return v(this,null,function*(){let i=yield lj(t.localStore,an(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield Aj(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&wS(t.remoteStore,i),a})}function Aj(t,e,n,r,i){return v(this,null,function*(){t.Ka=(p,m,_)=>function(N,R,L,B){return v(this,null,function*(){let z=R.view.ma(L);z.ns&&(z=yield xC(N.localStore,R.query,!1).then(({documents:D})=>R.view.ma(D,z)));let ne=B&&B.targetChanges.get(R.targetId),Te=B&&B.targetMismatches.get(R.targetId)!=null,Z=R.view.applyChanges(z,N.isPrimaryClient,ne,Te);return FC(N,R.targetId,Z.wa),Z.snapshot})}(t,p,m,_);let s=yield xC(t.localStore,e,!0),o=new Ky(e,s.Ts),a=o.ma(s.documents),u=Na.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);FC(t,n,l.wa);let h=new Qy(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function Rj(t,e,n){return v(this,null,function*(){let r=Y(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!wd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Oy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&mv(r.remoteStore,i.targetId),Jy(r,i.targetId)}).catch(Va))):(Jy(r,i.targetId),yield Oy(r.localStore,i.targetId,!0))})}function Nj(t,e){return v(this,null,function*(){let n=Y(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mv(n.remoteStore,r.targetId))})}function Mj(t,e,n){return v(this,null,function*(){let r=Vj(t);try{let i=yield function(o,a){let u=Y(o),l=ze.now(),h=a.reduce((_,S)=>_.add(S.key),ce()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let S=Fn(),N=ce();return u.cs.getEntries(_,h).next(R=>{S=R,S.forEach((L,B)=>{B.isValidDocument()||(N=N.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,S)).next(R=>{p=R;let L=[];for(let B of a){let z=VU(B,p.get(B.key).overlayedDocument);z!=null&&L.push(new dn(B.key,z,WC(z.value.mapValue),gr.exists(!0)))}return u.mutationQueue.addMutationBatch(_,l,L,a)}).next(R=>{m=R;let L=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(_,R.batchId,L)})}).then(()=>({batchId:m.batchId,changes:nS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Ae(pe)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Ba(r,i.changes),yield bd(r.remoteStore)}catch(i){let s=Iv(i,"Failed to persist write");n.reject(s)}})}function NS(t,e){return v(this,null,function*(){let n=Y(t);try{let r=yield aj(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ve(o.va):i.removedDocuments.size>0&&(ve(o.va),o.va=!1))}),yield Ba(n,r,e)}catch(r){yield Va(r)}})}function LC(t,e,n){let r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=Y(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&wv(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function xj(t,e,n){return v(this,null,function*(){let r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ae(q.comparator);o=o.insert(s,$t.newNoDocument(s,X.min()));let a=ce().add(s),u=new Kl(X.min(),new Map,new Ae(pe),o,a);yield NS(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Ev(r)}else yield Oy(r.localStore,e,!1).then(()=>Jy(r,e,n)).catch(Va)})}function Pj(t,e){return v(this,null,function*(){let n=Y(t),r=e.batch.batchId;try{let i=yield oj(n.localStore,e);xS(n,r,null),MS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ba(n,i)}catch(i){yield Va(i)}})}function Oj(t,e,n){return v(this,null,function*(){let r=Y(t);try{let i=yield function(o,a){let u=Y(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ve(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);xS(r,e,n),MS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ba(r,i)}catch(i){yield Va(i)}})}function MS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function xS(t,e,n){let r=Y(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Jy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||PS(t,r)})}function PS(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(mv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ev(t))}function FC(t,e,n){for(let r of n)r instanceof cd?(t.La.addReference(r.key,e),kj(t,r)):r instanceof ud?(F("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||PS(t,r.key)):W()}function kj(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(F("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ev(t))}function Ev(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new q(Se.fromString(e)),r=t.qa.next();t.Na.set(r,new Yy(n)),t.Oa=t.Oa.insert(n,r),wS(t.remoteStore,new Ma(an(fv(n.path)),r,"TargetPurposeLimboResolution",HC.oe))}}function Ba(t,e,n){return v(this,null,function*(){let r=Y(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Ny.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return v(this,null,function*(){let h=Y(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.$i,_=>h.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>x.forEach(m.Ui,_=>h.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!Ua(p))throw p;F("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let _=h.os.get(m),S=_.snapshotVersion,N=_.withLastLimboFreeSnapshotVersion(S);h.os=h.os.insert(m,N)}}})}(r.localStore,s))})}function Lj(t,e){return v(this,null,function*(){let n=Y(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());let r=yield _S(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new V(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ba(n,r.hs)}})}function Fj(t,e){let n=Y(t),r=n.Na.get(e);if(r&&r.va)return ce().add(r.key);{let i=ce(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function OS(t){let e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xj.bind(null,e),e.Ca.d_=Tj.bind(null,e.eventManager),e.Ca.$a=bj.bind(null,e.eventManager),e}function Vj(t){let e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Oj.bind(null,e),e}var VC=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return v(this,null,function*(){this.serializer=Dd(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return sj(this.persistence,new xy,n.initialUser,this.serializer)}Ga(n){return new Sy(Ry.Zr,this.serializer)}Wa(n){return new ky}terminate(){return v(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var Uj=(()=>{class t{initialize(n,r){return v(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>LC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Lj.bind(null,this.syncEngine),yield Dj(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new Gy}()}createDatastore(n){let r=Dd(n.databaseInfo.databaseId),i=function(o){return new Vy(o)}(n.databaseInfo);return function(o,a,u,l){return new By(o,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,u){return new Hy(i,s,o,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>LC(this.syncEngine,r,0),function(){return td.D()?new td:new Ly}())}createSyncEngine(n,r){return function(s,o,a,u,l,h,p){let m=new Zy(s,o,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var n,r;yield function(s){return v(this,null,function*(){let o=Y(s);F("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield ja(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var ld=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):kn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Xy=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=He.UNAUTHENTICATED,this.clientId=Bl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>v(this,null,function*(){F("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(F("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Bt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Iv(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Mm(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield _S(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function UC(t,e){return v(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield jj(t);F("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>PC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>PC(e.remoteStore,i)),t._onlineComponents=e})}function jj(t){return v(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Mm(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;As("Error using user provided cache. Falling back to memory cache: "+n),yield Mm(t,new VC)}}else F("FirestoreClient","Using default OfflineComponentProvider"),yield Mm(t,new VC);return t._offlineComponents})}function kS(t){return v(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),yield UC(t,t._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),yield UC(t,new Uj))),t._onlineComponents})}function Bj(t){return kS(t).then(e=>e.syncEngine)}function LS(t){return v(this,null,function*(){let e=yield kS(t),n=e.eventManager;return n.onListen=Cj.bind(null,e.syncEngine),n.onUnlisten=Rj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Sj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Nj.bind(null,e.syncEngine),n})}function $j(t,e,n={}){let r=new Bt;return t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(s,o,a,u,l){let h=new ld({next:m=>{h.Za(),o.enqueueAndForget(()=>AS(s,p));let _=m.docs.has(a);!_&&m.fromCache?l.reject(new V(M.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?l.reject(new V(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new ad(fv(a.path),h,{includeMetadataChanges:!0,_a:!0});return SS(s,p)}(yield LS(t),t.asyncQueue,e,n,r)})),r.promise}function Hj(t,e,n={}){let r=new Bt;return t.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return function(s,o,a,u,l){let h=new ld({next:m=>{h.Za(),o.enqueueAndForget(()=>AS(s,p)),m.fromCache&&u.source==="server"?l.reject(new V(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new ad(a,h,{includeMetadataChanges:!0,_a:!0});return SS(s,p)}(yield LS(t),t.asyncQueue,e,n,r)})),r.promise}function FS(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var jC=new Map;function VS(t,e,n){if(!n)throw new V(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qj(t,e,n,r){if(e===!0&&r===!0)throw new V(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function BC(t){if(!q.isDocumentKey(t))throw new V(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $C(t){if(q.isDocumentKey(t))throw new V(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Dv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W()}function Vn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Dv(t);throw new V(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var dd=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},js=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dd(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new xm;switch(r.type){case"firstParty":return new Lm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=jC.get(n);r&&(F("ComponentProvider","Removing Datastore"),jC.delete(n),r.terminate())}(this),Promise.resolve()}};function US(t,e,n,r={}){var i;let s=(t=Vn(t,js))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&As("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=He.MOCK_USER;else{a=BT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new V(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new He(l)}t._authCredentials=new Pm(new jl(a,u))}}var hd=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ht=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},mr=class t extends hd{constructor(e,n,r){super(e,n,fv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new q(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function jS(t,e,...n){if(t=Ve(t),VS("collection","path",e),t instanceof js){let r=Se.fromString(e,...n);return $C(r),new mr(t,null,r)}{if(!(t instanceof ht||t instanceof mr))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return $C(r),new mr(t.firestore,null,r)}}function BS(t,e,...n){if(t=Ve(t),arguments.length===1&&(e=Bl.newId()),VS("doc","path",e),t instanceof js){let r=Se.fromString(e,...n);return BC(r),new ht(t,null,new q(r))}{if(!(t instanceof ht||t instanceof mr))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return BC(r),new ht(t.firestore,t instanceof mr?t.converter:null,new q(r))}}var fd=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new nd(this,"async_queue_retry"),this.Vu=()=>{let r=Nm();r&&F("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=Nm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=Nm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new Bt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return v(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ua(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw kn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=qy.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&W()}verifyOperationInProgress(){}wu(){return v(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};var ai=class extends js{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new fd,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new fd(e),this._firestoreClient=void 0,yield e}})}};function $S(t,e){let n=typeof t=="object"?t:gs(),r=typeof t=="string"?t:e||"(default)",i=ua(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=jT("firestore");s&&US(i,...s)}return i}function Tv(t){if(t._terminated)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zj(t),t._firestoreClient}function zj(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new Bm(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,FS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Xy(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var Oa=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(tt.fromBase64String(e))}catch(n){throw new V(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Bs=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ka=class{constructor(e){this._methodName=e}};var La=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}};var Fa=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var Gj=/^__.*__$/,ev=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new dn(e,this.data,this.fieldMask,n,this.fieldTransforms):new oi(e,this.data,n,this.fieldTransforms)}},pd=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new dn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function HS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W()}}var tv=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return md(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(HS(this.Cu)&&Gj.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},nv=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Dd(e)}Qu(e,n,r,i=!1){return new tv({Cu:e,methodName:n,qu:r,path:Et.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function qS(t){let e=t._freezeSettings(),n=Dd(t._databaseId);return new nv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Wj(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);bv("Data must be an object, but it was:",o,r);let a=zS(r,o),u,l;if(s.merge)u=new xt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=rv(e,p,n);if(!o.contains(m))throw new V(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);WS(h,m)||h.push(m)}u=new xt(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new ev(new wt(a),u,l)}var gd=class t extends ka{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function Kj(t,e,n,r){let i=t.Qu(1,e,n);bv("Data must be an object, but it was:",i,r);let s=[],o=wt.empty();ci(r,(u,l)=>{let h=Cv(e,u,n);l=Ve(l);let p=i.Nu(h);if(l instanceof gd)s.push(h);else{let m=Cd(l,p);m!=null&&(s.push(h),o.set(h,m))}});let a=new xt(s);return new pd(o,a,i.fieldTransforms)}function Qj(t,e,n,r,i,s){let o=t.Qu(1,e,n),a=[rv(e,r,n)],u=[i];if(s.length%2!=0)throw new V(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(rv(e,s[m])),u.push(s[m+1]);let l=[],h=wt.empty();for(let m=a.length-1;m>=0;--m)if(!WS(l,a[m])){let _=a[m],S=u[m];S=Ve(S);let N=o.Nu(_);if(S instanceof gd)l.push(_);else{let R=Cd(S,N);R!=null&&(l.push(_),h.set(_,R))}}let p=new xt(l);return new pd(h,p,o.fieldTransforms)}function Cd(t,e){if(GS(t=Ve(t)))return bv("Unsupported field value:",e,t),zS(t,e);if(t instanceof ka)return function(r,i){if(!HS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=Cd(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=ze.fromDate(r);return{timestampValue:Jl(i.serializer,s)}}if(r instanceof ze){let s=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jl(i.serializer,s)}}if(r instanceof La)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Oa)return{bytesValue:hS(i.serializer,r._byteString)};if(r instanceof ht){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:gv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Fa)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return pv(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Dv(r)}`)}(t,e)}function zS(t,e){let n={};return qC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ci(t,(r,i)=>{let s=Cd(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function GS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof La||t instanceof Oa||t instanceof ht||t instanceof ka||t instanceof Fa)}function bv(t,e,n){if(!GS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Dv(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function rv(t,e,n){if((e=Ve(e))instanceof Bs)return e._internalPath;if(typeof e=="string")return Cv(t,e);throw md("Field path arguments must be of type string or ",t,!1,void 0,n)}var Yj=new RegExp("[~\\*/\\[\\]]");function Cv(t,e,n){if(e.search(Yj)>=0)throw md(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bs(...e.split("."))._internalPath}catch{throw md(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function md(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new V(M.INVALID_ARGUMENT,a+t+u)}function WS(t,e){return t.some(n=>n.isEqual(e))}var yd=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new iv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(KS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},iv=class extends yd{data(){return super.data()}};function KS(t,e){return typeof e=="string"?Cv(t,e):e instanceof Bs?e._internalPath:e._delegate._internalPath}function Zj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sv=class{convertValue(e,n="none"){switch(ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw W()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ci(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>De(o.doubleValue));return new Fa(s)}convertGeoPoint(e){return new La(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=uv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Aa(e));default:return null}}convertTimestamp(e){let n=Ln(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Se.fromString(e);ve(vS(r));let i=new zl(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||kn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function Jj(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ei=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},vd=class extends yd{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ss(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(KS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ss=class extends vd{data(e={}){return super.data(e)}},ov=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ei(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ss(this._firestore,this._userDataWriter,r.key,r,new ei(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new Ss(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ei(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new Ss(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ei(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Xj(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Xj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W()}}function QS(t){t=Vn(t,ht);let e=Vn(t.firestore,ai);return $j(Tv(e),t._key).then(n=>e2(e,t,n))}var _d=class extends sv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oa(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}};function YS(t){t=Vn(t,hd);let e=Vn(t.firestore,ai),n=Tv(e),r=new _d(e);return Zj(t._query),Hj(n,t._query).then(i=>new ov(e,r,t,i))}function ZS(t,e,n){t=Vn(t,ht);let r=Vn(t.firestore,ai),i=Jj(t.converter,e,n);return XS(r,[Wj(qS(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,gr.none())])}function JS(t,e,n,...r){t=Vn(t,ht);let i=Vn(t.firestore,ai),s=qS(i),o;return o=typeof(e=Ve(e))=="string"||e instanceof Bs?Qj(s,"updateDoc",t._key,e,n,r):Kj(s,"updateDoc",t._key,e),XS(i,[o.toMutation(t._key,gr.exists(!0))])}function XS(t,e){return function(r,i){let s=new Bt;return r.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return Mj(yield Bj(r),i,s)})),s.promise}(Tv(t),e)}function e2(t,e,n){let r=n.docs.get(e._key),i=new _d(t);return new vd(t,i,e._key,r,new ei(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){$s=i})(dr),lr(new Mt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new ai(new Om(r.getProvider("auth-internal")),new Vm(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zl(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ue(hC,"4.7.3",e),Ue(hC,"4.7.3","esm2017")})();var li=class{constructor(e){return e}},e0="firestore",Sv=class{constructor(){return la(e0)}};var Av=new H("angularfire2.firestore-instances");function t2(t,e){let n=pl(e0,t,e);return n&&new li(n)}function n2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new li(r)}}var r2={provide:Sv,deps:[[new Ze,Av]]},i2={provide:li,useFactory:t2,deps:[[new Ze,Av],An]};function N6(t,...e){return Ue("angularfire",zr.full,"fst"),Yt([i2,r2,{provide:Av,useFactory:n2(t),multi:!0,deps:[ge,Ye,vs,Gr,[new Ze,_a],[new Ze,ys],...e]}])}var t0=Je(jS,!0);var $a=Je(BS,!0);var n0=Je(QS,!0);var r0=Je(YS,!0);var M6=Je($S,!0);var i0=Je(ZS,!0);var Rv=Je(JS,!0);var s0=class t{constructor(e,n){this.auth=e;this.firestore=n}userSubject=new ke(null);registerUser(e,n,r,i){return v(this,null,function*(){try{let s=yield oC(this.auth,e,n);yield aC(s.user);let o=i!=="especialista",a=ye(k({uid:s.user.uid},r),{role:i,createdAt:new Date,habilitado:o,emailVerificado:!1});return yield i0($a(this.firestore,"users",s.user.uid),a),ye(k({},s.user),{role:i})}catch(s){throw console.error(`Error al registrar el ${i}:`,s),s}})}login(e,n){return v(this,null,function*(){try{let r=yield cC(this.auth,e,n),i=yield this.getUserData(r.user.uid);if(i.role==="especialista"){if(!i.habilitado)throw new Error("Tu cuenta debe ser aprobada por un administrador antes de poder iniciar sesi\xF3n.");if(!i.emailVerificado)throw new Error("Debes verificar tu correo electr\xF3nico para ingresar.")}else if(!i.emailVerificado)throw new Error("Debes verificar tu correo electr\xF3nico para ingresar.");return this.userSubject.next(k(k({},r.user),i)),k(k({},r.user),i)}catch(r){throw console.error("Error en el login:",r),r}})}getUserData(e){return v(this,null,function*(){let n=$a(this.firestore,`users/${e}`),r=yield n0(n);if(r.exists())return r.data();throw new Error("No se encontr\xF3 el documento del usuario")})}logout(){return uC(this.auth).then(()=>{this.userSubject.next(null)})}habilitarUsuario(e){return v(this,null,function*(){let n=$a(this.firestore,"users",e);yield Rv(n,{habilitado:!0})})}inhabilitarUsuario(e){return v(this,null,function*(){let n=$a(this.firestore,"users",e);yield Rv(n,{habilitado:!1})})}obtenerUsuarios(){return v(this,null,function*(){let e=t0(this.firestore,"users");return(yield r0(e)).docs.map(r=>k({id:r.id},r.data()))})}getUser(){return this.userSubject.asObservable()}static \u0275fac=function(n){return new(n||t)(G(Zr),G(li))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};export{k as a,ye as b,o2 as c,a2 as d,v as e,it as f,Re as g,ie as h,IA as i,$ as j,ow as k,U as l,bo as m,H as n,G as o,Iw as p,So as q,Ao as r,wu as s,C4 as t,S4 as u,zf as v,ot as w,Cu as x,A4 as y,R4 as z,Xt as A,cp as B,P4 as C,fx as D,Tx as E,uD as F,Fx as G,Vx as H,lD as I,dD as J,lp as K,O4 as L,hD as M,k4 as N,L4 as O,nP as P,pD as Q,rP as R,F4 as S,iP as T,V4 as U,mD as V,Mo as W,U4 as X,xo as Y,TD as Z,j4 as _,AP as $,es as aa,fG as ba,pG as ca,kP as da,BG as ea,OO as fa,or as ga,u9 as ha,l9 as ia,X9 as ja,eW as ka,WW as la,KW as ma,N6 as na,M6 as oa,s0 as pa};
