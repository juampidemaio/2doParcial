import{a as te}from"./chunk-6FUEDIJ6.js";import{o as w,p as De,r as be,s as Ae}from"./chunk-7I65YCZI.js";import{$ as X,A as i,Aa as ke,B as o,Ba as Fe,C as j,D as x,E as g,F as u,G as ge,M as n,N as m,O as G,P as M,Q as J,R as K,S as Q,Sa as E,Ta as L,Ua as ee,X as Se,Z as Ee,b as N,ca as k,d as R,da as F,e as W,f as O,fa as ye,g as P,ga as Te,h as Y,l as _,m as v,ma as D,oa as he,qa as B,r as fe,ra as A,s,sa as H,t as b,ta as Pe,va as Z,w as C,wa as Me,x as p,xa as we,ya as Oe,za as Ie}from"./chunk-QQS4MEX3.js";import{a as xe,b as Ce,e as $,g as d}from"./chunk-RA2WU32H.js";var V=$(L());function je(a,t){if(a&1){let e=x();i(0,"div",14),g("click",function(){let c=_(e).$implicit,l=u();return v(l.onEspecialistaChange(c))}),i(1,"span",15),n(2),o(),j(3,"img",16),o()}if(a&2){let e=t.$implicit;s(2),M("",e.nombre," ",e.apellido,""),s(),ge("alt",e.nombre),p("src",e.imageUrl,fe)}}function Be(a,t){if(a&1){let e=x();i(0,"div",17),g("click",function(){let c=_(e).$implicit,l=u();return v(l.onEspecialidadChange(c.nombre))}),j(1,"img",18),i(2,"span",19),n(3),o()()}if(a&2){let e=t.$implicit;s(),ge("alt",e.nombre),p("src",e.imagen,fe),s(2),m(e.nombre)}}function He(a,t){if(a&1){let e=x();i(0,"div",20),g("click",function(){let c=_(e).$implicit,l=u();return v(l.onDiaSeleccionado(c))}),i(1,"button",21),n(2),Se(3,"date"),o()()}if(a&2){let e=t.$implicit;s(2),m(Ee(3,1,e,"yyyy-MM-dd"))}}function $e(a,t){if(a&1){let e=x();i(0,"div",20),g("click",function(){let c=_(e).$implicit,l=u();return v(l.onHorarioSeleccionado(c))}),i(1,"button",22),n(2),o()()}if(a&2){let e=t.$implicit;s(2),M("",e.horaInicio," - ",e.horaFin,"")}}function Ge(a,t){a&1&&(i(0,"div")(1,"label",23),n(2,"Paciente:"),o(),j(3,"input",24),i(4,"label",25),n(5,"DNI:"),o(),j(6,"input",26),i(7,"label",27),n(8,"Obra Social:"),o(),j(9,"input",28),o())}function Le(a,t){if(a&1){let e=x();i(0,"app-listado-paciente",29),g("usuarioSeleccionado",function(c){_(e);let l=u();return v(l.setPacienteData(c))}),o()}}var ie=class a{constructor(t,e,r,c,l,f){this.especialidadService=t;this.especialistaService=e;this.turnoService=r;this.authService=c;this.fb=l;this.router=f;this.turnoForm=this.fb.group({especialidad:["",A.required],especialista:["",A.required],horario:["",A.required],paciente:["",A.required],dni:["",[A.required,A.pattern(/^[0-9]{8,}$/)]],obraSocial:["",A.required]})}especialistas=[];horarios=[];turnoForm;isAdmin=!1;isPaciente=!1;usuarioSeleccionado;obtenerIdPaciente;nombreEspecialista;especialiadaSeleccionada;idEspecialista;especialidadesDelEspecialista=[];diasDisponibles=[];horariosPorDia=[];selectedTurno;ngOnInit(){this.cargarEspecialistas(),this.checkUserRole()}cargarEspecialistas(){return d(this,null,function*(){try{this.especialistas=yield this.especialistaService.getEspecialistas(),console.log("Especialistas cargados:",this.especialistas)}catch(t){console.error("Error al cargar los especialistas:",t),V.default.fire("Error","No se pudieron cargar los especialistas","error")}})}getUser(){return d(this,null,function*(){return new Promise(t=>{this.authService.getUser().subscribe(t)})})}checkUserRole(){return d(this,null,function*(){this.authService.getUser().subscribe(t=>{t&&(this.isAdmin=t.role==="administrador",this.isPaciente=t.role==="paciente")})})}setPacienteData(t){return d(this,null,function*(){this.usuarioSeleccionado=t,t&&this.turnoForm.patchValue({paciente:t.nombre,dni:t.dni,obraSocial:t.obraSocial,especialista:""})})}onEspecialistaChange(t){return d(this,null,function*(){if(this.idEspecialista=t.uid,this.diasDisponibles=[],this.horarios=[],console.log("ID del especialista seleccionado:",this.idEspecialista),this.idEspecialista)try{this.especialidadesDelEspecialista=yield this.especialidadService.getEspecialidadesPorEspecialista(t),this.nombreEspecialista=`${t.nombre} ${t.apellido}`,console.log("Especialidades del especialista:",this.especialidadesDelEspecialista)}catch(e){console.error("Error al cargar las especialidades:",e),V.default.fire("Error","No se pudieron cargar las especialidades","error")}else this.especialidadesDelEspecialista=[]})}onEspecialidadChange(t){return d(this,null,function*(){if(this.especialiadaSeleccionada=t,this.turnoForm.patchValue({horario:""}),this.horarios=[],this.diasDisponibles=[],t)try{let e=yield this.turnoService.obtenerTurnosDisponibles(this.idEspecialista,t),r=new Date,c=e.filter(l=>new Date(l.fecha)>=r);this.diasDisponibles=[...new Set(c.map(l=>l.fecha))],this.diasDisponibles.sort((l,f)=>new Date(l).getTime()-new Date(f).getTime()),this.horariosPorDia=c}catch{V.default.fire("Error","No se pudieron cargar los horarios","error")}})}onDiaSeleccionado(t){return d(this,null,function*(){this.horarios=this.horariosPorDia.filter(e=>e.fecha===t&&e.estado==="disponible").map(e=>({horaInicio:e.hora_inicio,horaFin:e.hora_fin,id:e.id,fecha:e.fecha})),console.log("Horarios seleccionados:",this.horarios)})}onHorarioSeleccionado(t){this.selectedTurno=t,console.log("Turno seleccionado:",this.selectedTurno),this.turnoForm.patchValue({horario:`${t.horaInicio} - ${t.horaFin}`})}solicitarTurno(){return d(this,null,function*(){if(!this.selectedTurno){V.default.fire("Error","Debe seleccionar un turno.","error");return}try{let t=yield this.getUser();console.log("datos del usuario",t.dni,t.obraSocial,t.nombre),this.obtenerIdPaciente=t.role==="paciente"?t.uid:this.usuarioSeleccionado.uid;let e=Ce(xe({},this.turnoForm.value),{turnoId:this.selectedTurno.id,fecha:this.selectedTurno.fecha,horaInicio:this.selectedTurno.horaInicio,horaFin:this.selectedTurno.horaFin,especialidad:this.especialiadaSeleccionada,especialista:this.nombreEspecialista,paciente:this.isAdmin?this.turnoForm.value.paciente:t.nombre,dni:this.isAdmin?this.turnoForm.value.dni:t.dni,obraSocial:this.isAdmin?this.turnoForm.value.obraSocial:t.obraSocial});yield this.turnoService.buscarYActualizarTurno(e,this.obtenerIdPaciente),V.default.fire("Registro exitoso","El turno ha sido solicitado correctamente.","success"),this.router.navigate(["/bienvenida"])}catch(t){console.error("Error al solicitar el turno:",t),V.default.fire("Error","No se pudo solicitar el turno. Int\xE9ntalo nuevamente.","error")}})}static \u0275fac=function(e){return new(e||a)(b(ee),b(te),b(w),b(E),b(Ie),b(D))};static \u0275cmp=P({type:a,selectors:[["app-solicitar-turno"]],decls:21,vars:7,consts:[[3,"ngSubmit","formGroup"],["for","especialista"],[1,"profesionales-container"],["class","profesional",3,"click",4,"ngFor","ngForOf"],["for","especialidad"],[1,"especialidades-container"],["class","especialidad-btn",3,"click",4,"ngFor","ngForOf"],["for","horario"],[1,"dias-container"],[3,"click",4,"ngFor","ngForOf"],[1,"horarios-container"],[4,"ngIf"],["type","submit"],[3,"usuarioSeleccionado",4,"ngIf"],[1,"profesional",3,"click"],[1,"profesional-nombre"],[1,"profesional-img",3,"src","alt"],[1,"especialidad-btn",3,"click"],[1,"especialidad-img",3,"src","alt"],[1,"especialidad-nombre"],[3,"click"],["type","button",1,"dia-btn"],["type","button",1,"horario-btn"],["for","paciente"],["formControlName","paciente","type","text","readonly",""],["for","dni"],["formControlName","dni","type","text","readonly",""],["for","obraSocial"],["formControlName","obraSocial","type","text","readonly",""],[3,"usuarioSeleccionado"]],template:function(e,r){e&1&&(i(0,"form",0),g("ngSubmit",function(){return r.solicitarTurno()}),i(1,"label",1),n(2,"Especialista:"),o(),i(3,"div",2),C(4,je,4,4,"div",3),o(),i(5,"label",4),n(6,"Especialidad:"),o(),i(7,"div",5),C(8,Be,4,3,"div",6),o(),i(9,"label",7),n(10,"D\xEDa:"),o(),i(11,"div",8),C(12,He,4,4,"div",9),o(),i(13,"label",7),n(14,"Horario:"),o(),i(15,"div",10),C(16,$e,3,2,"div",9),o(),C(17,Ge,10,0,"div",11),i(18,"button",12),n(19,"Solicitar turno"),o()(),C(20,Le,1,0,"app-listado-paciente",13)),e&2&&(p("formGroup",r.turnoForm),s(4),p("ngForOf",r.especialistas),s(4),p("ngForOf",r.especialidadesDelEspecialista),s(4),p("ngForOf",r.diasDisponibles),s(4),p("ngForOf",r.horarios),s(),p("ngIf",r.isAdmin),s(3),p("ngIf",r.isAdmin))},dependencies:[Me,B,H,Pe,we,Oe,De,k,F,ye],styles:['@charset "UTF-8";form[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:30px;border:2px solid #007bff;border-radius:15px;background-color:#e0f7fa;box-shadow:0 4px 20px #0003}label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px;display:block;color:#007bff}input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #007bff;border-radius:6px;font-size:16px;margin-bottom:15px;background-color:#f1f1f1;transition:border-color .3s,background-color .3s}input[type=text][_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:#0056b3;background-color:#fff}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:12px 15px;border:none;border-radius:6px;cursor:pointer;width:100%;font-size:1em;transition:background-color .3s,transform .2s}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-2px)}.profesionales-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;margin-bottom:20px}.profesional[_ngcontent-%COMP%]{cursor:pointer;text-align:center;transition:transform .3s;padding:15px;background-color:#f1f1f1;box-shadow:0 4px 10px #0003;border-radius:50%;width:100px;display:flex;flex-direction:column;align-items:center;justify-content:center}.profesional[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.profesional-nombre[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#007bff;margin-bottom:8px}.profesional-img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;object-fit:cover}.especialidades-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;margin-bottom:20px}.especialidad-btn[_ngcontent-%COMP%]{cursor:pointer;text-align:center;border-radius:12px;padding:10px;background-color:#f1f1f1;box-shadow:0 4px 10px #0003;transition:transform .3s;width:100px;height:120px;display:flex;flex-direction:column;justify-content:center;align-items:center}.especialidad-btn[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.especialidad-img[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:8px;margin-top:5px}.especialidad-nombre[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#007bff;margin-bottom:5px}.dias-container[_ngcontent-%COMP%], .horarios-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;margin-bottom:20px}.dia-btn[_ngcontent-%COMP%], .horario-btn[_ngcontent-%COMP%]{cursor:pointer;text-align:center;border-radius:6px;padding:15px;background-color:#4caf50;box-shadow:0 4px 10px #0003;width:150px;transition:transform .3s}.horario-btn[_ngcontent-%COMP%]{font-weight:700}.dia-btn[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.dia-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#007bff}.horario-btn[_ngcontent-%COMP%]:hover{background-color:#45a049}div[ngIf][_ngcontent-%COMP%]{margin-bottom:20px;background-color:#f9f9f9;padding:15px;border-radius:8px;box-shadow:0 4px 10px #0000001a}input[readonly][_ngcontent-%COMP%]{background-color:#e0e0e0;cursor:not-allowed}']})};var ne=class a{constructor(t,e){this.authService=t;this.router=e}canActivate(t,e){return this.authService.getUser().pipe(N(r=>r&&(r.role==="administrador"||r.role==="paciente")?!0:(this.router.navigate(["/bienvenida"]),console.log("Acceso denegado: no es administrador ni paciente"),!1)))}static \u0275fac=function(e){return new(e||a)(O(E),O(D))};static \u0275prov=R({token:a,factory:a.\u0275fac,providedIn:"root"})};var y=$(L());var ae=class a{constructor(t){this.turnoService=t}usuarioSeleccionado=null;disponibilidadSemana={lunes:{horaInicio:"",horaFin:""},martes:{horaInicio:"",horaFin:""},mi\u00E9rcoles:{horaInicio:"",horaFin:""},jueves:{horaInicio:"",horaFin:""},viernes:{horaInicio:"",horaFin:""},s\u00E1bado:{horaInicio:"",horaFin:""},domingo:{horaInicio:"",horaFin:""}};horariosClinica={lunes:{apertura:"08:00",cierre:"19:00"},martes:{apertura:"08:00",cierre:"19:00"},mi\u00E9rcoles:{apertura:"08:00",cierre:"19:00"},jueves:{apertura:"08:00",cierre:"19:00"},viernes:{apertura:"08:00",cierre:"19:00"},s\u00E1bado:{apertura:"08:00",cierre:"14:00"},domingo:{apertura:null,cierre:null}};mostrarUsuario(t){this.usuarioSeleccionado=t}esHorarioValido(t){let e=parseInt(t.split(":")[1],10);return e===0||e===30}guardarDisponibilidad(){return d(this,null,function*(){if(!this.usuarioSeleccionado){y.default.fire("Error","Por favor, selecciona un especialista.","error");return}for(let t in this.disponibilidadSemana){let e=this.disponibilidadSemana[t],r=this.horariosClinica[t];if(e.horaInicio&&!this.esHorarioValido(e.horaInicio)||e.horaFin&&!this.esHorarioValido(e.horaFin)){y.default.fire("Error",`Los horarios de ${t} deben ser en intervalos de media hora (ej. 08:00 o 08:30).`,"error");return}if(r.apertura&&r.cierre){if(e.horaInicio<r.apertura||e.horaInicio>r.cierre||e.horaFin<r.apertura||e.horaFin>r.cierre){y.default.fire("Error",`El horario de ${t} debe estar entre ${r.apertura} y ${r.cierre}.`,"error");return}if(e.horaInicio>=e.horaFin){y.default.fire("Error",`En ${t}, la hora de inicio debe ser anterior a la hora de fin.`,"error");return}}else if(e.horaInicio||e.horaFin){y.default.fire("Error",`El d\xEDa ${t} est\xE1 cerrado, no debe haber horarios de disponibilidad.`,"error");return}}try{yield this.turnoService.guardarDisponibilidad(this.usuarioSeleccionado.uid,this.disponibilidadSemana),this.generarTurnosProximos15Dias(),y.default.fire("\xC9xito","Disponibilidad guardada correctamente.","success")}catch(t){console.error("Error al guardar la disponibilidad:",t),y.default.fire("Error","No se pudo guardar la disponibilidad.","error")}})}generarTurnosProximos15Dias(){return d(this,null,function*(){if(console.log("entramos a la creacion de turnos"),!this.usuarioSeleccionado){y.default.fire("Error","Por favor, selecciona un especialista.","error");return}let t=yield this.turnoService.obtenerDisponibilidad(this.usuarioSeleccionado.uid);if(!t){y.default.fire("Error","No se encontr\xF3 disponibilidad para el especialista seleccionado.","error");return}let e=[],r=new Date;for(let c=0;c<15;c++){let l=new Date(r);l.setDate(r.getDate()+c);let f=this.obtenerNombreDia(l);if(t[f]){let T=t[f];if(T.horaInicio&&T.horaFin){let q=T.horaInicio;for(;q<T.horaFin;){let me=this.sumarMinutos(q,30);me<=T.horaFin&&e.push({especialista_id:this.usuarioSeleccionado.uid,fecha:l.toISOString().split("T")[0],hora_inicio:q,hora_fin:me,estado:"disponible"}),q=me}}}}try{yield this.turnoService.guardarTurnos(e),y.default.fire("\xC9xito","Turnos generados para los pr\xF3ximos 15 d\xEDas.","success")}catch(c){console.error("Error al generar los turnos:",c),y.default.fire("Error","No se pudieron generar los turnos.","error")}})}obtenerNombreDia(t){return["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"][t.getDay()]}sumarMinutos(t,e){let[r,c]=t.split(":").map(Number),l=new Date;l.setHours(r,c+e);let f=String(l.getHours()).padStart(2,"0"),T=String(l.getMinutes()).padStart(2,"0");return`${f}:${T}`}static \u0275fac=function(e){return new(e||a)(b(w))};static \u0275cmp=P({type:a,selectors:[["app-gestion-horarios"]],decls:0,vars:0,template:function(e,r){},styles:['@charset "UTF-8";form[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:30px;border:2px solid #007bff;border-radius:15px;background-color:#e0f7fa;box-shadow:0 4px 20px #0003}label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px;display:block;color:#007bff}.horarios[_ngcontent-%COMP%]{display:flex;gap:15px}input[type=time][_ngcontent-%COMP%]{width:48%;padding:12px;border:1px solid #007bff;border-radius:6px;font-size:16px;box-sizing:border-box;background-color:#f1f1f1;transition:border-color .3s,background-color .3s}input[type=time][_ngcontent-%COMP%]:focus{border-color:#0056b3;outline:none;background-color:#fff}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:12px 15px;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s,transform .2s;width:100%;font-size:1em}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-2px)}div[_ngcontent-%COMP%]{margin-bottom:20px}']})};var z=$(L());function Ue(a,t){if(a&1){let e=x();i(0,"div")(1,"input",1),g("change",function(c){_(e);let l=u();return v(l.onEspecialidadChange(c))}),o(),n(2),o()}if(a&2){let e=t.$implicit;s(),p("value",e.nombre),s(),G(" ",e.nombre,`
`)}}function qe(a,t){if(a&1){let e=x();i(0,"div")(1,"input",2),g("change",function(c){let l=_(e).$implicit,f=u();return v(f.onEspecialistaChange(c,l))}),o(),n(2),o()}if(a&2){let e=t.$implicit;s(),p("value",e.uid),s(),M(" ",e.nombre," ",e.apellido,`
`)}}function We(a,t){if(a&1){let e=x();i(0,"button",5),g("click",function(){_(e);let c=u().$implicit,l=u();return v(l.cancelarTurno(c))}),n(1," Cancelar Turno "),o()}}function Ye(a,t){a&1&&(i(0,"button",6),n(1," no acciones "),o())}function Je(a,t){if(a&1&&(i(0,"tr")(1,"td"),n(2),o(),i(3,"td"),n(4),o(),i(5,"td"),n(6),o(),i(7,"td"),n(8),o(),i(9,"td"),n(10),o(),i(11,"td"),n(12),o(),i(13,"td"),n(14),o(),i(15,"td"),n(16),o(),i(17,"td"),C(18,We,2,0,"button",3)(19,Ye,2,0,"button",4),o()()),a&2){let e=t.$implicit,r=u();s(2),m(e.dni),s(2),m(e.paciente),s(2),m(e.obraSocial),s(2),m(r.nombreEspecialista),s(2),m(e.especialidad),s(2),m(e.fecha),s(2),M("",e.hora_inicio," - ",e.hora_fin,""),s(2),m(e.estado),s(2),p("ngIf",e.estado==="solicitado"),s(),p("ngIf",e.estado!=="solicitado")}}var ce=class a{constructor(t,e,r){this.turnoService=t;this.especialidadService=e;this.especialistaService=r}especialidades=[];especialistas=[];horarios=[];nombreEspecialista;especialidadSeleccionada="";ngOnInit(){this.cargarEspecialidades()}cargarEspecialidades(){return d(this,null,function*(){this.especialidades=yield this.especialidadService.getEspecialidades()})}onEspecialidadChange(t){return d(this,null,function*(){let e=t.target;if(this.especialidadSeleccionada=e.value,this.especialidadSeleccionada)try{this.especialistas=yield this.especialistaService.getEspecialistasPorEspecialidad(this.especialidadSeleccionada),this.horarios=[]}catch{z.default.fire("Error","No se pudieron cargar los especialistas","error")}else this.especialistas=[],this.horarios=[]})}onEspecialistaChange(t,e){return d(this,null,function*(){let c=t.target.value;if(c){this.nombreEspecialista=`${e.nombre} ${e.apellido}`;try{let l=yield this.turnoService.obtenerTurnosDisponiblesEspecialista(c);this.horarios=l.filter(f=>f.especialidad===this.especialidadSeleccionada),this.horarios.sort((f,T)=>new Date(f.fecha).getTime()-new Date(T.fecha).getTime())}catch{z.default.fire("Error","No se pudieron cargar los turnos","error")}}else this.horarios=[]})}cancelarTurno(t){return d(this,null,function*(){if(["Aceptado","Realizado","Rechazado"].includes(t.estado)){z.default.fire("Aviso","No se puede cancelar un turno aceptado, realizado o rechazado","info");return}let{isConfirmed:e,value:r}=yield z.default.fire({title:"\xBFEst\xE1s seguro de cancelar el turno?",text:"Por favor, ingresa el motivo de la cancelaci\xF3n",input:"textarea",inputPlaceholder:"Escribe aqu\xED el motivo...",inputAttributes:{"aria-label":"Motivo de cancelaci\xF3n"},confirmButtonText:"Cancelar turno",showCancelButton:!0,cancelButtonText:"Volver",inputValidator:c=>c?null:"El motivo es requerido para cancelar el turno"});if(e&&r)try{yield this.turnoService.cancelarTurno(t.id,r),z.default.fire("Cancelado","El turno ha sido cancelado con \xE9xito","success"),yield this.onEspecialistaChange({target:{value:t.especialistaId}},{nombre:t.nombreEspecialista,apellido:t.apellidoEspecialista})}catch{z.default.fire("Error","No se pudo cancelar el turno","error")}})}static \u0275fac=function(e){return new(e||a)(b(w),b(ee),b(te))};static \u0275cmp=P({type:a,selectors:[["app-gestionar-turnos"]],decls:31,vars:3,consts:[[4,"ngFor","ngForOf"],["type","radio","name","especialidad",3,"change","value"],["type","radio","name","especialista",3,"change","value"],["class","cancelar",3,"click",4,"ngIf"],["class","no-accion","disabled","",4,"ngIf"],[1,"cancelar",3,"click"],["disabled","",1,"no-accion"]],template:function(e,r){e&1&&(i(0,"h2"),n(1,"Listado de Turnos"),o(),i(2,"label"),n(3,"Especialidad:"),o(),C(4,Ue,3,2,"div",0),i(5,"label"),n(6,"Especialista:"),o(),C(7,qe,3,3,"div",0),i(8,"table")(9,"thead")(10,"tr")(11,"th"),n(12,"DNI"),o(),i(13,"th"),n(14,"Paciente"),o(),i(15,"th"),n(16,"Obra Social"),o(),i(17,"th"),n(18,"Especialista"),o(),i(19,"th"),n(20,"Especialidad"),o(),i(21,"th"),n(22,"Fecha"),o(),i(23,"th"),n(24,"Horario"),o(),i(25,"th"),n(26,"Estado"),o(),i(27,"th"),n(28,"Acciones"),o()()(),i(29,"tbody"),C(30,Je,20,11,"tr",0),o()()),e&2&&(s(4),p("ngForOf",r.especialidades),s(3),p("ngForOf",r.especialistas),s(23),p("ngForOf",r.horarios))},dependencies:[k,F],styles:['@charset "UTF-8";h2[_ngcontent-%COMP%]{color:#154360;text-align:center;margin-bottom:1rem;font-weight:700;font-size:1.5rem}label[_ngcontent-%COMP%]{font-weight:700;color:#154360;margin-right:.5rem}select[_ngcontent-%COMP%]{padding:.5rem;border-radius:4px;border:1px solid #D5D8DC;margin-bottom:1rem;margin-right:1rem;outline:none;transition:border-color .3s ease}select[_ngcontent-%COMP%]:focus{border-color:#154360}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff;box-shadow:0 4px 8px #0000001a;margin:0 auto;border-radius:8px;overflow:hidden}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:1rem;text-align:left}thead[_ngcontent-%COMP%]{background-color:#154360;color:#fff}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;text-transform:uppercase;letter-spacing:.05em}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .3s ease,transform .2s ease}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f3f4}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#d5e8e8;transform:scale(1.01)}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #F2F3F4}button[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.9rem;border:none;border-radius:4px;color:#fff;cursor:pointer;transition:background-color .3s ease,transform .2s ease;width:100%}button.no-accion[_ngcontent-%COMP%]{background-color:#b0e915}button.cancelar[_ngcontent-%COMP%]{background-color:#c0392b}button.cancelar[_ngcontent-%COMP%]:hover{background-color:#a93226;transform:scale(1.05)}td.estado[_ngcontent-%COMP%]{font-weight:700;color:#1e8449}td.estado.inhabilitado[_ngcontent-%COMP%]{color:#c0392b}']})};var h=$(L());function Ke(a,t){if(a&1){let e=x();i(0,"button",7),g("click",function(){_(e);let c=u().$implicit,l=u();return v(l.cancelarTurno(c))}),n(1," Cancelar Turno "),o()}}function Qe(a,t){if(a&1){let e=x();i(0,"button",8),g("click",function(){_(e);let c=u().$implicit,l=u();return v(l.aceptarTurno(c))}),n(1," aceptar turno "),o()}}function Xe(a,t){if(a&1){let e=x();i(0,"button",9),g("click",function(){_(e);let c=u().$implicit,l=u();return v(l.finalizarTurno(c))}),n(1," finalizar turno "),o()}}function Ze(a,t){if(a&1){let e=x();i(0,"button",10),g("click",function(){_(e);let c=u().$implicit,l=u();return v(l.verResenaTurno(c))}),n(1," ver rese\xF1a "),o()}}function et(a,t){if(a&1&&(i(0,"tr")(1,"td"),n(2),o(),i(3,"td"),n(4),o(),i(5,"td"),n(6),o(),i(7,"td"),n(8),o(),i(9,"td"),n(10),o(),i(11,"td"),n(12),o(),i(13,"td"),n(14),o(),i(15,"td"),n(16),o(),i(17,"td"),C(18,Ke,2,0,"button",3)(19,Qe,2,0,"button",4)(20,Xe,2,0,"button",5)(21,Ze,2,0,"button",6),o()()),a&2){let e=t.$implicit;s(2),m(e.dni),s(2),m(e.paciente),s(2),m(e.obraSocial),s(2),m(e.especialista),s(2),m(e.especialidad),s(2),m(e.fecha),s(2),M("",e.hora_inicio," - ",e.hora_fin,""),s(2),m(e.estado),s(2),p("ngIf",e.estado==="solicitado"),s(),p("ngIf",e.estado==="solicitado"),s(),p("ngIf",e.estado==="aceptado"),s(),p("ngIf",e.estado==="realizado")}}var se=class a{constructor(t,e,r){this.turnoService=t;this.authenticationService=e;this.cdr=r}especialidades=[];pacientes=[];horarios=[];nombrePaciente="";especialidadSeleccionada="";especialistaIniciado;pacienteSeleccionadoId="";filtroCampo="";filtroValor="";ngOnInit(){this.authenticationService.getUser().subscribe(t=>{t?(this.especialistaIniciado=t,this.cargarTurnos(t.uid)):h.default.fire("Error","No se encontr\xF3 el usuario","error")})}cargarTurnos(t){return d(this,null,function*(){try{this.horarios=yield this.turnoService.obtenerTurnosDisponiblesEspecialista(t)}catch{h.default.fire("Error","No se pudieron cargar los turnos","error")}})}cancelarTurno(t){return d(this,null,function*(){if(["Aceptado","Realizado","Rechazado"].includes(t.estado)){h.default.fire("Aviso","No se puede cancelar un turno aceptado, realizado o rechazado","info");return}let{isConfirmed:e,value:r}=yield h.default.fire({title:"\xBFEst\xE1s seguro de cancelar el turno?",text:"Por favor, ingresa el motivo de la cancelaci\xF3n",input:"textarea",inputPlaceholder:"Escribe aqu\xED el motivo...",inputAttributes:{"aria-label":"Motivo de cancelaci\xF3n"},confirmButtonText:"Cancelar turno",showCancelButton:!0,cancelButtonText:"Volver",inputValidator:c=>c?null:"El motivo es requerido para cancelar el turno"});if(e&&r)try{yield this.turnoService.cancelarTurno(t.id,r),h.default.fire("Cancelado","El turno ha sido cancelado con \xE9xito","success"),this.horarios=[],yield this.cargarTurnos(this.especialistaIniciado.uid),this.cdr.detectChanges(),console.log(this.horarios)}catch{h.default.fire("Error","No se pudo cancelar el turno","error")}})}aceptarTurno(t){return d(this,null,function*(){if(["Aceptado","Realizado","Rechazado"].includes(t.estado)){h.default.fire("Aviso","No se puede aceptar un turno ya aceptado, realizado o rechazado","info");return}let{isConfirmed:e}=yield h.default.fire({title:"\xBFEst\xE1s seguro de aceptar el turno?",confirmButtonText:"Aceptar turno",showCancelButton:!0,cancelButtonText:"Volver"});if(e)try{yield this.turnoService.aceptarTurno(t.id),h.default.fire("Aceptado","El turno ha sido aceptado con \xE9xito","success"),this.horarios=[],yield this.cargarTurnos(this.especialistaIniciado.uid),this.cdr.detectChanges()}catch{h.default.fire("Error","No se pudo aceptar el turno","error")}})}finalizarTurno(t){return d(this,null,function*(){if(t.estado!=="aceptado"){h.default.fire("Aviso","Solo puedes finalizar un turno aceptado","info");return}let{isConfirmed:e,value:r}=yield h.default.fire({title:"Finalizar Turno y Registrar Historia Cl\xEDnica",html:`
        <label for="diagnostico">Diagn\xF3stico:</label>
        <textarea id="diagnostico" rows="2" style="width: 100%;" placeholder="Escribe aqu\xED el diagn\xF3stico..."></textarea>
        
        <label for="rese\xF1a">Rese\xF1a:</label>
        <textarea id="rese\xF1a" rows="2" style="width: 100%;" placeholder="Escribe aqu\xED la rese\xF1a..."></textarea>
        
        <label for="altura">Altura (cm):</label>
        <input type="number" id="altura" style="width: 100%;" placeholder="Altura en cm" />
        
        <label for="peso">Peso (kg):</label>
        <input type="number" id="peso" style="width: 100%;" placeholder="Peso en kg" />
        
        <label for="temperatura">Temperatura (\xB0C):</label>
        <input type="number" id="temperatura" style="width: 100%;" placeholder="Temperatura en \xB0C" />
        
        <label for="presion">Presi\xF3n:</label>
        <input type="text" id="presion" style="width: 100%;" placeholder="Ej. 120/80" />
        
        <label>Datos Din\xE1micos:</label>
        <div id="datosDinamicos">
          <input type="text" placeholder="Clave" style="width: 48%; display: inline-block;" id="clave1" />
          <input type="text" placeholder="Valor" style="width: 48%; display: inline-block;" id="valor1" />
          <br />
          <input type="text" placeholder="Clave" style="width: 48%; display: inline-block;" id="clave2" />
          <input type="text" placeholder="Valor" style="width: 48%; display: inline-block;" id="valor2" />
          <br />
          <input type="text" placeholder="Clave" style="width: 48%; display: inline-block;" id="clave3" />
          <input type="text" placeholder="Valor" style="width: 48%; display: inline-block;" id="valor3" />
        </div>
      `,focusConfirm:!1,preConfirm:()=>({diagnostico:document.getElementById("diagnostico").value,rese\u00F1a:document.getElementById("rese\xF1a").value,historiaClinica:{altura:+document.getElementById("altura").value,peso:+document.getElementById("peso").value,temperatura:+document.getElementById("temperatura").value,presion:document.getElementById("presion").value,datosDinamicos:[{clave:document.getElementById("clave1").value,valor:document.getElementById("valor1").value},{clave:document.getElementById("clave2").value,valor:document.getElementById("valor2").value},{clave:document.getElementById("clave3").value,valor:document.getElementById("valor3").value}].filter(c=>c.clave&&c.valor)}}),confirmButtonText:"Finalizar Turno",showCancelButton:!0,cancelButtonText:"Cancelar"});if(e){let{diagnostico:c,rese\u00F1a:l,historiaClinica:f}=r;if(!c||!l||!f.altura||!f.peso||!f.temperatura||!f.presion){h.default.fire("Error","Todos los campos son obligatorios","error");return}if(f.temperatura<30||f.temperatura>45){h.default.fire("Error","La temperatura debe estar entre 30\xB0C y 45\xB0C","error");return}if(f.altura<30||f.altura>250){h.default.fire("Error","La altura debe estar entre 30 cm y 250 cm","error");return}if(f.peso<3||f.peso>500){h.default.fire("Error","El peso debe estar entre 3 kg y 500 kg","error");return}try{yield this.turnoService.finalizarTurnoCompleto(t.id,{diagnostico:c,rese\u00F1a:l,historiaClinica:f}),h.default.fire("Finalizado","El turno ha sido finalizado con \xE9xito","success"),this.horarios=[],yield this.cargarTurnos(this.especialistaIniciado.uid),this.cdr.detectChanges(),console.log(this.horarios)}catch{h.default.fire("Error","No se pudo finalizar el turno","error")}}})}verResenaTurno(t){return d(this,null,function*(){if(t.estado!=="realizado"){h.default.fire("Aviso","Solo puedes ver la rese\xF1a de un turno realizado","info");return}try{yield this.turnoService.obtenerRese\u00F1aTurno(t.id)}catch(e){console.error("Error al obtener rese\xF1a:",e),h.default.fire("Error","No se pudo obtener la rese\xF1a","error")}})}buscarTurnos(){return d(this,null,function*(){if(!this.filtroValor){h.default.fire("Error","Por favor, complete el campo de filtro.","error");return}try{let t;console.log("Realizando b\xFAsqueda general"),t=yield this.turnoService.buscarTurnosPorValor(this.filtroValor),this.horarios=Object.values(t),this.filtroValor=""}catch(t){console.error("Error al buscar turnos:",t),h.default.fire("Error","No se pudieron cargar los turnos","error")}})}static \u0275fac=function(e){return new(e||a)(b(w),b(E),b(X))};static \u0275cmp=P({type:a,selectors:[["app-turnos-especialista"]],decls:30,vars:2,consts:[["type","text","placeholder","Buscar por paciente, campo o valor",3,"ngModelChange","ngModel"],[1,"buscar",3,"click"],[4,"ngFor","ngForOf"],["class","cancelar",3,"click",4,"ngIf"],["class","aceptar",3,"click",4,"ngIf"],["class","finalizar",3,"click",4,"ngIf"],["class","realizado",3,"click",4,"ngIf"],[1,"cancelar",3,"click"],[1,"aceptar",3,"click"],[1,"finalizar",3,"click"],[1,"realizado",3,"click"]],template:function(e,r){e&1&&(i(0,"h2"),n(1,"Listado de Turnos"),o(),i(2,"label"),n(3,"Buscar Turnos:"),o(),i(4,"input",0),Q("ngModelChange",function(l){return K(r.filtroValor,l)||(r.filtroValor=l),l}),o(),i(5,"button",1),g("click",function(){return r.buscarTurnos()}),n(6,"Buscar"),o(),i(7,"table")(8,"thead")(9,"tr")(10,"th"),n(11,"DNI"),o(),i(12,"th"),n(13,"Paciente"),o(),i(14,"th"),n(15,"Obra Social"),o(),i(16,"th"),n(17,"Especialista"),o(),i(18,"th"),n(19,"Especialidad"),o(),i(20,"th"),n(21,"Fecha"),o(),i(22,"th"),n(23,"Horario"),o(),i(24,"th"),n(25,"Estado"),o(),i(26,"th"),n(27,"Acciones"),o()()(),i(28,"tbody"),C(29,et,22,13,"tr",2),o()()),e&2&&(s(4),J("ngModel",r.filtroValor),s(25),p("ngForOf",r.horarios))},dependencies:[B,H,k,F,Z],styles:['@charset "UTF-8";h2[_ngcontent-%COMP%]{color:#154360;text-align:center;margin-bottom:1.5rem;font-weight:700;font-size:1.8rem}label[_ngcontent-%COMP%]{font-weight:700;color:#154360;margin-right:.5rem}input[type=radio][_ngcontent-%COMP%]{accent-color:#154360;margin-right:10px;transition:transform .2s ease}input[type=radio][_ngcontent-%COMP%]:hover{transform:scale(1.1)}select[_ngcontent-%COMP%]{padding:.8rem;border-radius:8px;border:1px solid #D5D8DC;margin-bottom:1.5rem;margin-right:1rem;outline:none;font-size:1rem;background-color:#f9f9f9;transition:border-color .3s ease,background-color .3s ease}select[_ngcontent-%COMP%]:focus{border-color:#154360;background-color:#eef6f7}input[type=text][_ngcontent-%COMP%]{padding:.8rem;border-radius:8px;border:1px solid #D5D8DC;margin-bottom:1.5rem;outline:none;font-size:1rem;background-color:#f9f9f9;transition:border-color .3s ease,background-color .3s ease;width:300px}input[type=text][_ngcontent-%COMP%]:focus{border-color:#154360;background-color:#eef6f7}button[type=submit][_ngcontent-%COMP%]{padding:.8rem 2rem;background-color:#154360;color:#fff;font-size:1rem;border:none;border-radius:8px;cursor:pointer;width:100%;transition:background-color .3s ease,transform .2s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#1e4f6d;transform:scale(1.05)}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff;box-shadow:0 4px 8px #0000001a;margin:1.5rem 0;border-radius:8px;overflow:hidden}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:1rem;text-align:left}thead[_ngcontent-%COMP%]{background-color:#154360;color:#fff}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;text-transform:uppercase;letter-spacing:.05em}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .3s ease,transform .2s ease}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f3f4}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#d5e8e8;transform:scale(1.01)}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #F2F3F4}button[_ngcontent-%COMP%]{padding:.5rem 1.2rem;font-size:.9rem;border:none;border-radius:8px;color:#fff;cursor:pointer;transition:background-color .3s ease,transform .2s ease;width:100%}button.realizado[_ngcontent-%COMP%], button.encuesta[_ngcontent-%COMP%], button.calificacion[_ngcontent-%COMP%], button.aceptar[_ngcontent-%COMP%], button.finalizar[_ngcontent-%COMP%], button.buscar[_ngcontent-%COMP%]{margin-bottom:5px;background-color:#b0e915}button.realizado[_ngcontent-%COMP%]:hover, button.encuesta[_ngcontent-%COMP%]:hover, button.calificacion[_ngcontent-%COMP%]:hover, button.aceptar[_ngcontent-%COMP%]:hover, button.finalizar[_ngcontent-%COMP%]:hover{background-color:#82b825;transform:scale(1.05)}button.cancelar[_ngcontent-%COMP%]{background-color:#c0392b}button.cancelar[_ngcontent-%COMP%]:hover{background-color:#a93226;transform:scale(1.05)}td.estado[_ngcontent-%COMP%]{font-weight:700;color:#1e8449}td.estado.inhabilitado[_ngcontent-%COMP%]{color:#c0392b}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f4f7fa;margin:0;padding:20px;display:flex;justify-content:center}form[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:8px;box-shadow:0 4px 10px #0000001a;width:100%;max-width:700px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:.5rem;display:block}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1e8449;font-size:1.1rem;width:auto;margin-top:1rem;padding:.8rem 1.6rem}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#2d6a3e}']})};var le=class a{constructor(t,e){this.authService=t;this.router=e}canActivate(t,e){return this.authService.getUser().pipe(N(r=>r&&r.role==="especialista"?!0:(this.router.navigate(["/bienvenida"]),console.log("no es especialista verifica las cosas bien"),!1)))}static \u0275fac=function(e){return new(e||a)(O(E),O(D))};static \u0275prov=R({token:a,factory:a.\u0275fac,providedIn:"root"})};var S=$(L());function tt(a,t){if(a&1){let e=x();i(0,"button",7),g("click",function(){_(e);let c=u().$implicit,l=u();return v(l.cancelarTurno(c))}),n(1," Cancelar Turno "),o()}}function it(a,t){if(a&1){let e=x();i(0,"button",8),g("click",function(){_(e);let c=u().$implicit,l=u();return v(l.verResenaTurno(c))}),n(1," ver rese\xF1a "),o()}}function ot(a,t){if(a&1){let e=x();i(0,"button",9),g("click",function(){_(e);let c=u().$implicit,l=u();return v(l.mostrarEncuesta(c))}),n(1),o()}if(a&2){let e=u().$implicit;p("disabled",e.encuesta),s(),G(" ",e.encuesta?"Encuesta Realizada":"Realizar Encuesta"," ")}}function rt(a,t){if(a&1){let e=x();i(0,"button",10),g("click",function(){_(e);let c=u().$implicit,l=u();return v(l.calificarAtencion(c))}),n(1),o()}if(a&2){let e=u().$implicit;p("disabled",e.calificacionTurno),s(),G(" ",e.calificacionTurno?"Calificaci\xF3n Realizada":"Calificar Atenci\xF3n"," ")}}function nt(a,t){if(a&1&&(i(0,"tr")(1,"td"),n(2),o(),i(3,"td"),n(4),o(),i(5,"td"),n(6),o(),i(7,"td"),n(8),o(),i(9,"td"),n(10),o(),i(11,"td"),n(12),o(),i(13,"td"),n(14),o(),i(15,"td"),n(16),o(),i(17,"td"),C(18,tt,2,0,"button",3)(19,it,2,0,"button",4)(20,ot,2,2,"button",5)(21,rt,2,2,"button",6),o()()),a&2){let e=t.$implicit;s(2),m(e.dni),s(2),m(e.paciente),s(2),m(e.obraSocial),s(2),m(e.especialista),s(2),m(e.especialidad),s(2),m(e.fecha),s(2),M("",e.hora_inicio," - ",e.hora_fin,""),s(2),m(e.estado),s(2),p("ngIf",e.estado==="solicitado"),s(),p("ngIf",e.estado==="realizado"),s(),p("ngIf",e.estado==="realizado"),s(),p("ngIf",e.estado==="realizado")}}var de=class a{constructor(t,e,r){this.turnoService=t;this.authenticationService=e;this.cdr=r}especialidades=[];especialistas=[];horarios=[];nombreEspecialista;especialidadSeleccionada="";encuesta={};filtroCampo="";filtroValor="";pacienteActual="";ngOnInit(){this.authenticationService.getUser().subscribe(t=>{console.log(t),t?(this.pacienteActual=t,this.cargarTurnos(t.uid)):S.default.fire("Error","No se encontr\xF3 el usuario","error")})}cargarTurnos(t){return d(this,null,function*(){try{this.horarios=yield this.turnoService.obtenerTurnos(),console.log(this.horarios),this.horarios=this.horarios.filter(e=>(console.log("Comparando:",e.pacienteId,"con",t),String(e.pacienteId)===String(t))),this.horarios.length===0&&S.default.fire("info","No hay turnos","info")}catch{S.default.fire("Error","No se pudieron cargar los turnos","error")}})}cancelarTurno(t){return d(this,null,function*(){if(["Aceptado","Realizado","Rechazado"].includes(t.estado)){S.default.fire("Aviso","No se puede cancelar un turno aceptado, realizado o rechazado","info");return}let{isConfirmed:e,value:r}=yield S.default.fire({title:"\xBFEst\xE1s seguro de cancelar el turno?",text:"Por favor, ingresa el motivo de la cancelaci\xF3n",input:"textarea",inputPlaceholder:"Escribe aqu\xED el motivo...",inputAttributes:{"aria-label":"Motivo de cancelaci\xF3n"},confirmButtonText:"Cancelar turno",showCancelButton:!0,cancelButtonText:"Volver",inputValidator:c=>c?null:"El motivo es requerido para cancelar el turno"});if(e&&r)try{yield this.turnoService.cancelarTurno(t.turnoId,r),S.default.fire("Cancelado","El turno ha sido cancelado con \xE9xito","success"),this.horarios=[],yield this.cargarTurnos(this.pacienteActual.uid),this.cdr.detectChanges(),console.log(this.horarios)}catch{S.default.fire("Error","No se pudo cancelar el turno","error")}})}verResenaTurno(t){return d(this,null,function*(){if(t.estado!=="realizado"){S.default.fire("Aviso","Solo puedes ver la rese\xF1a de un turno realizado","info");return}try{yield this.turnoService.obtenerRese\u00F1aTurno(t.turnoId)}catch(e){console.error("Error al obtener rese\xF1a:",e),S.default.fire("Error","No se pudo obtener la rese\xF1a","error")}})}mostrarEncuesta(t){return d(this,null,function*(){S.default.fire({title:"Completar Encuesta",html:`
        <label for="pregunta1">\xBFC\xF3mo calificar\xEDas la atenci\xF3n del especialista?</label>
        <input type="text" id="pregunta1" class="swal2-input" placeholder="Tu respuesta aqu\xED">
        
        <label for="pregunta2">\xBFEst\xE1s satisfecho con la duraci\xF3n de tu consulta?</label>
        <input type="text" id="pregunta2" class="swal2-input" placeholder="Tu respuesta aqu\xED">
      `,focusConfirm:!1,preConfirm:()=>{let e=document.getElementById("pregunta1").value,r=document.getElementById("pregunta2").value;return(!e||!r)&&S.default.showValidationMessage("Por favor completa todas las preguntas"),{pregunta1:e,pregunta2:r}}}).then(e=>d(this,null,function*(){e.isConfirmed&&(this.encuesta={respuesta1:e.value.pregunta1,respuesta2:e.value.pregunta2},yield this.turnoService.guardarEncuesta(t.turnoId,this.encuesta),S.default.fire("Gracias","Tus respuestas han sido guardadas","success"),this.horarios=[],yield this.cargarTurnos(this.pacienteActual.uid),this.cdr.detectChanges())}))})}calificarAtencion(t){return d(this,null,function*(){if(t.estado!=="realizado"){S.default.fire("Aviso","Solo puedes calificar la atenci\xF3n de un turno realizado","info");return}let{value:e}=yield S.default.fire({title:"Calificar Atenci\xF3n",input:"textarea",inputPlaceholder:"Escribe aqu\xED tu comentario sobre la atenci\xF3n...",showCancelButton:!0,confirmButtonText:"Enviar Comentario",cancelButtonText:"Cancelar",inputValidator:r=>r?null:"El comentario es obligatorio"});e&&(yield this.turnoService.guardarCalificacion(t.turnoId,e),S.default.fire("Gracias","Tu calificaci\xF3n ha sido guardada","success"),this.horarios=[],yield this.cargarTurnos(this.pacienteActual.uid),this.cdr.detectChanges())})}buscarTurnos(){return d(this,null,function*(){if(!this.filtroValor){S.default.fire("Error","Por favor, complete el campo de filtro.","error");return}try{let t;console.log("Realizando b\xFAsqueda general"),t=yield this.turnoService.buscarTurnosPorValor(this.filtroValor),t=t.filter(e=>e.pacienteId===this.pacienteActual.uid),this.horarios=Object.values(t),this.filtroValor=""}catch(t){console.error("Error al buscar turnos:",t),S.default.fire("Error","No se pudieron cargar los turnos","error")}})}static \u0275fac=function(e){return new(e||a)(b(w),b(E),b(X))};static \u0275cmp=P({type:a,selectors:[["app-turnos-pacientes"]],decls:30,vars:2,consts:[["type","text","placeholder","Buscar por paciente, campo o valor",3,"ngModelChange","ngModel"],[1,"buscar",3,"click"],[4,"ngFor","ngForOf"],["class","cancelar",3,"click",4,"ngIf"],["class","realizado",3,"click",4,"ngIf"],["class","encuesta",3,"disabled","click",4,"ngIf"],["class","calificacion",3,"disabled","click",4,"ngIf"],[1,"cancelar",3,"click"],[1,"realizado",3,"click"],[1,"encuesta",3,"click","disabled"],[1,"calificacion",3,"click","disabled"]],template:function(e,r){e&1&&(i(0,"h2"),n(1,"Listado de Turnos"),o(),i(2,"label"),n(3,"Buscar Turnos:"),o(),i(4,"input",0),Q("ngModelChange",function(l){return K(r.filtroValor,l)||(r.filtroValor=l),l}),o(),i(5,"button",1),g("click",function(){return r.buscarTurnos()}),n(6,"Buscar"),o(),i(7,"table")(8,"thead")(9,"tr")(10,"th"),n(11,"DNI"),o(),i(12,"th"),n(13,"Paciente"),o(),i(14,"th"),n(15,"Obra Social"),o(),i(16,"th"),n(17,"Especialista"),o(),i(18,"th"),n(19,"Especialidad"),o(),i(20,"th"),n(21,"Fecha"),o(),i(22,"th"),n(23,"Horario"),o(),i(24,"th"),n(25,"Estado"),o(),i(26,"th"),n(27,"Acciones"),o()()(),i(28,"tbody"),C(29,nt,22,13,"tr",2),o()()),e&2&&(s(4),J("ngModel",r.filtroValor),s(25),p("ngForOf",r.horarios))},dependencies:[B,H,k,F,Z],styles:['@charset "UTF-8";h2[_ngcontent-%COMP%]{color:#154360;text-align:center;margin-bottom:1.5rem;font-weight:700;font-size:1.8rem}label[_ngcontent-%COMP%]{font-weight:700;color:#154360;margin-right:.5rem}input[type=radio][_ngcontent-%COMP%]{accent-color:#154360;margin-right:10px;transition:transform .2s ease}input[type=radio][_ngcontent-%COMP%]:hover{transform:scale(1.1)}select[_ngcontent-%COMP%]{padding:.8rem;border-radius:8px;border:1px solid #D5D8DC;margin-bottom:1.5rem;margin-right:1rem;outline:none;font-size:1rem;background-color:#f9f9f9;transition:border-color .3s ease,background-color .3s ease}select[_ngcontent-%COMP%]:focus{border-color:#154360;background-color:#eef6f7}input[type=text][_ngcontent-%COMP%]{padding:.8rem;border-radius:8px;border:1px solid #D5D8DC;margin-bottom:1.5rem;outline:none;font-size:1rem;background-color:#f9f9f9;transition:border-color .3s ease,background-color .3s ease}input[type=text][_ngcontent-%COMP%]:focus{border-color:#154360;background-color:#eef6f7}button[type=submit][_ngcontent-%COMP%]{padding:.8rem 2rem;background-color:#154360;color:#fff;font-size:1rem;border:none;border-radius:8px;cursor:pointer;width:100%;transition:background-color .3s ease,transform .2s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#1e4f6d;transform:scale(1.05)}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff;box-shadow:0 4px 8px #0000001a;margin:1.5rem 0;border-radius:8px;overflow:hidden}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:1rem;text-align:left}thead[_ngcontent-%COMP%]{background-color:#154360;color:#fff}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;text-transform:uppercase;letter-spacing:.05em}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .3s ease,transform .2s ease}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f3f4}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#d5e8e8;transform:scale(1.01)}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #F2F3F4}button[_ngcontent-%COMP%]{padding:.5rem 1.2rem;font-size:.9rem;border:none;border-radius:8px;color:#fff;cursor:pointer;transition:background-color .3s ease,transform .2s ease;width:100%}button.realizado[_ngcontent-%COMP%], button.encuesta[_ngcontent-%COMP%], button.calificacion[_ngcontent-%COMP%], button.buscar[_ngcontent-%COMP%]{margin-bottom:5px;background-color:#b0e915}button.realizado[_ngcontent-%COMP%]:hover, button.encuesta[_ngcontent-%COMP%]:hover, button.calificacion[_ngcontent-%COMP%]:hover{background-color:#82b825;transform:scale(1.05)}button.cancelar[_ngcontent-%COMP%]{background-color:#c0392b}button.cancelar[_ngcontent-%COMP%]:hover{background-color:#a93226;transform:scale(1.05)}td.estado[_ngcontent-%COMP%]{font-weight:700;color:#1e8449}td.estado.inhabilitado[_ngcontent-%COMP%]{color:#c0392b}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f4f7fa;margin:0;padding:20px;display:flex;justify-content:center}form[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:8px;box-shadow:0 4px 10px #0000001a;width:100%;max-width:700px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:.5rem;display:block}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1e8449;font-size:1.1rem;width:auto;margin-top:1rem;padding:.8rem 1.6rem}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#2d6a3e}']})};var pe=class a{constructor(t,e){this.authService=t;this.router=e}canActivate(t,e){return this.authService.getUser().pipe(N(r=>r&&r.role==="paciente"?!0:(this.router.navigate(["/bienvenida"]),console.log("no es paciente verifica las cosas bien"),!1)))}static \u0275fac=function(e){return new(e||a)(O(E),O(D))};static \u0275prov=R({token:a,factory:a.\u0275fac,providedIn:"root"})};var at=[{path:"solicitar-turno",component:ie,canActivate:[ne],data:{animation:"solicitarTurnoPage"}},{path:"gestionar-horarios",component:ae,canActivate:[be],data:{animation:"gestionarHorariosPage"}},{path:"gestionar-turnos",component:ce,canActivate:[be],data:{animation:"gestionarTurnosPage"}},{path:"turnos-especialista",component:se,canActivate:[le],data:{animation:"turnosEspecialistaPage"}},{path:"turnos-pacientes",component:de,canActivate:[pe],data:{animation:"turnosPacientesPage"}}],ue=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=Y({type:a});static \u0275inj=W({imports:[he.forChild(at),he]})};var ze=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=Y({type:a});static \u0275inj=W({imports:[ue,Fe,Ae,Te,ke]})};export{ze as SeccionTurnosModule};
